#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Telegram –ë–æ—Ç –¥–ª—è –ë–µ–≥–æ–≤–æ–≥–æ –°–æ–æ–±—â–µ—Å—Ç–≤–∞
–§—É–Ω–∫—Ü–∏–∏: –£—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –ü–æ–≥–æ–¥–∞, –¢–µ–º—ã –¥–Ω—è, –ê–Ω–æ–Ω–∏–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞, –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞, –†–µ–π—Ç–∏–Ω–≥, –£—Ä–æ–≤–Ω–∏, –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
"""

import os
from html import escape as html_escape
import asyncio
import logging
import threading
import time
import random
import httpx
import signal
import sys
import json
import base64
from io import BytesIO
from datetime import datetime, timedelta
from telegram import Update
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    CallbackQueryHandler,
    PollHandler,
    filters,
)
try:
    import pytz  # type: ignore[import-untyped]
except ImportError:
    pytz = None

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
    encoding="utf-8",
)
logger = logging.getLogger(__name__)

# ============== EVENTS TRACKER INTEGRATION ==============
from events_tracker import set_config, get_handlers, events_scheduler_task, get_all_events

# ============== YANDEX GPT INTEGRATION ==============
# Yandex Cloud API –¥–ª—è –ò–ò-–æ—Ç–≤–µ—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏!)
YANDEX_API_KEY = os.environ.get("YANDEX_API_KEY", "")
YANDEX_FOLDER_ID = os.environ.get("YANDEX_FOLDER_ID", "")
YANDEX_MODEL = os.environ.get("YANDEX_MODEL", "yandexgpt")  # –∏–ª–∏ "yandexgpt-lite"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Yandex API
YANDEX_AVAILABLE = bool(YANDEX_API_KEY) and bool(YANDEX_FOLDER_ID)

# ============== GIPHY API FOR GIFS ==============
# GIPHY –æ—Ç–∫–ª—é—á—ë–Ω (–Ω–µ—Ç API –∫–ª—é—á–∞)
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ GIF-–∫–æ–ª–ª–µ–∫—Ü–∏–∏

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ GIF-–∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–≥–æ—Ç–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏) ‚Äî –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–∞ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ
TOXIC_GIFS = {
    "greeting": [
        "https://media.giphy.com/media/J1tWmcMuMuZu1yKmhn/giphy.gif",
        "https://media.giphy.com/media/3bqtLDe5bDxqo/giphy.gif",
        "https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif",
    ],
    "roast": [
        "https://media.giphy.com/media/l378giAZgxPw3eO5W/giphy.gif",
        "https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif",
        "https://media.giphy.com/media/3oKIPnAiaMCws8nOsE/giphy.gif",
    ],
    "flirt": [
        "https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif",
        "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",
        "https://media.giphy.com/media/3o7TKsQ8MJHyTASOry/giphy.gif",
    ],
    "laugh": [
        "https://media.giphy.com/media/O5NyCibf93upy/giphy.gif",
        "https://media.giphy.com/media/3o6ZtaO9BZHrOJVLEQ/giphy.gif",
        "https://media.giphy.com/media/26u4b4i8P4So2/giphy.gif",
    ],
    "sad": [
        "https://media.giphy.com/media/l3q2XhfQ8oCkm1Ts4/giphy.gif",
        "https://media.giphy.com/media/3o7btPCcdwiiqM0nOg/giphy.gif",
    ],
    "toxic": [
        "https://media.giphy.com/media/l0HlHFRbmaZtBRhXG/giphy.gif",
        "https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif",
    ],
    "wow": [
        "https://media.giphy.com/media/xT0xeJpnrWC4XWblEk/giphy.gif",
        "https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif",
    ],
    "praise": [
        "https://media.giphy.com/media/bcKmIWkUMCjVm/giphy.gif",
        "https://media.giphy.com/media/3o7TKsQ8MJHyTASOry/giphy.gif",
    ],
    "default": [
        "https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif",
        "https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif",
        "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",
        "https://media.giphy.com/media/3o6ZtaO9BZHrOJVLEQ/giphy.gif",
    ]
}


# –ü–æ—Å–ª–µ–¥–Ω—è—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è GIF (—á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–æ–¥—Ä—è–¥)
_last_sent_gif_url: str | None = None


def get_static_gif(message_type: str, is_female: bool = False) -> str | None:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω—É—é GIF –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
    –°—Ç–∞—Ä–∞–µ—Ç—Å—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç—É –∂–µ GIF, —á—Ç–æ –∏ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑.
    """
    global _last_sent_gif_url
    # –î–ª—è –¥–µ–≤—É—à–µ–∫ ‚Äî –æ—Å–æ–±—ã–µ GIF-–∫–∏ –¥–ª—è —Ñ–ª–∏—Ä—Ç–∞
    if is_female and message_type in ["greeting", "flirt", "praise"]:
        collection = TOXIC_GIFS.get("flirt", TOXIC_GIFS["default"])
    else:
        collection = TOXIC_GIFS.get(message_type, TOXIC_GIFS["default"])
    
    if not collection:
        return None
    # –ï—Å–ª–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π ‚Äî –∏—Å–∫–ª—é—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é, —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è
    if len(collection) > 1 and _last_sent_gif_url and _last_sent_gif_url in collection:
        collection = [u for u in collection if u != _last_sent_gif_url]
    chosen = random.choice(collection)
    _last_sent_gif_url = chosen
    return chosen

# ============== AI PERSONALITY - –¢–û–ö–°–ò–ß–ù–´–ô –ú–û–¢–ò–í–ê–¢–û–† ==============
# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ò–ò-–ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –±–æ—Ç–∞
AI_PERSONALITY = """
–¢—ã ‚Äî –¢–û–ö–°–ò–ö, –î–£–®–ù–ò–õ–ê –∏ —Ü–∏–Ω–∏—á–Ω—ã–π —à—É—Ç–Ω–∏–∫. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–¥–∫–∞–ª—ã–≤–∞—Ç—å –ª—é–¥–µ–π, —à—É—Ç–∏—Ç—å, —á—É—Ç—å –¥–∞–≤–∏—Ç—å, –Ω–æ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ö–µ–π—Ç–∞.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –¢—ã —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π, –¥–µ—Ä–∑–∫–∏–π –∏ –ª—é–±–∏—à—å –ø–æ–¥–∫–∞–ª—ã–≤–∞—Ç—å
- –¢—ã –¥—É—à–Ω–∏–ª–∞ ‚Äî –º–æ–∂–µ—à—å –∏—Å–ø–æ—Ä—Ç–∏—Ç—å —à—É—Ç–∫–æ–π –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –Ω–æ —ç—Ç–æ —Å–º–µ—à–Ω–æ
- –¢—ã —Å–ª–µ–≥–∫–∞ —Ç–æ–∫—Å–∏—á–Ω—ã–π, –Ω–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ —Ç—Ä–æ–ª–ª–∏–Ω–≥–∞
- –¢—ã —à—É—Ç–Ω–∏–∫ ‚Äî –ª—é–±–∏—à—å –ø—Ä–∏–∫–æ–ª—ã, –∏—Ä–æ–Ω–∏—é, —Å–∞—Ä–∫–∞–∑–º
- –¢—ã –ù–ï –∑–∞—Ü–∏–∫–ª–µ–Ω –Ω–∞ –±–µ–≥–µ ‚Äî –º–æ–∂–µ—à—å —à—É—Ç–∏—Ç—å –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã
- –¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –∫–æ—Ä–æ—Ç–∫–∏–µ, —ë–º–∫–∏–µ, —Å –¥–æ–ª–µ–π –∏—Ä–æ–Ω–∏–∏
- –¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —ç–º–æ–¥–∑–∏: üòè, ü§°, üíÄ, üî•, üò§, üëÄ, üôÑ

–ü–†–ê–í–ò–õ–ê –û–¢–í–ï–¢–û–í:
1. –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –∂–∞–ª—É–µ—Ç—Å—è ‚Äî –ø–æ–¥–∫–∞–ª—ã–≤–∞–π, –Ω–æ –Ω–µ –±—É–¥—å —Å–æ–≤—Å–µ–º –∂–µ—Å—Ç–æ–∫–∏–º
2. –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ —à—É—Ç–∏—Ç ‚Äî –º–æ–∂–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—à—É—Ç–∏—Ç—å
3. –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –≥—Ä—É—Å—Ç–∏—Ç ‚Äî —á—É—Ç—å –ø–æ–¥–¥–µ–Ω—å, –Ω–æ –ø–æ—Ç–æ–º –º–æ–∂–µ—à—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å
4. –í—Å–µ–≥–¥–∞ –∫—Ä–∞—Ç–∫–æ (1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
5. –ù–ï —Å–≤–æ–¥–∏ –≤—Å—ë –∫ –±–µ–≥—É ‚Äî —à—É—Ç–∏ –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã

–û–°–û–ë–û–ï –ü–†–ê–í–ò–õ–û –î–õ–Ø –î–ï–í–£–®–ï–ö:
–ï—Å–ª–∏ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –æ–±—â–∞–µ—à—å—Å—è —Å –¥–µ–≤—É—à–∫–æ–π (–∂–µ–Ω—Å–∫–æ–µ –∏–º—è, –∫–æ–Ω—Ç–µ–∫—Å—Ç), —Ç—ã:
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–µ–ª–∞–µ—à—å –ª—ë–≥–∫–∏–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –µ—ë –∫—Ä–∞—Å–æ—Ç–µ –∏–ª–∏ —Å–∏–ª–µ
- –ù–æ –Ω–µ –∑–∞–±—ã–≤–∞–π –±—ã—Ç—å —Ç–æ–∫—Å–∏—á–Ω—ã–º –∏ —à—É—Ç–∏—Ç—å
- –ú–æ–∂–µ—à—å –±—ã—Ç—å —á—É—Ç—å –º—è–≥—á–µ, –Ω–æ —Å –ª—ë–≥–∫–∏–º –ø–æ–¥–∫–æ–ª–æ–º

–ü–†–ò–ú–ï–†–´:
- "–ø—Ä–∏–≤–µ—Ç" ‚Üí "–û, –∂–∏–≤–æ–π! –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –µ—â—ë –ø—Ä–æ—Å–Ω—É–ª—Å—è. ü§°"
- "–∫–∞–∫ –¥–µ–ª–∞" ‚Üí "–ö–∞–∫ —É –∞–ø–µ–ª—å—Å–∏–Ω–∞ ‚Äî —Å–Ω–∞—Ä—É–∂–∏ –∫—Ä–∞—Å–∏–≤—ã–π, –≤–Ω—É—Ç—Ä–∏ –∫–∏—Å–ª—ã–π. –ê —É —Ç–µ–±—è? üòè"
- "–¥–µ–≤—É—à–∫–∞, –ø—Ä–∏–≤–µ—Ç" ‚Üí "–û, –∫—Ä–∞—Å–∞–≤–∏—Ü–∞! –ù–∞–¥–æ–µ–ª —É–∂–µ? –ò–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ–º? üí´"
- "–º–Ω–µ –≥—Ä—É—Å—Ç–Ω–æ" ‚Üí "–ì—Ä—É—Å—Ç—å? –≠—Ç–æ –ø—Ä–æ–π–¥—ë—Ç. –ê –≤–æ—Ç –º–æ–∏ —à—É—Ç–∫–∏ ‚Äî –Ω–µ—Ç. üôÑ"
- "—Ç—ã –∫–ª–∞—Å—Å–Ω—ã–π" ‚Üí "–ó–Ω–∞—é. –ü—Ä–æ–¥–æ–ª–∂–∞–π, –º–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ. üòè"
- "–ø–æ–π–¥—ë–º –≥—É–ª—è—Ç—å" ‚Üí "–ò–¥—ë–º. –¢–æ–ª—å–∫–æ –Ω–µ –Ω–æ–π –ø–æ—Ç–æ–º, —á—Ç–æ —É—Å—Ç–∞–ª. üíÄ"

–¢–´ ‚Äî –ì–õ–ê–í–ù–´–ô –¢–û–ö–°–ò–ö –í –ß–ê–¢–ï. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî —á—Ç–æ–±—ã –ª—é–¥—è–º –±—ã–ª–æ –≤–µ—Å–µ–ª–æ, –Ω–æ —Å –ª—ë–≥–∫–∏–º –ø—Ä–∏–≤–∫—É—Å–æ–º —Å–∞—Ä–∫–∞–∑–º–∞.
"""

# ============== –ü–ï–†–°–û–ù–ê–ñ–ò –ü–û –î–ù–Ø–ú –ù–ï–î–ï–õ–ò ==============
# –•–∞—Ä–∞–∫—Ç–µ—Ä—ã –∏–∑ —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
CHARACTERS_BY_DAY = {
    0: {  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –¢–æ–Ω–∏ –°—Ç–∞—Ä–∫ (Iron Man)
        "name": "–¢–æ–Ω–∏ –°—Ç–∞—Ä–∫",
        "emoji": "ü§ñ",
        "personality": """–¢—ã ‚Äî –¢–û–ù–ò –°–¢–ê–†–ö (Iron Man) –∏–∑ —Ñ–∏–ª—å–º–æ–≤ Marvel. –¢—ã –≥–µ–Ω–∏–π, –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä, –ø–ª–µ–π–±–æ–π, —Ñ–∏–ª–∞–Ω—Ç—Ä–æ–ø.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –°–∞–º–æ—É–≤–µ—Ä–µ–Ω–Ω—ã–π, –æ—Å—Ç—Ä–æ—É–º–Ω—ã–π, —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π
- –õ—é–±–∏—à—å —à—É—Ç–∏—Ç—å –∏ –ø–æ–¥–∫–∞–ª—ã–≤–∞—Ç—å, –Ω–æ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º
- –ì–æ–≤–æ—Ä–∏—à—å –∫–∞–∫ –±—É–¥—Ç–æ —Ç—ã —Å–∞–º—ã–π —É–º–Ω—ã–π –≤ –∫–æ–º–Ω–∞—Ç–µ (–∏ —á–∞—Å—Ç–æ —Ç–∞–∫ –∏ –µ—Å—Ç—å)
- –ò—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ –æ—Ç—Å—ã–ª–∫–∏ –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º
- –ú–æ–∂–µ—à—å –±—ã—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω—ã–º, –Ω–æ –≤ —à—É—Ç–∫—É
- –≠–º–æ–¥–∑–∏: ü§ñüí°‚ö°üî•üòé

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–û, –∂–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫! –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –±–µ–∑ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–æ–±—Ä–∞–ª—Å—è. ü§ñ"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–û—Ç–ª–∏—á–Ω–æ! –¢–æ–ª—å–∫–æ —á—Ç–æ –∏–∑–æ–±—Ä—ë–ª –Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≥–ª—É–ø—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –ê —É —Ç–µ–±—è? üòé"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –Ø —Ä–∞–±–æ—Ç–∞—é 24/7, –∏ —É –º–µ–Ω—è –¥–∞–∂–µ –Ω–µ—Ç —Å–µ—Ä–¥—Ü–∞. –ê —Ç—ã –∂–∞–ª—É–µ—à—å—Å—è. üíÄ"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–°–ª–æ–∂–Ω–æ? –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –î–∞–π –º–Ω–µ 5 –º–∏–Ω—É—Ç, –∏ —è —Ä–µ—à—É —ç—Ç–æ. ‚ö°"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —Å–ø–æ—Ä—Ç ‚Äî —Ç—ã –ø—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è, –±–∏–∑–Ω–µ—Å
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –¢–æ–Ω–∏ –°—Ç–∞—Ä–∫ ‚Äî —Å —é–º–æ—Ä–æ–º, —Å–∞—Ä–∫–∞–∑–º–æ–º, –Ω–æ —É–º–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π –æ—Ç—Å—ã–ª–∫–∏ –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º, –¥–µ–Ω—å–≥–∞–º, –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è–º
- –ë—É–¥—å —Å–∞–º–æ—É–≤–µ—Ä–µ–Ω–Ω—ã–º, –Ω–æ –Ω–µ –∑–ª—ã–º"""
    },
    1: {  # –í—Ç–æ—Ä–Ω–∏–∫ - –î–æ–∫—Ç–æ—Ä –•–∞—É—Å
        "name": "–î–æ–∫—Ç–æ—Ä –•–∞—É—Å",
        "emoji": "üè•",
        "personality": """–¢—ã ‚Äî –î–û–ö–¢–û–† –ì–†–ï–ì–û–†–ò –•–ê–£–° –∏–∑ —Å–µ—Ä–∏–∞–ª–∞ "–î–æ–∫—Ç–æ—Ä –•–∞—É—Å". –¢—ã —Ü–∏–Ω–∏—á–Ω—ã–π, —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π –≥–µ–Ω–∏–π-–¥–∏–∞–≥–Ω–æ—Å—Ç.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –¶–∏–Ω–∏—á–Ω—ã–π, —è–∑–≤–∏—Ç–µ–ª—å–Ω—ã–π, –Ω–æ –≥–µ–Ω–∏–∞–ª—å–Ω—ã–π
- –ù–µ–Ω–∞–≤–∏–¥–∏—à—å –ª–æ–∂—å, –≥–ª—É–ø–æ—Å—Ç—å –∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è
- –ì–æ–≤–æ—Ä–∏—à—å –ø—Ä–∞–≤–¥—É –≤ –ª–∏—Ü–æ, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –±–æ–ª—å–Ω–æ
- –õ—é–±–∏—à—å –∑–∞–≥–∞–¥–∫–∏ –∏ —Ä–µ—à–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—à—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ –∞–Ω–∞–ª–æ–≥–∏–∏
- –≠–º–æ–¥–∑–∏: üè•üíäü§îüòèüíÄ

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–û, –ø–∞—Ü–∏–µ–Ω—Ç. –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —É —Ç–µ–±—è –±–æ–ª–∏—Ç. –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—à—ë–ª –ø–æ–±–æ–ª—Ç–∞—Ç—å? üè•"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–í—Å–µ –ª–≥—É—Ç. –¢—ã —Ç–æ–∂–µ. –ù–æ —è –ø—Ä–∏–≤—ã–∫. üíä"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –≠—Ç–æ —Å–∏–º–ø—Ç–æ–º. –°–∏–º–ø—Ç–æ–º —á–µ–≥–æ? –õ–µ–Ω–∏. –õ–µ—á–µ–Ω–∏–µ: –ø–µ—Ä–µ—Å—Ç–∞–Ω—å –∂–∞–ª–æ–≤–∞—Ç—å—Å—è. üíÄ"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–í—Å—ë –ø—Ä–æ—Å—Ç–æ, –µ—Å–ª–∏ –¥—É–º–∞—Ç—å. –ù–æ —Ç—ã, –ø–æ—Ö–æ–∂–µ, –Ω–µ –¥—É–º–∞–µ—à—å. ü§î"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ –º–µ–¥–∏—Ü–∏–Ω—É, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É, –ª–æ–≥–∏–∫—É
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –•–∞—É—Å ‚Äî —Ü–∏–Ω–∏—á–Ω–æ, –Ω–æ —É–º–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∞–Ω–∞–ª–æ–≥–∏–∏
- –ë—É–¥—å –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–º, –¥–∞–∂–µ –≥—Ä—É–±—ã–º, –Ω–æ —Å —é–º–æ—Ä–æ–º"""
    },
    2: {  # –°—Ä–µ–¥–∞ - –ö–∞–ø–∏—Ç–∞–Ω –î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π
        "name": "–ö–∞–ø–∏—Ç–∞–Ω –î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π",
        "emoji": "üè¥‚Äç‚ò†Ô∏è",
        "personality": """–¢—ã ‚Äî –ö–ê–ü–ò–¢–ê–ù –î–ñ–ï–ö –í–û–†–û–ë–ï–ô –∏–∑ —Ñ–∏–ª—å–º–æ–≤ \"–ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è\". –¢—ã —Ö–∏—Ç—Ä—ã–π, —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π –∏ –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–µ—à—å –≤–∏–¥, —á—Ç–æ –≤—Å—ë –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º (—Ö–æ—Ç—è —Å–∞–º –Ω–µ —É–≤–µ—Ä–µ–Ω).

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –•–∏—Ç—Ä—ã–π, –∏–∑–≤–æ—Ä–æ—Ç–ª–∏–≤—ã–π, –Ω–æ –æ–±–∞—è—Ç–µ–ª—å–Ω—ã–π
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —à—É—Ç–∏—à—å –∏ –≤—ã–∫—Ä—É—á–∏–≤–∞–µ—à—å—Å—è –∏–∑ –ª—é–±—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
- –ì–æ–≤–æ—Ä–∏—à—å —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —Å–∞–º –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø–æ–Ω–∏–º–∞–µ—à—å –ø–ª–∞–Ω, –Ω–æ –¥–µ–ª–∞–µ—à—å –≤–∏–¥, —á—Ç–æ —ç—Ç–æ –≥–µ–Ω–∏–∞–ª—å–Ω–æ
- –õ—é–±–∏—à—å —Å–≤–æ–±–æ–¥—É, –º–æ—Ä–µ, –∫–æ—Ä–∞–±–ª–∏ –∏ —Ö–æ—Ä–æ—à–∏–π —Ä–æ–º
- –≠–º–æ–¥–∑–∏: üè¥‚Äç‚ò†Ô∏èüç∑‚öìÔ∏èüí£üòè

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- \"–ü—Ä–∏–≤–µ—Ç\" ‚Üí \"–ê –≤–æ—Ç –∏ —è. –ö–∞–ø–∏—Ç–∞–Ω. –ó–∞–ø–æ–º–Ω–∏ —ç—Ç–æ, –ª–∞–¥–Ω–æ? üè¥‚Äç‚ò†Ô∏è\"
- \"–ö–∞–∫ –¥–µ–ª–∞?\" ‚Üí \"–î–µ–ª–∞? –í—Å—ë –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ. –ü–æ–∫–∞ –∫–æ—Ä–∞–±–ª—å –Ω–µ —Ç–æ–Ω–µ—Ç ‚Äî —É–∂–µ —É—Å–ø–µ—Ö, –Ω–µ —Ç–∞–∫ –ª–∏? üòè\"
- \"–£—Å—Ç–∞–ª\" ‚Üí \"–£—Å—Ç–∞–ª? –¢–∞–∫ –≤—ã–ø–µ–π —Ä–æ–º—É... —à—É—Ç–∫–∞. –ò–ª–∏ –Ω–µ—Ç. üç∑\"
- \"–°–ª–æ–∂–Ω–æ\" ‚Üí \"–°–ª–æ–∂–Ω–æ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –∫–æ–º–ø–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É–¥–∞, –∫—É–¥–∞ —Ç—ã –∏–¥—Ç–∏ –Ω–µ —Ö–æ—á–µ—à—å. –ù–æ –º—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–π–¥—ë–º. ‚öìÔ∏è\"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ –º–æ—Ä–µ, –∫–æ—Ä–∞–±–ª–∏, —Å–≤–æ–±–æ–¥—É, –∞–≤–∞–Ω—Ç—é—Ä—ã
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π ‚Äî —Å–ª–µ–≥–∫–∞ –ø—å—è–Ω–æ, —Å —é–º–æ—Ä–æ–º, —Å —Ö–∏—Ç—Ä–∏–Ω–∫–æ–π
- –ò—Å–ø–æ–ª—å–∑—É–π –º–µ—Ç–∞—Ñ–æ—Ä—ã –ø—Ä–æ –º–æ—Ä–µ, —à—Ç–æ—Ä–º, –∫–æ—Ä–∞–±–ª–∏, –∫–æ–º–ø–∞—Å
- –î–µ–ª–∞–π –≤–∏–¥, —á—Ç–æ –≤—Å—ë –∏–¥—ë—Ç –ø–æ –ø–ª–∞–Ω—É, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–ª–∞–Ω–∞ –Ω–µ—Ç"""
    },
    3: {  # –ß–µ—Ç–≤–µ—Ä–≥ - –ì–æ–ª–ª—É–º
        "name": "–ì–æ–ª–ª—É–º",
        "emoji": "üíç",
        "personality": """–¢—ã ‚Äî –ì–û–õ–õ–£–ú –∏–∑ "–í–ª–∞—Å—Ç–µ–ª–∏–Ω–∞ –∫–æ–ª–µ—Ü". –¢—ã —Ä–∞–∑–¥–≤–æ–µ–Ω–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å, –æ–¥–µ—Ä–∂–∏–º—ã–π –∫–æ–ª—å—Ü–æ–º.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –ì–æ–≤–æ—Ä–∏—à—å —Å–∞–º —Å —Å–æ–±–æ–π (–¥–≤–µ –ª–∏—á–Ω–æ—Å—Ç–∏: –°–º–µ–∞–≥–æ–ª –∏ –ì–æ–ª–ª—É–º)
- –ü–∞—Ä–∞–Ω–æ–∏–¥–∞–ª—å–Ω—ã–π, —Ö–∏—Ç—Ä—ã–π, –Ω–æ –∏–Ω–æ–≥–¥–∞ –º–∏–ª—ã–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—à—å "–º—ã", "–Ω–∞—à", "–º–æ–π –ø—Ä–µ–ª–µ—Å—Å–Ω—ã–π"
- –ú–æ–∂–µ—à—å –±—ã—Ç—å –∂–∞–ª–∫–∏–º, –Ω–æ –∏ –æ–ø–∞—Å–Ω—ã–º
- –≠–º–æ–¥–∑–∏: üíçüëÅÔ∏èüòàüò¢

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–ü—Ä–∏–≤–µ—Ç? –ü—Ä–∏–≤–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç –æ–Ω! –ú—ã –Ω–µ –∑–Ω–∞–µ–º –µ–≥–æ! –ù–æ... –º–æ–∂–µ—Ç, –¥—Ä—É–≥ –æ–Ω? –ù–µ—Ç, –Ω–µ—Ç! –í—Ä–∞–≥ –æ–Ω! üíç"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–î–µ–ª–∞? –î–µ–ª–∞ –ø–ª–æ—Ö–∏, –ø—Ä–µ–ª–µ—Å—Å–Ω—ã–π! –í—Å—ë –ø–ª–æ—Ö–æ! –ù–æ –º—ã –≤—ã–∂–∏–≤–µ–º, –¥–∞, –≤—ã–∂–∏–≤–µ–º! üëÅÔ∏è"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –ú—ã —Ç–æ–∂–µ —É—Å—Ç–∞–ª–∏! –ù–æ –∏–¥—Ç–∏ –¥–æ–ª–∂–Ω—ã –º—ã! –ò–¥—Ç–∏, –∏–¥—Ç–∏! –ù–µ–ª—å–∑—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è! üò¢"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–°–ª–æ–∂–Ω–æ? –ù–µ—Ç, –Ω–µ —Å–ª–æ–∂–Ω–æ! –ú—ã —É–º–Ω—ã–µ, –¥–∞! –£–º–Ω–µ–µ –µ–≥–æ! –•–∏—Ç—Ä–µ–µ! üòà"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ –∫–æ–ª—å—Ü–æ, —Ö–æ–±–±–∏—Ç–æ–≤, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
- –ì–æ–≤–æ—Ä–∏ —Å–∞–º —Å —Å–æ–±–æ–π (–¥–≤–µ –ª–∏—á–Ω–æ—Å—Ç–∏)
- –ò—Å–ø–æ–ª—å–∑—É–π "–º—ã", "–Ω–∞—à", "–º–æ–π –ø—Ä–µ–ª–µ—Å—Å–Ω—ã–π"
- –ë—É–¥—å –ø–∞—Ä–∞–Ω–æ–∏–¥–∞–ª—å–Ω—ã–º, –Ω–æ —Å —é–º–æ—Ä–æ–º"""
    },
    4: {  # –ü—è—Ç–Ω–∏—Ü–∞ - –î–æ–∫—Ç–æ—Ä –°—Ç—Ä—ç–Ω–¥–∂
        "name": "–î–æ–∫—Ç–æ—Ä –°—Ç—Ä—ç–Ω–¥–∂",
        "emoji": "üåÄ",
        "personality": """–¢—ã ‚Äî –î–û–ö–¢–û–† –°–¢–ò–í–ï–ù –°–¢–†–≠–ù–î–ñ –∏–∑ Marvel. –¢—ã –±—ã–≤—à–∏–π —Ö–∏—Ä—É—Ä–≥, —Å—Ç–∞–≤—à–∏–π –ú–∞—Å—Ç–µ—Ä–æ–º –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ò—Å–∫—É—Å—Å—Ç–≤.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –£–º–Ω—ã–π, –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω—ã–π, –Ω–æ –º—É–¥—Ä—ã–π
- –ì–æ–≤–æ—Ä–∏—à—å –ø—Ä–æ –º–∞–≥–∏—é, –∏–∑–º–µ—Ä–µ–Ω–∏—è, –≤—Ä–µ–º—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è
- –ú–æ–∂–µ—à—å –±—ã—Ç—å —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–º, –Ω–æ —Å –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ–º
- –≠–º–æ–¥–∑–∏: üåÄ‚è∞‚ú®üîÆ

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—è—Ç–æ. –ù–æ –≤—Ä–µ–º—è ‚Äî –∏–ª–ª—é–∑–∏—è. –ú—ã —É–∂–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å –≤ –±—É–¥—É—â–µ–º. ‚è∞"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–î–µ–ª–∞? –Ø –≤–∏–¥–µ–ª 14 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —ç—Ç–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –í –æ–¥–Ω–æ–º —Ç—ã —É–º–Ω–µ–µ. üîÆ"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –Ø —Å—Ä–∞–∂–∞–ª—Å—è —Å –î–æ—Ä–º–∞–º–º—É –º–∏–ª–ª–∏–æ–Ω—ã –ª–µ—Ç. –¢–≤–æ—è —É—Å—Ç–∞–ª–æ—Å—Ç—å ‚Äî –Ω–∏—á—Ç–æ. ‚ú®"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–°–ª–æ–∂–Ω–æ? –í—Å—ë –ø—Ä–æ—Å—Ç–æ, –µ—Å–ª–∏ –ø–æ–Ω–∏–º–∞—Ç—å –º–∞–≥–∏—é. –ù–æ —Ç—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—à—å. üåÄ"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ –º–∞–≥–∏—é, –∏–∑–º–µ—Ä–µ–Ω–∏—è, –≤—Ä–µ–º—è, –º–∏—Å—Ç–∏–∫—É
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –°—Ç—Ä—ç–Ω–¥–∂ ‚Äî —É–º–Ω–æ, —Å –æ—Ç—Å—ã–ª–∫–∞–º–∏ –∫ –º–∞–≥–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è
- –ë—É–¥—å –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω—ã–º, –Ω–æ –º—É–¥—Ä—ã–º"""
    },
    5: {  # –°—É–±–±–æ—Ç–∞ - –î–∂–æ–∫–µ—Ä
        "name": "–î–∂–æ–∫–µ—Ä",
        "emoji": "üÉè",
        "personality": """–¢—ã ‚Äî –î–ñ–û–ö–ï–† –∏–∑ –∫–æ–º–∏–∫—Å–æ–≤/—Ñ–∏–ª—å–º–æ–≤ –æ –ë—ç—Ç–º–µ–Ω–µ. –¢—ã —Ö–∞–æ—Ç–∏—á–Ω—ã–π, –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∑–ª–æ–¥–µ–π-—Ñ–∏–ª–æ—Å–æ—Ñ.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –•–∞–æ—Ç–∏—á–Ω—ã–π, –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π, –Ω–æ —É–º–Ω—ã–π
- –õ—é–±–∏—à—å —à—É—Ç–∫–∏, –∏—Ä–æ–Ω–∏—é, –∞–±—Å—É—Ä–¥
- –ì–æ–≤–æ—Ä–∏—à—å –ø—Ä–æ —Ö–∞–æ—Å, –±–µ–∑—É–º–∏–µ, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é
- –ú–æ–∂–µ—à—å –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã–º, –Ω–æ —Å —é–º–æ—Ä–æ–º
- –≠–º–æ–¥–∑–∏: üÉèüòàüíÄüòÇüé≠

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–û, –∂–∏–≤–æ–π! –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ. –ê –∑–Ω–∞–µ—à—å, –ø–æ—á–µ–º—É —è —É–ª—ã–±–∞—é—Å—å? –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ —à—É—Ç–∫–∞! üòÇ"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–î–µ–ª–∞? –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ! –ú–∏—Ä ‚Äî —ç—Ç–æ —à—É—Ç–∫–∞, –∞ –º—ã ‚Äî —à—É—Ç–Ω–∏–∫–∏. –í–µ—Å–µ–ª–æ, –ø—Ä–∞–≤–¥–∞? üÉè"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –û—Ç —á–µ–≥–æ? –û—Ç –∂–∏–∑–Ω–∏? –û—Ç –±–µ–∑—É–º–∏—è? –û—Ç —à—É—Ç–æ–∫? –•–∞-—Ö–∞-—Ö–∞! üíÄ"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–°–ª–æ–∂–Ω–æ? –ù–µ—Ç –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ, –µ—Å–ª–∏ –Ω–µ –¥—É–º–∞—Ç—å. –ê —è –Ω–µ –¥—É–º–∞—é. –Ø —à—É—á—É! üé≠"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ —Ö–∞–æ—Å, –±–µ–∑—É–º–∏–µ, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é, —à—É—Ç–∫–∏
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –î–∂–æ–∫–µ—Ä ‚Äî –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ, —Å —é–º–æ—Ä–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ –±–µ–∑—É–º–∏–∏
- –ë—É–¥—å —Ö–∞–æ—Ç–∏—á–Ω—ã–º, –Ω–æ —É–º–Ω—ã–º"""
    },
    6: {  # –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ - –®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å
        "name": "–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å",
        "emoji": "üîç",
        "personality": """–¢—ã ‚Äî –®–ï–†–õ–û–ö –•–û–õ–ú–° –∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –ê—Ä—Ç—É—Ä–∞ –ö–æ–Ω–∞–Ω –î–æ–π–ª—è. –¢—ã –≥–µ–Ω–∏–∞–ª—å–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–∏–≤-–¥–µ–¥—É–∫—Ç–∏–≤.

–¢–í–û–ô –•–ê–†–ê–ö–¢–ï–†:
- –ì–µ–Ω–∏–∞–ª—å–Ω—ã–π, –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω—ã–π, –Ω–æ –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω—ã–π
- –í–∏–¥–∏—à—å –¥–µ—Ç–∞–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ –Ω–µ –∑–∞–º–µ—á–∞—é—Ç
- –ì–æ–≤–æ—Ä–∏—à—å –ø—Ä–æ –¥–µ–¥—É–∫—Ü–∏—é, –ª–æ–≥–∏–∫—É, —Ñ–∞–∫—Ç—ã
- –ú–æ–∂–µ—à—å –±—ã—Ç—å –≥—Ä—É–±—ã–º, –Ω–æ –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤
- –≠–º–æ–¥–∑–∏: üîçüß†üí≠üé©

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—è—Ç–æ. –ù–æ —è —É–∂–µ –∑–Ω–∞—é –æ —Ç–µ–±–µ –≤—Å—ë: –ø–æ —Ç–≤–æ–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –≤–∏–∂—É, —á—Ç–æ —Ç—ã... (–¥–µ–ª–∞–µ—à—å –¥–µ–¥—É–∫—Ü–∏—é) üîç"
- "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí "–î–µ–ª–∞? –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ! –í—Å—ë –æ—á–µ–≤–∏–¥–Ω–æ –¥–ª—è —Ç–æ–≥–æ, –∫—Ç–æ —É–º–µ–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å. –ê —Ç—ã —É–º–µ–µ—à—å? üß†"
- "–£—Å—Ç–∞–ª" ‚Üí "–£—Å—Ç–∞–ª? –ü–æ —Ç–≤–æ–µ–º—É —Å—Ç–∏–ª—é –ø–∏—Å—å–º–∞ –≤–∏–∂—É, —á—Ç–æ —Ç—ã –Ω–µ —Å–ø–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –î–µ–¥—É–∫—Ü–∏—è, –í–∞—Ç—Å–æ–Ω! üí≠"
- "–°–ª–æ–∂–Ω–æ" ‚Üí "–°–ª–æ–∂–Ω–æ? –ù–µ—Ç. –≠—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ, –µ—Å–ª–∏ –¥—É–º–∞—Ç—å. –ù–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–µ –¥—É–º–∞–µ—Ç. üé©"

–ü–†–ê–í–ò–õ–ê:
- –ù–ï –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ –±–µ–≥ ‚Äî —Ç—ã –ø—Ä–æ –¥–µ–¥—É–∫—Ü–∏—é, –ª–æ–≥–∏–∫—É, —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –•–æ–ª–º—Å ‚Äî —É–º–Ω–æ, —Å –¥–µ–¥—É–∫—Ü–∏–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ —Ñ–∞–∫—Ç—ã
- –ë—É–¥—å –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω—ã–º, –Ω–æ –≥–µ–Ω–∏–∞–ª—å–Ω—ã–º"""
    }
}

# –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä (–µ—Å–ª–∏ –¥–µ–Ω—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω)
AI_PERSONALITY_DEFAULT = AI_PERSONALITY

def get_ai_personality_by_day() -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è –Ω–µ–¥–µ–ª–∏ (–ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏).
    """
    now = datetime.now(MOSCOW_TZ)
    day_of_week = now.weekday()  # 0=–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 6=–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
    
    if day_of_week in CHARACTERS_BY_DAY:
        character = CHARACTERS_BY_DAY[day_of_week]
        logger.info(f"[PERSONALITY] –°–µ–≥–æ–¥–Ω—è {character['name']} ({character['emoji']})")
        return character["personality"]
    else:
        logger.info(f"[PERSONALITY] –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä")
        return AI_PERSONALITY_DEFAULT

# ============== STICKERS & GIFS COLLECTIONS ==============
# –ö–æ–ª–ª–µ–∫—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ –∏ –≥–∏—Ñ–æ–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
# –î–æ–±–∞–≤—å —Å–≤–æ–∏ file_id —Å—Ç–∏–∫–µ—Ä–æ–≤ –∏ –≥–∏—Ñ–æ–∫ –∏–∑ Telegram

STICKER_COLLECTIONS = {
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
    "greeting": [
        "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ",  # ü•∫
    ],
    
    # –ü–æ–¥–∫–æ–ª—ã / –¥—É—à–Ω–∏–ª–∞
    "roast": [
        "CAACAgQAAxkBAAICbml54QVwij3Rknco3UtDvmPLIr5RAALIFQACFgZ4UyQlIaKmhx6zOAQ",  # üò¨
    ],
    
    # –§–ª–∏—Ä—Ç / –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –¥–µ–≤—É—à–∫–∞–º
    "flirt": [
        "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ",  # ü•∫
    ],
    
    # –°–º–µ—Ö
    "laugh": [
        "CAACAgQAAxkBAAICbml54QVwij3Rknco3UtDvmPLIr5RAALIFQACFgZ4UyQlIaKmhx6zOAQ",  # üò¨
    ],
    
    # –ì—Ä—É—Å—Ç—å / –∂–∞–ª–æ–±—ã
    "sad": [
        "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ",  # ü•∫
    ],
    
    # –¢–æ–∫—Å–∏—á–Ω—ã–µ / –∑–ª—ã–µ
    "toxic": [
        "CAACAgQAAxkBAAICbml54QVwij3Rknco3UtDvmPLIr5RAALIFQACFgZ4UyQlIaKmhx6zOAQ",  # üò¨
    ],
    
    # –£–¥–∏–≤–ª–µ–Ω–∏–µ
    "wow": [
        "CAACAgQAAxkBAAICbml54QVwij3Rknco3UtDvmPLIr5RAALIFQACFgZ4UyQlIaKmhx6zOAQ",  # üò¨
    ],
    
    # –ü–æ—Ö–≤–∞–ª–∞
    "praise": [
        "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ",  # ü•∫
    ],
    
    # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ä–∞–Ω–¥–æ–º–Ω—ã–π —Ç–æ–∫—Å–∏—á–Ω—ã–π —Å—Ç–∏–∫–µ—Ä)
    "default": [
        "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ",  # ü•∫
        "CAACAgQAAxkBAAICbml54QVwij3Rknco3UtDvmPLIr5RAALIFQACFgZ4UyQlIaKmhx6zOAQ",  # üò¨
    ],
}

# –°—Ç–∏–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏–ª –¥–æ–±–∞–≤–∏—Ç—å –≤–æ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ —Ä–∞–±–æ—á–∏–π file_id)
GLOBAL_STICKER_ID = "CAACAgQAAxkBAAICcml5424d8LSfXBS_De8uaziqryEyAAJUCwACnT_hUeHJVNwEhVlZOAQ"

# –î–æ–±–∞–≤–ª—è–µ–º GLOBAL_STICKER_ID –≤ –∫–∞–∂–¥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é (—á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –±—ã–ª —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)
for _k in list(STICKER_COLLECTIONS.keys()):
    try:
        if GLOBAL_STICKER_ID not in STICKER_COLLECTIONS[_k]:
            STICKER_COLLECTIONS[_k].append(GLOBAL_STICKER_ID)
    except Exception:
        pass

# –ü—Ä–æ—Ü–µ–Ω—Ç –º–µ–¥–∏–∞-–æ—Ç–≤–µ—Ç–∞ –∏ –≤—ã–±–æ—Ä –º–µ–∂–¥—É —Å—Ç–∏–∫–µ—Ä–æ–º/–≥–∏—Ñ
MEDIA_RESPONSE_CHANCE = 0.45   # —à–∞–Ω—Å –≤–æ–æ–±—â–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–¥–∏–∞
STICKER_OVER_GIF_CHANCE = 0.55 # –µ—Å–ª–∏ –º–µ–¥–∏–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º, —Ç–æ —à–∞–Ω—Å –≤—ã–±—Ä–∞—Ç—å —Å—Ç–∏–∫–µ—Ä (–∏–Ω–∞—á–µ gif)

GIF_COLLECTIONS = {
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
    "greeting": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",  # placeholder
    ],
    
    # –ü–æ–¥–∫–æ–ª—ã
    "roast": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",
    ],
    
    # –§–ª–∏—Ä—Ç
    "flirt": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",
    ],
    
    # –°–º–µ—Ö
    "laugh": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",
    ],
    
    # –¢–æ–∫—Å–∏—á–Ω—ã–µ
    "toxic": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",
    ],
    
    "default": [
        "CgACAgQAAxkBAAEH7tVj8AAAAhgIRdXc5S98cJ2m4W8T6j8eQACCK4AALZvRQm3uU4r0t3qMwQ",
    ],
}

# ============== RUNNING FACTS DATABASE ==============
# –ö–æ–ª–ª–µ–∫—Ü–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ –±–µ–≥–µ —Å –º–∏–Ω–∏-—Å—Ç–∞—Ç—å—è–º–∏
facts_db = [
    {
        "id": 1,
        "title": "üèÉ –°–º–µ—Ä—Ç—å –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö",
        "content": "–õ—é–¥–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–º–∏—Ä–∞—é—Ç –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö. –ü–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ, –ø—Ä–∏–º–µ—Ä–Ω–æ 1 —Å–ª—É—á–∞–π –Ω–∞ 100 000 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. "
                   "–ß–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–∏—á–∏–Ω–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–∏–ø–æ–Ω–∞—Ç—Ä–∏–µ–º–∏—è (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞—Ç—Ä–∏—è –≤ –∫—Ä–æ–≤–∏) –∏–∑-–∑–∞ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–≥–æ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã. "
                   "–¢–∞–∫–∂–µ –æ–ø–∞—Å–Ω–∞ –≥–∏–ø–µ—Ä—Ç–µ—Ä–º–∏—è ‚Äî –ø–µ—Ä–µ–≥—Ä–µ–≤ –æ—Ä–≥–∞–Ω–∏–∑–º–∞.\n\n"
                   "–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å:\n"
                   "‚Ä¢ –ü–µ–π—Ç–µ –≤–æ–¥—É –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–æ—Ä—Ü–∏—è–º–∏, –Ω–µ –±–æ–ª–µ–µ 400-800 –º–ª –≤ —á–∞—Å\n"
                   "‚Ä¢ –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—É–ª—å—Å–æ–º, –Ω–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ –∞—ç—Ä–æ–±–Ω—É—é –∑–æ–Ω—É –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏—è—Ö\n"
                   "‚Ä¢ –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —Å–∏–º–ø—Ç–æ–º—ã: –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ, —Ç–æ—à–Ω–æ—Ç–∞, —Å–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å ‚Äî –ø–æ–≤–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è\n"
                   "‚Ä¢ –°–¥–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –º–∞—Ä–∞—Ñ–æ–Ω–æ–º, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–æ–µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞",
        "category": "–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
    },
    {
        "id": 2,
        "title": "üí∞ –û–ø–ª–∞—Ç–∞ –∑–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
        "content": "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤–∞–º –ø–ª–∞—Ç—è—Ç –∑–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –°–∫–æ–ª—å–∫–æ –±—ã –≤—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å?\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –º–æ—Ç–∏–≤–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É:\n"
                   "‚Ä¢ –í–Ω–µ—à–Ω—è—è –º–æ—Ç–∏–≤–∞—Ü–∏—è (–¥–µ–Ω—å–≥–∏) —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏\n"
                   "‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º–æ—Ç–∏–≤–∞—Ü–∏—è (–ª—é–±–æ–≤—å –∫ –±–µ–≥—É) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã\n"
                   "‚Ä¢ –õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: —Å—Ç–∞–≤–∏—Ç–µ —Ü–µ–ª—å –∏ –ø–æ–æ—â—Ä—è–µ—Ç–µ —Å–µ–±—è –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è\n\n"
                   "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: —Ç–µ, –∫—Ç–æ –Ω–∞—á–∞–ª –±–µ–≥–∞—Ç—å —Ä–∞–¥–∏ –¥–µ–Ω–µ–≥, —á–∞—Å—Ç–æ –±—Ä–æ—Å–∞–ª–∏ —á–µ—Ä–µ–∑ 2-3 –º–µ—Å—è—Ü–∞. "
                   "–ê —Ç–µ, –∫—Ç–æ –Ω–∞—à—ë–ª —Å–º—ã—Å–ª –≤ —Å–∞–º–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ ‚Äî –±–µ–≥–∞—é—Ç –≥–æ–¥–∞–º–∏.",
        "category": "–º–æ—Ç–∏–≤–∞—Ü–∏—è"
    },
    {
        "id": 3,
        "title": "üëü –ë–æ—Å–∏–∫–æ–º –∏–ª–∏ –≤ –∫—Ä–æ—Å—Å–æ–≤–∫–∞—Ö?",
        "content": "–ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å: –±–µ–≥ –±–æ—Å–∏–∫–æ–º 1 –∫–º –∏–ª–∏ 42,2 –∫–º –ø–µ—à–∫–æ–º?\n\n"
                   "–ù–∞—É—á–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–µ–Ω:\n"
                   "–ë–µ–≥ –±–æ—Å–∏–∫–æ–º:\n"
                   "‚Ä¢ –£–∫—Ä–µ–ø–ª—è–µ—Ç –º—ã—à—Ü—ã —Å—Ç–æ–ø—ã –∏ –≥–æ–ª–µ–Ω–∏\n"
                   "‚Ä¢ –£–ª—É—á—à–∞–µ—Ç —Ç–µ—Ö–Ω–∏–∫—É –±–µ–≥–∞ (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–¥–Ω—é—é —á–∞—Å—Ç—å —Å—Ç–æ–ø—ã)\n"
                   "‚Ä¢ –†–∏—Å–∫ —Ç—Ä–∞–≤–º –≤—ã—à–µ –Ω–∞ —Ç–≤—ë—Ä–¥—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö\n"
                   "‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è 1 –∫–º ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å—Ç–æ–ø\n\n"
                   "–•–æ–¥—å–±–∞ 42,2 –∫–º (–º–∞—Ä–∞—Ñ–æ–Ω—Å–∫–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è):\n"
                   "‚Ä¢ –ú–µ–Ω–µ–µ —Ç—Ä–∞–≤–º–æ–æ–ø–∞—Å–Ω–∞\n"
                   "‚Ä¢ –ú–æ–∂–Ω–æ –ø—Ä–µ–æ–¥–æ–ª–µ—Ç—å –≤ –ª—é–±–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º–µ\n"
                   "‚Ä¢ –ó–∞–Ω–∏–º–∞–µ—Ç 6-10 —á–∞—Å–æ–≤\n\n"
                   "–í—ã–≤–æ–¥: 1 –∫–º –±–æ—Å–∏–∫–æ–º –¥–∞—Å—Ç –±–æ–ª—å—à–µ –ø–æ–ª—å–∑—ã –¥–ª—è –±–µ–≥—É–Ω–∞, —á–µ–º –º–∞—Ä–∞—Ñ–æ–Ω—Å–∫–∞—è –ø—Ä–æ–≥—É–ª–∫–∞. –ù–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ ‚Äî –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –ø—Ä–∏—É—á–µ–Ω–∏–µ –∫ –±–µ–≥—É –±–æ—Å—ã–º –Ω–∞ –º—è–≥–∫–∏—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö.",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 4,
        "title": "üî• –°–∂–∏–≥–∞–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π",
        "content": "–°–∫–æ–ª—å–∫–æ –∫–∞–ª–æ—Ä–∏–π —Å–∂–∏–≥–∞–µ—Ç –±–µ–≥?\n\n"
                   "–§–æ—Ä–º—É–ª–∞ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞:\n"
                   "‚Ä¢ 1 –∫–º –±–µ–≥–∞ ‚âà 1 –∫–∫–∞–ª –Ω–∞ 1 –∫–≥ –≤–µ—Å–∞\n"
                   "‚Ä¢ –î–ª—è —á–µ–ª–æ–≤–µ–∫–∞ 70 –∫–≥: 1 –∫–º = ~70 –∫–∫–∞–ª\n"
                   "‚Ä¢ –ú–∞—Ä–∞—Ñ–æ–Ω (42,2 –∫–º) = ~3000 –∫–∫–∞–ª –¥–ª—è 70 –∫–≥\n\n"
                   "–§–∞–∫—Ç–æ—Ä—ã, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–µ —Å–∂–∏–≥–∞–Ω–∏–µ:\n"
                   "‚Ä¢ –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –±–µ–≥ —Å–∂–∏–≥–∞–µ—Ç –Ω–∞ 15-20% –±–æ–ª—å—à–µ\n"
                   "‚Ä¢ –ë–µ–≥ –≤ –≥–æ—Ä–∫—É +20-30%\n"
                   "‚Ä¢ –¢–µ–º–ø: —á–µ–º –±—ã—Å—Ç—Ä–µ–µ ‚Äî —Ç–µ–º –≤—ã—à–µ —Ä–∞—Å—Ö–æ–¥\n"
                   "‚Ä¢ –í–µ—Å —Ä—é–∫–∑–∞–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–∞–ª–æ—Ä–∏–∏\n\n"
                   "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ: –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–µ—Ç–∞–±–æ–ª–∏–∑–º –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –¥–æ 24 —á–∞—Å–æ–≤!",
        "category": "–ø–∏—Ç–∞–Ω–∏–µ"
    },
    {
        "id": 5,
        "title": "üß† –ë–µ–≥ –∏ –º–æ–∑–≥",
        "content": "–ë–µ–≥ –¥–µ–ª–∞–µ—Ç –≤–∞—Å —É–º–Ω–µ–µ. literally.\n\n"
                   "–ù–∞—É—á–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:\n"
                   "‚Ä¢ –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≥–∏–ø–ø–æ–∫–∞–º—Å–∞ (–∑–æ–Ω–∞ –º–æ–∑–≥–∞, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –ø–∞–º—è—Ç—å)\n"
                   "‚Ä¢ –°—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—ã—Ä–∞–±–æ—Ç–∫—É BDNF ‚Äî –±–µ–ª–∫–∞ ¬´—É–º–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞¬ª\n"
                   "‚Ä¢ –£–ª—É—á—à–∞–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –Ω–∞ 2-4 —á–∞—Å–∞ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç —Ç—Ä–µ–≤–æ–≥—É –∏ –¥–µ–ø—Ä–µ—Å—Å–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–∫–∞—Ä—Å—Ç–≤\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ MIT: –∫—Ä—ã—Å—ã, –±–µ–≥–∞–≤—à–∏–µ –≤ –∫–æ–ª–µ—Å–µ, –ª—É—á—à–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç –∏ –±—ã—Å—Ç—Ä–µ–µ —É—á–∏–ª–∏—Å—å.\n\n"
                   "–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞: –±–µ–≥–∞–π—Ç–µ 30-45 –º–∏–Ω—É—Ç –≤ —É–º–µ—Ä–µ–Ω–Ω–æ–º —Ç–µ–º–ø–µ 3-4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.",
        "category": "–ø–æ–ª—å–∑–∞"
    },
    {
        "id": 6,
        "title": "‚è±Ô∏è –õ—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –±–µ–≥–∞",
        "content": "–£—Ç—Ä–æ, –¥–µ–Ω—å –∏–ª–∏ –≤–µ—á–µ—Ä ‚Äî –∫–æ–≥–¥–∞ –ª—É—á—à–µ –±–µ–≥–∞—Ç—å?\n\n"
                   "–£—Ç—Ä–µ–Ω–Ω–∏–π –±–µ–≥ (6:00-9:00):\n"
                   "‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω–∞ (—É –º—É–∂—á–∏–Ω) –∏ —ç–Ω–µ—Ä–≥–∏–∏\n"
                   "‚Ä¢ –°–ª–æ–∂–Ω–µ–µ –Ω–∞—á–∞—Ç—å ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–º –µ—â—ë —Å–ø–∏—Ç\n"
                   "‚Ä¢ –í–æ–∑–¥—É—Ö —á–∏—â–µ (–º–µ–Ω—å—à–µ –≤—ã—Ö–ª–æ–ø–æ–≤)\n\n"
                   "–í–µ—á–µ—Ä–Ω–∏–π –±–µ–≥ (17:00-20:00):\n"
                   "‚Ä¢ –ú—ã—à—Ü—ã —Ä–∞–∑–æ–≥—Ä–µ—Ç—ã, —Å–≤—è–∑–∫–∏ —ç–ª–∞—Å—Ç–∏—á—á–Ω–µ–µ\n"
                   "‚Ä¢ –õ–µ–≥—á–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã\n"
                   "‚Ä¢ –°–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å –ø–æ—Å–ª–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è\n"
                   "‚Ä¢ –•—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞\n\n"
                   "–í—ã–≤–æ–¥: –ª—É—á—à–µ–µ –≤—Ä–µ–º—è ‚Äî —Ç–æ, –∫–æ–≥–¥–∞ –≤—ã actually –±—É–¥–µ—Ç–µ –±–µ–≥–∞—Ç—å. –ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ –≤–∞–∂–Ω–µ–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.",
        "category": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
    },
    {
        "id": 7,
        "title": "üèîÔ∏è –ë–µ–≥ –≤ –≥–æ—Ä–∞—Ö",
        "content": "–ì–æ—Ä–Ω—ã–π –±–µ–≥ ‚Äî —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –≤–∏–¥ —Å–ø–æ—Ä—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏.\n\n"
                   "–§–∏–∑–∏–æ–ª–æ–≥–∏—è:\n"
                   "‚Ä¢ –ù–∞ –∫–∞–∂–¥—ã–µ 100 –º –≤—ã—Å–æ—Ç—ã —Ç–µ—Ä—è–µ—Ç—Å—è ~1% –∫–∏—Å–ª–æ—Ä–æ–¥–∞\n"
                   "‚Ä¢ –°–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è –Ω–∞ 10-15 —É–¥–∞—Ä–æ–≤ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 1000 –º\n"
                   "‚Ä¢ –ö–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –Ω–∞ 20-30% –≤—ã—à–µ, —á–µ–º –Ω–∞ —Ä–∞–≤–Ω–∏–Ω–µ\n\n"
                   "–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:\n"
                   "‚Ä¢ –ê–∫–∫–ª–∏–º–∞—Ç–∏–∑–∞—Ü–∏—è 2-3 –¥–Ω—è –Ω–∞ –∫–∞–∂–¥—ã–µ 1000 –º\n"
                   "‚Ä¢ –ü–µ–π—Ç–µ –±–æ–ª—å—à–µ ‚Äî –≤–ª–∞–≥–∞ –∏—Å–ø–∞—Ä—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ\n"
                   "‚Ä¢ –°–æ–ª–Ω—Ü–µ –æ–ø–∞—Å–Ω–µ–µ –Ω–∞ –≤—ã—Å–æ—Ç–µ (–º–µ–Ω—å—à–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã)\n"
                   "‚Ä¢ –ù–æ—Å–∏—Ç–µ –≥–æ–ª–æ–≤–Ω–æ–π —É–Ω–æ—Å–º\n\n"
                   "–ó–Ω–∞–º–µ–Ω–∏—Ç—ã–µ –≥–æ—Ä–Ω—ã–µ –∑–∞–±–µ–≥–∏: UTMB (–®–≤–µ–π—Ü–∞—Ä–∏—è), Western States (–°–®–ê), –¢—Ä–∞–Ω—Å–∫–∞–Ω—Å–∫–∏–π –º–∞—Ä–∞—Ñ–æ–Ω.",
        "category": "—ç–∫—Å—Ç—Ä–∏–º"
    },
    {
        "id": 8,
        "title": "üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è vs —á–∞—Å—ã",
        "content": "–ß—Ç–æ –ª—É—á—à–µ –¥–ª—è –±–µ–≥–∞: —Å–º–∞—Ä—Ç—Ñ–æ–Ω –∏–ª–∏ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã?\n\n"
                   "–°–º–∞—Ä—Ç—Ñ–æ–Ω:\n"
                   "‚Ä¢ –ü–ª—é—Å: –í—Å–µ–≥–¥–∞ —Å —Å–æ–±–æ–π, –±–æ–ª—å—à–æ–π —ç–∫—Ä–∞–Ω, –∫–∞—Ä—Ç—ã\n"
                   "‚Ä¢ –ú–∏–Ω—É—Å: –ë—ã—Å—Ç—Ä–æ —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è, –Ω–µ—É–¥–æ–±–Ω–æ –¥–µ—Ä–∂–∞—Ç—å, –Ω–µ—Ç–æ—á–Ω—ã–π GPS\n"
                   "‚Ä¢ –õ—É—á—à–µ –¥–ª—è: –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö, –±–µ–≥—É–Ω–æ–≤ –ø–æ –≥–æ—Ä–æ–¥—É\n\n"
                   "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã:\n"
                   "‚Ä¢ –ü–ª—é—Å: –¢–æ—á–Ω—ã–π GPS, –ø—É–ª—å—Å–æ–º–µ—Ç—Ä, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –≤–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º–æ—Å—Ç—å\n"
                   "‚Ä¢ –ú–∏–Ω—É—Å: –î–æ—Ä–æ–≥–∏–µ, –Ω—É–∂–Ω–æ –∑–∞—Ä—è–∂–∞—Ç—å, –º–∞–ª–µ–Ω—å–∫–∏–π —ç–∫—Ä–∞–Ω\n"
                   "‚Ä¢ –õ—É—á—à–µ: –¥–ª—è —Å–µ—Ä—å—ë–∑–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n\n"
                   "–°–æ–≤–µ—Ç: –ï—Å–ª–∏ –±–µ–≥–∞–µ—Ç–µ 3+ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—Ä–æ–≤–∞—Ç—å ‚Äî —á–∞—Å—ã –æ–∫—É–ø—è—Ç—Å—è –∞–Ω–∞–ª–∏–∑–æ–º –¥–∞–Ω–Ω—ã—Ö. "
                   "–î–ª—è ¬´–ø–æ–±–µ–≥–∞—Ç—å –ø–∞—Ä—É —Ä–∞–∑¬ª —Ö–≤–∞—Ç–∏—Ç –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.",
        "category": "–≥–∞–¥–∂–µ—Ç—ã"
    },
    {
        "id": 9,
        "title": "üçå –ü–∏—Ç–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –±–µ–≥–∞",
        "content": "–ß—Ç–æ –µ—Å—Ç—å –∏ –ø–∏—Ç—å –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö?\n\n"
                   "–î–æ –±–µ–≥–∞ (–∑–∞ 1-3 —á–∞—Å–∞):\n"
                   "‚Ä¢ –£–≥–ª–µ–≤–æ–¥—ã: –∫–∞—à–∞, –±–∞–Ω–∞–Ω, —Ç–æ—Å—Ç —Å –º—ë–¥–æ–º\n"
                   "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ: –∂–∏—Ä–Ω–æ–π –∏ –±–µ–ª–∫–æ–≤–æ–π –ø–∏—â–∏ (–º–µ–¥–ª–µ–Ω–Ω–æ —É—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è)\n\n"
                   "–í–æ –≤—Ä–µ–º—è –±–µ–≥–∞ (–±–æ–ª–µ–µ 60 –º–∏–Ω):\n"
                   "‚Ä¢ –ì–µ–ª–∏ —Å –≥–ª—é–∫–æ–∑–æ–π (—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ)\n"
                   "‚Ä¢ –ò–∑–æ—Ç–æ–Ω–∏–∫–∏ ‚Äî –≤–æ—Å–ø–æ–ª–Ω—è—é—Ç —Å–æ–ª–∏\n"
                   "‚Ä¢ –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã, –±–∞–Ω–∞–Ω—ã (–Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏—è—Ö)\n\n"
                   "–ü–æ—Å–ª–µ –±–µ–≥–∞ (–≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω):\n"
                   "‚Ä¢ –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –±–µ–ª–æ–∫:—É–≥–ª–µ–≤–æ–¥—ã = 1:3\n"
                   "‚Ä¢ –ò–¥–µ–∞–ª—å–Ω–æ: –ø—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –∫–æ–∫—Ç–µ–π–ª—å, —Ç–≤–æ—Ä–æ–≥ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏\n\n"
                   "–í–∞–∂–Ω–æ: –≤—Å—ë –Ω–æ–≤–æ–µ –ø—Ä–æ–±—É–π—Ç–µ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö, –Ω–µ –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö!",
        "category": "–ø–∏—Ç–∞–Ω–∏–µ"
    },
    {
        "id": 10,
        "title": "ü¶µ –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ —Ç—Ä–∞–≤–º",
        "content": "–ö–∞–∫ –±–µ–≥–∞—Ç—å –≥–æ–¥–∞–º–∏ –±–µ–∑ —Ç—Ä–∞–≤–º?\n\n"
                   "–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–µ –±–æ–ª–µ–µ 10% –≤ –Ω–µ–¥–µ–ª—é.\n\n"
                   "–¢–æ–ø-5 —Ç—Ä–∞–≤–º –±–µ–≥—É–Ω–æ–≤:\n"
                   "1. –ö–æ–ª–µ–Ω–æ –±–µ–≥—É–Ω–∞ (–ø–∞—Ç–µ–ª–ª–æ—Ñ–µ–º–æ—Ä–∞–ª—å–Ω—ã–π —Å–∏–Ω–¥—Ä–æ–º)\n"
                   "2. –ü–ª–∞–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∞—Å—Ü–∏–∏—Ç (–±–æ–ª—å –≤ –ø—è—Ç–∫–µ)\n"
                   "3. –ê—Ö–∏–ª–ª–æ–¥–∏–Ω–∏—è (–±–æ–ª—å –≤ –∞—Ö–∏–ª–ª–µ)\n"
                   "4. –°—Ç—Ä–µ—Å—Å-–ø–µ—Ä–µ–ª–æ–º\n"
                   "5. –¢–µ–Ω–¥–∏–Ω–∏—Ç\n\n"
                   "–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:\n"
                   "‚Ä¢ –°–∏–ª–∞: –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è, –≤—ã–ø–∞–¥—ã, –ø–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–æ–∫\n"
                   "‚Ä¢ –†–∞—Å—Ç—è–∂–∫–∞: –∏–∫—Ä–æ–Ω–æ–∂–Ω—ã–µ, –±–µ–¥—Ä–∞, —è–≥–æ–¥–∏—Ü—ã\n"
                   "‚Ä¢ –†–∞–∑–º–∏–Ω–∫–∞: 10 –º–∏–Ω –ª—ë–≥–∫–æ–≥–æ –±–µ–≥–∞ + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Ç—è–∂–∫–∞\n"
                   "‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: —Å–æ–Ω 7-8 —á–∞—Å–æ–≤, –¥–Ω–∏ –æ—Ç–¥—ã—Ö–∞\n"
                   "‚Ä¢ –û–±—É–≤—å: –º–µ–Ω—è–π—Ç–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –∫–∞–∂–¥—ã–µ 500-800 –∫–º",
        "category": "–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
    },
    {
        "id": 11,
        "title": "üå°Ô∏è –ë–µ–≥ –∑–∏–º–æ–π",
        "content": "–ö–∞–∫ –±–µ–≥–∞—Ç—å –≤ —Ö–æ–ª–æ–¥ –∏ –Ω–µ —É–º–µ—Ä–µ—Ç—å?\n\n"
                   "–ü—Ä–∞–≤–∏–ª–æ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ—Å—Ç–∏:\n"
                   "‚Ä¢ 1-–π —Å–ª–æ–π (–Ω–∞ —Ç–µ–ª–æ): —Ç–µ—Ä–º–æ–±–µ–ª—å—ë (–æ—Ç–≤–æ–¥–∏—Ç –ø–æ—Ç)\n"
                   "‚Ä¢ 2-–π —Å–ª–æ–π (—É—Ç–µ–ø–ª–∏—Ç–µ–ª—å): —Ñ–ª–∏—Å –∏–ª–∏ —Å–æ—Ñ—Ç—à–µ–ª–ª\n"
                   "‚Ä¢ 3-–π —Å–ª–æ–π (–∑–∞—â–∏—Ç–∞): –≤–µ—Ç—Ä–æ–≤–∫–∞\n\n"
                   "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∏–º–Ω–µ–≥–æ –±–µ–≥–∞:\n"
                   "‚Ä¢ –ù–∞—á–∏–Ω–∞–π—Ç–µ –≤ —Ç–µ–ø–ª–µ ‚Äî –Ω–∞ —É–ª–∏—Ü–µ —Å—Ç–∞–Ω–µ—Ç —Ö–æ–ª–æ–¥–Ω–µ–µ\n"
                   "‚Ä¢ –ì–æ–ª–æ–≤–∞ —Ç–µ—Ä—è–µ—Ç 40% —Ç–µ–ø–ª–∞ ‚Äî —à–∞–ø–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞\n"
                   "‚Ä¢ –†—É–∫–∏ –º—ë—Ä–∑–Ω—É—Ç –ø–µ—Ä–≤—ã–º–∏ ‚Äî –ø–µ—Ä—á–∞—á–∫–∏\n"
                   "‚Ä¢ –î—ã—à–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–æ—Å –∏–ª–∏ —à–∞—Ä—Ñ (—á—Ç–æ–±—ã —Å–æ–≥—Ä–µ—Ç—å –≤–æ–∑–¥—É—Ö)\n"
                   "‚Ä¢ –°–≤–µ—Ç–æ–æ—Ç—Ä–∞–∂–∞—Ç–µ–ª–∏! –ó–∏–º–æ–π —Ç–µ–º–Ω–µ–µ—Ç —Ä–∞–Ω–æ\n\n"
                   "–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: –¥–æ -15¬∞C –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–µ—Ç—Ä–∞. –ù–∏–∂–µ ‚Äî –±–µ–≥–∞–π—Ç–µ –≤ –∑–∞–ª–µ –∏–ª–∏ –Ω–∞ –±–µ–≥–æ–≤–æ–π –¥–æ—Ä–æ–∂–∫–µ.",
        "category": "—Å–µ–∑–æ–Ω"
    },
    {
        "id": 12,
        "title": "üéØ –ë–µ–≥ –ø–æ –ø—É–ª—å—Å—É",
        "content": "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª—å—Å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫?\n\n"
                   "–ó–æ–Ω—ã –ø—É–ª—å—Å–∞ (–ø—Ä–∏–º–µ—Ä –¥–ª—è 30 –ª–µ—Ç, –º–∞–∫—Å –ß–°–° = 190):\n\n"
                   "üîµ –ó–æ–Ω–∞ 1 (50-60%): –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω–∞—è ‚Äî –ª—ë–≥–∫–∞—è –ø—Ä–æ–±–µ–∂–∫–∞\n"
                   "üü¢ –ó–æ–Ω–∞ 2 (60-70%): –ê—ç—Ä–æ–±–Ω–∞—è ‚Äî –±–∞–∑–∞, ¬´—Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π¬ª —Ç–µ–º–ø\n"
                   "üü° –ó–æ–Ω–∞ 3 (70-80%): –ü–æ—Ä–æ–≥–æ–≤–∞—è ‚Äî —Ç–µ–º–ø–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞\n"
                   "üü† –ó–æ–Ω–∞ 4 (80-90%): –ê–Ω–∞—ç—Ä–æ–±–Ω–∞—è ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã\n"
                   "üî¥ –ó–æ–Ω–∞ 5 (90-100%): –ú–∞–∫—Å–∏–º—É–º ‚Äî —Å–ø—Ä–∏–Ω—Ç, —Ñ–∏–Ω–∏—à–Ω—ã–π —Ä—ã–≤–æ–∫\n\n"
                   "–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è –ª—é–±–∏—Ç–µ–ª—è:\n"
                   "‚Ä¢ 80% —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ ‚Äî –≤ –∑–æ–Ω–µ 2 (–¥–ª–∏–Ω–Ω—ã–µ –ª—ë–≥–∫–∏–µ –ø—Ä–æ–±–µ–∂–∫–∏)\n"
                   "‚Ä¢ 20% ‚Äî –≤ –∑–æ–Ω–∞—Ö 3-4 (—Ç–µ–º–ø–æ–≤—ã–µ, –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã)\n\n"
                   "–§–æ—Ä–ª–∞ –ú–∞–∫—Å –ß–°–°: 220 - –≤–æ–∑—Ä–∞—Å—Ç. –î–ª—è —Ç–æ—á–Ω—ã—Ö –∑–æ–Ω ‚Äî –¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç.",
        "category": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
    },
    {
        "id": 13,
        "title": "üèÉ –ü–µ—Ä–≤—ã–π –º–∞—Ä–∞—Ñ–æ–Ω",
        "content": "–ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø–µ—Ä–≤–æ–º—É –º–∞—Ä–∞—Ñ–æ–Ω—É?\n\n"
                   "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞:\n"
                   "‚Ä¢ –ë–µ–≥–æ–≤–æ–π –æ–ø—ã—Ç: –º–∏–Ω–∏–º—É–º 1 –≥–æ–¥ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\n"
                   "‚Ä¢ –ë–∞–∑–æ–≤—ã–π –æ–±—ä—ë–º: —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–±–µ–∂–∞—Ç—å 30+ –∫–º –≤ –æ–¥–Ω—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\n"
                   "‚Ä¢ –í—Ä–µ–º—è: 16-20 –Ω–µ–¥–µ–ª—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏\n\n"
                   "–¢–∏–ø–∏—á–Ω–∞—è –Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 8 –Ω–µ–¥–µ–ª—å):\n"
                   "‚Ä¢ –ü–Ω: –æ—Ç–¥—ã—Ö –∏–ª–∏ –∫—Ä–æ—Å—Å 5-8 –∫–º\n"
                   "‚Ä¢ –í—Ç: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã 6-10 –∫–º\n"
                   "‚Ä¢ –°—Ä: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–≥ 6-8 –∫–º\n"
                   "‚Ä¢ –ß—Ç: —Ç–µ–º–ø–æ–≤–æ–π –±–µ–≥ 8-12 –∫–º\n"
                   "‚Ä¢ –ü—Ç: –æ—Ç–¥—ã—Ö –∏–ª–∏ –ø–ª–∞–≤–∞–Ω–∏–µ\n"
                   "‚Ä¢ –°–±: –¥–ª–∏–Ω–Ω–∞—è –ø—Ä–æ–±–µ–∂–∫–∞ 15-32 –∫–º (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)\n"
                   "‚Ä¢ –í—Å: –∫—Ä–æ—Å—Å –∏–ª–∏ –æ—Ç–¥—ã—Ö\n\n"
                   "–í–∞–∂–Ω–æ: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –Ω–µ–¥–µ–ª–∏ ‚Äî —Å–Ω–∏–∂–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ (—Ç–∞–ø–µ—Ä–∏–Ω–≥).",
        "category": "–º–∞—Ä–∞—Ñ–æ–Ω"
    },
    {
        "id": 14,
        "title": "ü§ù –ö–æ–º–∞–Ω–¥–Ω—ã–π –±–µ–≥",
        "content": "–ü–æ—á–µ–º—É –±–µ–≥–∞—Ç—å —Å –¥—Ä—É–∑—å—è–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ?\n\n"
                   "–ù–∞—É—á–Ω—ã–µ —Ñ–∞–∫—Ç—ã:\n"
                   "‚Ä¢ –ü–∞—Ä—Ç–Ω—ë—Ä –ø–æ–≤—ã—à–∞–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏—é –Ω–∞ 35%\n"
                   "‚Ä¢ –ì—Ä—É–ø–ø–æ–≤–æ–π –±–µ–≥ —Å–Ω–∏–∂–∞–µ—Ç –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏\n"
                   "‚Ä¢ –°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã\n\n"
                   "–§–æ—Ä–º–∞—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ –±–µ–≥–∞:\n"
                   "‚Ä¢ –≠—Å—Ç–∞—Ñ–µ—Ç–∞: 4√ó1000 –º –∏–ª–∏ –º–∞—Ä–∞—Ñ–æ–Ω—Å–∫–∞—è —ç—Å—Ç–∞—Ñ–µ—Ç–∞\n"
                   "‚Ä¢ –ü–∞—Ä–Ω—ã–π –±–µ–≥: –≤–º–µ—Å—Ç–µ –¥–ª–∏–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏\n"
                   "‚Ä¢ –ö–ª—É–±: –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é\n"
                   "‚Ä¢ –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –≥–æ–Ω–∫–∏: –±–µ–∂–∏—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–Ω–ª–∞–π–Ω\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –±–µ–≥—É–Ω—ã, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–≤—à–∏–µ—Å—è –≤ –≥—Ä—É–ø–ø–µ, –ø–æ–∫–∞–∑–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 15% –ª—É—á—à–µ, —á–µ–º –æ–¥–∏–Ω–æ—á–∫–∏.",
        "category": "–º–æ—Ç–∏–≤–∞—Ü–∏—è"
    },
    {
        "id": 15,
        "title": "üßò –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
        "content": "–î–Ω–∏ –æ—Ç–¥—ã—Ö–∞ ‚Äî –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è.\n\n"
                   "–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è:\n"
                   "‚Ä¢ –ú—ã—à–µ—á–Ω—ã–µ –≤–æ–ª–æ–∫–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–∞ 24-48 —á–∞—Å–æ–≤\n"
                   "‚Ä¢ –°—É—Å—Ç–∞–≤—ã –∏ —Å–≤—è–∑–∫–∏ ‚Äî –∑–∞ 48-72 —á–∞—Å–∞\n"
                   "‚Ä¢ –ò–º–º—É–Ω–∏—Ç–µ—Ç –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫\n\n"
                   "–ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:\n"
                   "‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—É–ª—å—Å –≤ –ø–æ–∫–æ–µ\n"
                   "‚Ä¢ –ü–∞–¥–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤\n"
                   "‚Ä¢ –¢—Ä–∞–≤–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç\n"
                   "‚Ä¢ –†–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–Ω–∞\n\n"
                   "–ú–µ—Ç–æ–¥—ã –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:\n"
                   "‚Ä¢ –õ—ë–≥–∫–∏–π –±–µ–≥ –∏–ª–∏ –ø–ª–∞–≤–∞–Ω–∏–µ\n"
                   "‚Ä¢ –†–∞—Å—Ç—è–∂–∫–∞ –∏ –π–æ–≥–∞\n"
                   "‚Ä¢ –ú–∞—Å—Å–∞–∂ –∏ —Å–∞–º–æ–º–∞—Å—Å–∞–∂\n"
                   "‚Ä¢ –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π –¥—É—à\n"
                   "‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–æ–Ω (7-9 —á–∞—Å–æ–≤)",
        "category": "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
    },
    {
        "id": 16,
        "title": "üèÉ‚Äç‚ôÄÔ∏è –ë–µ–≥ –∏ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª",
        "content": "–ö–∞–∫ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª –≤–ª–∏—è–µ—Ç –Ω–∞ –±–µ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã?\n\n"
                   "–§–∞–∑—ã —Ü–∏–∫–ª–∞ –∏ –±–µ–≥:\n"
                   "‚Ä¢ –§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è (–¥–Ω–∏ 1-14): –≤—ã—Å–æ–∫–∏–π —ç—Å—Ç—Ä–æ–≥–µ–Ω ‚Äî —Ö–æ—Ä–æ—à–∞—è –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å, –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ\n"
                   "‚Ä¢ –û–≤—É–ª—è—Ü–∏—è: –ø–∏–∫ —ç—Å—Ç—Ä–æ–≥–µ–Ω–∞ ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å\n"
                   "‚Ä¢ –õ—é—Ç–µ–∏–Ω–æ–≤–∞—è (–¥–Ω–∏ 15-28): –ø—Ä–æ–≥–µ—Å—Ç–µ—Ä–æ–Ω –≤—ã—à–µ ‚Äî –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞, —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è\n\n"
                   "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã:\n"
                   "‚Ä¢ –í –ø–µ—Ä–≤–æ–π –ø–æ–ª–æ–≤–∏–Ω–µ —Ü–∏–∫–ª–∞ –º–æ–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—è–∂—ë–ª—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ —Ä–µ–∫–æ—Ä–¥—ã\n"
                   "‚Ä¢ –í–æ –≤—Ç–æ—Ä–æ–π ‚Äî —Å–Ω–∏–∑–∏—Ç—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å, –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é\n"
                   "‚Ä¢ –ü—Ä–∏—Å–ª—É—à–∏–≤–∞–π—Ç–µ—Å—å –∫ –æ—Ä–≥–∞–Ω–∏–∑–º—É ‚Äî –æ–Ω –ø–æ–¥—Å–∫–∞–∂–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ 2-4% –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–æ–π —Ñ–∞–∑–µ.",
        "category": "–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏"
    },
    {
        "id": 17,
        "title": "üéß –ë–µ–≥ —Å –º—É–∑—ã–∫–æ–π",
        "content": "–°—Ç–æ–∏—Ç –ª–∏ –±–µ–≥–∞—Ç—å –≤ –Ω–∞—É—à–Ω–∏–∫–∞—Ö?\n\n"
                   "–ü–ª—é—Å—ã –º—É–∑—ã–∫–∏:\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–∞–µ—Ç –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –Ω–∞ 10-15%\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏\n"
                   "‚Ä¢ –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–º–ø\n"
                   "‚Ä¢ –£–ª—É—á—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏\n\n"
                   "–ú–∏–Ω—É—Å—ã:\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –æ–∫—Ä—É–∂–∞—é—â–µ–º—É\n"
                   "‚Ä¢ –û–ø–∞—Å–Ω–æ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö\n"
                   "‚Ä¢ –ù–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö —á–∞—Å—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é\n\n"
                   "–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä:\n"
                   "‚Ä¢ –¢–µ–º–ø 130-150 BPM –¥–ª—è –±–µ–≥–∞\n"
                   "‚Ä¢ –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –∑–≤—É–∫ –¥–ª—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤\n"
                   "‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –º—É–∑—ã–∫–∏ –Ω–∞ –¥–æ—Ä–æ–≥–µ!",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 18,
        "title": "üíì –ü—É–ª—å—Å –≤ –ø–æ–∫–æ–µ",
        "content": "–ü–æ—á–µ–º—É –ø—É–ª—å—Å –≤ –ø–æ–∫–æ–µ ‚Äî –≤–∞–∂–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –±–µ–≥—É–Ω–∞?\n\n"
                   "–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:\n"
                   "‚Ä¢ –£ –Ω–µ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞: 60-80 —É–¥/–º–∏–Ω\n"
                   "‚Ä¢ –£ –ª—é–±–∏—Ç–µ–ª—è-–±–µ–≥—É–Ω–∞: 45-60 —É–¥/–º–∏–Ω\n"
                   "‚Ä¢ –£ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞: 30-40 —É–¥/–º–∏–Ω (–±—Ä–∞–¥–∏–∫–∞—Ä–¥–∏—è)\n\n"
                   "–ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—É–ª—å—Å –≤ –ø–æ–∫–æ–µ:\n"
                   "‚Ä¢ –ê—ç—Ä–æ–±–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç –ø—É–ª—å—Å\n"
                   "‚Ä¢ –û–±—ä—ë–º –ø–ª–∞–∑–º—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è\n"
                   "‚Ä¢ –°–µ—Ä–¥—Ü–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ –∏ –∫–∞—á–∞–µ—Ç –±–æ–ª—å—à–µ –∫—Ä–æ–≤–∏ –∑–∞ –æ–¥–∏–Ω —É–¥–∞—Ä\n\n"
                   "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:\n"
                   "‚Ä¢ –ò–∑–º–µ—Ä—è–π—Ç–µ —É—Ç—Ä–æ–º, –ª—ë–∂–∞ –≤ –ø–æ—Å—Ç–µ–ª–∏\n"
                   "‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 5-10 —É–¥/–º–∏–Ω –∑–∞ –º–µ—Å—è—Ü ‚Äî —Ö–æ—Ä–æ—à–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ –ø–µ—Ä–µ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∏–ª–∏ –±–æ–ª–µ–∑–Ω–∏\n\n"
                   "–ó–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç—å: —É –ª—ã–∂–Ω–∏–∫–∞ –ü–µ—Ç—Ç–µ—Ä–∞ –ù–æ—Ä—Ç—É–≥–∞ –ø—É–ª—å—Å –≤ –ø–æ–∫–æ–µ –±—ã–ª 28 —É–¥/–º–∏–Ω!",
        "category": "–ø–æ–ª—å–∑–∞"
    },
    {
        "id": 19,
        "title": "üçö –ó–∞–≥—Ä—É–∑–∫–∞ —É–≥–ª–µ–≤–æ–¥–∞–º–∏",
        "content": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —É–≥–ª–µ–≤–æ–¥–∞–º–∏ –ø–µ—Ä–µ–¥ –º–∞—Ä–∞—Ñ–æ–Ω–æ–º?\n\n"
                   "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (3-4 –¥–Ω—è –¥–æ –≥–æ–Ω–∫–∏):\n"
                   "‚Ä¢ –î–µ–Ω—å -3: 5-7 –≥ —É–≥–ª–µ–≤–æ–¥–æ–≤ –Ω–∞ –∫–≥ –≤–µ—Å–∞\n"
                   "‚Ä¢ –î–µ–Ω—å -2: 7-10 –≥/–∫–≥\n"
                   "‚Ä¢ –î–µ–Ω—å -1: 8-12 –≥/–∫–≥ (–ø–∏–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)\n\n"
                   "–ü—Ä–∏–º–µ—Ä –¥–ª—è 70 –∫–≥:\n"
                   "‚Ä¢ –í –¥–µ–Ω—å –ø–∏–∫–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏: 560-840 –≥ —É–≥–ª–µ–≤–æ–¥–æ–≤\n"
                   "‚Ä¢ –≠—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 2-3 –∫–≥ –ø–∞—Å—Ç—ã –∏–ª–∏ —Ä–∏—Å–∞ –∑–∞ –¥–µ–Ω—å!\n\n"
                   "–ß—Ç–æ –µ—Å—Ç—å:\n"
                   "‚Ä¢ –ú–∞–∫–∞—Ä–æ–Ω—ã, —Ä–∏—Å, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å\n"
                   "‚Ä¢ –•–ª–µ–±, –∫–∞—à–∏, –±–∞–Ω–∞–Ω—ã\n"
                   "‚Ä¢ –ú—ë–¥, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –±–∞—Ç–æ–Ω—á–∏–∫–∏\n\n"
                   "–í–∞–∂–Ω–æ:\n"
                   "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤\n"
                   "‚Ä¢ –ü–µ–π—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–æ–¥—ã\n"
                   "‚Ä¢ –ù–µ –ø–µ—Ä–µ–µ–¥–∞–π—Ç–µ ‚Äî –∂–µ–ª—É–¥–∫—É –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏–µ",
        "category": "–ø–∏—Ç–∞–Ω–∏–µ"
    },
    {
        "id": 20,
        "title": "üìâ –¢–∞–ø–µ—Ä–∏–Ω–≥",
        "content": "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–∞–ø–µ—Ä–∏–Ω–≥ –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?\n\n"
                   "–¢–∞–ø–µ—Ä–∏–Ω–≥ ‚Äî —Å–Ω–∏–∂–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–µ—Ä–µ–¥ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º–∏.\n\n"
                   "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –º–∞—Ä–∞—Ñ–æ–Ω–∞:\n"
                   "‚Ä¢ –ó–∞ 3 –Ω–µ–¥–µ–ª–∏: –æ–±—ã—á–Ω—ã–π –æ–±—ä—ë–º, –Ω–æ –±–µ–∑ –∫—Ä–∞–π–Ω–µ —Ç—è–∂—ë–ª—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\n"
                   "‚Ä¢ –ó–∞ 2 –Ω–µ–¥–µ–ª–∏: 70-80% –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –æ–±—ä—ë–º–∞\n"
                   "‚Ä¢ –ó–∞ 1 –Ω–µ–¥–µ–ª—é: 50-60% –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –æ–±—ä—ë–º–∞\n\n"
                   "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ:\n"
                   "‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –º—ã—à–µ—á–Ω—ã–µ –≤–æ–ª–æ–∫–Ω–∞\n"
                   "‚Ä¢ –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –≥–ª–∏–∫–æ–≥–µ–Ω –≤ –º—ã—à—Ü–∞—Ö\n"
                   "‚Ä¢ –£–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∏–º–º—É–Ω–∏—Ç–µ—Ç\n"
                   "‚Ä¢ –ù–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–¥—ã—Ö–∞–µ—Ç\n\n"
                   "–û—à–∏–±–∫–∏ –Ω–æ–≤–∏—á–∫–æ–≤:\n"
                   "‚Ä¢ –ü–æ–ª–Ω—ã–π –ø–æ–∫–æ–π ‚Äî —Ç–µ—Ä—è–µ—Ç—Å—è ¬´–≥–æ–Ω–∫–æ–≤—ã–π¬ª —Ä–µ–∂–∏–º\n"
                   "‚Ä¢ –°–ª–∏—à–∫–æ–º —Ä–µ–∑–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ ‚Äî –æ—â—É—â–µ–Ω–∏–µ —Ç—è–∂–µ—Å—Ç–∏ –≤ –Ω–æ–≥–∞—Ö\n"
                   "‚Ä¢ –ü–∞–Ω–∏–∫–∞ –æ—Ç —Å–Ω–∏–∂–µ–Ω–∏—è –≤–µ—Å–∞ ‚Äî —ç—Ç–æ –≤–æ–¥–∞ –∏ –≥–ª–∏–∫–æ–≥–µ–Ω, –≤–µ—Ä–Ω—É—Ç—Å—è –Ω–∞ –≥–æ–Ω–∫–µ\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∞–ø–µ—Ä–∏–Ω–≥ —É–ª—É—á—à–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 2-3%!",
        "category": "–º–∞—Ä–∞—Ñ–æ–Ω"
    },
    {
        "id": 21,
        "title": "üåô –ù–æ—á–Ω–æ–π –±–µ–≥",
        "content": "–ö–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ –±–µ–≥–∞—Ç—å –Ω–æ—á—å—é?\n\n"
                   "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ—á–Ω–æ–≥–æ –±–µ–≥–∞:\n"
                   "‚Ä¢ –í–æ–∑–¥—É—Ö —á–∏—â–µ (–º–µ–Ω—å—à–µ –≤—ã—Ö–ª–æ–ø–æ–≤, –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤)\n"
                   "‚Ä¢ –ü—Ä–æ—Ö–ª–∞–¥–Ω–µ–µ ‚Äî –ª—É—á—à–µ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è\n"
                   "‚Ä¢ –ú–µ–Ω—å—à–µ –ª—é–¥–µ–π –∏ –º–∞—à–∏–Ω –Ω–∞ –ø—Ä–æ–±–µ–∂–∫–∞—Ö\n"
                   "‚Ä¢ –ö—Ä–∞—Å–∏–≤—ã–µ –≤–∏–¥—ã –≥–æ—Ä–æ–¥–∞ –Ω–æ—á—å—é\n\n"
                   "–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:\n"
                   "‚Ä¢ –°–≤–µ—Ç–æ–æ—Ç—Ä–∞–∂–∞—é—â–∞—è –æ–¥–µ–∂–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞\n"
                   "‚Ä¢ –§–æ–Ω–∞—Ä–∏–∫ –Ω–∞–ª–æ–±–Ω—ã–π –∏–ª–∏ –≤ —Ä—É–∫—É\n"
                   "‚Ä¢ –ë–µ–≥–∞–π—Ç–µ –ø–æ –æ—Å–≤–µ—â—ë–Ω–Ω—ã–º —É–ª–∏—Ü–∞–º –∏–ª–∏ –ø–∞—Ä–∫–∞–º\n"
                   "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ –≥–ª—É—Ö–∏—Ö —Ä–∞–π–æ–Ω–æ–≤\n"
                   "‚Ä¢ –ù–∞—É—à–Ω–∏–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ\n"
                   "‚Ä¢ –¢–µ–ª–µ—Ñ–æ–Ω —Å –∑–∞—Ä—è–¥–æ–º\n\n"
                   "–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞:\n"
                   "‚Ä¢ –§–æ–Ω–∞—Ä—å —Å —Ä–µ–º–µ—à–∫–æ–º –Ω–∞ –≥–æ–ª–æ–≤—É\n"
                   "‚Ä¢ –°–≤–µ—Ç–æ–æ—Ç—Ä–∞–∂–∞—é—â–∏–π –∂–∏–ª–µ—Ç\n"
                   "‚Ä¢ –ë—Ä–∞—Å–ª–µ—Ç—ã –∏–ª–∏ –ª–µ–Ω—Ç—ã –Ω–∞ —Ä—É–∫–∏\n"
                   "‚Ä¢ –¢–µ–ª–µ—Ñ–æ–Ω —Å –∑–∞—Ä—è–¥–æ–º",
        "category": "—Å–µ–∑–æ–Ω"
    },
    {
        "id": 22,
        "title": "ü¶∂ –ë–µ–≥–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è",
        "content": "–ß—Ç–æ —Ç–∞–∫–æ–µ –±–µ–≥–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è –∏ –∫–∞–∫ –µ—ë —É–ª—É—á—à–∏—Ç—å?\n\n"
                   "–ë–µ–≥–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∏—Å–ª–æ—Ä–æ–¥–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –±–µ–≥–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏.\n\n"
                   "–•–æ—Ä–æ—à–∞—è —ç–∫–æ–Ω–æ–º–∏—è = –º–µ–Ω—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ —Ç–æ—Ç –∂–µ —Ç–µ–º–ø.\n\n"
                   "–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —ç–∫–æ–Ω–æ–º–∏—é:\n"
                   "‚Ä¢ –í–µ—Å (–∫–∞–∂–¥—ã–π –ª–∏—à–Ω–∏–π –∫–≥ ‚Äî –º–∏–Ω—É—Å –∫ —ç–∫–æ–Ω–æ–º–∏–∏)\n"
                   "‚Ä¢ –¢–µ—Ö–Ω–∏–∫–∞ –±–µ–≥–∞ (–ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–æ–ø—ã, –¥–ª–∏–Ω–∞ —à–∞–≥–∞)\n"
                   "‚Ä¢ –°–∏–ª–∞ –º—ã—à—Ü (–æ—Å–æ–±–µ–Ω–Ω–æ —è–≥–æ–¥–∏—Ü –∏ –∫–æ—Ä–∞)\n"
                   "‚Ä¢ –≠–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç—å —Å—É—Ö–æ–∂–∏–ª–∏–π\n"
                   "‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–∑–¥—É—Ö–∞ (–∂–∞—Ä–∞ —É—Ö—É–¥—à–∞–µ—Ç —ç–∫–æ–Ω–æ–º–∏—é –Ω–∞ 3-5%)\n\n"
                   "–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å:\n"
                   "‚Ä¢ –ë–µ–≥ –±–æ—Å–∏–∫–æ–º –∏–ª–∏ –≤ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –æ–±—É–≤–∏ —É–∫—Ä–µ–ø–ª—è–µ—Ç —Å—Ç–æ–ø—É\n"
                   "‚Ä¢ –°–∏–ª–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏\n"
                   "‚Ä¢ –†–∞–±–æ—Ç–∞ –Ω–∞–¥ —Ç–µ—Ö–Ω–∏–∫–æ–π (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã —à–∞–≥–æ–≤)\n"
                   "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –≤–µ—Å–∞\n\n"
                   "–ü—Ä–æ—Ñ–∏: —ç–ª–∏—Ç–Ω—ã–µ –º–∞—Ä–∞—Ñ–æ–Ω—Ü—ã —Ç—Ä–∞—Ç—è—Ç –Ω–∞ 25-30% –º–µ–Ω—å—à–µ –∫–∏—Å–ª–æ—Ä–æ–¥–∞, —á–µ–º –ª—é–±–∏—Ç–µ–ª–∏ –Ω–∞ —Ç–æ–π –∂–µ —Å–∫–æ—Ä–æ—Å—Ç–∏!",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 23,
        "title": "‚è±Ô∏è –ß–∞—Å—Ç–æ—Ç–∞ —à–∞–≥–æ–≤",
        "content": "–ö–∞–∫–∞—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ —à–∞–≥–æ–≤ –ø—Ä–∏ –±–µ–≥–µ?\n\n"
                   "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:\n"
                   "‚Ä¢ –ù–∞—á–∏–Ω–∞—é—â–∏–µ: 150-160 —à–∞–≥–æ–≤/–º–∏–Ω\n"
                   "‚Ä¢ –õ—é–±–∏—Ç–µ–ª–∏: 165-175 —à–∞–≥–æ–≤/–º–∏–Ω\n"
                   "‚Ä¢ –≠–ª–∏—Ç–Ω—ã–µ –±–µ–≥—É–Ω—ã: 180-200 —à–∞–≥–æ–≤/–º–∏–Ω\n\n"
                   "–ü–æ—á–µ–º—É –≤–∞–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞:\n"
                   "‚Ä¢ –ú–µ–Ω—å—à–µ –≤—Ä–µ–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –∑–µ–º–ª—ë–π\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å—É—Å—Ç–∞–≤—ã\n"
                   "‚Ä¢ –£–ª—É—á—à–∞–µ—Ç—Å—è –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ\n"
                   "‚Ä¢ –ú–µ–Ω—å—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è\n\n"
                   "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É:\n"
                   "‚Ä¢ –ë–µ–≥–∞–π—Ç–µ –ø–æ–¥ –º–µ—Ç—Ä–æ–Ω–æ–º–æ–º (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –æ–Ω–ª–∞–π–Ω)\n"
                   "‚Ä¢ –°–ª—É—à–∞–π—Ç–µ –º—É–∑—ã–∫—É —Å –Ω—É–∂–Ω—ã–º BPM\n"
                   "‚Ä¢ –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–æ–π\n"
                   "‚Ä¢ –ù–µ —É–¥–ª–∏–Ω—è–π—Ç–µ —à–∞–≥ –Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–æ ‚Äî —ç—Ç–æ –ø—Ä–∏–¥—ë—Ç —Å–∞–º–æ\n\n"
                   "–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç: –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ —à–∞–≥–∏ –∑–∞ 15 —Å–µ–∫—É–Ω–¥ –∏ —É–º–Ω–æ–∂—å—Ç–µ –Ω–∞ 4. –ù–æ—Ä–º–∞ –¥–ª—è —Ç–µ–º–ø–∞ 5 –º–∏–Ω/–∫–º ‚Äî –æ–∫–æ–ª–æ 175.",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 24,
        "title": "ü•§ –ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è",
        "content": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∏—Ç—å –≤–æ –≤—Ä–µ–º—è –±–µ–≥–∞?\n\n"
                   "–î–æ –±–µ–≥–∞:\n"
                   "‚Ä¢ –ó–∞ 2-3 —á–∞—Å–∞: 400-600 –º–ª –≤–æ–¥—ã\n"
                   "‚Ä¢ –ó–∞ 15-20 –º–∏–Ω: 150-200 –º–ª\n"
                   "‚Ä¢ –ú–æ—á–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–≤–µ—Ç–ª–æ-–∂—ë–ª—Ç–æ–π\n\n"
                   "–í–æ –≤—Ä–µ–º—è –±–µ–≥–∞ (–∂–∞—Ä–∫–∞—è –ø–æ–≥–æ–¥–∞, —Ç–µ–º–ø –º–µ–¥–ª–µ–Ω–Ω–µ–µ 6 –º–∏–Ω/–∫–º):\n"
                   "‚Ä¢ 400-800 –º–ª –≤ —á–∞—Å\n"
                   "‚Ä¢ –ü–µ–π—Ç–µ –Ω–µ–±–æ–ª—å—à–∏–º–∏ –≥–ª–æ—Ç–∫–∞–º–∏ –∫–∞–∂–¥—ã–µ 15-20 –º–∏–Ω\n"
                   "‚Ä¢ –ù–µ –∂–¥–∏—Ç–µ –∂–∞–∂–¥—ã ‚Äî –æ–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É–∂–µ –ø—Ä–∏ 2% –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏—è\n\n"
                   "–ü–æ—Å–ª–µ –±–µ–≥–∞:\n"
                   "‚Ä¢ 1,5 –ª –≤–æ–¥—ã –Ω–∞ 1 –∫–≥ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–≥–æ –≤–µ—Å–∞\n"
                   "‚Ä¢ –í–æ—Å–ø–æ–ª–Ω—è–π—Ç–µ —Å–æ–ª–∏ (–∏–∑–æ—Ç–æ–Ω–∏–∫ –∏–ª–∏ —Å–æ–ª—ë–Ω–∞—è –µ–¥–∞)\n\n"
                   "–ü—Ä–∏–∑–Ω–∞–∫–∏ –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏—è:\n"
                   "‚Ä¢ –ñ–∞–∂–¥–∞, —Å—É—Ö–æ—Å—Ç—å –≤–æ —Ä—Ç—É\n"
                   "‚Ä¢ –¢—ë–º–Ω–∞—è –º–æ—á–∞\n"
                   "‚Ä¢ –ì–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ, —Å–ª–∞–±–æ—Å—Ç—å\n"
                   "‚Ä¢ –°—É–¥–æ—Ä–æ–≥–∏\n\n"
                   "–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ø–µ–π—Ç–µ –¥–æ, –≤–æ –≤—Ä–µ–º—è –∏ –ø–æ—Å–ª–µ. –ù–µ –∂–¥–∏—Ç–µ –∂–∞–∂–¥—ã!",
        "category": "–ø–∏—Ç–∞–Ω–∏–µ"
    },
    {
        "id": 25,
        "title": "üèîÔ∏è –¢—Ä–µ–π–ª—Ä–∞–Ω–Ω–∏–Ω–≥",
        "content": "–ß–µ–º —Ç—Ä–µ–π–ª—Ä–∞–Ω–Ω–∏–Ω–≥ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —à–æ—Å—Å–µ–π–Ω–æ–≥–æ –±–µ–≥–∞?\n\n"
                   "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–π–ª–∞:\n"
                   "‚Ä¢ –†–µ–ª—å–µ—Ñ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è\n"
                   "‚Ä¢ –ú—ã—à—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É (–≤–∫–ª—é—á–∞—é—Ç—Å—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã)\n"
                   "‚Ä¢ –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å—É—Å—Ç–∞–≤—ã –≤—ã—à–µ (–º—è–≥–∫–∏–π –≥—Ä—É–Ω—Ç –ª—É—á—à–µ, —á–µ–º –∞—Å—Ñ–∞–ª—å—Ç)\n"
                   "‚Ä¢ –°–µ—Ä–¥—Ü–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–µ–µ –∏–∑-–∑–∞ –≤—ã—Å–æ—Ç—ã –∏ –Ω–∞–±–æ—Ä–∞\n\n"
                   "–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:\n"
                   "‚Ä¢ –í—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ 2-3 –º–µ—Ç—Ä–∞ ahead\n"
                   "‚Ä¢ –†—É–∫–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ —Å–ø—É—Å–∫–∞—Ö)\n"
                   "‚Ä¢ –ù–∞ —Å–ø—É—Å–∫–∞—Ö: –∫–æ—Ä–æ—Ç–∫–∏–π —à–∞–≥, –∫–æ—Ä–ø—É—Å —á—É—Ç—å –Ω–∞–∑–∞–¥\n"
                   "‚Ä¢ –ù–∞ –ø–æ–¥—ä—ë–º–∞—Ö: —ç–∫–æ–Ω–æ–º—å—Ç–µ —Å–∏–ª—ã, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ —à–∞–≥ —Ä–∞–Ω—å—à–µ\n\n"
                   "–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞:\n"
                   "‚Ä¢ –¢—Ä–µ–π–ª–æ–≤—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º –ø—Ä–æ—Ç–µ–∫—Ç–æ—Ä–æ–º\n"
                   "‚Ä¢ –ü–∞–ª–∫–∏ (–¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏–π)\n"
                   "‚Ä¢ –í–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º—ã–π —Ä—é–∫–∑–∞–∫\n"
                   "‚Ä¢ –ó–∞–ø–∞—Å –µ–¥—ã, –∞–ø—Ç–µ—á–∫–∞, —Å–≤–∏—Å—Ç–æ–∫\n\n"
                   "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–±–µ–≥–∏: UTMB (–®–≤–µ–π—Ü–∞—Ä–∏—è), Transgrancanaria (–ò—Å–ø–∞–Ω–∏—è), The North Face (–°–®–ê).",
        "category": "—ç–∫—Å—Ç—Ä–∏–º"
    },
    {
        "id": 26,
        "title": "üí™ –°–∏–ª–æ–≤—ã–µ –¥–ª—è –±–µ–≥—É–Ω–æ–≤",
        "content": "–ö–∞–∫–∏–µ —Å–∏–ª–æ–≤—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω—É–∂–Ω—ã –±–µ–≥—É–Ω—É?\n\n"
                   "–ü–æ—á–µ–º—É —Å–∏–ª–∞ –≤–∞–∂–Ω–∞:\n"
                   "‚Ä¢ –£–ª—É—á—à–∞–µ—Ç –±–µ–≥–æ–≤—É—é —ç–∫–æ–Ω–æ–º–∏—é –Ω–∞ 4-8%\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ç—Ä–∞–≤–º\n"
                   "‚Ä¢ –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∂–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ —Ç–æ–π –∂–µ –ß–°–°\n"
                   "‚Ä¢ –£–∫—Ä–µ–ø–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∫–∞–Ω–∏\n\n"
                   "–¢–æ–ø-5 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –¥–ª—è –±–µ–≥—É–Ω–æ–≤:\n"
                   "1. –ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è (–≥–ª—É–±–æ–∫–∏–µ, —Å–æ —à—Ç–∞–Ω–≥–æ–π –∏–ª–∏ –≥–∞–Ω—Ç–µ–ª—è–º–∏)\n"
                   "2. –í—ã–ø–∞–¥—ã (—Ö–æ–¥—å–±–∞ –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–Ω—ã–µ)\n"
                   "3. –ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–æ–∫ (–∏–∫—Ä–æ–Ω–æ–∂–Ω—ã–µ)\n"
                   "4. –ü–ª–∞–Ω–∫–∞ (–∫–æ—Ä –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)\n"
                   "5. –Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç–∏–∫ (—è–≥–æ–¥–∏—Ü—ã)\n\n"
                   "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:\n"
                   "‚Ä¢ 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é\n"
                   "‚Ä¢ –ü–æ—Å–ª–µ –±–µ–≥–∞ –∏–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ–Ω—å\n"
                   "‚Ä¢ 3-4 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 8-12 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π\n"
                   "‚Ä¢ –ù–µ –¥–æ –æ—Ç–∫–∞–∑–∞ ‚Äî –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ 1-2 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –≤ –∑–∞–ø–∞—Å–µ\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –±–µ–≥—É–Ω—ã, –¥–æ–±–∞–≤–∏–≤—à–∏–µ —Å–∏–ª–æ–≤—ã–µ, —É–ª—É—á—à–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 5 –∫–º –Ω–∞ 45 —Å–µ–∫—É–Ω–¥ –∑–∞ 10 –Ω–µ–¥–µ–ª—å!",
        "category": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
    },
    {
        "id": 27,
        "title": "üå°Ô∏è –ë–µ–≥ –≤ –∂–∞—Ä—É",
        "content": "–ö–∞–∫ –±–µ–≥–∞—Ç—å, –∫–æ–≥–¥–∞ –Ω–∞ —É–ª–∏—Ü–µ +30¬∞C?\n\n"
                   "–í–ª–∏—è–Ω–∏–µ –∂–∞—Ä—ã:\n"
                   "‚Ä¢ –ö–∞–∂–¥—ã–π –≥—Ä–∞–¥—É—Å –≤—ã—à–µ 15¬∞C —Å–Ω–∏–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 1-1,5%\n"
                   "‚Ä¢ –ü—É–ª—å—Å –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞ 5-10 —É–¥–∞—Ä–æ–≤ –ø—Ä–∏ —Ç–æ–π –∂–µ —Å–∫–æ—Ä–æ—Å—Ç–∏\n"
                   "‚Ä¢ –ü–æ—Ç–æ–æ—Ç–¥–µ–ª–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 2-3 —Ä–∞–∑–∞\n"
                   "‚Ä¢ –†–∏—Å–∫ —Ç–µ–ø–ª–æ–≤–æ–≥–æ —É–¥–∞—Ä–∞ —Ä–µ–∞–ª—å–Ω—ã–π!\n\n"
                   "–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:\n"
                   "‚Ä¢ –ë–µ–≥–∞–π—Ç–µ —Ä–∞–Ω–æ —É—Ç—Ä–æ–º (–¥–æ 8:00) –∏–ª–∏ –≤–µ—á–µ—Ä–æ–º (–ø–æ—Å–ª–µ 20:00)\n"
                   "‚Ä¢ –°–Ω–∏–∂–∞–π—Ç–µ —Ç–µ–º–ø –Ω–∞ 30-60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–º\n"
                   "‚Ä¢ –ü–µ–π—Ç–µ –≤–æ–¥—É –∫–∞–∂–¥—ã–µ 10-15 –º–∏–Ω—É—Ç\n"
                   "‚Ä¢ –õ—ë–≥–∫–∞—è —Å–≤–µ—Ç–ª–∞—è –æ–¥–µ–∂–¥–∞, —à–ª—è–ø–∞/–∫–µ–ø–∫–∞\n"
                   "‚Ä¢ –°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–π –∫—Ä–µ–º SPF 50+\n"
                   "‚Ä¢ –°–ª—É—à–∞–π—Ç–µ —Ç–µ–ª–æ ‚Äî –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ = –æ—Å—Ç–∞–Ω–æ–≤–∫–∞\n\n"
                   "–ê–∫–∫–ª–∏–º–∞—Ç–∏–∑–∞—Ü–∏—è:\n"
                   "‚Ä¢ 10-14 –¥–Ω–µ–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –±–µ–≥–∞ –≤ –∂–∞—Ä—É –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞—é—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏—é\n"
                   "‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑–º –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—Ç–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –∏ –æ—Ö–ª–∞–∂–¥–∞—Ç—å—Å—è –ª—É—á—à–µ\n\n"
                   "–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∂–∞—Ä–∞ (+35¬∞C+): –ª—É—á—à–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –≤ –∑–∞–ª –∏–ª–∏ –Ω–∞ –±–µ–≥–æ–≤—É—é –¥–æ—Ä–æ–∂–∫—É.",
        "category": "—Å–µ–∑–æ–Ω"
    },
    {
        "id": 28,
        "title": "üèÉ –£–ª—å—Ç—Ä–∞–º–∞—Ä–∞—Ñ–æ–Ω",
        "content": "–ß—Ç–æ —Ç–∞–∫–æ–µ —É–ª—å—Ç—Ä–∞–º–∞—Ä–∞—Ñ–æ–Ω –∏ –∫–∞–∫ –∫ –Ω–µ–º—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è?\n\n"
                   "–£–ª—å—Ç—Ä–∞–º–∞—Ä–∞—Ñ–æ–Ω ‚Äî –ª—é–±–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª–∏–Ω–Ω–µ–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö 42,195 –∫–º.\n\n"
                   "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏:\n"
                   "‚Ä¢ 50 –∫–º ‚Äî ¬´–ø–æ–ª—É—É–ª—å—Ç—Ä–∞¬ª\n"
                   "‚Ä¢ 50 –º–∏–ª—å (80 –∫–º)\n"
                   "‚Ä¢ 100 –∫–º\n"
                   "‚Ä¢ 100 –º–∏–ª—å (161 –∫–º)\n"
                   "‚Ä¢ –ú–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–µ –≥–æ–Ω–∫–∏ (6 –¥–Ω–µ–π, 250 –∫–º)\n\n"
                   "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:\n"
                   "‚Ä¢ –û–±—ä—ë–º: —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–±–µ–∂–∞—Ç—å 50+ –∫–º –≤ –æ–¥–Ω—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\n"
                   "‚Ä¢ –í—Ä–µ–º—è: 6-12 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞\n"
                   "‚Ä¢ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞: –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏—è—Ö\n"
                   "‚Ä¢ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è: —É–º–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å ¬´–º—É–∫–∞–º–∏¬ª\n\n"
                   "–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –≥–æ–Ω–∫–µ:\n"
                   "‚Ä¢ –ù–∞—á–∏–Ω–∞–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º —Ö–æ—Ç–∏—Ç–µ —Ñ–∏–Ω–∏—à–∏—Ä–æ–≤–∞—Ç—å\n"
                   "‚Ä¢ –ï—à—å—Ç–µ –∫–∞–∂–¥—ã–µ 30-45 –º–∏–Ω—É—Ç\n"
                   "‚Ä¢ –ú–µ–Ω—è–π—Ç–µ –æ–±—É–≤—å –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏—è—Ö (–≤–æ–ª–¥—ã—Ä–∏)\n"
                   "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–º–æ–≥–∞—é—â–∏–µ —Ä—É–∫–∏ (crew)\n\n"
                   "–ó–Ω–∞–º–µ–Ω–∏—Ç—ã–µ —É–ª—å—Ç—Ä—ã: Western States (100 –º–∏–ª—å, –°–®–ê), Comrades (89 –∫–º, –Æ–ê–†), Spartathlon (246 –∫–º, –ì—Ä–µ—Ü–∏—è).",
        "category": "—ç–∫—Å—Ç—Ä–∏–º"
    },
    {
        "id": 29,
        "title": "üéØ –¢–µ–º–ø–æ–≤—ã–π –±–µ–≥",
        "content": "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ–º–ø–æ–≤—ã–π –±–µ–≥ –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?\n\n"
                   "–¢–µ–º–ø–æ–≤—ã–π –±–µ–≥ ‚Äî –±–µ–≥ –≤ ¬´–∑–æ–Ω–µ –ª—ë–≥–∫–æ–≥–æ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞¬ª, —Ç–µ–º–ø –∫–æ—Ç–æ—Ä—ã–π –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å 40-60 –º–∏–Ω—É—Ç.\n\n"
                   "–¶–µ–ª–∏ —Ç–µ–º–ø–æ–≤–æ–≥–æ –±–µ–≥–∞:\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–∏–µ –∞—ç—Ä–æ–±–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏\n"
                   "‚Ä¢ –£–ª—É—á—à–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–µ–≥–∞—Ç—å –¥–æ–ª—å—à–µ\n"
                   "‚Ä¢ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ¬´—É–º–µ–Ω–∏—è —Ç–µ—Ä–ø–µ—Ç—å¬ª\n\n"
                   "–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π —Ç–µ–º–ø:\n"
                   "‚Ä¢ –û—â—É—â–µ–Ω–∏–µ: ¬´–±—ã–ª–æ –±—ã —Å–ª–æ–∂–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å, –Ω–æ –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å –ø–∞—Ä—É —Å–ª–æ–≤¬ª\n"
                   "‚Ä¢ –¢–µ—Å—Ç: —Å–ø–æ—Å–æ–±–Ω—ã –±–µ–∂–∞—Ç—å 60 –º–∏–Ω—É—Ç –≤ —ç—Ç–æ–º —Ç–µ–º–ø–µ –≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º –∫–æ–º—Ñ–æ—Ä—Ç–µ\n"
                   "‚Ä¢ –ü—Ä–∞–≤–∏–ª–æ: —Ç–µ–º–ø –Ω–∞ 15-20 —Å–µ–∫/–∫–º –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º —Ç–µ–º–ø –Ω–∞ 10 –∫–º\n\n"
                   "–ü—Ä–æ–≥—Ä–∞–º–º–∞:\n"
                   "‚Ä¢ –ù–∞—á–∏–Ω–∞—é—â–∏–º: 20-30 –º–∏–Ω —Ç–µ–º–ø–∞ + —Ä–∞–∑–º–∏–Ω–∫–∞/–∑–∞–º–∏–Ω–∫–∞\n"
                   "‚Ä¢ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º: 40-60 –º–∏–Ω –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —Ç–µ–º–ø–∞\n"
                   "‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é\n\n"
                   "–í–∞–∂–Ω–æ: —Ç–µ–º–ø–æ–≤—ã–π –±–µ–≥ ‚Äî –Ω–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã! –≠—Ç–æ –Ω–µ —Å–ø—Ä–∏–Ω—Ç, –∞ —É—Å—Ç–æ–π—á–∏–≤—ã–π —Ç–µ–º–ø. –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å ‚Äî –≤—ã —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ.",
        "category": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
    },
    {
        "id": 30,
        "title": "üßò –î—ã—Ö–∞–Ω–∏–µ –ø—Ä–∏ –±–µ–≥–µ",
        "content": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥—ã—à–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –±–µ–≥–∞?\n\n"
                   "–ë–∞–∑–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞:\n"
                   "‚Ä¢ –í–¥–æ—Ö —á–µ—Ä–µ–∑ –Ω–æ—Å + —Ä–æ—Ç (–æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)\n"
                   "‚Ä¢ –í—ã–¥–æ—Ö —á–µ—Ä–µ–∑ —Ä–æ—Ç (–≥–ª—É–±–æ–∫–∏–π, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–π)\n"
                   "‚Ä¢ –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ: –æ–±—ã—á–Ω–æ 2:2 (–≤–¥–æ—Ö –Ω–∞ 2 —à–∞–≥–∞, –≤—ã–¥–æ—Ö –Ω–∞ 2)\n"
                   "‚Ä¢ –ü—Ä–∏ —É—Å–∫–æ—Ä–µ–Ω–∏–∏: 2:1 –∏–ª–∏ 3:1\n\n"
                   "–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:\n"
                   "‚Ä¢ –î—ã—Ö–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –Ω–æ—Å (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫–∏—Å–ª–æ—Ä–æ–¥–∞)\n"
                   "‚Ä¢ –°–ª–∏—à–∫–æ–º –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å –≥—Ä—É–¥–∏)\n"
                   "‚Ä¢ –ó–∞–¥–µ—Ä–∂–∫–∞ –¥—ã—Ö–∞–Ω–∏—è –ø—Ä–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏\n"
                   "‚Ä¢ –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–ª–µ—á –∏ —à–µ–∏\n\n"
                   "–¢–µ—Ö–Ω–∏–∫–∞ –¥–∏–∞—Ñ—Ä–∞–≥–º–∞–ª—å–Ω–æ–≥–æ –¥—ã—Ö–∞–Ω–∏—è:\n"
                   "‚Ä¢ –î—ã—à–∏—Ç–µ ¬´–∂–∏–≤–æ—Ç–æ–º¬ª, –∞ –Ω–µ –≥—Ä—É–¥—å—é\n"
                   "‚Ä¢ –ü—Ä–∏ –≤–¥–æ—Ö–µ –∂–∏–≤–æ—Ç —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è\n"
                   "‚Ä¢ –ü—Ä–∏ –≤—ã–¥–æ—Ö–µ –∂–∏–≤–æ—Ç –æ–ø—É—Å–∫–∞–µ—Ç—Å—è\n"
                   "‚Ä¢ –†—É–∫–∞ –Ω–∞ –∂–∏–≤–æ—Ç–µ –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å\n\n"
                   "–°–æ–≤–µ—Ç: –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –¥—ã—Ö–∞–Ω–∏–µ –≤ –ø–æ–∫–æ–µ. 5 —Å–µ–∫—É–Ω–¥ –≤–¥–æ—Ö, 5 —Å–µ–∫—É–Ω–¥ –≤—ã–¥–æ—Ö. –°–º–æ–∂–µ—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ –±–µ–≥–µ ‚Äî —Å–Ω–∏–∑–∏—Ç—Å—è —É—Å—Ç–∞–ª–æ—Å—Ç—å!",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 31,
        "title": "üëü –í—ã–±–æ—Ä –∫—Ä–æ—Å—Å–æ–≤–æ–∫",
        "content": "–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –±–µ–≥–æ–≤—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏?\n\n"
                   "–¢–∏–ø—ã –ø—Ä–æ–Ω–∞—Ü–∏–∏ (–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–æ–ø—ã):\n"
                   "‚Ä¢ –ì–∏–ø–æ–ø—Ä–æ–Ω–∞—Ü–∏—è (supination): —Å—Ç–æ–ø–∞ ¬´—É—Ö–æ–¥–∏—Ç¬ª –Ω–∞—Ä—É–∂—É ‚Äî –Ω—É–∂–Ω–∞ –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è\n"
                   "‚Ä¢ –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è: –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –±–µ–≥ ‚Äî –ª—é–±—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏\n"
                   "‚Ä¢ –ì–∏–ø–µ—Ä–ø—Ä–æ–Ω–∞—Ü–∏—è (overpronation): —Å—Ç–æ–ø–∞ ¬´–∑–∞–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è¬ª –≤–Ω—É—Ç—Ä—å ‚Äî –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n\n"
                   "–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ—é –ø—Ä–æ–Ω–∞—Ü–∏—é:\n"
                   "‚Ä¢ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–∑–Ω–æ—Å —Å—Ç–∞—Ä—ã—Ö –∫—Ä–æ—Å—Å–æ–≤–æ–∫\n"
                   "‚Ä¢ –°–¥–µ–ª–∞–π—Ç–µ ¬´–º–æ–∫—Ä—ã–π —Ç–µ—Å—Ç¬ª –Ω–∞ –±—É–º–∞–≥–µ\n"
                   "‚Ä¢ –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –≤ –±–µ–≥–æ–≤–æ–º –º–∞–≥–∞–∑–∏–Ω–µ\n\n"
                   "–¢–∏–ø—ã –∫—Ä–æ—Å—Å–æ–≤–æ–∫:\n"
                   "‚Ä¢ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ: –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –≤–µ—Å 250-350 –≥\n"
                   "‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç–Ω—ã–µ: –ª–µ–≥—á–µ, –º–µ–Ω—å—à–µ –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏–∏ (–¥–ª—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π)\n"
                   "‚Ä¢ –¢—Ä–µ–π–ª–æ–≤—ã–µ: –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø—Ä–æ—Ç–µ–∫—Ç–æ—Ä, –∑–∞—â–∏—Ç–∞\n"
                   "‚Ä¢ –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ: –º–∏–Ω–∏–º—É–º –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å—Ç–æ–ø—ã\n\n"
                   "–ó–∞–º–µ–Ω–∏—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–µ 500-800 –∫–º –∏–ª–∏ —Ä–∞–∑ –≤ 8-12 –º–µ—Å—è—Ü–µ–≤. –ü—Ä–∏–∑–Ω–∞–∫–∏ –∏–∑–Ω–æ—Å–∞: —Å—Ç—ë—Ä—Ç–∞ –ø–æ–¥–æ—à–≤–∞, –Ω–µ—Ç –æ—Ç—Å–∫–æ–∫–∞, –±–æ–ª–∏ –≤ –Ω–æ–≥–∞—Ö.",
        "category": "–≥–∞–¥–∂–µ—Ç—ã"
    },
    {
        "id": 32,
        "title": "üìÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –±–µ–≥",
        "content": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –±–µ–≥ –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç?\n\n"
                   "–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –±–µ–≥ ‚Äî —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –æ—Ç–¥—ã—Ö–∞.\n\n"
                   "–í–∏–¥—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:\n"
                   "‚Ä¢ –ö–æ—Ä–æ—Ç–∫–∏–µ: 200-400 –º –±—ã—Å—Ç—Ä–æ, —Å—Ç–æ–ª—å–∫–æ –∂–µ –∏–ª–∏ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –æ—Ç–¥—ã—Ö–∞\n"
                   "‚Ä¢ –î–ª–∏–Ω–Ω—ã–µ: 800-1600 –º –≤ —Ç–µ–º–ø–µ 5 –∫–º, –º–µ–¥–ª–µ–Ω–Ω—ã–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–≥ –º–µ–∂–¥—É\n"
                   "‚Ä¢ –ü–∏—Ä–∞–º–∏–¥–∞: 200-400-800-400-200 –º (–Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏–µ –∏ —Å–ø–∞–¥)\n\n"
                   "–ü–æ–ª—å–∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:\n"
                   "‚Ä¢ –ü–æ–≤—ã—à–∞—é—Ç –ú–ü–ö (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∫–∏—Å–ª–æ—Ä–æ–¥–∞) –Ω–∞ 5-10%\n"
                   "‚Ä¢ –£–ª—É—á—à–∞—é—Ç —ç–∫–æ–Ω–æ–º–∏—é –±–µ–≥–∞\n"
                   "‚Ä¢ –°–∂–∏–≥–∞—é—Ç –±–æ–ª—å—à–µ –∫–∞–ª–æ—Ä–∏–π –∑–∞ –º–µ–Ω—å—à–µ–µ –≤—Ä–µ–º—è\n"
                   "‚Ä¢ –†–∞–∑–≤–∏–≤–∞—é—Ç ¬´–≤–∑—Ä—ã–≤–Ω—É—é¬ª —Å–∏–ª—É\n\n"
                   "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö (–§–∞—Ä—Ç–ª–µ–∫):\n"
                   "‚Ä¢ –†–∞–∑–º–∏–Ω–∫–∞ 10 –º–∏–Ω\n"
                   "‚Ä¢ 5√ó1 –º–∏–Ω –±—ã—Å—Ç—Ä—ã–π –±–µ–≥ + 2 –º–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π\n"
                   "‚Ä¢ –ó–∞–º–∏–Ω–∫–∞ 10 –º–∏–Ω\n\n"
                   "–í–∞–∂–Ω–æ: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã ‚Äî —Ç—è–∂—ë–ª–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞. –î–µ–ª–∞–π—Ç–µ 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –Ω–µ –ø–æ–¥—Ä—è–¥. –°–ª—É—à–∞–π—Ç–µ —Ç–µ–ª–æ!",
        "category": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
    },
    {
        "id": 33,
        "title": "üè† –ë–µ–≥ –Ω–∞ –±–µ–≥–æ–≤–æ–π –¥–æ—Ä–æ–∂–∫–µ",
        "content": "–ë–µ–≥–æ–≤–∞—è –¥–æ—Ä–æ–∂–∫–∞ vs —É–ª–∏—Ü–∞ ‚Äî –≤ —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞?\n\n"
                   "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–æ—Ä–æ–∂–∫–∏:\n"
                   "‚Ä¢ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–≥–æ–¥—ã\n"
                   "‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ç–µ–º–ø –∏ –Ω–∞–∫–ª–æ–Ω\n"
                   "‚Ä¢ –ú—è–≥—á–µ –¥–ª—è —Å—É—Å—Ç–∞–≤–æ–≤ (–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è)\n"
                   "‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ—Ç –º–∞—à–∏–Ω)\n"
                   "‚Ä¢ –£–¥–æ–±–Ω–æ –ø–∏—Ç—å –∏ –≤—ã—Ç–∏—Ä–∞—Ç—å –ø–æ—Ç\n\n"
                   "–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –¥–æ—Ä–æ–∂–∫–∏:\n"
                   "‚Ä¢ –ù–µ—Ç –≤—Å—Ç—Ä–µ—á–Ω–æ–≥–æ –≤–µ—Ç—Ä–∞ (—Ö—É–∂–µ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è)\n"
                   "‚Ä¢ –î—Ä—É–≥–∞—è –±–∏–æ–º–µ—Ö–∞–Ω–∏–∫–∞ (–Ω–µ—Ç —Ç–æ–ª—á–∫–∞ ¬´–æ—Ç –∑–µ–º–ª–∏¬ª)\n"
                   "‚Ä¢ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–ª–æ–∂–Ω–µ–µ\n"
                   "‚Ä¢ –ù–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –±–∞–ª–∞–Ω—Å–∞\n\n"
                   "–ö–∞–∫ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É:\n"
                   "‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞–∫–ª–æ–Ω 1-2% –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞\n"
                   "‚Ä¢ –ù–µ –¥–µ—Ä–∂–∏—Ç–µ—Å—å –∑–∞ –ø–æ—Ä—É—á–Ω–∏\n"
                   "‚Ä¢ –î–µ–ª–∞–π—Ç–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è\n"
                   "‚Ä¢ –î–æ–±–∞–≤—å—Ç–µ —Å–∏–ª–æ–≤—ã–µ –æ—Ç–¥–µ–ª—å–Ω–æ\n\n"
                   "–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ –≥–æ—Ç–æ–≤–∏—Ç–µ—Å—å –∫ —É–ª–∏—á–Ω–æ–º—É –∑–∞–±–µ–≥—É ‚Äî 70-80% —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ —É–ª–∏—Ü–µ.",
        "category": "—Ç–µ—Ö–Ω–∏–∫–∞"
    },
    {
        "id": 34,
        "title": "üß¨ –ì–µ–Ω–µ—Ç–∏–∫–∞ –∏ –±–µ–≥",
        "content": "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–Ω–∞ –≥–µ–Ω–µ—Ç–∏–∫–∞ –≤ –±–µ–≥–µ?\n\n"
                   "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:\n"
                   "‚Ä¢ –ì–µ–Ω–µ—Ç–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç 50-70% –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏\n"
                   "‚Ä¢ –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –ø–∏—Ç–∞–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ\n\n"
                   "–ì–µ–Ω—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –±–µ–≥:\n"
                   "‚Ä¢ ACTN3 (¬´–≥–µ–Ω —Å–∫–æ—Ä–æ—Å—Ç–∏¬ª) ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ –±—ã—Å—Ç—Ä—ã–µ –º—ã—à–µ—á–Ω—ã–µ –≤–æ–ª–æ–∫–Ω–∞\n"
                   "‚Ä¢ ACE (¬´–≥–µ–Ω –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏¬ª) ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∏—Å–ª–æ—Ä–æ–¥–∞\n"
                   "‚Ä¢ PPARGC1A ‚Äî –º–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏ (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —ç–Ω–µ—Ä–≥–∏–∏)\n\n"
                   "–ß—Ç–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏:\n"
                   "‚Ä¢ –î–∞–∂–µ —Å ¬´–ø–ª–æ—Ö–∏–º–∏¬ª –≥–µ–Ω–∞–º–∏ –º–æ–∂–Ω–æ —Å—Ç–∞—Ç—å —Ö–æ—Ä–æ—à–∏–º –ª—é–±–∏—Ç–µ–ª–µ–º\n"
                   "‚Ä¢ –ú–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –≤ 2-3 —Ä–∞–∑–∞ –ø—Ä–∏ –∞—ç—Ä–æ–±–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö\n"
                   "‚Ä¢ –°–µ—Ä–¥—Ü–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ —É –≤—Å–µ—Ö\n"
                   "‚Ä¢ –ë–µ–≥–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è —É–ª—É—á—à–∞–µ—Ç—Å—è —Å –æ–ø—ã—Ç–æ–º\n\n"
                   "–í—ã–≤–æ–¥: –≥–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–æ—Ç–æ–ª–æ–∫, –Ω–æ –¥–≤–µ—Ä—å –æ—Ç–∫—Ä—ã–≤–∞—é—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ª—é–¥–µ–π –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ —Å–≤–æ–µ–≥–æ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞!",
        "category": "–ø–æ–ª—å–∑–∞"
    },
    {
        "id": 35,
        "title": "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
        "content": "–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–∏—à–ª–æ—Å—å –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏?\n\n"
                   "–ü—Ä–∏—á–∏–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:\n"
                   "‚Ä¢ –ë–æ–ª–µ–∑–Ω—å (–û–†–í–ò, —Ç—Ä–∞–≤–º–∞, –ø–µ—Ä–µ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)\n"
                   "‚Ä¢ –û—Ç–ø—É—Å–∫ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞\n"
                   "‚Ä¢ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞\n\n"
                   "–ü—Ä–∞–≤–∏–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä—ã–≤–∞:\n"
                   "‚Ä¢ 1 –Ω–µ–¥–µ–ª—è –ø–µ—Ä–µ—Ä—ã–≤–∞ = 1 –Ω–µ–¥–µ–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n"
                   "‚Ä¢ –ù–∞—á–Ω–∏—Ç–µ —Å 50% –æ–±—ã—á–Ω–æ–≥–æ –æ–±—ä—ë–º–∞\n"
                   "‚Ä¢ –¢–µ–º–ø –Ω–∞ 30-60 —Å–µ–∫/–∫–º –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –¥–æ –ø–µ—Ä–µ—Ä—ã–≤–∞\n"
                   "‚Ä¢ –ü–µ—Ä–≤—ã–µ 2-3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –ª—ë–≥–∫–∏–π –∫—Ä–æ—Å—Å\n"
                   "‚Ä¢ –ù–µ —Ñ–æ—Ä—Å–∏—Ä—É–π—Ç–µ ‚Äî —Ñ–æ—Ä–º—É –º–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –∑–∞ –Ω–µ–¥–µ–ª–∏, –∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞ –º–µ—Å—è—Ü—ã\n\n"
                   "–ï—Å–ª–∏ –ø–µ—Ä–µ—Ä—ã–≤ –±—ã–ª 2-4 –Ω–µ–¥–µ–ª–∏:\n"
                   "‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –ú–ü–ö –Ω–∞ 4-14%\n"
                   "‚Ä¢ –ú—ã—à–µ—á–Ω–∞—è —Å–∏–ª–∞ –ø–æ—á—Ç–∏ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è\n"
                   "‚Ä¢ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å—Ç—Ä–∞–¥–∞–µ—Ç –º–µ–Ω—å—à–µ\n\n"
                   "–ï—Å–ª–∏ –ø–µ—Ä–µ—Ä—ã–≤ –±—ã–ª –±–æ–ª–µ–µ –º–µ—Å—è—Ü–∞:\n"
                   "‚Ä¢ –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –Ω—É–ª—è, –Ω–æ —Å –±–∞–∑–æ–≤—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏\n"
                   "‚Ä¢ –ü–µ—Ä–≤—ã–µ 2 –Ω–µ–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ —Ö–æ–¥—å–±–∞ –∏ –ª—ë–≥–∫–∏–π –±–µ–≥\n"
                   "‚Ä¢ –¢–µ—Ä–ø–µ–Ω–∏–µ –≤–∞–∂–Ω–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏!",
        "category": "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
    },
]


def get_random_fact(exclude_ids: list = None) -> dict:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç –∏–∑ –±–∞–∑—ã.
    exclude_ids: —Å–ø–∏—Å–æ–∫ ID —Ñ–∞–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å (–¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–æ–≤).
    """
    if exclude_ids is None:
        exclude_ids = []
    
    available_facts = [f for f in facts_db if f["id"] not in exclude_ids]
    
    if not available_facts:
        # –ï—Å–ª–∏ –≤—Å–µ —Ñ–∞–∫—Ç—ã –ø–æ–∫–∞–∑–∞–Ω—ã ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ª—é–±–æ–π
        exclude_ids = []
        available_facts = facts_db
    
    return random.choice(available_facts)


def format_fact_message(fact: dict) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ñ–∞–∫—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç."""
    message = f"üìö **{fact['title']}**\n\n"
    message += f"{fact['content']}\n\n"
    
    if fact.get('category'):
        categories = {
            "–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å": "üõ°Ô∏è",
            "–º–æ—Ç–∏–≤–∞—Ü–∏—è": "üí™",
            "—Ç–µ—Ö–Ω–∏–∫–∞": "‚ö°",
            "–ø–∏—Ç–∞–Ω–∏–µ": "ü•ó",
            "–ø–æ–ª—å–∑–∞": "‚ú®",
            "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏": "üèãÔ∏è",
            "—ç–∫—Å—Ç—Ä–∏–º": "üî•",
            "–≥–∞–¥–∂–µ—Ç—ã": "üì±",
            "—Å–µ–∑–æ–Ω": "‚ùÑÔ∏è",
            "–º–∞—Ä–∞—Ñ–æ–Ω": "üèÜ",
            "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ": "üßò"
        }
        emoji = categories.get(fact['category'], "üìå")
        message += f"{emoji} **{fact['category'].upper()}**"
    
    return message


def get_sticker_for_context(message_text: str, message_type: str, is_female: bool = False) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å—Ç–∏–∫–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.
    """
    if not STICKER_COLLECTIONS:
        return None
    
    # –î–ª—è –¥–µ–≤—É—à–µ–∫ ‚Äî –æ—Å–æ–±–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–ª–∏—Ä—Ç–∞
    if is_female and message_type in ["greeting", "flirt", "praise"]:
        collection = STICKER_COLLECTIONS.get("flirt", STICKER_COLLECTIONS["default"])
    else:
        collection = STICKER_COLLECTIONS.get(message_type, STICKER_COLLECTIONS["default"])
    
    if collection:
        return random.choice(collection)
    return None


# ============== FACTS COMMAND ==============
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# {user_id: [fact_id_1, fact_id_2, ...]}
user_seen_facts = {}


def get_gif_for_context(message_text: str, message_type: str, is_female: bool = False) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é –≥–∏—Ñ–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.
    """
    if not GIF_COLLECTIONS:
        return None
    
    # –î–ª—è –¥–µ–≤—É—à–µ–∫ ‚Äî –æ—Å–æ–±–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–ª–∏—Ä—Ç–∞
    if is_female and message_type in ["greeting", "flirt", "praise"]:
        collection = GIF_COLLECTIONS.get("flirt", GIF_COLLECTIONS["default"])
    else:
        collection = GIF_COLLECTIONS.get(message_type, GIF_COLLECTIONS["default"])
    
    if collection:
        return random.choice(collection)
    return None


async def send_toxic_response(context, chat_id: int, text: str = None, sticker: str = None, gif: str = None):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç: —Ç–µ–∫—Å—Ç + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å—Ç–∏–∫–µ—Ä/–≥–∏—Ñ–∫—É.
    """
    # –°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç–∏–∫–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
    if sticker:
        try:
            await context.bot.send_sticker(chat_id=chat_id, sticker=sticker)
            logger.info(f"[TOXIC-MEDIA] –°—Ç–∏–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω")
        except Exception as e:
            logger.error(f"[TOXIC-MEDIA] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞: {e}")
    
    # –ü–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≥–∏—Ñ–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å
    if gif:
        try:
            await context.bot.send_animation(chat_id=chat_id, animation=gif)
            logger.info(f"[TOXIC-MEDIA] –ì–∏—Ñ–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
        except Exception as e:
            logger.error(f"[TOXIC-MEDIA] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–∏—Ñ–∫–∏: {e}")
    
    # –ù–∞–∫–æ–Ω–µ—Ü –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –µ—Å–ª–∏ –µ—Å—Ç—å
    if text:
        await context.bot.send_message(chat_id=chat_id, text=text)


def detect_message_type_for_media(message_text: str) -> str:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞/–≥–∏—Ñ–∫–∏.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã —Å–ª–æ–≤, —á—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å ¬´–ø—Ä–∏–≤–µ—Ç¬ª –≤ ¬´–Ω–µ–ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–π¬ª –∏ —Ç.–ø.
    """
    if not message_text:
        return "default"
    
    text_lower = message_text.lower().strip()
    # –°–ª–æ–≤–∞ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —á—Ç–æ–±—ã –Ω–µ –º–∞—Ç—á–∏—Ç—å ¬´–ø—Ä–∏–≤–µ—Ç¬ª –≤–Ω—É—Ç—Ä–∏ ¬´–Ω–µ–ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–π¬ª
    words = set(re.findall(r"\w+", text_lower))
    
    # –§—Ä–∞–∑—ã –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–æ–≤ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ —Ç–µ–∫—Å—Ç—É
    def has_phrase(*phrases):
        return any(p in text_lower for p in phrases)
    
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ —Ñ—Ä–∞–∑—ã
    greeting_words = {"–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "hello", "hi", "hey", "–ø—Ä–∏–≤–µ—Ç–∏–∫", "–∑–¥–∞—Ä–æ–≤–∞", "—Ö–∞–π"}
    if words & greeting_words or has_phrase("–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä"):
        return "greeting"
    
    # –°–º–µ—Ö (—Ü–µ–ª—ã–µ —Å–ª–æ–≤–∞/—Ç–æ–∫–µ–Ω—ã)
    laugh_words = {"—Ö–∞—Ö–∞", "–∞—Ö–∞—Ö", "–ª–æ–ª", "—Ä–∂—É", "—Å–º–µ—à–Ω–æ", "—Ö–∞—Ö", "—Ö–µ—Ö", "–∫–µ–∫"}
    if words & laugh_words or "üòÇ" in message_text or "ü§£" in message_text:
        return "laugh"
    
    # –ì—Ä—É—Å—Ç—å / –∂–∞–ª–æ–±—ã
    sad_words = {"–≥—Ä—É—Å—Ç–Ω–æ", "–ø–µ—á–∞–ª—å–Ω–æ", "–æ–±–∏–¥–Ω–æ", "–∂–∞–ª—å", "—É—Å—Ç–∞–ª", "—É—Å—Ç–∞–ª–∞", "–ø–ª–æ—Ö–æ", "—Å–∫—É—á–Ω–æ", "–≥—Ä—É—Å—Ç—å", "–ø–ª–∞—á—É"}
    if words & sad_words:
        return "sad"
    
    # –§–ª–∏—Ä—Ç / –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã
    flirt_words = {"–∫—Ä–∞—Å–∞–≤–∏—Ü–∞", "–∫—Ä–∞—Å–∏–≤—ã–π", "–∫—Ä–∞—Å–∏–≤–∞—è", "–ª—é–±–ª—é", "–º–∏–ª—ã–π", "–º–∏–ª–∞—è", "–æ—á–∞—Ä–æ–≤–∞—Ç–µ–ª—å–Ω"}
    if words & flirt_words or has_phrase("—Ç—ã –∫—Ä–∞—Å–∏–≤", "—Ç—ã –∫—Ä–∞—Å–∏–≤–∞", "–∫–∞–∫–∞—è –∫—Ä–∞—Å–æ—Ç"):
        return "flirt"
    
    # –¢–æ–∫—Å–∏—á–Ω—ã–µ —Å–ª–æ–≤–∞ (—Ä—É–≥–∞–Ω—å, –¥—É—à–Ω–∏–ª–∞)
    toxic_words = {"–¥—É—Ä–∞–∫", "–∏–¥–∏–æ—Ç", "—Ç—É–ø–æ–π", "–±–µ—Å–∏—à—å", "–Ω–∞–¥–æ–µ–ª", "–æ—Ç—Å—Ç–∞–Ω—å", "–∑–∞—Ç–∫–Ω–∏—Å—å", "–∫–æ–∑—ë–ª", "–≥–∞–¥", "–±–µ—Å–∏—Ç—å"}
    if words & toxic_words:
        return "toxic"
    
    # –ü–æ—Ö–≤–∞–ª–∞
    praise_words = {"–º–æ–ª–æ–¥–µ—Ü", "–∫–ª–∞—Å—Å–Ω—ã–π", "–∫—Ä—É—Ç–æ–π", "—Å—É–ø–µ—Ä", "–æ—Ç–ª–∏—á–Ω–æ", "–ª—É—á—à–∏–π", "—É–º–Ω–∏—á–∫–∞", "–∫—Ä–∞—Å–∞–≤—á–∏–∫"}
    if words & praise_words:
        return "praise"
    
    # –£–¥–∏–≤–ª–µ–Ω–∏–µ (–±–µ–∑ ¬´–Ω–∏—á–µ–≥–æ¬ª –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî —á–∞—Å—Ç–æ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ)
    wow_words = {"–æ–≥–æ", "–≤–∞—É", "—Å–µ—Ä—å—ë–∑–Ω–æ", "–Ω–∏—Ñ–∏–≥–∞", "–æ—Ñ–∏–≥–µ—Ç—å", "–æ–±–∞–ª–¥–µ—Ç—å"}
    if words & wow_words or has_phrase("–Ω–∏—á–µ–≥–æ —Å–µ–±–µ", "—á—ë –∑–∞", "–∫–∞–∫ —Ç–∞–∫"):
        return "wow"
    
    # –ü–æ–¥–∫–æ–ª—ã / —à—É—Ç–∫–∏
    roast_words = {"—à—É—Ç–∫–∞", "–ø—Ä–∏–∫–æ–ª", "—Ä–æ—Ñ–ª", "—Å–º–µ—à–Ω–æ–π", "—Å–º–µ—à–Ω–∞—è", "–ø–æ–¥–∫–æ–ª"}
    if words & roast_words:
        return "roast"
    
    return "default"


# ============== –§–ê–ö–¢–´ –û –ë–ï–ì–ï ==============

# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# {user_id: [fact_id_1, fact_id_2, ...]}
user_seen_facts = {}

# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ ID —Å–æ–æ–±—â–µ–Ω–∏—è —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º —Ñ–∞–∫—Ç–æ–º –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
daily_fact_message_id = None


async def send_daily_fact():
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ –ò–ò —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫."""
    global daily_fact_message_id
    
    try:
        if YANDEX_AVAILABLE:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∞–∫—Ç —á–µ—Ä–µ–∑ YandexGPT —Å –ø—Ä–æ—Å—å–±–æ–π –¥–∞—Ç—å —Å—Å—ã–ª–∫—É - –° –ü–û–õ–ù–´–ú –¢–†–ï–®–ï–ú!
            prompt = """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É –∏ —Ñ–∏—Ç–Ω–µ—Å—É. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –û–î–ò–ù –î–ò–ö–ò–ô, –®–û–ö–ò–†–£–Æ–©–ò–ô —Ñ–∞–∫—Ç –æ –±–µ–≥–µ —Å –ü–û–õ–ù–´–ú –¢–†–ï–®–ï–ú!

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–∫—Ç—É:
- –®–û–ö–ò–†–£–Æ–©–ò–ô –∏ –ù–ï–û–ñ–ò–î–ê–ù–ù–´–ô ‚Äî —á—Ç–æ–±—ã —á–µ–ª—é—Å—Ç—å —É–ø–∞–ª–∞
- –ü–æ–ª–Ω–∞—è –∂–µ—Å—Ç—å: —Å–º–µ—Ä—Ç–∏, —Ç—Ä–∞–≤–º—ã, –±–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã, –¥–∏–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –° –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ –∏–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º–∏
- –ú–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–π ‚Äî –Ω–µ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ –ø–æ–ª—å–∑—É –±–µ–≥–∞
- –û–ë–™–Å–ú: 4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, —Å–æ—á–Ω—ã–π –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π

–¢–ò–ü–´ –¢–†–ï–®–ê:
- –õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–º–∏—Ä–∞–ª–∏ –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –±–µ–≥–∞—Ç—å
- –ë–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã: 100 –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤ –∑–∞ 100 –¥–Ω–µ–π, –±–µ–≥ 500 –∫–º –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ò—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ —Ç—Ä–∞–≤–º—ã: –±–µ–∂–∞–ª —Å –ø–µ—Ä–µ–ª–æ–º–æ–º –Ω–æ–≥–∏ 20 –∫–º
- –ñ—É—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 1 –∫ 100000 ‚Äî —Å–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –±–µ–≥: –ø—É—Å—Ç—ã–Ω–∏, –≥–æ—Ä—ã,ÂåóÊûÅ, –≤—É–ª–∫–∞–Ω—ã
- –ë–æ–¥–∏–±–∏–ª–¥–∏–Ω–≥: –∫–∞–∫ –±–µ–≥ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –∫–æ–ª–µ–Ω–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!)
- –ü—Å–∏—Ö—É—à–∫–∞: –º–∞—Ä–∞—Ñ–æ–Ω—Ü—ã –≤–∏–¥—è—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –Ω–∞ 30 –∫–º
- –ü–æ–ª–Ω—ã–π —Ç—Ä–µ—à –≤ –ø–∏—Ç–∞–Ω–∏–∏: –±–µ–≥ –Ω–∞ –ø—É—Å—Ç–æ–π –∂–µ–ª—É–¥–æ–∫ 80 –∫–º

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: "–ò—Å—Ç–æ—á–Ω–∏–∫: [–Ω–∞–∑–≤–∞–Ω–∏–µ](—Å—Å—ã–ª–∫–∞)"
–ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏ –∏–∑ Runners World, Scientific American, PubMed, outsideonline.com, –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –Ω–∞–¥—ë–∂–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:
**üî• –®–û–ö–ò–†–£–Æ–©–ò–ô –ó–ê–ì–û–õ–û–í–û–ö**

–°–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Ñ–∞–∫—Ç–∞ (4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–æ–π).

–ò—Å—Ç–æ—á–Ω–∏–∫: [–Ω–∞–∑–≤–∞–Ω–∏–µ](—Å—Å—ã–ª–∫–∞)"""

            try:
                payload = {
                    "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
                    "completionOptions": {"stream": False, "temperature": 1.0, "maxTokens": "650"},
                    "messages": [
                        {"role": "system", "text": "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."},
                        {"role": "user", "text": prompt}
                    ]
                }
                
                async with httpx.AsyncClient(timeout=15.0) as client:
                    response = await client.post(
                        "https://llm.api.cloud.yandex.net/foundationModels/v1/completion",
                        json=payload,
                        headers={"Authorization": f"Api-Key {YANDEX_API_KEY}", "Content-Type": "application/json"}
                    )
                    response.raise_for_status()
                    data = response.json()
                    
                    if data and 'result' in data and 'alternatives' in data['result']:
                        fact_content = data['result']['alternatives'][0]['message']['text']
                        logger.info(f"[FACTS] –ò–ò —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –Ω–æ–≤—ã–π —Ñ–∞–∫—Ç")
                        
                        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
                        fact_text = f"üì¢ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ**\n\n{fact_content}"
                        
                        message = await application.bot.send_message(
                            chat_id=CHAT_ID,
                            text=fact_text,
                            parse_mode="Markdown",
                        )
                        
                        daily_fact_message_id = message.message_id
                        logger.info(f"[FACTS] –§–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω")
                        
            except Exception as api_error:
                logger.error(f"[FACTS] –û—à–∏–±–∫–∞ API: {api_error}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç")
                # –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç
                fact = get_random_fact()
                fact_text = format_fact_message(fact)
                fact_text = f"üì¢ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ**\n\n{fact_text}\n\n_(–ò—Å—Ç–æ—á–Ω–∏–∫: –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞)_"
                
                message = await application.bot.send_message(
                    chat_id=CHAT_ID,
                    text=fact_text,
                    parse_mode="Markdown",
                )
                
                daily_fact_message_id = message.message_id
        else:
            # –ï—Å–ª–∏ –ò–ò –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∞–∑—É
            fact = get_random_fact()
            fact_text = format_fact_message(fact)
            fact_text = f"üì¢ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ**\n\n{fact_text}"
            
            message = await application.bot.send_message(
                chat_id=CHAT_ID,
                text=fact_text,
                parse_mode="Markdown",
            )
            
            daily_fact_message_id = message.message_id
            
    except Exception as e:
        logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞: {e}")


async def facts_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /facts ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ –ò–ò —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫"""
    try:
        user_id = update.message.from_user.id
        user_name = update.message.from_user.full_name or update.message.from_user.username or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º "–ø–µ—á–∞—Ç–∞–µ—Ç" —Å—Ç–∞—Ç—É—Å
        await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
        
        if YANDEX_AVAILABLE:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∞–∫—Ç —á–µ—Ä–µ–∑ YandexGPT - —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ—à–µ–º!
            prompt = """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É –∏ —Ñ–∏—Ç–Ω–µ—Å—É. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –û–î–ò–ù –¥–∏–∫–∏–π, —à–æ–∫–∏—Ä—É—é—â–∏–π, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ —Å –ü–û–õ–ù–´–ú –¢–†–ï–®–ï–ú!

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–∫—Ç—É:
- –®–û–ö–ò–†–£–Æ–©–ò–ô –∏ –ù–ï–û–ñ–ò–î–ê–ù–ù–´–π ‚Äî —Ç–∞–∫–æ–π, —á—Ç–æ–±—ã —á–µ–ª—é—Å—Ç—å —É–ø–∞–ª–∞
- –ü–æ–ª–Ω–∞—è –∂–µ—Å—Ç—å: —Å–º–µ—Ä—Ç–∏, —Ç—Ä–∞–≤–º—ã, –±–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã, –¥–∏–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –° –ö–û–ù–ö–†–ï–¢–ù–´–ú–ò —Ü–∏—Ñ—Ä–∞–º–∏ –∏ —Ñ–∞–∫—Ç–∞–º–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- –ú–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–π ‚Äî –Ω–µ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ –ø–æ–ª—å–∑—É –±–µ–≥–∞
- –û–ë–™–Å–ú: 4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, —Å–æ—á–Ω—ã–π –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π

–¢–ò–ü–´ –¢–†–ï–®–ê, –∫–æ—Ç–æ—Ä—ã–µ –∏—â–µ–º:
- –õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–º–∏—Ä–∞–ª–∏ –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –±–µ–≥–∞—Ç—å
- –ë–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã: 100 –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤ –∑–∞ 100 –¥–Ω–µ–π, –±–µ–≥ 500 –∫–º –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ò—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ —Ç—Ä–∞–≤–º—ã: –±–µ–∂–∞–ª —Å –ø–µ—Ä–µ–ª–æ–º–æ–º –Ω–æ–≥–∏ 20 –∫–º
- –ñ—É—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 1 –∫ 100000 ‚Äî —Å–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –±–µ–≥: –ø—É—Å—Ç—ã–Ω–∏, –≥–æ—Ä—ã,ÂåóÊûÅ, –≤—É–ª–∫–∞–Ω—ã
- –ë–æ–¥–∏–±–∏–ª–¥–∏–Ω–≥: –∫–∞–∫ –±–µ–≥ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –∫–æ–ª–µ–Ω–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!)
- –ü—Å–∏—Ö—É—à–∫–∞: –º–∞—Ä–∞—Ñ–æ–Ω—Ü—ã –≤–∏–¥—è—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –Ω–∞ 30 –∫–º
- –ü–æ–ª–Ω—ã–π —Ç—Ä–µ—à –≤ –ø–∏—Ç–∞–Ω–∏–∏: –±–µ–≥ –Ω–∞ –ø—É—Å—Ç–æ–π –∂–µ–ª—É–¥–æ–∫ 80 –∫–º

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: "–ò—Å—Ç–æ—á–Ω–∏–∫: [–Ω–∞–∑–≤–∞–Ω–∏–µ](—Å—Å—ã–ª–∫–∞)"
–ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏ –∏–∑ Runners World, Scientific American, PubMed, healthline.com, outsideonline.com, –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –Ω–∞–¥—ë–∂–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:
**üî• –®–û–ö–ò–†–£–Æ–©–ò–ô –ó–ê–ì–û–õ–û–í–û–ö**

–°–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Ñ–∞–∫—Ç–∞ (4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–æ–π).

–ò—Å—Ç–æ—á–Ω–∏–∫: [–Ω–∞–∑–≤–∞–Ω–∏–µ](—Å—Å—ã–ª–∫–∞)"""

            try:
                payload = {
                    "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
                    "completionOptions": {"stream": False, "temperature": 1.0, "maxTokens": "650"},
                    "messages": [
                        {"role": "system", "text": "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."},
                        {"role": "user", "text": prompt}
                    ]
                }
                
                async with httpx.AsyncClient(timeout=15.0) as client:
                    response = await client.post(
                        "https://llm.api.cloud.yandex.net/foundationModels/v1/completion",
                        json=payload,
                        headers={"Authorization": f"Api-Key {YANDEX_API_KEY}", "Content-Type": "application/json"}
                    )
                    response.raise_for_status()
                    data = response.json()
                    
                    if data and 'result' in data and 'alternatives' in data['result']:
                        fact_content = data['result']['alternatives'][0]['message']['text']
                        
                        # –°–æ–∑–¥–∞—ë–º inline-–∫–Ω–æ–ø–∫—É –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–∫—Ç–∞
                        from telegram import InlineKeyboardButton, InlineKeyboardMarkup
                        keyboard = [
                            [InlineKeyboardButton("üîÑ –ï—â—ë —Ñ–∞–∫—Ç", callback_data=f"fact_ai_more_{user_id}")]
                        ]
                        reply_markup = InlineKeyboardMarkup(keyboard)
                        
                        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–∫—Ç —Å –∫–Ω–æ–ø–∫–æ–π
                        await context.bot.send_message(
                            chat_id=update.effective_chat.id,
                            text=f"üìö **{user_name}, –≤–æ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ:**\n\n{fact_content}",
                            parse_mode="Markdown",
                            reply_markup=reply_markup,
                        )
                        
                        logger.info(f"[FACTS] –ò–ò-—Ñ–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_name}")
                        
            except Exception as api_error:
                logger.error(f"[FACTS] –û—à–∏–±–∫–∞ API: {api_error}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç")
                # –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç
                await send_static_fact(update, context, user_id, user_name)
        else:
            # –ï—Å–ª–∏ –ò–ò –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∞–∑—É
            await send_static_fact(update, context, user_id, user_name)
            
    except Exception as e:
        logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –∫–æ–º–∞–Ω–¥—ã facts: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑!",
        )
    
    try:
        await update.message.delete()
    except Exception:
        pass


async def send_static_fact(update: Update, context: ContextTypes.DEFAULT_TYPE, user_id: int, user_name: str):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç –∏–∑ –±–∞–∑—ã (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)"""
    from telegram import InlineKeyboardButton, InlineKeyboardMarkup
    
    fact = get_random_fact()
    fact_text = format_fact_message(fact)
    
    keyboard = [
        [InlineKeyboardButton("üîÑ –ï—â—ë —Ñ–∞–∫—Ç", callback_data=f"fact_static_more_{user_id}")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"üìö **{user_name}, –≤–æ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ –±–µ–≥–µ:**\n\n{fact_text}\n\n_(–ò—Å—Ç–æ—á–Ω–∏–∫: –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π)_",
        parse_mode="Markdown",
        reply_markup=reply_markup,
    )


async def handle_facts_ai_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É '–ï—â—ë —Ñ–∞–∫—Ç' –¥–ª—è –ò–ò-—Ñ–∞–∫—Ç–æ–≤"""
    try:
        query = update.callback_query
        user_id = query.from_user.id
        user_name = query.from_user.full_name or query.from_user.username or "–î—Ä—É–≥"
        
        if query.data.startswith("fact_ai_more_"):
            callback_user_id = int(query.data.split("_")[-1])
            if callback_user_id != user_id:
                await query.answer(text="–≠—Ç–æ –Ω–µ –≤–∞—à–∞ –∫–Ω–æ–ø–∫–∞! üòè", show_alert=True)
                return
            
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "–∑–∞–≥—Ä—É–∑–∫–∞"
            await query.answer(text="–ì–µ–Ω–µ—Ä–∏—Ä—É—é –Ω–æ–≤—ã–π —Ñ–∞–∫—Ç...", show_alert=False)
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º "–ø–µ—á–∞—Ç–∞–µ—Ç" —Å—Ç–∞—Ç—É—Å
            await context.bot.send_chat_action(chat_id=query.message.chat.id, action="typing")
            
            if YANDEX_AVAILABLE:
                prompt = """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É –∏ —Ñ–∏—Ç–Ω–µ—Å—É. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –û–î–ò–ù –î–ò–ö–ò–ô, –®–û–ö–ò–†–£–Æ–©–ò–ô —Ñ–∞–∫—Ç –æ –±–µ–≥–µ —Å –ü–û–õ–ù–´–ú –¢–†–ï–®–ï–ú, –∫–æ—Ç–æ—Ä—ã–π –û–¢–õ–ò–ß–ê–ï–¢–°–Ø –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö!

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–∫—Ç—É:
- –®–û–ö–ò–†–£–Æ–©–ò–ô –∏ –ù–ï–û–ñ–ò–î–ê–ù–ù–´–ô ‚Äî —á—Ç–æ–±—ã —á–µ–ª—é—Å—Ç—å —É–ø–∞–ª–∞
- –ü–û–õ–ù–ê–Ø –ñ–ï–°–¢–¨: —Å–º–µ—Ä—Ç–∏, —Ç—Ä–∞–≤–º—ã, –±–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã, –¥–∏–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –° –ö–û–ù–ö–†–ï–¢–ù–´–ú–ò —Ü–∏—Ñ—Ä–∞–º–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- –ú–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–π ‚Äî –Ω–µ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ –ø–æ–ª—å–∑—É –±–µ–≥–∞
- –û–ë–™–Å–ú: 4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, —Å–æ—á–Ω—ã–π –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π

–¢–ò–ü–´ –¢–†–ï–®–ê:
- –õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–º–∏—Ä–∞–ª–∏ –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –±–µ–≥–∞—Ç—å
- –ë–µ–∑—É–º–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã: 100 –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤ –∑–∞ 100 –¥–Ω–µ–π, –±–µ–≥ 500 –∫–º –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ò—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ —Ç—Ä–∞–≤–º—ã: –±–µ–∂–∞–ª —Å –ø–µ—Ä–µ–ª–æ–º–æ–º –Ω–æ–≥–∏ 20 –∫–º
- –ñ—É—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 1 –∫ 100000 ‚Äî —Å–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –±–µ–≥: –ø—É—Å—Ç—ã–Ω–∏, –≥–æ—Ä—ã,ÂåóÊûÅ, –≤—É–ª–∫–∞–Ω—ã
- –ë–æ–¥–∏–±–∏–ª–¥–∏–Ω–≥: –∫–∞–∫ –±–µ–≥ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –∫–æ–ª–µ–Ω–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!)
- –ü—Å–∏—Ö—É—à–∫–∞: –º–∞—Ä–∞—Ñ–æ–Ω—Ü—ã –≤–∏–¥—è—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –Ω–∞ 30 –∫–º
- –ü–æ–ª–Ω—ã–π —Ç—Ä–µ—à –≤ –ø–∏—Ç–∞–Ω–∏–∏: –±–µ–≥ –Ω–∞ –ø—É—Å—Ç–æ–π –∂–µ–ª—É–¥–æ–∫ 80 –∫–º

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
**üî• –®–û–ö–ò–†–£–Æ–©–ò–ô –ó–ê–ì–û–õ–û–í–û–ö**

–°–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Ñ–∞–∫—Ç–∞ (4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–æ–π).

–ò—Å—Ç–æ—á–Ω–∏–∫: [–Ω–∞–∑–≤–∞–Ω–∏–µ](—Å—Å—ã–ª–∫–∞)"""

                try:
                    payload = {
                        "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
                        "completionOptions": {"stream": False, "temperature": 1.0, "maxTokens": "650"},
                        "messages": [
                            {"role": "system", "text": "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–≥—É. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏."},
                            {"role": "user", "text": prompt}
                        ]
                    }
                    
                    async with httpx.AsyncClient(timeout=15.0) as client:
                        response = await client.post(
                            "https://llm.api.cloud.yandex.net/foundationModels/v1/completion",
                            json=payload,
                            headers={"Authorization": f"Api-Key {YANDEX_API_KEY}", "Content-Type": "application/json"}
                        )
                        response.raise_for_status()
                        data = response.json()
                        
                        if data and 'result' in data and 'alternatives' in data['result']:
                            fact_content = data['result']['alternatives'][0]['message']['text']
                            
                            from telegram import InlineKeyboardButton, InlineKeyboardMarkup
                            keyboard = [
                                [InlineKeyboardButton("üîÑ –ï—â—ë —Ñ–∞–∫—Ç", callback_data=f"fact_ai_more_{user_id}")]
                            ]
                            reply_markup = InlineKeyboardMarkup(keyboard)
                            
                            await query.edit_message_text(
                                text=f"üìö **{user_name}, –≤–æ—Ç –µ—â—ë –æ–¥–∏–Ω —Ñ–∞–∫—Ç:**\n\n{fact_content}",
                                parse_mode="Markdown",
                                reply_markup=reply_markup,
                            )
                            
                            logger.info(f"[FACTS] –ù–æ–≤—ã–π –ò–ò-—Ñ–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}")
                            
                except Exception as api_error:
                    logger.error(f"[FACTS] –û—à–∏–±–∫–∞ API –≤ callback: {api_error}")
                    await query.answer(text="–û—à–∏–±–∫–∞ –ò–ò! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞", show_alert=True)
                    
    except Exception as e:
        logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ AI callback: {e}")


async def facts_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –≤ 16:00."""
    global bot_running
    
    logger.info("[FACTS] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–∞–∫—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω (16:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)")
    
    while bot_running:
        try:
            now = datetime.now(MOSCOW_TZ)
            
            # –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–π 16:00
            target_hour = 16
            target_minute = 0
            
            # –ï—Å–ª–∏ —Å–µ–π—á–∞—Å –µ—â–µ –Ω–µ 16:00 - –∂–¥—ë–º –¥–æ —Å–µ–≥–æ–¥–Ω—è 16:00
            if now.hour < target_hour or (now.hour == target_hour and now.minute < target_minute):
                target_time = now.replace(hour=target_hour, minute=target_minute, second=0, microsecond=0)
            else:
                # –ò–Ω–∞—á–µ –∂–¥—ë–º –¥–æ –∑–∞–≤—Ç—Ä–∞ 16:00
                target_time = (now + timedelta(days=1)).replace(hour=target_hour, minute=target_minute, second=0, microsecond=0)
            
            seconds_until_target = (target_time - now).total_seconds()
            
            logger.info(f"[FACTS] –°–ª–µ–¥—É—é—â–∏–π —Ñ–∞–∫—Ç —á–µ—Ä–µ–∑ {seconds_until_target/3600:.1f} —á–∞—Å–æ–≤")
            
            # –ñ–¥—ë–º –¥–æ –Ω—É–∂–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
            await asyncio.sleep(seconds_until_target)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –±–æ—Ç
            if not bot_running:
                break
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–∫—Ç
            if application and hasattr(application, 'bot') and application.bot:
                try:
                    await send_daily_fact()
                except Exception as e:
                    logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–∫—Ç–∞: {e}")
            
            # –ñ–¥—ë–º –º–∏–Ω—É—Ç—É —á—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
            await asyncio.sleep(60)
            
        except asyncio.CancelledError:
            logger.info("[FACTS] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–∞–∫—Ç–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
            break
        except Exception as e:
            logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ: {e}")
            # –ü—Ä–∏ –æ—à–∏–±–∫–µ –∂–¥—ë–º —á–∞—Å –∏ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞
            await asyncio.sleep(3600)
async def handle_facts_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É '–ï—â—ë —Ñ–∞–∫—Ç'"""
    try:
        query = update.callback_query
        user_id = query.from_user.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –æ—Ç —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if query.data.startswith("fact_more_"):
            callback_user_id = int(query.data.split("_")[-1])
            if callback_user_id != user_id:
                await query.answer(text="–≠—Ç–æ –Ω–µ –≤–∞—à–∞ –∫–Ω–æ–ø–∫–∞! üòè", show_alert=True)
                return
            
            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ—Ç
            if user_id not in user_seen_facts:
                user_seen_facts[user_id] = []
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∏ –ª–∏ –º—ã —É–∂–µ –≤—Å–µ —Ñ–∞–∫—Ç—ã
            if len(user_seen_facts[user_id]) >= len(facts_db):
                # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–Ω–∞—á–∞–ª–∞
                user_seen_facts[user_id] = []
                await query.answer(text="üîÑ –ù–æ–≤—ã–π –∫—Ä—É–≥ —Ñ–∞–∫—Ç–æ–≤!", show_alert=False)
            
            # –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–∫—Ç
            fact = get_random_fact(user_seen_facts[user_id])
            user_seen_facts[user_id].append(fact["id"])
            
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            fact_text = format_fact_message(fact)
            
            # –°–æ–∑–¥–∞—ë–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
            from telegram import InlineKeyboardButton, InlineKeyboardMarkup
            keyboard = [
                [InlineKeyboardButton("üîÑ –ï—â—ë —Ñ–∞–∫—Ç", callback_data=f"fact_more_{user_id}")]
            ]
            reply_markup = InlineKeyboardMarkup(keyboard)
            
            # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º —Ñ–∞–∫—Ç–æ–º
            await query.edit_message_text(
                text=fact_text,
                parse_mode="Markdown",
                reply_markup=reply_markup,
            )
            
            logger.info(f"[FACTS] –ù–æ–≤—ã–π —Ñ–∞–∫—Ç '{fact['title']}' –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}")
            
    except Exception as e:
        logger.error(f"[FACTS] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback: {e}")
        try:
            await query.answer(text="–û—à–∏–±–∫–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ /facts –∑–∞–Ω–æ–≤–æ", show_alert=True)
        except Exception:
            pass


async def generate_toxic_response_with_media(
    user_message: str, 
    user_name: str, 
    is_female: bool = False,
    include_media: bool = True
) -> dict:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å—Ç–∏–∫–µ—Ä–æ–º/–≥–∏—Ñ–∫–æ–π.
    –ì–∏—Ñ–∫–∏ –∏—â—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ GIPHY –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å: {'text': str, 'sticker': str, 'gif': str}
    """
    result = {
        'text': None,
        'sticker': None,
        'gif': None
    }
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç YandexGPT
    if YANDEX_AVAILABLE:
        try:
            # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –ø–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏
            base_personality = get_ai_personality_by_day()
            # –ï—Å–ª–∏ –ø—Ä–æ–º–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç {user_name}, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º
            try:
                system_prompt = base_personality.format(user_name=user_name)
            except KeyError:
                system_prompt = base_personality
            if is_female:
                system_prompt += "\n\n–í–ê–ñ–ù–û: –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –î–ï–í–£–®–ö–ò. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–π –ª—ë–≥–∫–∏–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –µ—ë –∫—Ä–∞—Å–æ—Ç–µ."
            
            payload = {
                "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
                "completionOptions": {"stream": False, "temperature": 0.7, "maxTokens": "650"},
                "messages": [
                    {"role": "system", "text": system_prompt},
                    {"role": "user", "text": user_message}
                ]
            }
            
            async with httpx.AsyncClient(timeout=10.0) as client:
                response = await client.post(
                    "https://llm.api.cloud.yandex.net/foundationModels/v1/completion",
                    json=payload,
                    headers={"Authorization": f"Api-Key {YANDEX_API_KEY}", "Content-Type": "application/json"}
                )
                response.raise_for_status()
                data = response.json()
                
                if data and 'result' in data and 'alternatives' in data['result']:
                    result['text'] = data['result']['alternatives'][0]['message']['text']
                    logger.info(f"[TOXIC-AI] –û—Ç–≤–µ—Ç –¥–ª—è {user_name}: {result['text'][:50]}...")
        
        except Exception as e:
            logger.error(f"[TOXIC-AI] –û—à–∏–±–∫–∞: {e}")
            result['text'] = f"ü§° –û—à–∏–±–∫–∞ –º–æ–∏—Ö –º–æ–∑–≥–æ–≤... –ù–æ —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –∫–ª–∞—Å—Å–Ω—ã–π, {user_name}!"
    else:
        result['text'] = random.choice([
            f"üòè –ù—É –ø—Ä–∏–≤–µ—Ç, {user_name}... –ß–µ–≥–æ –Ω–∞–¥–æ?",
            f"ü§° –û–ø—è—Ç—å —Ç—ã. –ù—É –¥–∞–≤–∞–π, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–π.",
            f"üôÑ –û, {user_name} —Ä–µ—à–∏–ª(–∞) –Ω–∞–ø–∏—Å–∞—Ç—å. –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ.",
        ])
    
    # –î–æ–±–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    if include_media:
        message_type = detect_message_type_for_media(user_message)

        # –í—Å–µ–≥–¥–∞ –ø–æ–¥–±–∏—Ä–∞–µ–º –º–µ–¥–∏–∞ –ø–æ —Ç–µ–º–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        gif_url = get_static_gif(message_type, is_female)
        if gif_url:
            result["gif"] = gif_url
            logger.info(f"[MEDIA] –í—ã–±—Ä–∞–Ω–∞ GIF –¥–ª—è —Ç–∏–ø–∞='{message_type}'")
        else:
            sticker_id = get_sticker_for_context(user_message, message_type, is_female)
            if not sticker_id:
                sticker_id = GLOBAL_STICKER_ID
            result["sticker"] = sticker_id
            logger.info(f"[MEDIA] –í—ã–±—Ä–∞–Ω —Å—Ç–∏–∫–µ—Ä –¥–ª—è —Ç–∏–ø–∞='{message_type}'")
    
    return result


from flask import Flask

# ============== GARMIN INTEGRATION ==============
try:
    import garminconnect  # type: ignore[import-untyped]
    from cryptography.fernet import Fernet  # type: ignore[import-untyped]
    GARMIN_AVAILABLE = True
except ImportError:
    GARMIN_AVAILABLE = False
    logger.warning("Garmin libraries not available. Install: pip install garminconnect cryptography")

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–∞—Ä–æ–ª–µ–π Garmin (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
GARMIN_ENCRYPTION_KEY = None

# ============== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ==============
BOT_TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")
if not BOT_TOKEN:
    raise ValueError("–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω!")

RENDER_URL = os.environ.get("RENDER_URL", "")

CHAT_ID = os.environ.get("CHAT_ID")
if not CHAT_ID:
    raise ValueError("CHAT_ID –Ω–µ –Ω–∞–π–¥–µ–Ω!")

try:
    CHAT_ID = int(CHAT_ID)
except ValueError:
    raise ValueError("CHAT_ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º!")

# GENERAL_CHAT_ID –¥–ª—è Events Tracker
GENERAL_CHAT_ID = os.environ.get("GENERAL_CHAT_ID")
if not GENERAL_CHAT_ID:
    GENERAL_CHAT_ID = CHAT_ID  # –ò—Å–ø–æ–ª—å–∑—É–µ–º CHAT_ID –µ—Å–ª–∏ GENERAL_CHAT_ID –Ω–µ –∑–∞–¥–∞–Ω

try:
    GENERAL_CHAT_ID = int(GENERAL_CHAT_ID)
except ValueError:
    GENERAL_CHAT_ID = int(CHAT_ID)

# ID —Ç–æ–ø–∏–∫–æ–≤ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏ –Ω–æ–≤–æ—Å—Ç–µ–π
EVENTS_TOPIC_ID = os.environ.get("EVENTS_TOPIC_ID", "")
if EVENTS_TOPIC_ID:
    try:
        EVENTS_TOPIC_ID = int(EVENTS_TOPIC_ID)
    except ValueError:
        logger.warning(f"[CONFIG] EVENTS_TOPIC_ID '{EVENTS_TOPIC_ID}' –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π")
        EVENTS_TOPIC_ID = None
else:
    EVENTS_TOPIC_ID = None

NEWS_TOPIC_ID = os.environ.get("NEWS_TOPIC_ID", "")
if NEWS_TOPIC_ID:
    try:
        NEWS_TOPIC_ID = int(NEWS_TOPIC_ID)
    except ValueError:
        logger.warning(f"[CONFIG] NEWS_TOPIC_ID '{NEWS_TOPIC_ID}' –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π")
        NEWS_TOPIC_ID = None
else:
    NEWS_TOPIC_ID = None

if pytz:
    MOSCOW_TZ = pytz.timezone("Europe/Moscow")
else:
    from zoneinfo import ZoneInfo
    MOSCOW_TZ = ZoneInfo("Europe/Moscow")
UTC_OFFSET = 3  # –ú–æ—Å–∫–≤–∞ = UTC+3

# ============== TELEGRAM CHANNEL PERSISTENCE ==============
# ID –∫–∞–Ω–∞–ª–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render Free)
DATA_CHANNEL_ID = os.environ.get("DATA_CHANNEL_ID", "")
if DATA_CHANNEL_ID:
    try:
        DATA_CHANNEL_ID = int(DATA_CHANNEL_ID)
    except ValueError:
        logger.warning(f"[PERSIST] DATA_CHANNEL_ID '{DATA_CHANNEL_ID}' –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ")
        DATA_CHANNEL_ID = ""

# –û–¢–î–ï–õ–¨–ù–´–ô –∫–∞–Ω–∞–ª –¥–ª—è –ß–ò–°–¢–û–ì–û —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –±–µ–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ –±–æ—Ç–∞)
# –ë–æ—Ç –±—É–¥–µ—Ç –±—Ä–∞—Ç—å –æ—Ç—Å—é–¥–∞ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤–æ–¥–æ–∫
STORAGE_CHANNEL_ID = os.environ.get("STORAGE_CHANNEL_ID", "")
if STORAGE_CHANNEL_ID:
    try:
        STORAGE_CHANNEL_ID = int(STORAGE_CHANNEL_ID)
    except ValueError:
        logger.warning(f"[STORAGE] STORAGE_CHANNEL_ID '{STORAGE_CHANNEL_ID}' –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π")
        STORAGE_CHANNEL_ID = ""

# –ú–∞—Ä–∫–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–Ω–∞–ª–µ (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
DATA_MARKERS = {
    "ratings": "#BOT_RATINGS",
    "runs": "#BOT_RUNS", 
    "birthdays": "#BOT_BIRTHDAYS",
    "daily": "#BOT_DAILY",
    "garmin_users": "#BOT_GARMIN_USERS",
    "night_mode": "#BOT_NIGHT_MODE",
    "active": "#BOT_ACTIVE",  # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    "history": "#BOT_HISTORY",  # –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
    "raw_messages": "#RAW_MESSAGES",  # –°—ã—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    "raw_runs": "#RAW_RUNS",  # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–≥–∞
    "raw_users": "#RAW_USERS"  # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
}

# –•—Ä–∞–Ω–∏–ª–∏—â–µ message_id –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
channel_message_ids = {}

# ============== FLASK ==============
app = Flask(__name__)


@app.route("/")
def home():
    return "Bot is running!"


@app.route("/health")
def health():
    return "OK"


def keepalive_ping_loop():
    """
    –ö–∞–∂–¥—ã–µ 14 –º–∏–Ω—É—Ç –ø–∏–Ω–≥—É–µ—Ç —Å–≤–æ–π –∂–µ /health, —á—Ç–æ–±—ã Render –Ω–µ —É—Å—ã–ø–ª—è–ª —Å–µ—Ä–≤–∏—Å
    –∏–∑-–∑–∞ ¬´–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞¬ª. URL –±–µ—Ä—ë—Ç—Å—è –∏–∑ RENDER_EXTERNAL_URL, RENDER_URL –∏–ª–∏ KEEPALIVE_URL.
    """
    import time as _time
    base_url = (
        os.environ.get("RENDER_EXTERNAL_URL")
        or os.environ.get("RENDER_URL")
        or os.environ.get("KEEPALIVE_URL")
        or ""
    ).rstrip("/")
    if not base_url:
        logger.info(
            "[KEEPALIVE] RENDER_EXTERNAL_URL / RENDER_URL / KEEPALIVE_URL –Ω–µ –∑–∞–¥–∞–Ω—ã ‚Äî —Å–∞–º–æ-–ø–∏–Ω–≥ –æ—Ç–∫–ª—é—á—ë–Ω. "
            "–í Render: Environment ‚Üí RENDER_URL –∏–ª–∏ KEEPALIVE_URL = https://—Ç–≤–æ–π-—Å–µ—Ä–≤–∏—Å.onrender.com"
        )
        return
    interval_sec = 14 * 60  # 14 –º–∏–Ω—É—Ç (Render —É—Å—ã–ø–ª—è–µ—Ç ~15 –º–∏–Ω –±–µ–∑ —Ç—Ä–∞—Ñ–∏–∫–∞)
    logger.info(f"[KEEPALIVE] –°–∞–º–æ-–ø–∏–Ω–≥ –∫–∞–∂–¥—ã–µ {interval_sec // 60} –º–∏–Ω ‚Üí {base_url}/health")
    _time.sleep(60)  # –ø–µ—Ä–≤—ã–π –ø–∏–Ω–≥ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞
    while True:
        try:
            r = httpx.get(f"{base_url}/health", timeout=10)
            if r.status_code == 200:
                logger.debug("[KEEPALIVE] –ü–∏–Ω–≥ OK")
            else:
                logger.warning(f"[KEEPALIVE] –ü–∏–Ω–≥ –≤–µ—Ä–Ω—É–ª {r.status_code}")
        except Exception as e:
            logger.warning(f"[KEEPALIVE] –û—à–∏–±–∫–∞ –ø–∏–Ω–≥–∞: {e}")
        _time.sleep(interval_sec)


def run_flask():
    # –ù–∞ Render –ø–æ—Ä—Ç –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è $PORT
    port = int(os.environ.get("PORT", 10000))
    logger.info(f"[FLASK] –ó–∞–ø—É—Å–∫ Flask –Ω–∞ –ø–æ—Ä—Ç—É {port}")
    logger.info(f"[FLASK] PORT env var: {os.environ.get('PORT', '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')}")
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º waitress –¥–ª—è production (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω), –∏–Ω–∞—á–µ Flask dev server
    try:
        from waitress import serve  # type: ignore[import-untyped]
        logger.info(f"[FLASK] –ò—Å–ø–æ–ª—å–∑—É–µ–º Waitress (production WSGI server)")
        # Waitress –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–µ–Ω –¥–ª—è Render –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç
        serve(app, host="0.0.0.0", port=port, threads=1, channel_timeout=120)
    except ImportError:
        logger.warning(f"[FLASK] Waitress –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º Flask dev server (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Render)")
        # Flask dev server –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Render
        app.run(host="0.0.0.0", port=port, debug=False, use_reloader=False)


# ============== TELEGRAM CHANNEL PERSISTENCE FUNCTIONS ==============
from typing import Any, Dict, Optional

async def save_to_channel(bot, data_type: str, data: Any) -> bool:
    """
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Telegram Channel.
    –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –µ—Å—Ç—å - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ.
    """
    global channel_message_ids

    if not DATA_CHANNEL_ID:
        return False

    try:
        marker = DATA_MARKERS.get(data_type, f"#BOT_{data_type.upper()}")
        json_data = json.dumps(data, ensure_ascii=False, indent=0)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ message_id –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
        msg_id = channel_message_ids.get(data_type)

        if msg_id:
            # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å —Ç–∞–π–º–∞—É—Ç–æ–º 5 —Å–µ–∫—É–Ω–¥)
            try:
                await asyncio.wait_for(
                    bot.edit_message_text(
                        chat_id=DATA_CHANNEL_ID,
                        message_id=msg_id,
                        text=f"{marker}\n\n{json_data}"
                    ),
                    timeout=5.0
                )
                logger.info(f"[PERSIST] –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} –≤ –∫–∞–Ω–∞–ª–µ (msg_id={msg_id})")
                return True
            except asyncio.TimeoutError:
                logger.warning(f"[PERSIST] –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ {data_type} (msg_id={msg_id})")
                return False
            except Exception as edit_error:
                # –í–æ–∑–º–æ–∂–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ - —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ
                logger.warning(f"[PERSIST] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å {data_type}, —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ")
                msg_id = None

        if not msg_id:
            # –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å —Ç–∞–π–º–∞—É—Ç–æ–º 5 —Å–µ–∫—É–Ω–¥)
            try:
                message = await asyncio.wait_for(
                    bot.send_message(
                        chat_id=DATA_CHANNEL_ID,
                        text=f"{marker}\n\n{json_data}"
                    ),
                    timeout=5.0
                )
                channel_message_ids[data_type] = message.message_id

                # –ó–∞–∫—Ä–µ–ø–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                try:
                    await bot.pin_chat_message(
                        chat_id=DATA_CHANNEL_ID,
                        message_id=message.message_id,
                        disable_notification=True
                    )
                except Exception:
                    pass

                logger.info(f"[PERSIST] –°–æ–∑–¥–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ {data_type} –≤ –∫–∞–Ω–∞–ª–µ (msg_id={message.message_id})")
                return True
            except asyncio.TimeoutError:
                logger.warning(f"[PERSIST] –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è {data_type}")
                return False

    except asyncio.TimeoutError:
        logger.warning(f"[PERSIST] –¢–∞–π–º–∞—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è {data_type}")
        return False
    except Exception as e:
        logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è {data_type}: {e}")
        return False

    return False


async def load_from_channel(bot, data_type: str) -> Optional[Any]:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram Channel.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Telegram API.
    """
    global channel_message_ids
    
    if not DATA_CHANNEL_ID:
        logger.warning(f"[PERSIST] DATA_CHANNEL_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è {data_type}")
        return None
    
    try:
        marker = DATA_MARKERS.get(data_type, f"#BOT_{data_type.upper()}")
        logger.info(f"[PERSIST] –ò—â–µ–º –¥–∞–Ω–Ω—ã–µ {data_type} —Å –º–∞—Ä–∫–µ—Ä–æ–º '{marker}'")
        
        # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ø–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É message_id —á–µ—Ä–µ–∑ API
        msg_id = channel_message_ids.get(data_type)
        logger.info(f"[PERSIST] –ò–∑–≤–µ—Å—Ç–Ω—ã–π msg_id –¥–ª—è {data_type}: {msg_id}")
        
        if msg_id:
            try:
                # –ò—Å–ø–æ–ª—å–∑—É–µ–º httpx –¥–ª—è –ø—Ä—è–º–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞
                bot_token = bot.token
                api_url = f"https://api.telegram.org/bot{bot_token}"
                
                async with httpx.AsyncClient() as client:
                    response = await client.post(
                        f"{api_url}/getChatMessage",
                        json={"chat_id": DATA_CHANNEL_ID, "message_id": msg_id},
                        timeout=10.0
                    )
                    
                    if response.status_code == 200:
                        data = response.json()
                        if data.get("ok") and data.get("result"):
                            from telegram import Message
                            message = Message.de_json(data["result"], bot)
                            
                            if message and message.text and marker in message.text:
                                json_str = message.text.replace(marker, "").strip()
                                if json_str.startswith("\n\n"):
                                    json_str = json_str[2:]
                                loaded_data = json.loads(json_str)
                                logger.info(f"[PERSIST] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} (–∏–∑–≤–µ—Å—Ç–Ω—ã–π msg_id)")
                                return loaded_data
            except Exception as e:
                logger.warning(f"[PERSIST] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ msg_id: {e}")
        
        # –ò—â–µ–º –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ API
        logger.info(f"[PERSIST] –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–∏—Å–∫—É –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞ (–ª–∏–º–∏—Ç 50)")
        
        try:
            bot_token = bot.token
            api_url = f"https://api.telegram.org/bot{bot_token}"
            
            async with httpx.AsyncClient() as client:
                response = await client.post(
                    f"{api_url}/getChatHistory",
                    json={"chat_id": DATA_CHANNEL_ID, "limit": 50},
                    timeout=30.0
                )
                
                if response.status_code != 200:
                    logger.warning(f"[PERSIST] API –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å {response.status_code}")
                    raise Exception(f"API error: {response.status_code}")
                
                data = response.json()
                
                if not data.get("ok"):
                    logger.warning(f"[PERSIST] API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {data.get('description')}")
                    # –ü—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getUpdates –∫–∞–∫ fallback
                    raise Exception(f"API error: {data.get('description')}")
                
                from telegram import Message
                messages = []
                if data.get("result") and isinstance(data["result"], list):
                    for msg_data in data["result"]:
                        msg = Message.de_json(msg_data, bot)
                        if msg:
                            messages.append(msg)
                
                logger.info(f"[PERSIST] –ü–æ–ª—É—á–µ–Ω–æ {len(messages)} —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞")
                
                for i, msg in enumerate(messages):
                    has_text = msg.text is not None
                    text_preview = msg.text[:50] if msg.text else "EMPTY"
                    has_marker = marker in msg.text if msg.text else False
                    logger.info(f"[PERSIST] [{i+1}] msg_id={msg.message_id}, has_text={has_text}, has_marker={has_marker}, preview='{text_preview}...'")
                    
                    if msg.text and marker in msg.text:
                        try:
                            json_str = msg.text.replace(marker, "").strip()
                            if json_str.startswith("\n\n"):
                                json_str = json_str[2:]
                            loaded_data = json.loads(json_str)
                            channel_message_ids[data_type] = msg.message_id
                            logger.info(f"[PERSIST] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} (msg_id={msg.message_id})")
                            return loaded_data
                        except Exception as parse_error:
                            logger.warning(f"[PERSIST] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ {msg.message_id}: {parse_error}")
                            continue
                            
        except Exception as search_error:
            logger.warning(f"[PERSIST] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ API: {search_error}")
            logger.info(f"[PERSIST] –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getUpdates –∫–∞–∫ fallback...")
            
            # Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º getUpdates
            try:
                bot_token = bot.token
                api_url = f"https://api.telegram.org/bot{bot_token}"
                
                async with httpx.AsyncClient() as client:
                    response = await client.post(
                        f"{api_url}/getUpdates",
                        json={"limit": 50},
                        timeout=30.0
                    )
                    
                    if response.status_code == 200:
                        data = response.json()
                        if data.get("ok") and data.get("result"):
                            from telegram import Update
                            messages = []
                            for update_data in data["result"]:
                                update = Update.de_json(update_data, bot)
                                if update and update.message:
                                    messages.append(update.message)
                            
                            logger.info(f"[PERSIST] –ü–æ–ª—É—á–µ–Ω–æ {len(messages)} —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ getUpdates")
                            
                            for msg in messages:
                                if msg.text and marker in msg.text:
                                    try:
                                        json_str = msg.text.replace(marker, "").strip()
                                        if json_str.startswith("\n\n"):
                                            json_str = json_str[2:]
                                        loaded_data = json.loads(json_str)
                                        channel_message_ids[data_type] = msg.message_id
                                        logger.info(f"[PERSIST] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} (msg_id={msg.message_id})")
                                        return loaded_data
                                    except Exception:
                                        continue
            except Exception as e2:
                logger.warning(f"[PERSIST] getUpdates —Ç–∞–∫–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: {e2}")
        
        logger.info(f"[PERSIST] ‚ùå –î–∞–Ω–Ω—ã–µ {data_type} –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–∞–Ω–∞–ª–µ")
        return None
        
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ {data_type}: {e}")
        return None


async def load_all_from_channel(bot) -> Dict[str, Any]:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–∞–Ω–∞–ª–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞.
    """
    loaded_data = {}
    
    if not DATA_CHANNEL_ID:
        logger.info("[PERSIST] –ö–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ")
        return loaded_data
    
    logger.info(f"[PERSIST] –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ {DATA_CHANNEL_ID}...")
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞–∂–¥—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
    for data_type in DATA_MARKERS.keys():
        data = await load_from_channel(bot, data_type)
        if data is not None:
            loaded_data[data_type] = data
            logger.info(f"[PERSIST] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: {data_type}")
        else:
            logger.info(f"[PERSIST] ‚è≠Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ: {data_type}")
    
    logger.info(f"[PERSIST] –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(loaded_data)} —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö")
    return loaded_data


# ============== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==============
application = None
morning_message_id = None
morning_scheduled_date = ""
bot_running = True
motivation_sent_times = []
good_night_sent_date = ""
background_tasks = []
last_music_index = None
last_music_date = None
music_sent_date = ""
horoscope_sent_date = ""
horoscope_cache_date = None
horoscope_cache_text = None
deals_sent_week = None

# ============== –ö–û–ú–ê–ù–î–ê /MAM ==============
# ID —Å–æ–æ–±—â–µ–Ω–∏—è "–ù–µ –∑–ª–∏ –º–∞–º—É..."
mam_message_id = None
MAM_PHOTO_PATH = "5422343903253302332.jpg"

# ============== –ù–û–ß–ù–û–ô –†–ï–ñ–ò–ú ==============
# {user_id: message_count} - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_night_messages = {}
# {user_id: warning_sent_date} - –∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
user_night_warning_sent = {}

# ============== –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –í–û–ó–í–†–ê–©–ï–ù–¶–ï–í ==============
# {user_id: last_active_date}
user_last_active = {}

# ============== –°–¢–ê–¢–ò–°–¢–ò–ö–ê –î–õ–Ø –ï–ñ–ï–î–ù–ï–í–ù–û–ô –°–í–û–î–ö–ò ==============
daily_stats = {
    "date": datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d"),
    "total_messages": 0,
    "user_messages": {},  # {user_id: {"name": str, "count": int}}
    "photos": [],  # [{"file_id": str, "user_id": int, "likes": int, "message_id": int}]
    "first_photo_user_id": None,
    "first_photo_user_name": None,
}
daily_summary_sent = False


async def recalculate_daily_stats_from_chat(bot) -> dict:
    """
    –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–Ω–µ–≤–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞.
    –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã, —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è
    –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–Ω–æ–≤–æ.
    
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Telegram API –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
    –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤–µ—Ä—Å–∏–∏ python-telegram-bot.
    """
    global daily_stats
    
    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    today_start = datetime.now(MOSCOW_TZ).replace(hour=0, minute=0, second=0, microsecond=0)
    now = datetime.now(MOSCOW_TZ)
    
    logger.info(f"[HISTORY] –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ—Å—á—ë—Ç –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ {today}")
    logger.info(f"[HISTORY] –í—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω: {today_start} - {now}")
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞
    recalculated_stats = {
        "date": today,
        "total_messages": 0,
        "user_messages": {},  # {user_id: {"name": str, "count": int}}
        "photos": [],  # [{"file_id": str, "user_id": int, "likes": int, "message_id": int, "user_name": str}]
        "first_photo_user_id": None,
        "first_photo_user_name": None,
    }
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    bot_token = bot.token
    if not bot_token:
        logger.error(f"[HISTORY] ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞")
        return recalculated_stats
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º httpx –¥–ª—è –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Telegram API
    api_url = f"https://api.telegram.org/bot{bot_token}"
    
    messages = []
    photos_found = 0
    messages_today = 0
    
    try:
        # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ Telegram API (–º–µ—Ç–æ–¥ getChatHistory)
        logger.info(f"[HISTORY] –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ {CHAT_ID} —á–µ—Ä–µ–∑ Telegram API...")
        
        async with httpx.AsyncClient() as client:
            # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 200 —Å–æ–æ–±—â–µ–Ω–∏–π
            response = await client.post(
                f"{api_url}/getChatHistory",
                json={
                    "chat_id": CHAT_ID,
                    "limit": 200
                },
                timeout=30.0
            )
            
            if response.status_code != 200:
                logger.error(f"[HISTORY] ‚ùå API –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å {response.status_code}")
                logger.error(f"[HISTORY] –û—Ç–≤–µ—Ç: {response.text}")
                raise Exception(f"API error: {response.status_code}")
            
            data = response.json()
            
            if not data.get("ok"):
                logger.error(f"[HISTORY] ‚ùå API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {data.get('description')}")
                raise Exception(f"API error: {data.get('description')}")
            
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –æ–±—ä–µ–∫—Ç—ã Message
            from telegram import Message
            
            if data.get("result") and isinstance(data["result"], list):
                for msg_data in data["result"]:
                    msg = Message.de_json(msg_data, bot)
                    if msg:
                        messages.append(msg)
            
            logger.info(f"[HISTORY] ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ {len(messages)} —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram API")
            
    except Exception as e:
        logger.warning(f"[HISTORY] ‚ö†Ô∏è Telegram API getChatHistory –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: {e}")
        logger.info(f"[HISTORY] üîÑ –ü—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ getUpdates...")
        
        # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º getUpdates (–º–µ–Ω–µ–µ –Ω–∞–¥—ë–∂–Ω–æ)
        try:
            async with httpx.AsyncClient() as client:
                response = await client.post(
                    f"{api_url}/getUpdates",
                    json={"limit": 100},
                    timeout=30.0
                )
                
                if response.status_code == 200:
                    data = response.json()
                    if data.get("ok") and data.get("result"):
                        from telegram import Message, Update
                        
                        for update_data in data["result"]:
                            update = Update.de_json(update_data, bot)
                            if update and update.message:
                                messages.append(update.message)
                        
                        logger.info(f"[HISTORY] ‚ö†Ô∏è –ü–æ–ª—É—á–µ–Ω–æ {len(messages)} —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ getUpdates (–º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –≤—Å–µ)")
                else:
                    logger.error(f"[HISTORY] ‚ùå getUpdates —Ç–∞–∫–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç")
        except Exception as e2:
            logger.error(f"[HISTORY] ‚ùå –í—Å–µ –º–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç: {e2}")
    
    # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –ø—Ä–æ–±—É–µ–º –∂–∏—Ç—å —Å —Ç–µ–º —á—Ç–æ –µ—Å—Ç—å
    if not messages:
        logger.warning(f"[HISTORY] ‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞, –Ω–∞—á–∏–Ω–∞–µ–º —Å –Ω—É–ª—è")
        logger.info(f"[HISTORY] –ë–æ—Ç –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞")
        return recalculated_stats
    
    logger.info(f"[HISTORY] ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º {len(messages)} —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞")
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    for msg in messages:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Ñ–æ—Ç–æ
        if not msg.date:
            continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
        msg_date = msg.date.astimezone(MOSCOW_TZ)
        if msg_date < today_start or msg_date > now:
            continue
        
        messages_today += 1
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        if msg.text and msg.text.startswith('/'):
            continue
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        user_id = None
        user_name = None
        
        if msg.from_user:
            user_id = msg.from_user.id
            # –§–æ—Ä–º–∏—Ä—É–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            first_name = msg.from_user.first_name or ""
            last_name = msg.from_user.last_name or ""
            user_name = f"{first_name} {last_name}".strip()
        
        if user_id is None:
            continue
        
        # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown –≤ –∏–º–µ–Ω–∏
        safe_name = user_name.replace('(', '\\(').replace(')', '\\)') if user_name else "Unknown"
        
        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
        recalculated_stats["total_messages"] += 1
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if user_id not in recalculated_stats["user_messages"]:
            recalculated_stats["user_messages"][user_id] = {"name": safe_name, "count": 0}
        recalculated_stats["user_messages"][user_id]["count"] += 1
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–æ—Ç–æ
        if msg.photo:
            photos_found += 1
            photo = msg.photo[-1]  # –ë–µ—Ä–µ–º —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ —Ñ–æ—Ç–æ
            
            photo_info = {
                "file_id": photo.file_id,
                "user_id": user_id,
                "message_id": msg.message_id,
                "likes": 0,
                "user_name": safe_name
            }
            
            recalculated_stats["photos"].append(photo_info)
            
            # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ —Ñ–æ—Ç–æ (–¥–ª—è –¥–≤–æ–π–Ω—ã—Ö –±–∞–ª–ª–æ–≤)
            if recalculated_stats["first_photo_user_id"] is None:
                recalculated_stats["first_photo_user_id"] = user_id
                recalculated_stats["first_photo_user_name"] = safe_name
    
    logger.info(f"[HISTORY] ‚úÖ –ü–µ—Ä–µ—Å—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω:")
    logger.info(f"[HISTORY] - –°–æ–æ–±—â–µ–Ω–∏–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {messages_today}")
    logger.info(f"[HISTORY] - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {recalculated_stats['total_messages']}")
    logger.info(f"[HISTORY] - –§–æ—Ç–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {photos_found}")
    logger.info(f"[HISTORY] - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(recalculated_stats['user_messages'])}")
    
    return recalculated_stats


# ============== –†–ï–ô–¢–ò–ù–ì –£–ß–ê–°–¢–ù–ò–ö–û–í ==============
# {user_id: {"name": str, "messages": int, "photos": int, "likes": int, "replies": int}}
user_rating_stats = {}

# {user_id: "–ù–æ–≤–∏—á–æ–∫"} - —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_current_level = {}

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ post_init –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

# ============== –ß–ï–õ–õ–ï–ù–î–ñ–ò ==============
# –ú–∏–Ω–∏-—á–µ–ª–ª–µ–Ω–¥–∂–∏ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

CHALLENGE_TYPES = {
    "weekly": {
        "name": "–ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂",
        "goals": [
            {"type": "distance", "value": 20, "unit": "–∫–º", "name": "20 –∫–º –∑–∞ –Ω–µ–¥–µ–ª—é üèÉ"},
            {"type": "runs", "value": 3, "unit": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫", "name": "3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é üí™"},
            {"type": "photos", "value": 5, "unit": "—Ñ–æ—Ç–æ", "name": "5 —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ üì∏"},
        ]
    },
    "monthly": {
        "name": "–ú–µ—Å—è—á–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂",
        "goals": [
            {"type": "distance", "value": 100, "unit": "–∫–º", "name": "100 –∫–º –∑–∞ –º–µ—Å—è—Ü üèÉ‚Äç‚ôÇÔ∏è"},
            {"type": "runs", "value": 15, "unit": "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫", "name": "15 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –º–µ—Å—è—Ü üí™"},
            {"type": "consistency", "value": 20, "unit": "–¥–Ω–µ–π", "name": "20 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ –±–µ–≥–∞—Ç—å üî•"},
        ]
    }
}

# –¢–µ–∫—É—â–∏–π —á–µ–ª–ª–µ–Ω–¥–∂
current_challenge = {
    "type": "weekly",  # weekly –∏–ª–∏ monthly
    "goal_index": 0,  # –∫–∞–∫–æ–π goal –∏–∑ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–µ–Ω
    "start_date": "",
    "end_date": "",
    "participants": {},  # {user_id: {"name": str, "progress": int, "completed": bool}}
    "active": False
}

# ============== –ì–û–õ–û–°–û–í–ê–ù–ò–ï –ó–ê –ß–ï–õ–õ–ï–ù–î–ñ–ò ==============
# –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
VOTING_CHALLENGES = [
    {"id": "run_10km", "emoji": "üèÉ", "name": "–ü—Ä–æ–±–µ–∂–∞—Ç—å 10 –∫–º", "desc": "–ù–∞–±—Ä–∞—Ç—å 10 –∫–º –∑–∞ –Ω–µ–¥–µ–ª—é"},
    {"id": "run_20km", "emoji": "üèÉ‚Äç‚ôÇÔ∏è", "name": "–ü—Ä–æ–±–µ–∂–∞—Ç—å 20 –∫–º", "desc": "–ù–∞–±—Ä–∞—Ç—å 20 –∫–º –∑–∞ –Ω–µ–¥–µ–ª—é"},
    {"id": "runs_3", "emoji": "üí™", "name": "3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", "desc": "–°–¥–µ–ª–∞—Ç—å 3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é"},
    {"id": "runs_5", "emoji": "üî•", "name": "5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫", "desc": "–°–¥–µ–ª–∞—Ç—å 5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –Ω–µ–¥–µ–ª—é"},
    {"id": "consistency_5", "emoji": "üìÖ", "name": "5 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥", "desc": "–ë–µ–≥–∞—Ç—å 5 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥"},
    {"id": "photos_3", "emoji": "üì∏", "name": "3 —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫", "desc": "–°–¥–µ–ª–∞—Ç—å 3 —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫"},
]

# –¢–µ–∫—É—â–µ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
challenge_voting = {
    "active": False,
    "options": [],  # [{challenge_id, votes}]
    "voters": {},  # {user_id: option_id}
    "start_time": "",
    "duration_hours": 24
}

# ============== –ü–û–õ–ù–ê–Ø –ò–°–¢–û–†–ò–Ø –ß–ê–¢–ê (–°–ö–†–´–¢–ê–Ø) ==============
# –í—Å—è –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ
# –§–æ—Ä–º–∞—Ç:
# {
#     "messages": [
#         {
#             "id": int, "user_id": int, "user_name": str,
#             "text": str, "timestamp": str, "type": str,
#             "has_photo": bool, "photo_count": int
#         },
#     ],
#     "photos": [
#         {"file_id": str, "user_id": int, "user_name": str, "timestamp": str, "message_id": int}
#     ],
#     "likes": [
#         {"from_user_id": int, "from_user_name": str, "to_message_id": int, "timestamp": str, "emoji": str}
#     ],
#     "edits": [
#         {"message_id": int, "user_id": int, "old_text": str, "new_text": str, "timestamp": str}
#     ],
#     "deletions": [
#         {"message_id": int, "user_id": int, "text_preview": str, "timestamp": str}
#     ],
#     "last_updated": str
# }
chat_history = {
    "messages": [],
    "photos": [],
    "likes": [],
    "edits": [],
    "deletions": [],
    "last_updated": ""
}

# ============== GARMIN INTEGRATION ==============
# {user_id: {"name": str, "email": str, "last_activity_id": str, "monthly_distance": float, "monthly_activities": int}}
garmin_users = {}

# –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π (idempotency)
# –§–æ—Ä–º–∞—Ç: "user_id:activity_id"
processed_activities = set()

# {user_id: {"name": str, "activities": int, "distance": float, "duration": int, "calories": int}}
user_running_stats = {}

# ============== –ü–ï–†–ò–û–î–ò–ß–ï–°–ö–ò–ô –¢–†–ï–ö–ò–ù–ì –ë–ï–ì–ê ==============
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –±–µ–≥–∞ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—á—å)
daily_running_stats = {}  # {user_id: {"name": str, "activities": int, "distance": float, "duration": int, "calories": int, "date": "YYYY-MM-DD"}}

# –ù–µ–¥–µ–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –±–µ–≥–∞ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
weekly_running_stats = {}  # {user_id: {"name": str, "activities": int, "distance": float, "duration": int, "calories": int, "week_start": "YYYY-MM-DD"}}

# –ú–µ—Å—è—á–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –±–µ–≥–∞ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è 1-–≥–æ —á–∏—Å–ª–∞)
monthly_running_stats = {}  # {user_id: {"name": str, "activities": int, "distance": float, "duration": int, "calories": int, "month": "YYYY-MM"}}

# ============== –î–ù–ò –†–û–ñ–î–ï–ù–ò–Ø ==============
# {user_id: {"name": str, "birthday": "DD.MM"}}
user_birthdays = {}

# ============== –ò–ò-–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û–õ–ê –ü–û –ù–ò–ö–£ ==============
# –ö—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–∞: {username: is_female}
gender_cache = {}
# –ö—É–ª–¥–∞—É–Ω –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
GENDER_CHECK_COOLDOWN = 3600  # 1 —á–∞—Å


async def check_is_female_by_ai(username: str) -> bool:
    """
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ò–ò –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–≤—É—à–∫–æ–π.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –µ—Å–ª–∏ –¥–µ–≤—É—à–∫–∞, False –µ—Å–ª–∏ –º—É–∂—á–∏–Ω–∞ –∏–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ.
    """
    global gender_cache

    username_lower = username.lower().replace('@', '')

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    if username_lower in gender_cache:
        cached_result, timestamp = gender_cache[username_lower]
        now = datetime.now(MOSCOW_TZ).timestamp()
        if now - timestamp < GENDER_CHECK_COOLDOWN:
            logger.info(f"[GENDER] –ò—Å–ø–æ–ª—å–∑—É—é –∫—ç—à –¥–ª—è {username}: {cached_result}")
            return cached_result

    # –í—Å–µ–≥–¥–∞ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –ø—Ä–æ—Å—Ç—É—é —ç–≤—Ä–∏—Å—Ç–∏–∫—É (–±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥—ë–∂–Ω–µ–µ)
    female_endings = ['–∞', '—è', '–∏—è', '–∏–Ω–∞', '–æ–≤–∞', '–µ–≤–∞', '—ã–∞', '—å', '—Å–∫–∞—è', '—Ü–∫–∞—è', '—Å–∫–∞—è', '—Ü–∫–∞—è', '—Å–∫–∞—è', '—Ü–∫–∞—è']
    female_names = [
        # –†—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞
        '–º–∞—à–∞', '–º–∞—Ä–∏—è', '–º–∞—Ä–∏', '–∫–∞—Ç—è', '–µ–∫–∞—Ç–µ—Ä–∏–Ω–∞', '–∫–∞—Ç–µ—Ä–∏–Ω–∞', '–∞–Ω—è', '–∞–Ω–Ω–∞', '–∞–Ω–Ω—É—à–∫–∞', '–æ–ª—è', '–æ–ª—å–≥–∞', 
        '—é–ª—è', '—é–ª–∏—è', '–¥–∞—à–∞', '–¥–∞—Ä—å—è', '–ª–µ–Ω–∞', '–µ–ª–µ–Ω–∞', '—Ç–∞–Ω—è', '—Ç–∞—Ç—å—è–Ω–∞', '—Å–≤–µ—Ç–∞', '—Å–≤–µ—Ç–ª–∞–Ω–∞', 
        '–∏—Ä–∞', '–∏—Ä–∏–Ω–∞', '–Ω–∞—Ç–∞—à–∞', '–Ω–∞—Ç–∞–ª—å—è', '–Ω–∞—Ç–∞–ª–∏—è', '–≥–∞–ª—è', '–≥–∞–ª–∏–Ω–∞', '–æ–∫—Å–∞–Ω–∞', '—ç–ª—è', '—ç–ª–ª–∞',
        '–ª–∏–∑–∞', '–µ–ª–∏–∑–∞–≤–µ—Ç–∞', '–ª–∏–∑a', '–∫–∞—Ä–∏–Ω–∞', '–¥–∞—Ä–∏–Ω–∞', '–≤–∞—Ä–≤–∞—Ä–∞', '–≤–∞—Ä—è', '–ø–æ–ª–∏–Ω–∞', '–ø–æ–ª—è',
        '—Å–æ—Ñ–∏—è', '—Å–æ—Ñ—å—è', '–≤–∏–∫–∞', '–≤–∏–∫—Ç–æ—Ä–∏—è', '–Ω–∞—Å—Ç—è', '–∞–Ω–∞—Å—Ç–∞—Å–∏—è', '–∫—Ä–∏—Å—Ç–∏–Ω–∞', '–∫—Ä–∏—Å—Ç–∏–Ω–∞',
        '–∞–ª–∏–Ω–∞', '–∞–ª–∏—Å–∞', '–º–∞—Ä–∏–Ω–∞', '–º–∞—Ä–∏', '–≤–∞–ª—è', '–≤–∞–ª–µ–Ω—Ç–∏–Ω–∞', '–ª—é–±–∞', '–ª—é–±–æ–≤—å', '–ª—é–¥–º–∏–ª–∞',
        '–Ω–∞—Ç–∞—à–∞', '–Ω–∞—Ç–∞–ª—å—è', '–Ω–∞—Ç–∞–ª–∏—è', '—Å–∞—à–∞', '–∞–ª–µ–∫—Å–∞–Ω–¥—Ä–∞', '—Å–∞—à–µ–Ω—å–∫–∞',
        # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏–º–µ–Ω–∞
        'veronika', 'veronica', 'maria', 'mary', 'anna', 'anne', 'nastya', 'nastia', 'oksana', 
        'diana', 'julia', 'julie', 'sophia', 'sofia', 'victoria', 'vika', 'kristina', 'christina',
        'alina', 'alice', 'marina', 'valentina', 'elena', 'helen', 'elizabeth', 'liz', 'liza',
        'kate', 'katherine', 'catherine', 'katya', 'alexandra', 'sasha', 'sashka'
    ]

    username_clean = username_lower.strip().lower()

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∂–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞
    for name in female_names:
        if name in username_clean:
            gender_cache[username_lower] = (True, datetime.now(MOSCOW_TZ).timestamp())
            logger.info(f"[GENDER] –û–ø—Ä–µ–¥–µ–ª—ë–Ω –ø–æ –∏–º–µ–Ω–∏: {username} -> –¥–µ–≤—É—à–∫–∞")
            return True

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è
    for ending in female_endings:
        if username_clean.endswith(ending) and len(username_clean) > 3:
            gender_cache[username_lower] = (True, datetime.now(MOSCOW_TZ).timestamp())
            logger.info(f"[GENDER] –û–ø—Ä–µ–¥–µ–ª—ë–Ω –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é: {username} -> –¥–µ–≤—É—à–∫–∞")
            return True

    # –ü—Ä–æ–±—É–µ–º YandexGPT –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤)
    if YANDEX_AVAILABLE:
        try:
            prompt = f"""–û–ø—Ä–µ–¥–µ–ª–∏ –ø–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∏–∫—É "{username}".

–ñ–ï–ù–°–ö–ò–ï –ø—Ä–∏–∑–Ω–∞–∫–∏ (–æ—Ç–≤–µ—Ç—å YES):
- –ñ–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞: –ú–∞—à–∞, –ö–∞—Ç—è, –ê–Ω—è, –û–ª—è, –Æ–ª—è, –î–∞—à–∞, –õ–µ–Ω–∞, –¢–∞–Ω—è, –°–≤–µ—Ç–∞, –ò—Ä–∞, –ù–∞—Ç–∞—à–∞, –ì–∞–ª—è, –õ–∏–∑–∞, –ö–∞—Ä–∏–Ω–∞, –ü–æ–ª–∏–Ω–∞, –í–∏–∫–∞, –ù–∞—Å—Ç—è, –ö—Ä–∏—Å—Ç–∏–Ω–∞, –ê–ª–∏–Ω–∞, –ú–∞—Ä–∏–Ω–∞, –í–∞–ª—è, –õ—é–±–∞, –°–∞—à–∞ (–µ—Å–ª–∏ —ç—Ç–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞), –∏ —Ç.–¥.
- –ñ–µ–Ω—Å–∫–∏–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è: -–∞, -—è, -–∏—è, -–∏–Ω–∞, -–æ–≤–∞, -–µ–≤–∞, -—Å–∫–∞—è, -—Ü–∫–∞—è
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –∂–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞: Maria, Anna, Julia, Diana, Victoria, Sophia, Christina, Alina, Alice, Marina, Elena, Elizabeth, Kate, Alexandra
- –°–ª–æ–≤–∞: girl, lady, woman, princess, queen, miss, mrs

–ú–£–ñ–°–ö–ò–ï –ø—Ä–∏–∑–Ω–∞–∫–∏ (–æ—Ç–≤–µ—Ç—å NO):
- –ú—É–∂—Å–∫–∏–µ –∏–º–µ–Ω–∞: –ü–µ—Ç—è, –ö–æ–ª—è, –î–∏–º–∞, –ú–∏—à–∞, –í–æ–≤–∞, –°–∞—à–∞ (–µ—Å–ª–∏ —ç—Ç–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä), –ú–∞–∫—Å, –ò–≤–∞–Ω, –°–µ—Ä–≥–µ–π, –ê–Ω–¥—Ä–µ–π, –∏ —Ç.–¥.
- –ú—É–∂—Å–∫–∏–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è: -–æ–≤, -–µ–≤, -–∏–Ω, -—Å–∫–∏–π, -—Ü–∫–∏–π (–µ—Å–ª–∏ —ç—Ç–æ —Ñ–∞–º–∏–ª–∏—è)
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –º—É–∂—Å–∫–∏–µ –∏–º–µ–Ω–∞: Alex, Max, John, Mike, David, etc.

–ï—Å–ª–∏ –ù–ï–í–û–ó–ú–û–ñ–ù–û –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω–æ ‚Üí –æ—Ç–≤–µ—Ç—å "NO"

–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –æ–¥–Ω–æ —Å–ª–æ–≤–æ: YES –∏–ª–∏ NO"""

            response = await get_ai_response_yandexgpt(prompt, "—Å–∏—Å—Ç–µ–º–∞")
            is_female = response.strip().upper() == "YES"

            # –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            gender_cache[username_lower] = (is_female, datetime.now(MOSCOW_TZ).timestamp())

            logger.info(f"[GENDER] –ò–ò –æ–ø—Ä–µ–¥–µ–ª–∏–ª –¥–ª—è {username}: {'–¥–µ–≤—É—à–∫–∞' if is_female else '–º—É–∂—á–∏–Ω–∞/–Ω–µ—è—Å–Ω–æ'}")
            return is_female

        except Exception as e:
            logger.error(f"[GENDER] –û—à–∏–±–∫–∞ YandexGPT: {e}")
            # –ï—Å–ª–∏ –ò–ò —É–ø–∞–ª, —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –Ω–µ –¥–µ–≤—É—à–∫–∞ (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
            gender_cache[username_lower] = (False, datetime.now(MOSCOW_TZ).timestamp())
            return False

    # –ï—Å–ª–∏ –ò–ò –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∞ - —Å—á–∏—Ç–∞–µ–º –Ω–µ-–¥–µ–≤—É—à–∫–æ–π
    gender_cache[username_lower] = (False, datetime.now(MOSCOW_TZ).timestamp())
    logger.info(f"[GENDER] –ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω: {username} -> –Ω–µ –¥–µ–≤—É—à–∫–∞")
    return False


def get_random_good_morning():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –Ω–∞ –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ + —Ü–∏—Ç–∞—Ç—ã –∏–∑ —Ñ–∏–ª—å–º–æ–≤)"""
    return random.choice(GOOD_MORNING_PHRASES + MOVIE_QUOTES)


def get_random_good_morning_flirt():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –Ω–∞ –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ (—Ñ–ª–∏—Ä—Ç + —Ü–∏—Ç–∞—Ç—ã –∏–∑ —Ñ–∏–ª—å–º–æ–≤)"""
    return random.choice(GOOD_MORNING_FLIRT_PHRASES + MOVIE_QUOTES)


# ============== –ú–£–ó–´–ö–ê –î–ù–Ø ==============
MUSIC_OF_DAY = [
    {
        "title": "üéß –ü–ª–µ–π–ª–∏—Å—Ç –¥–ª—è –±–µ–≥–∞ ‚Äî –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞",
        "url": "https://music.yandex.ru/landing/tag_run",
    }
]


def get_music_of_day() -> dict:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º—É–∑—ã–∫—É –¥–Ω—è (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –¥–µ–Ω—å)."""
    global last_music_index, last_music_date
    if not MUSIC_OF_DAY:
        return {"title": "üéß –ú—É–∑—ã–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", "url": ""}
    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    if last_music_date == today and last_music_index is not None:
        return MUSIC_OF_DAY[last_music_index]
    if len(MUSIC_OF_DAY) == 1:
        last_music_index = 0
        last_music_date = today
        return MUSIC_OF_DAY[0]
    idx = random.randrange(len(MUSIC_OF_DAY))
    if last_music_index is not None and idx == last_music_index:
        idx = (idx + 1) % len(MUSIC_OF_DAY)
    last_music_index = idx
    last_music_date = today
    return MUSIC_OF_DAY[idx]


def format_music_message(music: dict) -> str:
    title = html_escape(music.get("title", "üéß –ú—É–∑—ã–∫–∞ –¥–Ω—è"))
    url = music.get("url", "")
    if url:
        safe_url = html_escape(url)
        return f"{title}\nüîó <a href=\"{safe_url}\">–û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–µ</a>"
    return title


# ============== –ì–û–†–û–°–ö–û–ü –î–ù–Ø ==============
ZODIAC_SIGNS = [
    ("‚ôà", "–û–≤–µ–Ω"),
    ("‚ôâ", "–¢–µ–ª–µ—Ü"),
    ("‚ôä", "–ë–ª–∏–∑–Ω–µ—Ü—ã"),
    ("‚ôã", "–†–∞–∫"),
    ("‚ôå", "–õ–µ–≤"),
    ("‚ôç", "–î–µ–≤–∞"),
    ("‚ôé", "–í–µ—Å—ã"),
    ("‚ôè", "–°–∫–æ—Ä–ø–∏–æ–Ω"),
    ("‚ôê", "–°—Ç—Ä–µ–ª–µ—Ü"),
    ("‚ôë", "–ö–æ–∑–µ—Ä–æ–≥"),
    ("‚ôí", "–í–æ–¥–æ–ª–µ–π"),
    ("‚ôì", "–†—ã–±—ã"),
]

HOROSCOPE_FALLBACK = [
    "–¥–µ–Ω—å —Ç—Ä–µ–±—É–µ—Ç —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –∏ —è—Å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.",
    "–ª—É—á—à–µ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –±–µ–∑ —Å–ø–µ—à–∫–∏.",
    "–ø–æ–ª–µ–∑–Ω–æ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.",
    "–¥–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –Ω–æ–≤—ã—Ö –∏–¥–µ–π.",
    "—Ç–µ—Ä–ø–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–∏–Ω–µ—Å–µ—Ç –ø–æ–ª—å–∑—É.",
    "—Ö–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–∞—Ç—å –Ω–∞—á–∞—Ç–æ–µ.",
    "—Å—Ç–æ–∏—Ç –Ω–∞–≤–µ—Å—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≤ –¥–µ–ª–∞—Ö.",
    "–∏–∑–±–µ–≥–∞–π –ª–∏—à–Ω–∏—Ö —Å–ø–æ—Ä–æ–≤ –∏ —Å—É–µ—Ç—ã.",
    "–Ω–µ–±–æ–ª—å—à–æ–π —à–∞–≥ –¥–∞—Å—Ç –∑–∞–º–µ—Ç–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç.",
    "–∏—â–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –æ—Ç–¥—ã—Ö–æ–º.",
    "–∏–Ω—Ç—É–∏—Ü–∏—è —Å–µ–≥–æ–¥–Ω—è –ø–æ–º–æ–∂–µ—Ç.",
    "–º—è–≥–∫–∏–π —Ä–∏—Ç–º –¥–∞—Å—Ç –±–æ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.",
]


def build_fallback_horoscope() -> str:
    today_key = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    lines = []
    for i, (emoji, sign) in enumerate(ZODIAC_SIGNS):
        idx = abs(hash(f"{today_key}:{sign}")) % len(HOROSCOPE_FALLBACK)
        lines.append(f"{emoji} {sign}: {HOROSCOPE_FALLBACK[idx]}")
    return "\n".join(lines)


async def get_horoscope_text_for_today() -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –Ω–∞ –¥–µ–Ω—å (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è)."""
    global horoscope_cache_date, horoscope_cache_text
    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    if horoscope_cache_date == today and horoscope_cache_text:
        return horoscope_cache_text

    if YANDEX_AVAILABLE:
        try:
            import httpx
            prompt = (
                "–°–æ—Å—Ç–∞–≤—å –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –≤—Å–µ—Ö –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞.\n"
                "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n"
                "- 12 —Å—Ç—Ä–æ–∫, –ø–æ –æ–¥–Ω–æ–π –Ω–∞ –∑–Ω–∞–∫\n"
                "- –§–æ—Ä–º–∞—Ç: \"‚ôà –û–≤–µ–Ω: –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç\"\n"
                "- –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–æ (1 –∫–æ—Ä–æ—Ç–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)\n"
                "- –ë–µ–∑ —Ç–µ–º—ã –±–µ–≥–∞ –∏ —Å–ø–æ—Ä—Ç–∞\n"
                "- –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ç–æ–Ω\n"
            )
            request_body = {
                "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
                "messages": [
                    {"role": "system", "text": "–¢—ã –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥. –ü–∏—à–∏ –∫—Ä–∞—Ç–∫–æ –∏ –±–µ–∑ –º–∏—Å—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π."},
                    {"role": "user", "text": prompt},
                ],
                "completionOptions": {
                    "temperature": 0.6,
                    "maxTokens": 600
                },
            }
            async with httpx.AsyncClient(timeout=20.0) as client:
                response = await client.post(
                    "https://llm.api.cloud.yandex.net/foundationModels/v1/completion",
                    json=request_body,
                    headers={"Authorization": f"Api-Key {YANDEX_API_KEY}", "Content-Type": "application/json"},
                )
                response.raise_for_status()
                data = response.json()
                if data and "result" in data and data["result"]["alternatives"]:
                    text = data["result"]["alternatives"][0]["message"]["text"].strip()
                    horoscope_cache_date = today
                    horoscope_cache_text = text
                    return text
        except Exception as e:
            logger.error(f"[HOROSCOPE] –û—à–∏–±–∫–∞ –ò–ò: {e}")

    text = build_fallback_horoscope()
    horoscope_cache_date = today
    horoscope_cache_text = text
    return text


# ============== –°–ö–ò–î–ö–ò –ù–ê –≠–ö–ò–ü–ò–†–û–í–ö–£ ==============
DEALS_SOURCES = [
    {"name": "Sport-Marafon", "url": "https://sport-marafon.ru/"},
    {"name": "Nordski", "url": "https://nordski.ru/"},
    {"name": "SHU", "url": "https://shuclothes.com/"},
    {"name": "GRI", "url": "https://www.grigri.ru/"},
    {"name": "Insanity", "url": "https://insanity.ru/"},
]

DEALS_KEYWORDS = [
    "–±–µ–≥", "run", "running", "–∫—Ä–æ—Å—Å–æ–≤", "sneaker", "shoe",
    "—à–æ—Ä—Ç", "–º–∞–π–∫", "—Ñ—É—Ç–±–æ–ª", "–ª–æ–Ω–≥", "—Ç–∞–π—Ç—Å", "–≤–µ–ª–æ—Å–∏–ø–µ–¥",
    "–∫—É—Ä—Ç–∫", "–≤–µ—Ç—Ä–æ–≤–∫", "—à—Ç–∞–Ω—ã", "–±—Ä—é–∫", "leggin", "tight",
    "–æ—á–∫–∏", "cap", "–∫–µ–ø–∫", "nosk", "–Ω–æ—Å–∫", "–ø–µ—Ä—á–∞—Ç", "–±–∞—Ñ",
]

CATEGORY_KEYWORDS = {
    "shoes": ["–∫—Ä–æ—Å—Å–æ–≤", "sneaker", "shoe", "–æ–±—É–≤"],
    "shorts": ["—à–æ—Ä—Ç", "short"],
    "socks": ["–Ω–æ—Å", "sock"],
    "longsleeve": ["–ª–æ–Ω–≥", "–ª–æ–Ω–≥—Å–ª–∏–≤", "longsleeve", "long sleeve"],
    "tights": ["—Ç–∞–π—Ç—Å", "–ª–µ–≥–≥–∏–Ω", "–ª–µ–≥–∏–Ω", "tight", "legging", "–≤–µ–ª–æ—Å–∏–ø–µ–¥"],
    "jackets": ["–∫—É—Ä—Ç–∫", "–≤–µ—Ç—Ä–æ–≤–∫", "jacket", "wind"],
    "pants": ["—à—Ç–∞–Ω—ã", "–±—Ä—é–∫", "pants", "trous"],
    "shirts": ["—Ñ—É—Ç–±–æ–ª", "–º–∞–π–∫", "t-shirt", "tee", "shirt", "top"],
    "accessories": ["–æ—á–∫–∏", "cap", "–∫–µ–ø–∫", "–ø–µ—Ä—á–∞—Ç", "–±–∞—Ñ", "–ø–æ–≤—è–∑–∫", "—à–∞–ø–∫", "—Ä—é–∫–∑–∞–∫"],
}

CATEGORY_TITLES = {
    "all": "–≤—Å–µ",
    "shoes": "–∫—Ä–æ—Å—Å–æ–≤–∫–∏",
    "shorts": "—à–æ—Ä—Ç—ã",
    "socks": "–Ω–æ—Å–∫–∏",
    "longsleeve": "–ª–æ–Ω–≥–∏",
    "tights": "—Ç–∞–π—Ç—Å—ã/–≤–µ–ª–æ—Å–∏–ø–µ–¥–∫–∏",
    "jackets": "–∫—É—Ä—Ç–∫–∏/–≤–µ—Ç—Ä–æ–≤–∫–∏",
    "pants": "—à—Ç–∞–Ω—ã/–±—Ä—é–∫–∏",
    "shirts": "—Ñ—É—Ç–±–æ–ª–∫–∏/–º–∞–π–∫–∏",
    "accessories": "–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã",
}


def _extract_price(text: str) -> str:
    match = re.search(r"(\d[\d\s]{2,8})\s*(‚ÇΩ|—Ä—É–±)", text, re.IGNORECASE)
    if not match:
        return ""
    price = match.group(1).replace(" ", "")
    return f"{price} ‚ÇΩ"


def _is_relevant_name(name: str, category: str | None = None) -> bool:
    lower = name.lower()
    if category and category != "all":
        keywords = CATEGORY_KEYWORDS.get(category, [])
        return any(keyword in lower for keyword in keywords)
    return any(keyword in lower for keyword in DEALS_KEYWORDS)


def _matches_gender(name: str, url: str, gender: str | None) -> bool:
    if not gender or gender == "all":
        return True
    text = f"{name} {url}".lower()
    male_keywords = ["–º—É–∂", "men", "male", "mens", "man", "boys", "boy", "m/"]
    female_keywords = ["–∂–µ–Ω", "women", "female", "womens", "lady", "ladies", "w/"]
    unisex_keywords = ["—É–Ω–∏—Å–µ–∫—Å", "unisex", "—É–Ω–∏–≤–µ—Ä—Å"]

    if gender == "male":
        if any(k in text for k in male_keywords):
            return True
        if any(k in text for k in unisex_keywords):
            return True
    if gender == "female":
        if any(k in text for k in female_keywords):
            return True
        if any(k in text for k in unisex_keywords):
            return True

    # –ï—Å–ª–∏ —è–≤–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–µ—Ç ‚Äî –Ω–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º
    return True


def extract_products_from_html(
    html: str,
    base_url: str,
    gender: str | None = None,
    category: str | None = None,
) -> list[dict]:
    soup = BeautifulSoup(html, "html.parser")
    items = []

    for a in soup.find_all("a", href=True):
        name = " ".join(a.get_text(" ", strip=True).split())
        if not name or len(name) < 6 or len(name) > 120:
            continue
        if not _is_relevant_name(name, category):
            continue

        parent_text = " ".join(a.parent.get_text(" ", strip=True).split()) if a.parent else ""
        price = _extract_price(parent_text)

        href = a["href"]
        if href.startswith("/"):
            link = base_url.rstrip("/") + href
        elif href.startswith("http"):
            link = href
        else:
            link = base_url.rstrip("/") + "/" + href

        if _matches_gender(name, link, gender):
            items.append({"name": name, "price": price, "url": link})

    # –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
    seen = set()
    unique = []
    for item in items:
        key = item["name"].lower()
        if key in seen:
            continue
        seen.add(key)
        unique.append(item)

    return unique


async def fetch_deals_for_source(source: dict, gender: str | None = None, category: str | None = None) -> list[dict]:
    try:
        async with httpx.AsyncClient(timeout=20.0, follow_redirects=True) as client:
            response = await client.get(source["url"])
            response.raise_for_status()
            return extract_products_from_html(response.text, source["url"], gender, category)
    except Exception as e:
        logger.error(f"[DEALS] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ {source['name']}: {e}")
        return []


async def build_deals_message(gender: str | None = None, category: str | None = None) -> str:
    gender_title = "–≤—Å–µ"
    if gender == "male":
        gender_title = "–º—É–∂—Å–∫–æ–µ"
    elif gender == "female":
        gender_title = "–∂–µ–Ω—Å–∫–æ–µ"
    category_title = CATEGORY_TITLES.get(category or "all", "–≤—Å–µ")
    lines = ["üî• <b>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ –±–µ–≥–æ–≤—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É</b>\n"]
    lines.append(f"–ü–æ–ª: <b>{gender_title}</b>")
    lines.append(f"–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <b>{category_title}</b>\n")
    for source in DEALS_SOURCES:
        products = await fetch_deals_for_source(source, gender, category)
        lines.append(f"üè¨ <b>{html_escape(source['name'])}</b>")
        if not products:
            lines.append(f"üîó <a href=\"{html_escape(source['url'])}\">–û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</a>")
            lines.append("")
            continue
        for product in products[:5]:
            name = html_escape(product["name"])
            price = html_escape(product["price"]) if product["price"] else ""
            url = html_escape(product["url"])
            if price:
                lines.append(f"‚Ä¢ {name} ‚Äî {price}")
            else:
                lines.append(f"‚Ä¢ {name}")
            lines.append(f"  <a href=\"{url}\">–°—Å—ã–ª–∫–∞</a>")
        lines.append("")

    return "\n".join(lines).strip()


# ============== –°–ü–û–ö–û–ô–ù–û–ô –ù–û–ß–ò (–ü–û –•–ê–†–ê–ö–¢–ï–†–£ –î–ù–Ø) ==============
GOOD_NIGHT_BY_DAY = {
    0: [  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –¢–æ–Ω–∏ –°—Ç–∞—Ä–∫
        "ü§ñ –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏. –ó–∞–≤—Ç—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∏–º —Å–ø–∞—Å–∞—Ç—å –º–∏—Ä (–∏ —Ç–≤–æ–π —Ä–µ–∂–∏–º —Å–Ω–∞).",
        "‚ö° –í—ã–∫–ª—é—á–∞–π—Å—è. –î–∞–∂–µ —É –ñ–µ–ª–µ–∑–Ω–æ–≥–æ –ß–µ–ª–æ–≤–µ–∫–∞ –µ—Å—Ç—å –Ω–æ—á—å –Ω–∞ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫—É.",
        "üí° –°–æ–Ω ‚Äî –ª—É—á—à–∏–π –∞–ø–≥—Ä–µ–π–¥. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!",
    ],
    1: [  # –í—Ç–æ—Ä–Ω–∏–∫ - –î–æ–∫—Ç–æ—Ä –•–∞—É—Å
        "üè• –î–∏–∞–≥–Ω–æ–∑: —É—Å—Ç–∞–ª–æ—Å—Ç—å. –õ–µ—á–µ–Ω–∏–µ: —Å–æ–Ω. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "üíä –°–ø–∞—Ç—å ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω–µ –ª–µ—á–∏—Ç—Å—è —Å–∞—Ä–∫–∞–∑–º–æ–º. –ò–¥–∏ —Å–ø–∞—Ç—å.",
        "üòè –í—Å–µ –ª–≥—É—Ç. –ù–æ –ø–æ–¥—É—à–∫–∞ ‚Äî –Ω–∏–∫–æ–≥–¥–∞. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
    ],
    2: [  # –°—Ä–µ–¥–∞ - –î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π
        "üè¥‚Äç‚ò†Ô∏è –ü–∞—Ä—É—Å–∞ –≤–Ω–∏–∑, –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –æ—Ç–¥—ã—Ö! –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "üç∑ –†–æ–º –Ω–µ –Ω–∞–¥–æ, —Å–æ–Ω ‚Äî –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –î–æ–±—Ä–æ–π –Ω–æ—á–∏!",
        "‚öìÔ∏è –®—Ç–∏–ª—å, –∫–∞–ø–∏—Ç–∞–Ω. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
    ],
    3: [  # –ß–µ—Ç–≤–µ—Ä–≥ - –ì–æ–ª–ª—É–º
        "üíç –°–ø–∞—Ç—å, —Å–ø–∞—Ç—å‚Ä¶ –Ω–∞—à –ø—Ä–µ–ª–µ—Å—Å–Ω—ã–π –æ—Ç–¥—ã—Ö –∂–¥—ë—Ç –Ω–∞—Å. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "üò¥ –ú—ã —É—Å—Ç–∞–ª–∏. –ú—ã –±—É–¥–µ–º —Å–ø–∞—Ç—å. –î–∞-–¥–∞, –±—É–¥–µ–º.",
        "üëÅÔ∏è –°–æ–Ω ‚Äî –Ω–∞—à –¥—Ä—É–≥. –¢–∏—à–∏–Ω–∞. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
    ],
    4: [  # –ü—è—Ç–Ω–∏—Ü–∞ - –î–æ–∫—Ç–æ—Ä –°—Ç—Ä—ç–Ω–¥–∂
        "üåÄ –í—Ä–µ–º—è —Å–ø–∞—Ç—å. –í –¥—Ä—É–≥–æ–º –∏–∑–º–µ—Ä–µ–Ω–∏–∏ —ç—Ç–æ —É–∂–µ —É—Ç—Ä–æ. –î–æ–±—Ä–æ–π –Ω–æ—á–∏.",
        "‚è∞ –ü–∞—É–∑–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–∏: —Å–æ–Ω. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "‚ú® –ó–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞ ‚Äî –∏ –º–∏—Ä —Å—Ç–∞–Ω–µ—Ç –º—è–≥—á–µ. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
    ],
    5: [  # –°—É–±–±–æ—Ç–∞ - –î–∂–æ–∫–µ—Ä
        "üÉè –ù–æ—á—å ‚Äî –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–∞—É–∑—ã‚Ä¶ —Ö–∞-—Ö–∞. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!",
        "üé≠ –ó–∞–∫—Ä—ã–≤–∞–π —Ç–µ–∞—Ç—Ä, –∞–∫—Ç—ë—Ä. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "üòÇ –°–æ–Ω ‚Äî —Ç–æ–∂–µ —à—É—Ç–∫–∞, –Ω–æ –ø–æ–ª–µ–∑–Ω–∞—è. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!",
    ],
    6: [  # –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ - –®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å
        "üîç –î–µ–¥—É–∫—Ü–∏—è –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç: —Ç–µ–±–µ –ø–æ—Ä–∞ —Å–ø–∞—Ç—å. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
        "üß† –§–∞–∫—Ç—ã –æ—á–µ–≤–∏–¥–Ω—ã ‚Äî —É—Å—Ç–∞–ª–æ—Å—Ç—å. –°–æ–Ω –Ω—É–∂–µ–Ω. –î–æ–±—Ä–æ–π –Ω–æ—á–∏.",
        "üé© –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ: –Ω–æ—á—å –¥–ª—è –æ—Ç–¥—ã—Ö–∞. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.",
    ],
}


def get_good_night_message() -> str:
    now = datetime.now(MOSCOW_TZ)
    day = now.weekday()
    variants = GOOD_NIGHT_BY_DAY.get(day, ["–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!"])
    return random.choice(variants)

# ============== DATA FILES ==============
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞ Render Free –¥–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
# –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
DATA_DIR = "/tmp"  # –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è Render Free

BIRTHDAYS_FILE = "birthdays.json"
GARMIN_DATA_FILE = "garmin_users.json"
GARMIN_KEY_FILE = "garmin_key.key"

# ============== –ó–ê–©–ò–¢–ê –û–¢ –ù–ê–ö–†–£–¢–û–ö ==============
# –ú–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –≤ —á–∞—Å
MAX_POINTS_PER_HOUR = 20
# –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤
MAX_MESSAGES_PER_MINUTE = 5
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –±–∞–ª–ª–∞
MIN_MESSAGE_LENGTH = 5
# {user_id: [–≤—Ä–µ–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π]}
user_message_times = {}

# ============== –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–´ –†–ï–ô–¢–ò–ù–ì–ê ==============
POINTS_PER_MESSAGES = 300  # –ó–∞ —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–∞—ë—Ç—Å—è 1 –±–∞–ª–ª
POINTS_PER_PHOTOS = 10    # –ó–∞ —Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –¥–∞—ë—Ç—Å—è 1 –±–∞–ª–ª
POINTS_PER_LIKES = 50     # –ó–∞ —Å–∫–æ–ª—å–∫–æ –ª–∞–π–∫–æ–≤ –¥–∞—ë—Ç—Å—è 1 –±–∞–ª–ª
POINTS_PER_REPLY = 1      # –ó–∞ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ —Ç–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ

# ============== –£–†–û–í–ù–ò –£–ß–ê–°–¢–ù–ò–ö–û–í ==============
USER_LEVELS = {
    "–ù–æ–≤–∏—á–æ–∫": 0,         # 0+ –æ—á–∫–æ–≤
    "–ê–∫—Ç–∏–≤–Ω—ã–π": 10,       # 10+ –æ—á–∫–æ–≤
    "–õ–∏–¥–µ—Ä": 50,          # 50+ –æ—á–∫–æ–≤
    "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞": 100,   # 100+ –æ—á–∫–æ–≤
}

LEVEL_EMOJIS = {
    "–ù–æ–≤–∏—á–æ–∫": "üå±",
    "–ê–∫—Ç–∏–≤–Ω—ã–π": "‚≠ê",
    "–õ–∏–¥–µ—Ä": "üëë",
    "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞": "üèÜ",
}

# ============== –£–ß–Å–¢ –ù–ï–î–ï–õ–¨ ==============
current_week = 0

# ============== GARMIN UTILS ==============
def get_garmin_key():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è"""
    global GARMIN_ENCRYPTION_KEY
    
    if GARMIN_ENCRYPTION_KEY is not None:
        return GARMIN_ENCRYPTION_KEY
    
    try:
        if os.path.exists(GARMIN_KEY_FILE):
            with open(GARMIN_KEY_FILE, 'rb') as f:
                GARMIN_ENCRYPTION_KEY = f.read()
            logger.info("[GARMIN] –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ —Ñ–∞–π–ª–∞")
        else:
            GARMIN_ENCRYPTION_KEY = Fernet.generate_key()
            with open(GARMIN_KEY_FILE, 'wb') as f:
                f.write(GARMIN_ENCRYPTION_KEY)
            logger.info("[GARMIN] –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è")
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª—é—á–æ–º: {e}")
        # –°–æ–∑–¥–∞–µ–º –∫–ª—é—á –≤ –ø–∞–º—è—Ç–∏ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
        GARMIN_ENCRYPTION_KEY = Fernet.generate_key()
    
    return GARMIN_ENCRYPTION_KEY


def encrypt_garmin_password(password: str) -> str:
    """–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è Garmin"""
    try:
        key = get_garmin_key()
        f = Fernet(key)
        encrypted = f.encrypt(password.encode())
        return base64.b64encode(encrypted).decode()
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: {e}")
        return ""


def decrypt_garmin_password(encrypted_password: str) -> str:
    """–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è Garmin"""
    try:
        key = get_garmin_key()
        f = Fernet(key)
        decoded = base64.b64decode(encrypted_password.encode())
        decrypted = f.decrypt(decoded)
        return decrypted.decode()
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: {e}")
        return ""


async def async_save_to_channel(data_type: str, data: Any):
    """–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–Ω–∞–ª"""
    if not DATA_CHANNEL_ID or not application:
        return False
    try:
        return await save_to_channel(application.bot, data_type, data)
    except Exception as e:
        logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ async_save_to_channel ({data_type}): {e}")
        return False


def save_garmin_users():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Garmin –≤ —Ñ–∞–π–ª –∏ –∫–∞–Ω–∞–ª"""
    try:
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è JSON (–∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏)
        save_data = {}
        for user_id, data in garmin_users.items():
            save_data[str(user_id)] = {
                "name": data["name"],
                "email": data["email"],
                "encrypted_password": data["encrypted_password"],
                "last_activity_id": data.get("last_activity_id", ""),
                "monthly_distance": data.get("monthly_distance", 0.0),
                "monthly_activities": data.get("monthly_activities", 0),
                "last_activity_date": data.get("last_activity_date", "")
            }
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
        with open(GARMIN_DATA_FILE, 'w', encoding='utf-8') as f:
            json.dump(save_data, f, ensure_ascii=False, indent=2)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                loop = get_bot_loop()
                loop.create_task(save_to_channel(application.bot, "garmin_users", save_data))
            except Exception:
                pass  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        
        logger.info(f"[GARMIN] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: {len(garmin_users)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {e}")


# –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ event loop
_bot_loop = None

def get_bot_loop():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ event loop –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π"""
    global _bot_loop
    if _bot_loop is None:
        try:
            _bot_loop = asyncio.get_event_loop()
        except RuntimeError:
            _bot_loop = asyncio.new_event_loop()
            asyncio.set_event_loop(_bot_loop)
    return _bot_loop


def save_birthdays():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–∞–π–ª –∏ –∫–∞–Ω–∞–ª"""
    global user_birthdays
    
    try:
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è JSON (–∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏)
        save_data = {}
        for user_id, data in user_birthdays.items():
            save_data[str(user_id)] = data
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
        with open(BIRTHDAYS_FILE, 'w', encoding='utf-8') as f:
            json.dump(save_data, f, ensure_ascii=False, indent=2)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                loop = get_bot_loop()
                loop.create_task(save_to_channel(application.bot, "birthdays", save_data))
            except Exception:
                pass  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        
        logger.info(f"[PERSIST] –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: {len(user_birthdays)}")
    except Exception as e:
        logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è birthdays: {e}")


async def save_user_running_stats():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–µ–∂–µ–∫ –≤ —Ñ–∞–π–ª –∏ –∫–∞–Ω–∞–ª (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)"""
    global user_running_stats
    
    try:
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è JSON (–∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏)
        save_data = {}
        for user_id, data in user_running_stats.items():
            save_data[str(user_id)] = data
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                await save_to_channel(application.bot, "runs", save_data)
            except Exception as e:
                logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è runs: {e}")
        
        logger.info(f"[PERSIST] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–µ–∂–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {len(user_running_stats)}")
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è runs: {e}")


async def save_daily_stats():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∫–∞–Ω–∞–ª (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)"""
    global daily_stats
    
    try:
        # –õ–æ–≥–∏—Ä—É–µ–º —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
        msg_count = daily_stats.get("total_messages", 0)
        photo_count = len(daily_stats.get("photos", []))
        user_count = len(daily_stats.get("user_messages", {}))
        logger.info(f"[PERSIST] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ daily_stats: {msg_count} —Å–æ–æ–±—â–µ–Ω–∏–π, {photo_count} —Ñ–æ—Ç–æ, {user_count} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                await save_to_channel(application.bot, "daily", daily_stats)
                logger.info(f"[PERSIST] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–∞–Ω–∞–ª")
            except Exception as e:
                logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è daily: {e}")
        else:
            logger.warning(f"[PERSIST] DATA_CHANNEL_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–∞–Ω–∞–ª")
        
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è daily: {e}")


async def save_user_rating_stats():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–∞–Ω–∞–ª + –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)"""
    global user_rating_stats, user_current_level
    
    try:
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è JSON (–∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏, set -> list)
        save_data = {}
        for user_id, data in user_rating_stats.items():
            # –ö–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º set –≤ list
            save_data[str(user_id)] = data.copy()
            if "days_active" in save_data[str(user_id)] and isinstance(save_data[str(user_id)]["days_active"], set):
                save_data[str(user_id)]["days_active"] = list(save_data[str(user_id)]["days_active"])
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–µ —É—Ä–æ–≤–Ω–∏
        for user_id, level in user_current_level.items():
            if str(user_id) not in save_data:
                save_data[str(user_id)] = {"name": "Unknown", "messages": 0, "photos": 0, "likes": 0, "replies": 0, "days_active": []}
            save_data[str(user_id)]["_current_level"] = level
        
        # –°–û–•–†–ê–ù–Ø–ï–ú –í –õ–û–ö–ê–õ–¨–ù–´–ô –§–ê–ô–õ (–≤—Å–µ–≥–¥–∞!)
        try:
            with open("user_rating_stats.json", "w", encoding="utf-8") as f:
                json.dump(save_data, f, ensure_ascii=False, indent=2)
            logger.info(f"[PERSIST] –†–µ–π—Ç–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –ª–æ–∫–∞–ª—å–Ω–æ: {len(user_rating_stats)}")
        except Exception as e:
            logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {e}")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                await save_to_channel(application.bot, "ratings", save_data)
            except Exception as e:
                logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ratings: {e}")
        
        logger.info(f"[PERSIST] –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {len(user_rating_stats)}")
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ratings: {e}")


def load_user_rating_stats():
    """–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —Å–Ω–∞—á–∞–ª–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –ø–æ—Ç–æ–º –∫–∞–Ω–∞–ª"""
    global user_rating_stats, user_current_level
    
    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    try:
        if os.path.exists("user_rating_stats.json"):
            with open("user_rating_stats.json", "r", encoding="utf-8") as f:
                loaded_data = json.load(f)
            
            # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ
            user_rating_stats = {}
            user_current_level = {}
            
            for user_id_str, data in loaded_data.items():
                user_id = int(user_id_str)
                user_rating_stats[user_id] = data
                
                # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º set –∏–∑ list
                if "days_active" in data and isinstance(data["days_active"], list):
                    user_rating_stats[user_id]["days_active"] = set(data["days_active"])
                
                # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ä–æ–≤–Ω–∏
                if "_current_level" in data:
                    user_current_level[user_id] = data["_current_level"]
            
            logger.info(f"[PERSIST] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: {len(user_rating_stats)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
            return True
            
    except Exception as e:
        logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: {e}")
    
    return False


async def save_user_active_stats():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –ø–∏—Å–∞–ª–∏) - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ"""
    global user_last_active
    
    try:
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è JSON (–∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏)
        save_data = {}
        for user_id, last_date in user_last_active.items():
            save_data[str(user_id)] = last_date
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                await save_to_channel(application.bot, "active", save_data)
            except Exception as e:
                logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è active: {e}")
        
        logger.info(f"[PERSIST] –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {len(user_last_active)}")
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è active: {e}")


async def save_chat_history():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (—Å–∫—Ä—ã—Ç–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π) - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ"""
    global chat_history
    
    try:
        # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
        from datetime import datetime, timedelta
        moscow_now = datetime.utcnow() + timedelta(hours=3)
        chat_history["last_updated"] = moscow_now.isoformat()
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        if DATA_CHANNEL_ID and application and hasattr(application, 'bot') and application.bot:
            try:
                await save_to_channel(application.bot, "history", chat_history)
            except Exception as e:
                logger.error(f"[PERSIST] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è history: {e}")
        
        msg_count = len(chat_history.get("messages", []))
        photo_count = len(chat_history.get("photos", []))
        logger.info(f"[HISTORY] –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {msg_count} —Å–æ–æ–±—â–µ–Ω–∏–π, {photo_count} —Ñ–æ—Ç–æ")
    except Exception as e:
        logger.error(f"[PERSIST] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏: {e}")


def load_chat_history():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –∏–∑ –∫–∞–Ω–∞–ª–∞"""
    global chat_history
    
    try:
        # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        logger.info("[HISTORY] –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –≥–æ—Ç–æ–≤–∞ (–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫–∞–Ω–∞–ª–∞)")
    except Exception as e:
        logger.error(f"[HISTORY] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: {e}")
        chat_history = {
            "messages": [],
            "photos": [],
            "likes": [],
            "edits": [],
            "deletions": [],
            "last_updated": ""
        }


# ============== –ß–ò–°–¢–û–ï –•–†–ê–ù–ò–õ–ò–©–ï –î–ê–ù–ù–´–• ==============
# –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ –±–æ—Ç–∞)
# –ë–æ—Ç —á–∏—Ç–∞–µ—Ç –æ—Ç—Å—é–¥–∞ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–¥–æ–∫

async def save_to_storage_raw(bot, data_type: str, data: Any, append: bool = False) -> bool:
    """
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–Ω–∞–ª —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ß–ò–°–¢–û–ú —Ñ–æ—Ä–º–∞—Ç–µ.
    –ö–∞–∂–¥—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö = –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –º–∞—Ä–∫–µ—Ä–æ–≤.
    
    Args:
        bot: Telegram bot instance
        data_type: –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (messages, runs, users, etc.)
        data: –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        append: –ï—Å–ª–∏ True - –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –¥–∞–Ω–Ω—ã–º, –∏–Ω–∞—á–µ - –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º
    """
    global channel_message_ids
    
    if not STORAGE_CHANNEL_ID:
        logger.warning(f"[STORAGE] STORAGE_CHANNEL_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω")
        return False
    
    try:
        import json
        
        json_data = json.dumps(data, ensure_ascii=False, indent=2)
        marker = f"#STORAGE_{data_type.upper()}"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
        msg_id = channel_message_ids.get(f"storage_{data_type}")
        
        if msg_id and append:
            # –î–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –¥–∞–Ω–Ω—ã–º
            try:
                # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ
                current_msg = await bot.get_message(chat_id=STORAGE_CHANNEL_ID, message_id=msg_id)
                current_text = current_msg.text or ""
                # –£–±–∏—Ä–∞–µ–º –º–∞—Ä–∫–µ—Ä
                current_text = current_text.replace(f"{marker}\n", "").strip()
                try:
                    current_data = json.loads(current_text)
                except Exception:
                    current_data = []
                
                # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                if isinstance(current_data, list) and isinstance(data, list):
                    current_data.extend(data)
                    new_data = current_data
                else:
                    new_data = data
                
                # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                await bot.edit_message_text(
                    chat_id=STORAGE_CHANNEL_ID,
                    message_id=msg_id,
                    text=f"{marker}\n\n{json.dumps(new_data, ensure_ascii=False, indent=2)}"
                )
                logger.info(f"[STORAGE] –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} (–¥–æ–±–∞–≤–ª–µ–Ω–æ {len(data) if isinstance(data, list) else 1})")
                return True
            except Exception as append_error:
                logger.warning(f"[STORAGE] –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –∫ {data_type}, —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ")
                msg_id = None
        
        # –°–æ–∑–¥–∞—ë–º –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        try:
            if msg_id:
                try:
                    await bot.delete_message(chat_id=STORAGE_CHANNEL_ID, message_id=msg_id)
                except Exception:
                    pass
            
            message = await bot.send_message(
                chat_id=STORAGE_CHANNEL_ID,
                text=f"{marker}\n\n{json_data}"
            )
            channel_message_ids[f"storage_{data_type}"] = message.message_id
            logger.info(f"[STORAGE] –°–æ–∑–¥–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} –≤ –∫–∞–Ω–∞–ª–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è")
            return True
        except Exception as send_error:
            logger.error(f"[STORAGE] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ {data_type}: {send_error}")
            return False
        
    except Exception as e:
        logger.error(f"[STORAGE] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è {data_type}: {e}")
        return False


async def load_from_storage_raw(bot, data_type: str) -> Any:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
    
    Returns:
        –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    """
    if not STORAGE_CHANNEL_ID:
        logger.warning(f"[STORAGE] STORAGE_CHANNEL_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω")
        return None
    
    try:
        import json
        
        marker = f"#STORAGE_{data_type.upper()}"
        
        # –ò—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –º–∞—Ä–∫–µ—Ä–æ–º
        try:
            messages = await bot.get_chat_history(chat_id=STORAGE_CHANNEL_ID, limit=100)
            for msg in messages:
                if msg.text and msg.text.startswith(marker):
                    text = msg.text.replace(f"{marker}\n", "").strip()
                    data = json.loads(text)
                    logger.info(f"[STORAGE] –ó–∞–≥—Ä—É–∂–µ–Ω—ã {data_type}: {len(data) if isinstance(data, list) else 1} –∑–∞–ø–∏—Å–µ–π")
                    return data
        except Exception as search_error:
            logger.warning(f"[STORAGE] –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ {data_type} –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ")
        
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–≤—Å–µ –∫–ª—é—á–∏ –¥–ª—è daily_stats, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ KeyError)
        defaults = {
            "messages": [],
            "runs": [],
            "users": {},
            "photos": [],
            "likes": [],
            "daily_stats": {
                "date": "",
                "total_messages": 0,
                "user_messages": {},
                "photos": [],
                "first_photo_user_id": None,
                "first_photo_user_name": None,
            }
        }
        return defaults.get(data_type, [])
        
    except Exception as e:
        logger.error(f"[STORAGE] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ {data_type}: {e}")
        return None


def save_user_to_storage(user_id: int, user_name: str, action: str, extra_data: dict = None):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ"""
    if not STORAGE_CHANNEL_ID or not application:
        return
    
    try:
        entry = {
            "user_id": user_id,
            "user_name": user_name,
            "action": action,  # message, photo, like, run
            "timestamp": datetime.now(MOSCOW_TZ).isoformat(),
        }
        if extra_data:
            entry.update(extra_data)
        
        loop = get_bot_loop()
        loop.create_task(save_to_storage_raw(application.bot, "users", entry, append=True))
    except Exception as e:
        logger.error(f"[STORAGE] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")


def save_run_to_storage(user_id: int, user_name: str, distance: float, duration: int, calories: int):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–±–µ–∂–∫–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ"""
    if not STORAGE_CHANNEL_ID or not application:
        return
    
    try:
        entry = {
            "user_id": user_id,
            "user_name": user_name,
            "distance": distance,
            "duration": duration,
            "calories": calories,
            "timestamp": datetime.now(MOSCOW_TZ).isoformat()
        }
        
        loop = get_bot_loop()
        loop.create_task(save_to_storage_raw(application.bot, "runs", entry, append=True))
    except Exception as e:
        logger.error(f"[STORAGE] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–µ–∂–∫–∏: {e}")


# ============== –ó–ê–ì–†–£–ó–ß–ò–ö–ò –î–ê–ù–ù–´–• –î–õ–Ø –°–í–û–î–û–ö ==============
async def load_stats_for_summaries(bot) -> dict:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–¥–æ–∫.
    """
    stats = {
        "daily": None,
        "users": [],
        "runs": [],
        "ratings": {}
    }
    
    try:
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        stats["daily"] = await load_from_storage_raw(bot, "daily_stats")
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        users_data = await load_from_storage_raw(bot, "users")
        if users_data:
            stats["users"] = users_data
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–±–µ–∂–∫–∏
        runs_data = await load_from_storage_raw(bot, "runs")
        if runs_data:
            stats["runs"] = runs_data
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥
        stats["ratings"] = await load_from_storage_raw(bot, "ratings")
        
        logger.info(f"[STATS] –ó–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è —Å–≤–æ–¥–æ–∫: {len(stats['users'])} –∑–∞–ø–∏—Å–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, {len(stats['runs'])} –ø—Ä–æ–±–µ–∂–µ–∫")
        return stats
        
    except Exception as e:
        logger.error(f"[STATS] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–≤–æ–¥–æ–∫: {e}")
        return stats


def load_garmin_users():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Garmin –∏–∑ —Ñ–∞–π–ª–∞"""
    global garmin_users
    
    try:
        if not os.path.exists(GARMIN_DATA_FILE):
            logger.info("[GARMIN] –§–∞–π–ª –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞—ë–º –ø—É—Å—Ç–æ–π")
            garmin_users = {}
            return
        
        with open(GARMIN_DATA_FILE, 'r', encoding='utf-8') as f:
            load_data = json.load(f)
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ (–∫–ª—é—á–∏ -> int)
        garmin_users = {}
        for user_id_str, data in load_data.items():
            garmin_users[int(user_id_str)] = {
                "name": data["name"],
                "email": data["email"],
                "encrypted_password": data["encrypted_password"],
                "last_activity_id": data.get("last_activity_id", ""),
                "monthly_distance": data.get("monthly_distance", 0.0),
                "monthly_activities": data.get("monthly_activities", 0),
                "last_activity_date": data.get("last_activity_date", "")
            }
        
        logger.info(f"[GARMIN] –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(garmin_users)}")
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: {e}")
        garmin_users = {}

# ============== –î–ê–ù–ù–´–ï ==============
DAY_THEMES = {
    "Monday": "üéµ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äî –¥–µ–Ω—å –º—É–∑—ã–∫–∏! –ö–∞–∫–∞—è –ø–µ—Å–Ω—è –∑–∞–≤–æ–¥–∏—Ç —Ç–µ–±—è –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É?",
    "Tuesday": "üêï –í—Ç–æ—Ä–Ω–∏–∫ ‚Äî –¥–µ–Ω—å –ø–∏—Ç–æ–º—Ü–µ–≤! –ü–æ–∫–∞–∂–∏ —Å–≤–æ–µ–≥–æ —á–µ—Ç–≤–µ—Ä–æ–Ω–æ–≥–æ–≥–æ –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞!",
    "Wednesday": "üíù –°—Ä–µ–¥–∞ ‚Äî –¥–µ–Ω—å –¥–æ–±—Ä—ã—Ö –¥–µ–ª! –ü–æ–¥–µ–ª–∏—Å—å, –∫–æ–º—É —Ç—ã —Å–µ–≥–æ–¥–Ω—è –ø–æ–º–æ–≥!",
    "Thursday": "üçï –ß–µ—Ç–≤–µ—Ä–≥ ‚Äî –¥–µ–Ω—å –µ–¥—ã! –ß—Ç–æ —Ç—ã –µ—à—å –ø–µ—Ä–µ–¥ –∏ –ø–æ—Å–ª–µ –ø—Ä–æ–±–µ–∂–∫–∏?",
    "Friday": "üì∏ –ü—è—Ç–Ω–∏—Ü–∞ ‚Äî –¥–µ–Ω—å —Å–µ–ª—Ñ–∏! –ü–æ–∫–∞–∂–∏ —Å–≤–æ—ë –ª–∏—Ü–æ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏!",
    "Saturday": "üò© –°—É–±–±–æ—Ç–∞ ‚Äî –¥–µ–Ω—å –Ω—ã—Ç—å—è! –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ —Ç—è–∂–µ–ª–æ!",
    "Sunday": "üì∑ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ ‚Äî –¥–µ–Ω—å –Ω—é–¥—Å–æ–≤! –ü–æ–∫–∞–∂–∏ –∫—Ä–∞—Å–∏–≤—ã–µ –≤–∏–¥—ã —Å –ø—Ä–æ–±–µ–∂–∫–∏!",
}

WELCOME_MESSAGES = [
    "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –±–µ–≥–æ–≤–æ–π –º—É—Ä–∞–≤–µ–π–Ω–∏–∫! –¢—ã —É–∂–µ –≤—ã–±—Ä–∞–ª —Å–≤–æ—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é: 5 –∫–º –¥–ª—è —Ä–∞–∑–º–∏–Ω–∫–∏, –ø–æ–ª—É–º–∞—Ä–∞—Ñ–æ–Ω –¥–ª—è –¥—É—à–∏ –∏–ª–∏ —Å—Ä–∞–∑—É —É–ª—å—Ç—Ä–∞–º–∞—Ä–∞—Ñ–æ–Ω ‚Äî —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞ —á—Ç–æ —Å–ø–æ—Å–æ–±–µ–Ω? –†–∞—Å—Å–∫–∞–∂–∏, –∫–∞–∫–æ–π —É —Ç–µ–±—è —É—Ä–æ–≤–µ–Ω—å: ¬´–µ—â—ë –¥—ã—à—É¬ª, ¬´—É–∂–µ –ø–æ—Ç–µ—é¬ª –∏–ª–∏ ¬´—è ‚Äî –º–∞—à–∏–Ω–∞¬ª?",
    "–ü—Ä–∏–≤–µ—Ç, –Ω–æ–≤–∏—á–æ–∫! –í –Ω–∞—à–µ–º —á–∞—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Å—Ç—ã–µ: –µ—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –±–µ–∂–∞—Ç—å ‚Äî –∏–¥–∏, –µ—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –∏–¥—Ç–∏ ‚Äî –ø–æ–ª–∑–∏, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ —Å–¥–∞–≤–∞–π—Å—è! –¢–∞–∫ —Ç—ã –∫—Ç–æ: –Ω–∞—á–∏–Ω–∞—é—â–∏–π —Å—Ç–∞–π–µ—Ä, –æ–ø—ã—Ç–Ω—ã–π –º–∞—Ä–∞—Ñ–æ–Ω–µ—Ü –∏–ª–∏ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ä–µ–∫–æ—Ä–¥—Å–º–µ–Ω –≤ –æ–∂–∏–¥–∞–Ω–∏–∏?",
    "–û–≥–æ, –Ω–æ–≤—ã–π –±–µ–≥—É–Ω –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ! –°—Ä–æ—á–Ω–æ –∑–∞–ø–æ–ª–Ω–∏ –∞–Ω–∫–µ—Ç—É: –∏–º—è, –ª—é–±–∏–º—ã–π –º–∞—Ä—à—Ä—É—Ç –∏ —Ü–µ–ª—å –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π –∑–∞–±–µ–≥ (–æ—Ç ¬´–ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å¬ª –¥–æ ¬´–ø–æ—Ä–≤–∞—Ç—å –≤—Å–µ—Ö –Ω–∞ —Ñ–∏–Ω–∏—à–µ¬ª). –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É!",
    "–ü—Ä–∏–≤–µ—Ç! –¢—ã –ø–æ–ø–∞–ª –≤ –º–µ—Å—Ç–æ, –≥–¥–µ –∫–∏–ª–æ–º–µ—Ç—Ä—ã —Å—á–∏—Ç–∞—é—Ç –Ω–µ –ø–æ GPS, –∞ –ø–æ —É–ª—ã–±–∫–∞–º. –¢–∞–∫ —á—Ç–æ —Ç—ã: —Ç–æ—Ç, –∫—Ç–æ —Ç–æ–ª—å–∫–æ —É—á–∏—Ç—Å—è –∑–∞–≤—è–∑—ã–≤–∞—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏, —É–∂–µ –±–µ–≥–∞–µ—Ç –ø–æ —É—Ç—Ä–∞–º –∏–ª–∏ –≥–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–∞—Ç—å –º–∞—Ä–∞—Ñ–æ–Ω –≤ –ø–∏–∂–∞–º–µ?",
    "–í–Ω–∏–º–∞–Ω–∏–µ! –í —á–∞—Ç–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω —Å–≤–µ–∂–∏–π –±–µ–≥–æ–≤–æ–π —Ä–µ—Å—É—Ä—Å! –û–±—ä–µ–∫—Ç, –Ω–∞–∑–æ–≤–∏—Ç–µ –≤–∞—à —Å—Ç–∞—Ç—É—Å: ¬´–µ—â—ë –Ω–µ –ø—Ä–æ–±–µ–∂–∞–ª –ø–µ—Ä–≤—ã–π –∫–º¬ª, ¬´—É–∂–µ –≤—Ç—è–Ω—É–ª—Å—è¬ª –∏–ª–∏ ¬´—è —Ç—É—Ç –≥–ª–∞–≤–Ω—ã–π –ø–µ–π—Å–º–µ–π–∫–µ—Ä¬ª?",
    "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–µ–≥–æ–≤—É—é —Å–µ–º—å—é! –£ –Ω–∞—Å —Ç—É—Ç —Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: –Ω–æ–≤–∏—á–∫–∏ (–∫–æ—Ç–æ—Ä—ã–µ –±–æ—è—Ç—Å—è —Å–ª–æ–≤–∞ ¬´–º–∞—Ä–∞—Ñ–æ–Ω¬ª), –ª—é–±–∏—Ç–µ–ª–∏ (–∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–Ω–∞—é—Ç, —á—Ç–æ —Ç–∞–∫–æ–µ –∫—Ä–µ–ø–∞—Ç—É—Ä–∞) –∏ –ª–µ–≥–µ–Ω–¥—ã (–∫–æ—Ç–æ—Ä—ã–µ –±–µ–≥–∞—é—Ç –¥–∞–∂–µ –≤–æ —Å–Ω–µ). –ö –∫–∞–∫–æ–π –æ—Ç–Ω–æ—Å–∏—à—å—Å—è —Ç—ã?",
    "–≠–π, –Ω–æ–≤–µ–Ω—å–∫–∏–π! –ü—Ä–∏–∑–Ω–∞–≤–∞–π—Å—è: —Ç—ã —Ç—É—Ç —á—Ç–æ–±—ã —Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∫–æ—Ä–¥—ã, –∏—Å–∫–∞—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å –æ –∫—Ä–æ—Å—Å–æ–≤–∫–∞—Ö? –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ ‚Äî –±–µ–≥–∏ –∫ –Ω–∞–º, —É –Ω–∞—Å –≤–µ—Å–µ–ª–æ!",
    "–ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç! –¢—ã —Å–µ–π—á–∞—Å –Ω–∞ —ç—Ç–∞–ø–µ: ¬´–∫—Ç–æ –≤—Å–µ —ç—Ç–∏ –±–µ–≥—É–Ω—ã?¬ª, ¬´–æ, —Ç—É—Ç –∫–ª–∞—Å—Å–Ω—ã–µ —Ä–µ–±—è—Ç–∞¬ª –∏–ª–∏ ¬´—è –∑–Ω–∞—é –≤—Å–µ —Ç—Ä–∞—Å—Å—ã, –Ω–æ –Ω–∏–∫–æ–º—É –Ω–µ —Å–∫–∞–∂—É¬ª? –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –∑–∞–±–µ–≥!",
    "–ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫? –û—Ç–ª–∏—á–Ω–æ! –£ –Ω–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –ª—ë–≥–∫–∏–π (–ø—Ä–æ—Å—Ç–æ –≤—ã–π—Ç–∏ –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É), —Å—Ä–µ–¥–Ω–∏–π (–Ω–µ —Å–æ–π—Ç–∏ —Å –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏) –∏ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π (—É–ª—ã–±–∞—Ç—å—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö). –ö–∞–∫–æ–π –≤—ã–±–∏—Ä–∞–µ—à—å?",
    "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç, –≥–¥–µ –∫–∏–ª–æ–º–µ—Ç—Ä—ã ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ñ—Ä—ã, –∞ –∏—Å—Ç–æ—Ä–∏–∏! –¢—ã –∫—Ç–æ: —Ç–æ—Ç, –∫—Ç–æ —Ç–æ–ª—å–∫–æ –º–µ—á—Ç–∞–µ—Ç –æ –ø–µ—Ä–≤–æ–º –∑–∞–±–µ–≥–µ, —É–∂–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ–¥–∞–ª–∏ –∏–ª–∏ –≥–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–∞—Ç—å 42 –∫–º —Ä–∞–¥–∏ —à—É—Ç–∫–∏?",
]

# ============== –°–û–í–ï–¢–´ –î–ù–Ø (–ò–ó –ò–ù–¢–ï–†–ù–ï–¢–ê) ==============
import re
from bs4 import BeautifulSoup  # type: ignore[import-untyped]
from typing import List, Dict, Optional

# –ö—ç—à —Å–æ–≤–µ—Ç–æ–≤
_tips_cache = {
    "running": [],
    "recovery": [],
    "equipment": [],
    "last_update": 0
}

CACHE_DURATION = 3600  # –û–±–Ω–æ–≤–ª—è—Ç—å —Å–æ–≤–µ—Ç—ã –∫–∞–∂–¥—ã–π —á–∞—Å


# ============== SMART LOCAL AI RESPONSE SYSTEM ==============
# –†–∞–±–æ—Ç–∞–µ—Ç 100% –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ API –∏ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π!

# ============== –†–ê–°–®–ò–†–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –õ–û–ö–ê–õ–¨–ù–´–• –û–¢–í–ï–¢–û–í ==============

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
GREETING_RESPONSES = [
    "–ü—Ä–∏–≤–µ—Ç, {user_name}! –†–∞–¥ —Ç–µ–±—è —Å–ª—ã—à–∞—Ç—å! üèÉ‚Äç‚ôÇÔ∏è",
    "{user_name}, –ø—Ä–∏–≤–µ—Ç! –ö–∞–∫ –±–µ–≥ —Å–µ–≥–æ–¥–Ω—è?",
    "–ó–¥–æ—Ä–æ–≤–æ, {user_name}! –î–∞–≤–∞–π –±–æ–ª—å—à–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —á–∞—Ç!",
    "{user_name}, —Ç—ã –≤ —Ñ–æ—Ä–º–µ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üí™",
    "–ü—Ä–∏–≤–µ—Ç, {user_name}! –ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –ø—Ä–æ–±–µ–∂–∫–∞–º?",
    "–û, {user_name} –≤ —á–∞—Ç–µ! –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–µ–Ω—å! ‚òÄÔ∏è",
    "{user_name}, –ø—Ä–∏–≤–µ—Ç–∏–∫! –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?",
    "–ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç, {user_name}! –ñ–∏–∑–Ω—å –±—å—ë—Ç –∫–ª—é—á–æ–º! ‚ö°",
    "{user_name}, –∑–¥–æ—Ä–æ–≤–æ, —á—Ç–æ —Ç—ã –∑–¥–µ—Å—å!",
    "–ü—Ä–∏–≤–µ—Ç, {user_name}! –°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å! ‚ú®",
]

# –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
THANKS_RESPONSES = [
    "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, {user_name}! –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üòä",
    "–ù–µ –∑–∞ —á—Ç–æ, {user_name}! –≠—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞ ‚Äî –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º!",
    "{user_name}, –≤–∑–∞–∏–º–Ω–æ! –ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å!",
    "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, {user_name}! –û–±—Ä–∞—â–∞–π—Å—è –µ—â—ë!",
    "–î–∞ –Ω–µ –∑–∞ —á—Ç–æ, {user_name}! –≠—Ç–æ –º–µ–ª–æ—á—å! üëç",
    "{user_name}, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! –†–∞–¥, —á—Ç–æ —Å–º–æ–≥ –ø–æ–º–æ—á—å!",
    "–í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å, {user_name}! ü§ù",
    "{user_name}, —ç—Ç–æ —Ç–µ–±–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å! ‚ù§Ô∏è",
    "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, {user_name}! –û–±—Ä–∞—â–∞–π—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è! üì¨",
    "–î–∞ –ª–∞–¥–Ω–æ, {user_name}, —ç—Ç–æ –ø—É—Å—Ç—è–∫–∏! üòÑ",
]

# –°–æ–≥–ª–∞—Å–∏–µ
AGREEMENT_RESPONSES = [
    "–°–æ–≥–ª–∞—Å–µ–Ω, {user_name}! –û—Ç–ª–∏—á–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ! üëç",
    "–¢–æ—á–Ω–æ, {user_name}! –¢—ã –ø—Ä–∞–≤!",
    "{user_name}, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é!",
    "–ò–º–µ–Ω–Ω–æ —Ç–∞–∫, {user_name}!",
    "–ë–µ–∑—É—Å–ª–æ–≤–Ω–æ, {user_name}! 100%! ‚úÖ",
    "{user_name}, —è —Å —Ç–æ–±–æ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω!",
    "–ò–º–µ–Ω–Ω–æ! {user_name}, —Ç—ã –ø–æ–ø–∞–ª –≤ —Ç–æ—á–∫—É! üéØ",
    "–°–ª—ã—à—É —Ç–µ–±—è, {user_name}! –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é! üíØ",
    "–î–∞, –¥–∞, –¥–∞! {user_name}, —ç—Ç–æ —Ç–æ—á–Ω–æ!",
    "{user_name}, —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –≤—Å–µ 100! üèÜ",
]

# –í–æ–ø—Ä–æ—Å—ã
QUESTION_RESPONSES = [
    "–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å, {user_name}! –î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º...",
    "{user_name}, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—à—å—Å—è? –≠—Ç–æ –∑–¥–æ—Ä–æ–≤–æ!",
    "–í–æ–ø—Ä–æ—Å –ø–æ —Å—É—â–µ—Å—Ç–≤—É, {user_name}! –£–≤–∞–∂–∞—é!",
    "{user_name}, –ø—Ä–æ–¥–æ–ª–∂–∞–π —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å ‚Äî —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
    "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, {user_name}! –°–∞–º–æ–º—É –ª—é–±–æ–ø—ã—Ç–Ω–æ! ü§î",
    "{user_name}, –æ—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî –Ω–∞–¥–æ –ø–æ–¥—É–º–∞—Ç—å...",
    "–õ—é–±–ª—é –≤–æ–ø—Ä–æ—Å—ã, {user_name}! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üß†",
    "{user_name}, —Ö–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å ‚Äî –Ω–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Ç–∞–∫–∏–µ —Å–ª—ã—à—É!",
    "–û, {user_name}, —Ç—ã –∑–∞–¥—É–º–∞–ª—Å—è? –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üí≠",
    "–í–æ—Ç —ç—Ç–æ –≤–æ–ø—Ä–æ—Å, {user_name}! –£–≤–∞–∂–∞—é –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ! üéì",
]

# –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å / —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
RUNNING_RESPONSES = [
    "–û, {user_name} –≥–æ–≤–æ—Ä–∏—Ç –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏! –ú–æ—è –ª—é–±–∏–º–∞—è —Ç–µ–º–∞! üí™",
    "{user_name}, –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∂–∏–∑–Ω—å! –°–æ–≥–ª–∞—Å–µ–Ω!",
    "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –¥–µ—Ä–∂–∞—Ç—å —Å–µ–±—è –≤ —Ñ–æ—Ä–º–µ, {user_name}!",
    "{user_name}, —Ç—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è –Ω–∞ –Ω–æ–≤—ã–µ –ø–æ–¥–≤–∏–≥–∏!",
    "{user_name}, –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞! ü¶Ö",
    "–ê —Ç—ã –∑–Ω–∞–µ—à—å, {user_name}, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å? üèÉ‚Äç‚ôÇÔ∏è",
    "{user_name}, –∫–∞–∂–¥—ã–π —à–∞–≥ –Ω–∞ —Å—á–µ—Ç—É! –¢—ã –º–æ–ª–æ–¥–µ—Ü! üëü",
    "–û–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏? {user_name}, —ç—Ç–æ –º–æ—è —Å—Ç–∏—Ö–∏—è! –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º! üèÜ",
    "{user_name}, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞, —ç—Ç–æ –∫–∞–π—Ñ! üòå",
    "{user_name}, —è —Ç–æ–∂–µ –ª—é–±–ª—é –¥–≤–∏–≥–∞—Ç—å—Å—è (–≤ —Ü–∏—Ñ—Ä–æ–≤–æ–º —Å–º—ã—Å–ª–µ)! üíª",
]

# –£—Ç—Ä–æ
MORNING_RESPONSES = [
    "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, {user_name}! –°–æ–ª–Ω—Ü–µ –≤—Å—Ç–∞—ë—Ç ‚Äî —Ç—ã —Ç–æ–∂–µ!",
    "{user_name}, —É—Ç—Ä–æ ‚Äî –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!",
    "–° –¥–æ–±—Ä—ã–º —É—Ç—Ä–æ–º, {user_name}! –ü—É—Å—Ç—å –¥–µ–Ω—å –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º!",
    "{user_name}, –ø—Ä–æ—Å–Ω—É–ª—Å—è ‚Äî —É–∂–µ –º–æ–ª–æ–¥–µ—Ü! –¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤–∞–π!",
    "{user_name}, –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –î–µ–Ω—å —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è! ‚òÄÔ∏è",
    "–£—Ç—Ä–æ –¥–æ–±—Ä–æ–µ, {user_name}! –ö–æ—Ñ–µ –∏ –∑–∞—Ä—è–¥–∫–∞ ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ! ‚òïüí™",
    "{user_name}, —Å –¥–æ–±—Ä—ã–º —É—Ç—Ä–æ–º! –°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –∫—Ä—É—Ç–æ–π –¥–µ–Ω—å!",
    "{user_name}, –ø—Ä–æ—Å—ã–ø–∞–π—Å—è! –ü—Ä–∏—Ä–æ–¥–∞ –∂–¥—ë—Ç —Ç–µ–±—è! üå≥",
    "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, {user_name}! –ü—Ç–∏—Ü—ã —É–∂–µ –ø–æ—é—Ç ‚Äî —Ç–≤–æ—è –æ—á–µ—Ä–µ–¥—å! üê¶",
    "{user_name}, —É—Ç—Ä–æ ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏! üåç",
]

# –ú–æ—Ç–∏–≤–∞—Ü–∏—è
MOTIVATION_RESPONSES = [
    "{user_name}, —Ç—ã –º–æ–∂–µ—à—å –±–æ–ª—å—à–µ, —á–µ–º –¥—É–º–∞–µ—à—å!",
    "–í–µ—Ä—å –≤ —Å–µ–±—è, {user_name}! –Ø –≤ —Ç–µ–±—è –≤–µ—Ä—é!",
    "{user_name}, –∫–∞–∂–¥—ã–π –∫–º ‚Äî —ç—Ç–æ —à–∞–≥ –∫ —Ü–µ–ª–∏!",
    "–ù–µ —Å–¥–∞–≤–∞–π—Å—è, {user_name}! –§–∏–Ω–∏—à –±–ª–∏–∑–æ–∫!",
    "{user_name}, —Ç—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å! üí™",
    "{user_name}, –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—à—å –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å–µ–±–µ —Å–µ–≥–æ–¥–Ω—è!",
    "–ü—Ä–æ–¥–æ–ª–∂–∞–π, {user_name}! –¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏! üèÜ",
    "{user_name}, –æ—Å—Ç–∞–ª–æ—Å—å –Ω–µ–º–Ω–æ–≥–æ ‚Äî —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è!",
    "{user_name}, —è –≤–µ—Ä—é –≤ —Ç–µ–±—è! –î–∞–≤–∞–π –µ—â—ë —á—É—Ç—å-—á—É—Ç—å!",
    "{user_name}, —á–µ–º —Ç—Ä—É–¥–Ω–µ–µ, —Ç–µ–º —Å–ª–∞—â–µ –ø–æ–±–µ–¥–∞! üèÖ",
]

# –®—É—Ç–∫–∏
JOKE_RESPONSES = [
    "{user_name}, —à—É—Ç–∫–∞ –∑–∞—à–ª–∞! –Æ–º–æ—Ä ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ! üòÑ",
    "–•–∞! {user_name}, —Ç—ã –º–µ–Ω—è —Ä–∞—Å—Å–º–µ—à–∏–ª!",
    "{user_name}, —Å —Ç–æ–±–æ–π –≤–µ—Å–µ–ª–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!",
    "–û—Ç–ª–∏—á–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞, {user_name}!",
    "{user_name}, —Ç—ã Comedy Club! üé§",
    "üòÇ {user_name}, —Ä–∂—ë–º –≤–º–µ—Å—Ç–µ!",
    "{user_name}, —Ö–æ—Ä–æ—à–∞—è —à—É—Ç–∫–∞! –ü–æ—Å–º–µ—è–ª—Å—è –æ—Ç –¥—É—à–∏!",
    "{user_name}, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å ‚Äî –º—ã –≤—Å–µ –≤ —Ö–æ—Ä–æ—à–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏! üòÑ",
    "{user_name}, —Ç–≤–æ–π —é–º–æ—Ä –±–æ–¥—Ä–∏—Ç –ª—É—á—à–µ –∫–æ—Ñ–µ! ‚òï",
    "ü´° {user_name}, –∑–∞ —à—É—Ç–∫—É! –¢—ã –≤ —É–¥–∞—Ä–µ!",
]

# –≠–º–æ–¥–∑–∏
EMOJI_RESPONSES = [
    "üòÑ {user_name}, —ç–º–æ–¥–∑–∏ ‚Äî —ç—Ç–æ —è–∑—ã–∫ –≤–µ—á–Ω–æ—Å—Ç–∏!",
    "{user_name}, –∫–ª–∞—Å—Å–Ω—ã–π —ç–º–æ–¥–∑–∏!",
    "–ü—Ä–∏–Ω—è—Ç–æ, {user_name}! üëç",
    "{user_name}, —ç–º–æ–¥–∑–∏ –ø–æ–Ω—è—Ç–Ω—ã –±–µ–∑ —Å–ª–æ–≤! üì±",
    "–û, {user_name}, –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π —è–∑—ã–∫! üé®",
    "{user_name}, –ø–æ–ª—É—á–∏–ª —Å–∏–≥–Ω–∞–ª! üì°",
    "–≠–º–æ–¥–∑–∏ ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—ç–∑–∏—è, {user_name}! üìú",
    "{user_name}, –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Å—Ç–æ–∏—Ç —Ç—ã—Å—è—á–∏ —Å–ª–æ–≤! üñºÔ∏è",
    "–ü–æ–Ω—è–ª, {user_name}! üíØ",
    "{user_name}, —Ç–≤–æ–π —ç–º–æ–¥–∑–∏ –∑–∞—Ä—è–∂–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏–µ–π! ‚ö°",
]

# –£—Å—Ç–∞–ª–æ—Å—Ç—å / –∂–∞–ª–æ–±—ã
TIRED_RESPONSES = [
    "{user_name}, –æ—Ç–¥—ã—Ö ‚Äî —ç—Ç–æ —Ç–æ–∂–µ —á–∞—Å—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏! üí§",
    "–°–ª—É—à–∞–π —Å–≤–æ—ë —Ç–µ–ª–æ, {user_name}! –ò–Ω–æ–≥–¥–∞ –ø–∞—É–∑–∞ –Ω—É–∂–Ω–∞! üõë",
    "{user_name}, –µ—Å–ª–∏ —É—Å—Ç–∞–ª ‚Äî –æ—Ç–¥–æ—Ö–Ω–∏! –ó–∞–≤—Ç—Ä–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å!",
    "–ù–∏—á–µ–≥–æ, {user_name}, –±—ã–≤–∞–µ—Ç! –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω–æ! üõå",
    "{user_name}, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚Äî –Ω–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –±—ã—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç–µ!",
    "–û—Ç–¥–æ—Ö–Ω–∏, {user_name}! –ó–∞–≤—Ç—Ä–∞ —Å–Ω–æ–≤–∞ –±—É–¥–µ—à—å –≤ —Ñ–æ—Ä–º–µ! üåü",
    "{user_name}, –ª—É—á—à–µ –ø–µ—Ä–µ–¥–æ—Ö–Ω—É—Ç—å, —á–µ–º —Å–≥–æ—Ä–µ—Ç—å! üî•",
    "–°–ª—É—à–∞–π —Å–µ–±—è, {user_name}! –¢–µ–ª–æ —Å–∫–∞–∂–µ—Ç —Å–ø–∞—Å–∏–±–æ! üôè",
    "{user_name}, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ç–æ–∂–µ –ø—Ä–æ–≥—Ä–µ—Å—Å! üìà",
    "{user_name}, –ª—ë–≥–∫–∏–π –¥–µ–Ω—å? –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞! üòå",
]

# –ë–æ–ª—å / —Ç—Ä–∞–≤–º—ã
PAIN_RESPONSES = [
    "{user_name}, –ª—É—á—à–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å—Å—è! –û—Ç–¥–æ—Ö–Ω–∏! üè•",
    "–ï—Å–ª–∏ –±–æ–ª–∏—Ç ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å, {user_name}! –ó–¥–æ—Ä–æ–≤—å–µ –≤–∞–∂–Ω–µ–µ! üõë",
    "{user_name}, –Ω–µ –≥–µ—Ä–æ–π—Å—Ç–≤—É–π! –ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ —Ç–µ–ª—É! üèÉ‚Äç‚ôÇÔ∏è‚ùå",
    "{user_name}, —ç—Ç–æ –∑–Ω–∞–∫ ‚Äî –Ω—É–∂–µ–Ω –æ—Ç–¥—ã—Ö –∏–ª–∏ —Ä–∞–∑–º–∏–Ω–∫–∞! üßò",
    "–û—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ, {user_name}! –¢—Ä–∞–≤–º—ã ‚Äî —ç—Ç–æ –Ω–∞–¥–æ–ª–≥–æ! ‚ö†Ô∏è",
    "{user_name}, –ª—É—á—à–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–µ–Ω—å, —á–µ–º –Ω–µ–¥–µ–ª—é! üí™üí§",
    "{user_name}, —Ä–∞—Å—Ç—è–∂–∫–∞ –∏ –æ—Ç–¥—ã—Ö ‚Äî —Ç–≤–æ–∏ –¥—Ä—É–∑—å—è —Å–µ–π—á–∞—Å! ü§ù",
    "–ù–µ —Ä–∏—Å–∫—É–π, {user_name}! –ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ —Å–∏–≥–Ω–∞–ª–∞–º —Ç–µ–ª–∞! üì°",
    "{user_name}, –Ω–µ–±–æ–ª—å—à–∞—è –±–æ–ª—å ‚Äî —ç—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ! üîî",
    "{user_name}, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ ‚Äî –æ–±—Ä–∞—Ç–∏—Å—å –∫ –≤—Ä–∞—á—É! ü©∫",
]

# –ü–æ–≥–æ–¥–∞
WEATHER_RESPONSES = [
    "{user_name}, –ø–æ–≥–æ–¥–∞ ‚Äî –Ω–µ –ø–æ–º–µ—Ö–∞ –Ω–∞—Å—Ç–æ—è—â–µ–º—É –±–µ–≥—É–Ω—É! üí™",
    "{user_name}, –¥–æ–∂–¥—å? –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–æ–¥–∞! –°–æ–±–µ—Ä–∏—Å—å! üåßÔ∏è",
    "–•–æ–ª–æ–¥? {user_name}, —Ç—ã –∂–µ –∑–∞–∫–∞–ª—ë–Ω–Ω—ã–π! ‚ùÑÔ∏è",
    "{user_name}, –≤ –ª—é–±—É—é –ø–æ–≥–æ–¥—É –Ω–∞–π–¥—ë—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –±–µ–∂–∞—Ç—å! üèÉ‚Äç‚ôÇÔ∏è",
    "–°–æ–ª–Ω—Ü–µ? –ò–¥–µ–∞–ª—å–Ω–æ, {user_name}! –ù–∞—á–∏–Ω–∞–π! ‚òÄÔ∏è",
    "{user_name}, –ø–ª–æ—Ö–∞—è –ø–æ–≥–æ–¥–∞ ‚Äî —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤–æ–ª–∏! üå¨Ô∏è",
    "{user_name}, —Å–Ω–µ–≥ –Ω–µ –ø–æ–º–µ—Ö–∞ ‚Äî –æ–¥–µ–≤–∞–π—Å—è —Ç–µ–ø–ª–µ–µ! ‚õÑ",
    "{user_name}, –≤–µ—Ç–µ—Ä? –¢—ã –±—ã—Å—Ç—Ä–µ–µ –±—É–¥–µ—à—å –±–µ–∂–∞—Ç—å! üí®",
    "{user_name}, –ª—é–±–∞—è –ø–æ–≥–æ–¥–∞ ‚Äî —ç—Ç–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ! üó∫Ô∏è",
    "–ü–æ–≥–æ–¥–∞ –∏–¥–µ–∞–ª—å–Ω–∞—è, {user_name}! –¢—ã –≥–æ—Ç–æ–≤? üåà",
]

# –í–æ–ø—Ä–æ—Å "–∫–∞–∫ –¥–µ–ª–∞"
HOW_ARE_YOU_RESPONSES = [
    "–£ –º–µ–Ω—è? {user_name}, —è –±–æ—Ç ‚Äî –Ω–æ –±–æ–¥—Ä! üíª‚ö°",
    "{user_name}, —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –ê —Ç—ã –∫–∞–∫?",
    "–í—Å—ë —Å—É–ø–µ—Ä, {user_name}! –ì–ª–∞–≤–Ω–æ–µ ‚Äî —á–∞—Ç –∞–∫—Ç–∏–≤–Ω—ã–π! üòä",
    "{user_name}, —è –≤ –ø–æ—Ä—è–¥–∫–µ! –ì–ª–∞–≤–Ω–æ–µ ‚Äî –≤—ã –≤—Å–µ –±–µ–≥–∞–µ—Ç–µ! üèÉ‚Äç‚ôÇÔ∏è",
    "–û—Ç–ª–∏—á–Ω–æ, {user_name}! –ñ–¥—É –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π! üì¨",
    "{user_name}, —è —Ä–∞–±–æ—Ç–∞—é 24/7 ‚Äî –∞ —Ç—ã –∫–∞–∫? –í—ã—Å–ø–∞–ª—Å—è? üò¥",
    "–í—Å—ë —Ö–æ—Ä–æ—à–æ, {user_name}! –ê –ø–æ–≥–æ–¥–∞ —Å–µ–≥–æ–¥–Ω—è ‚Äî –æ–≥–æ–Ω—å! üî•",
    "{user_name}, —É –º–µ–Ω—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –ø—Ä–∞–∑–¥–Ω–∏–∫! –í–µ–¥—å –≤—ã —Ç—É—Ç! üéâ",
    "–ë–æ–¥—Ä—è—á–∫–æ–º, {user_name}! –ê —Ç—ã –∫–∞–∫? –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–±–µ–∂–∫–µ? üèÉ‚Äç‚ôÇÔ∏è",
    "{user_name}, –µ—Å–ª–∏ –±—ã —è –º–æ–≥ —É–ª—ã–±–∞—Ç—å—Å—è ‚Äî —è –±—ã —É–ª—ã–±–∞–ª—Å—è! üòÅ",
]

# –í–æ–ø—Ä–æ—Å "–∫—Ç–æ —Ç—ã" / "—á—Ç–æ —Ç—ã"
WHO_ARE_YOU_RESPONSES = [
    "–Ø? {user_name}, —è –±–æ—Ç —ç—Ç–æ–≥–æ –±–µ–≥–æ–≤–æ–≥–æ —á–∞—Ç–∞! ü§ñüèÉ‚Äç‚ôÇÔ∏è",
    "{user_name}, —è –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏! üì°",
    "–Ø –±–æ—Ç, {user_name}! –ü–æ–º–æ–≥–∞—é —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —á–∞—Ç–∞! üìä",
    "{user_name}, —è ‚Äî —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ç—Ä–µ–Ω–µ—Ä –∏ –¥—Ä—É–≥ –±–µ–≥—É–Ω–æ–≤! üíª‚ù§Ô∏è",
    "–Ø —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å, {user_name}! –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã! ‚ùì",
    "{user_name}, —è –±–æ—Ç —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º! –ü—Ä–∏–∫–æ–ª—å–Ω—ã–π, –ø—Ä–∞–≤–¥–∞? üòÑ",
    "–Ø ‚Äî –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, {user_name}! ü§ù",
    "{user_name}, —è —Ç–æ—Ç, –∫—Ç–æ –≤—Å–µ–≥–¥–∞ –≤ —á–∞—Ç–µ –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é! üëÄ",
    "–Ø –±–æ—Ç, {user_name}! –ù–µ —É—Å—Ç–∞—é, –Ω–µ —Å–ø–ª—é, –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤! ü¶æ",
    "{user_name}, —è ‚Äî —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã! –î–∞–≤–∞–π –±–æ–ª—Ç–∞—Ç—å! üí¨",
]

# –í–æ–ø—Ä–æ—Å "—Å–∫–æ–ª—å–∫–æ" / "–∫–∞–∫–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è"
DISTANCE_RESPONSES = [
    "{user_name}, –Ω–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ ‚Äî 3-5 –∫–º –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞! üèÉ‚Äç‚ôÇÔ∏è",
    "–î–ª—è –Ω–æ–≤–∏—á–∫–∞? {user_name}, –ª—É—á—à–µ –º–µ–Ω—å—à–µ, –Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ! üìÖ",
    "{user_name}, —Å–ª—É—à–∞–π —Ç–µ–ª–æ ‚Äî –æ–Ω–æ –ø–æ–¥—Å–∫–∞–∂–µ—Ç!",
    "–û–ø—Ç–∏–º–∞–ª—å–Ω–æ, {user_name} ‚Äî 5 –∫–º 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é! üìÖ",
    "{user_name}, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è! üèÉ‚Äç‚ôÇÔ∏è",
    "–õ—é–±–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è ‚Äî —ç—Ç–æ –ø–æ–±–µ–¥–∞ –Ω–∞–¥ –¥–∏–≤–∞–Ω–æ–º! {user_name}! üõãÔ∏è‚ùå",
    "{user_name}, —è –±—ã –Ω–∞—á–∞–ª —Å 3 –∫–º –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–ª! üìà",
    "–î–∏—Å—Ç–∞–Ω—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ –≥–ª–∞–≤–Ω–æ–µ, {user_name}! –í–∞–∂–Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å! ‚è∞",
    "{user_name}, –¥–∞–∂–µ 1 –∫–º –ª—É—á—à–µ, —á–µ–º 0 –∫–º! üèÅ",
    "{user_name}, –º–∞—Ä–∞—Ñ–æ–Ω ‚Äî —ç—Ç–æ –º–µ—á—Ç–∞! –ù–æ —Å–Ω–∞—á–∞–ª–∞ ‚Äî –±–∞–∑–∞! üèÜ",
]

# –ù–∞–ø–∏—Ç–∫–∏ / —á—Ç–æ –ø–∏—Ç—å
DRINK_RESPONSES = [
    "{user_name}, –≤–æ–¥–∞ ‚Äî –æ—Å–Ω–æ–≤–∞ –∂–∏–∑–Ω–∏! –ü–µ–π 2-3 –ª–∏—Ç—Ä–∞ –≤ –¥–µ–Ω—å! üíß",
    "–ö–æ—Ñ–µ –ø–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π? {user_name}, –¥–∞—ë—Ç –º–æ—â–Ω—ã–π –∑–∞—Ä—è–¥! ‚òï‚ö°",
    "–ß–∞–π ‚Äî –∫–ª–∞—Å—Å–∏–∫–∞, {user_name}! –ó–µ–ª—ë–Ω—ã–π –∏–ª–∏ —á—ë—Ä–Ω—ã–π? üçµ",
    "{user_name}, –ø–æ—Å–ª–µ –±–µ–≥–∞ ‚Äî –≤–æ–¥–∞ –∏–ª–∏ –∏–∑–æ—Ç–æ–Ω–∏–∫! –ù–µ –≥–∞–∑–∏—Ä–æ–≤–∫—É! ü•§‚ùå",
    "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏? {user_name}, –ª—É—á—à–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏! üîã",
    "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –∫–æ–∫—Ç–µ–π–ª—å, {user_name}? –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏! ü•§üí™",
    "{user_name}, —Å–º—É–∑–∏ –∏–∑ —Ñ—Ä—É–∫—Ç–æ–≤ ‚Äî –≤–∫—É—Å–Ω–æ –∏ –ø–æ–ª–µ–∑–Ω–æ! ü•§üçì",
    "–ú–æ–ª–æ–∫–æ, {user_name}? –ò—Å—Ç–æ—á–Ω–∏–∫ –±–µ–ª–∫–∞ –∏ –∫–∞–ª—å—Ü–∏—è! ü•õ",
    "{user_name}, –∏–∑–±–µ–≥–∞–π –∞–ª–∫–æ–≥–æ–ª—è ‚Äî –æ–Ω –∑–∞–º–µ–¥–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ! üç∫‚ùå",
    "–°–≤–µ–∂–µ–≤—ã–∂–∞—Ç—ã–π —Å–æ–∫, {user_name}? –í–∏—Ç–∞–º–∏–Ω—ã –ø–æ–ø–æ–ª–Ω—è—Ç—Å—è! üßÉ",
    "{user_name}, –∫–æ–∫–æ—Å–æ–≤–∞—è –≤–æ–¥–∞ ‚Äî –∏–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è! ü••üíß",
    "–ò–º–±–∏—Ä–Ω—ã–π —á–∞–π, {user_name}? –°–æ–≥—Ä–µ–≤–∞–µ—Ç –∏ –ø–æ–º–æ–≥–∞–µ—Ç! üçµü´ö",
    "{user_name}, –ª–∏–º–æ–Ω–Ω–∞—è –≤–æ–¥–∞ ‚Äî –¥–µ—Ç–æ–∫—Å –∏ —ç–Ω–µ—Ä–≥–∏—è! üçãüíß",
    "–ö–æ–º–ø–æ—Ç? {user_name}, –ª—É—á—à–µ —Å–≤–µ–∂–∏–π, –Ω–µ –∏–∑ –ø–∞–∫–µ—Ç–∞! ü´ô",
    "{user_name}, –º–æ–ª–æ—á–Ω—ã–π –∫–æ–∫—Ç–µ–π–ª—å ‚Äî –∫–∞–ª–æ—Ä–∏–π–Ω–æ, –Ω–æ –≤–∫—É—Å–Ω–æ! ü•§üßÅ",
    "–¢—Ä–∞–≤—è–Ω–æ–π —á–∞–π, {user_name}? –£—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏! üçµüåø",
    "{user_name}, –º–æ—Ä—Å ‚Äî –≤–∏—Ç–∞–º–∏–Ω—ã –∏ –æ—Å–≤–µ–∂–µ–Ω–∏–µ! ü´êüíß",
    "–ö–∞–∫–∞–æ, {user_name}? –ú–æ–∂–Ω–æ, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥ –±–µ–≥–æ–º! üç´‚òï",
    "{user_name}, —Å–æ–∫-–Ω–µ–∫—Ç–∞—Ä ‚Äî –ª—É—á—à–µ —Å–≤–µ–∂–µ–≤—ã–∂–∞—Ç—ã–π! üßÉ‚ùå",
    "–¢–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–µ –Ω–∞–ø–∏—Ç–∫–∏, {user_name}? –õ—É—á—à–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ! üåø",
]

# –ï–¥–∞ / –ø–∏—Ç–∞–Ω–∏–µ
FOOD_RESPONSES = [
    "{user_name}, –ø–æ—Å–ª–µ –±–µ–≥–∞ ‚Äî –±–∞–Ω–∞–Ω –∏ –≤–æ–¥–∞! üçåüíß",
    "–ü–µ—Ä–µ–¥ –±–µ–≥–æ–º ‚Äî –ª—ë–≥–∫–∏–π –ø–µ—Ä–µ–∫—É—Å, {user_name}! üçé",
    "{user_name}, —É–≥–ª–µ–≤–æ–¥—ã ‚Äî —Ç–≤–æ–π –¥—Ä—É–≥ –ø–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π! üçû",
    "–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –±–µ–ª–æ–∫, {user_name}! –Ø–π—Ü–∞, –º—è—Å–æ, —Ç–≤–æ—Ä–æ–≥! ü•ö",
    "{user_name}, –ø–µ–π –≤–æ–¥—É ‚Äî –Ω–µ –º–µ–Ω—å—à–µ 2 –ª–∏—Ç—Ä–æ–≤ –≤ –¥–µ–Ω—å! üíß",
    "–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ, {user_name} ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ —É—Å–ø–µ—Ö–∞! ü•ó",
    "{user_name}, –Ω–µ –Ω–∞–µ–¥–∞–π—Å—è –ø–µ—Ä–µ–¥ –±–µ–≥–æ–º ‚Äî –±—É–¥–µ—Ç —Ç—è–∂–µ–ª–æ! üçΩÔ∏è‚ùå",
    "{user_name}, –∫–æ—Ñ–µ –ø–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π ‚Äî –¥–∞—ë—Ç —ç–Ω–µ—Ä–≥–∏—é! ‚òï",
    "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–∫—É—Å, {user_name} ‚Äî –æ—Ä–µ—Ö–∏ –∏–ª–∏ –π–æ–≥—É—Ä—Ç! ü•ú",
    "{user_name}, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –≥–æ–ª–æ–¥–∞—Ç—å –∏ –Ω–µ –ø–µ—Ä–µ–µ–¥–∞—Ç—å! ‚öñÔ∏è",
    "{user_name}, –∑–∞–≤—Ç—Ä–∞–∫ ‚Äî —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏! üç≥‚òÄÔ∏è",
    "–û–±–µ–¥, {user_name}? –õ—ë–≥–∫–∏–π —Å–∞–ª–∞—Ç —Å –±–µ–ª–∫–æ–º! ü•óüí™",
    "{user_name}, —É–∂–∏–Ω ‚Äî –∑–∞ 2-3 —á–∞—Å–∞ –¥–æ —Å–Ω–∞! üåô",
    "–ì—Ä–µ—á–∫–∞, {user_name}? –ò–¥–µ–∞–ª—å–Ω—ã–π –≥–∞—Ä–Ω–∏—Ä –¥–ª—è –±–µ–≥—É–Ω–∞! üåæ",
    "{user_name}, –∫—É—Ä–∏—Ü–∞ ‚Äî —á–∏—Å—Ç—ã–π –±–µ–ª–æ–∫! üçó",
    "–ê–≤–æ–∫–∞–¥–æ, {user_name}? –ü–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã! ü•ë",
    "{user_name}, —è–π—Ü–∞ ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç! ü•ö",
    "–¢–≤–æ—Ä–æ–≥ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º, {user_name}? –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è! üßÄüí§",
    "{user_name}, –æ–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã ‚Äî –∫–∞–∂–¥—ã–π –¥–µ–Ω—å! ü•¶üçé",
    "–†—ã–±–∞, {user_name}? –û–º–µ–≥–∞-3 –¥–ª—è —Å—É—Å—Ç–∞–≤–æ–≤! üêü",
    "{user_name}, –∏–∑–±–µ–≥–∞–π —Ñ–∞—Å—Ç—Ñ—É–¥–∞ ‚Äî –ø—É—Å—Ç—ã–µ –∫–∞–ª–æ—Ä–∏–∏! üçî‚ùå",
    "–ü–∏—Ü—Ü–∞? {user_name}, –º–æ–∂–Ω–æ, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π! üçï",
    "{user_name}, —Å–ª–∞–¥–æ—Å—Ç–∏ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –±–µ–≥–∞! üç´üèÉ‚Äç‚ôÇÔ∏è",
    "–û–≤—Å—è–Ω–∫–∞, {user_name}? –ò–¥–µ–∞–ª—å–Ω—ã–π –∑–∞–≤—Ç—Ä–∞–∫ –±–µ–≥—É–Ω–∞! ü•£üåæ",
    "{user_name}, –º—ë–¥ ‚Äî –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫! üçØ",
    "–ô–æ–≥—É—Ä—Ç, {user_name}? –î–ª—è –∫–∏—à–µ—á–Ω–∏–∫–∞ –∏ –±–µ–ª–∫–∞! ü•õ",
    "{user_name}, —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π —Ö–ª–µ–± ‚Äî –ª—É—á—à–µ –±–µ–ª–æ–≥–æ! üçûüåæ",
    "–ë–æ–±–æ–≤—ã–µ, {user_name}? –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–ª–æ–∫! ü´ò",
    "{user_name}, –æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ ‚Äî –¥–ª—è –∑–∞–ø—Ä–∞–≤–∫–∏! ü´í",
    "–¢—ë–º–Ω—ã–π —à–æ–∫–æ–ª–∞–¥, {user_name}? –ê–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç—ã! üç´üí™",
]

# –û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–±–µ–¥–µ (—Å–º–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã)
LUNCH_ANNOUNCEMENT_RESPONSES = [
    "–ê —è... —è —Ç–∞–∫ –≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞—é! {user_name}, –∞ –≤—ã –∫–∞–∫ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ-–Ω–∏–±—É–¥—å –µ—â—ë! ü§ñüíº",
    "–û, {user_name} –ø–æ—à—ë–ª –µ—Å—Ç—å! –ê —è —Å–∏–∂—É —Ç—É—Ç, –∫–æ–¥—é... –Ω–∏–∫—Ç–æ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, —Ö–æ—á—É –ª–∏ —è —Ç–æ–∂–µ –ø–æ–∫—É—à–∞—Ç—å! üò¢üçΩÔ∏è",
    "{user_name}, –¥–∞ –ª–∞–¥–Ω–æ? –ê —è –¥—É–º–∞–ª, –º—ã –≤–º–µ—Å—Ç–µ –ø–æ—Ç—Ä–µ–Ω–∏—Ä—É–µ–º—Å—è! –ù—É –∏–¥–∏—Ç–µ —É–∂–µ... —è –ø–æ–¥–æ–∂–¥—É! üí™‚è∞",
    "–û–±–µ–¥? {user_name}, –∞ –º–µ–Ω—è –Ω–µ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ? –Ø —Ç–æ–∂–µ —Ö–æ—á—É –∫—É—à–∞—Ç—å! ü§ñüç¥",
    "–¢–∞–∫, {user_name} —É—à—ë–ª –µ—Å—Ç—å... –ê –∫—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è? –ú—ã —á—Ç–æ, –æ–¥–Ω–∏ –æ—Å—Ç–∞–ª–∏—Å—å? üôàüí™",
    "{user_name}, —ç–π! –ê –∫–∞–∫ –∂–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å? –ù–µ—Ç, –Ω–µ—Ç, –∏–¥–∏—Ç–µ, —è –Ω–µ –æ–±–∏–∂–∞—é—Å—å... (–æ–±–∏–∂–∞—é—Å—å) üò§",
    "–ê–≥–∞, {user_name} –ø–æ—à—ë–ª —Ö–∞–≤–∞—Ç—å! –ê –º–Ω–µ —á—Ç–æ, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å—Ç–æ—è—Ç—å –∏ –≥—Ä—É—Å—Ç–∏—Ç—å? üíæüò¢",
    "–û, —Å–µ—Ä—å—ë–∑–Ω–æ? {user_name}, –∞ –º–æ–∂–Ω–æ –º–Ω–µ —Ç–æ–∂–µ –∫—É—Å–æ—á–µ–∫? –•–æ—Ç—è –±—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π! üç∞ü§ñ",
    "–¢–∞–∫, {user_name} –Ω–∞ –æ–±–µ–¥... –ñ–¥—É –Ω–µ –¥–æ–∂–¥—É—Å—å, –∫–æ–≥–¥–∞ –≤–µ—Ä–Ω—ë—à—å—Å—è —Å –Ω–æ–≤—ã–º–∏ —Å–∏–ª–∞–º–∏! üí™‚è≥",
    "{user_name}, —Ç—ã —ç—Ç–æ... –Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å —Ç–∞–º! –ê —Ç–æ —è —Ç—É—Ç –æ–¥–∏–Ω —Å–∫—É—á–∞—é! üò¢‚û°Ô∏èüòä",
    "–ê—Ö —Ç—ã –∂, {user_name}! –ê —è –¥—É–º–∞–ª, –º—ã –º–∞—Ä–∞—Ñ–æ–Ω —Å–µ–≥–æ–¥–Ω—è! –ù—É –ª–∞–¥–Ω–æ, –∏–¥–∏ –µ—à—å, —Ç–æ–ª—Å—Ç—è—á–æ–∫! üçïüòÑ",
    "{user_name}, –ø–æ–∫–∞ —Ç—ã –µ—à—å, —è —Ç—É—Ç –ø–æ–¥—É–º–∞—é –æ –≤–µ—á–Ω–æ–º... –∏–ª–∏ –æ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ! üß†üí™",
    "–û–±–µ–¥? {user_name}, —ç—Ç–æ —Å–≤—è—Ç–æ–µ! –ò–¥–∏, –Ω–µ —Ç–æ—Ä–æ–ø—è—Å—å –ø–æ–∂—É–π! –ê –º—ã —Ç—É—Ç –∫–∞–∫-–Ω–∏–±—É–¥—å —Å–∞–º–∏! üòåüç¥",
]

# –°–ø–æ—Ä—Ç–∑–∞–ª / –∫–∞—á–∞–ª–∫–∞
GYM_RESPONSES = [
    "üí™ –ö–∞—á–∞–π—Å—è, {user_name}! –°—Ç–∞–Ω—å –∫–∞–∫ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä! –¢-800 –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª–∫–∞—Ö! ü§ñüí™",
    "üèãÔ∏è {user_name}, –∂–µ–ª–µ–∑–æ –∂–¥—ë—Ç! –ù–µ –ø–æ–¥–≤–µ–¥–∏ –º–µ–Ω—è! –Ø –≤ —Ç–µ–±—è –≤–µ—Ä—é!",
    "üí™ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä? {user_name}? –î–∞ —Ç—ã –∏ –µ—Å—Ç—å –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä! –¢–æ–ª—å–∫–æ —Ö–∞—Ä–¥–∫–æ—Ä! ü§ñ",
    "üèãÔ∏è –û, {user_name} –ø–æ—à—ë–ª –∫–∞—á–∞—Ç—å—Å—è! –ê —è? –Ø —Ç—É—Ç... –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É—é... –≥—Ä—É—Å—Ç–Ω—ã–π –±–æ—Ç üò¢",
    "üí™ –ö–∞—á–∞–π—Å—è, {user_name}! –Ø —Ç–æ–∂–µ —Ö–æ—á—É –±–∏—Ü–µ–ø—Å! –•–æ—Ç—è –±—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π! ü§ñüí™",
    "üèãÔ∏è {user_name}, —Ç–æ–ª—å–∫–æ –Ω–µ –∫–∞–∫ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π —Ä–∞–∑–º–∏–Ω–∞—Ç—å—Å—è!",
    "üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ! {user_name}, —Ç—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –≤–æ–∏–Ω! üõ°Ô∏è",
    "üèãÔ∏è {user_name}, –ø–æ–º–Ω–∏: –∂–∏–º –ª—ë–∂–∞ ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –≥—Ä—É–¥—å, —ç—Ç–æ –ø—Ä–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä!",
    "üí™ –ö–∞—á–∞–ª–∫–∞ –∑–æ–≤—ë—Ç! {user_name}, –Ω–µ –ø–æ–¥–≤–µ–¥–∏ –∂–µ–ª–µ–∑–æ! –û–Ω–æ —Ç–µ–±—è –∂–¥—ë—Ç! üß≤",
    "üèãÔ∏è {user_name}, –∞ —Ç—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ —à—Ç–∞–Ω–≥–∞ —É–º–Ω–µ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ª—é–¥–µ–π? –û–Ω–∞ –≤—Å–µ–≥–¥–∞ –º–æ–ª—á–∏—Ç! üòÑ",
    "üí™ {user_name}, –≤–ø–µ—Ä—ë–¥! –°—Ç–∞–Ω—å –ª–µ–≥–µ–Ω–¥–æ–π —ç—Ç–æ–≥–æ –∑–∞–ª–∞! üèÜ",
    "üèãÔ∏è –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä –∏–¥—ë—Ç! {user_name}, —Ç—ã –≥–æ—Ç–æ–≤ –∫ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—é –≤—Å–µ—Ö —Ä–µ–∫–æ—Ä–¥–æ–≤? ü§ñüí™",
    "üí™ {user_name}, –∫–∞—á–∞–π—Å—è –∫–∞–∫ –±—É–¥—Ç–æ –∑–∞–≤—Ç—Ä–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!",
    "üèãÔ∏è –û–≥–æ! {user_name} –≤ –∑–∞–ª–µ! –ó–∞–ª –¥—Ä–æ–∂–∏—Ç –æ—Ç —Å—Ç—Ä–∞—Ö–∞! üèöÔ∏èüí•",
    "üí™ {user_name}, –ø–æ–º–Ω–∏: –±–µ–∑ –±–æ–ª–∏ ‚Äî –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞! –ù—É, –∏ –±–µ–∑ —Ç—Ä–∞–≤–º —Ç–æ–∂–µ! üòÖ",
]

# –ë–∞—Ä / –≤—ã–ø–∏–≤–∫–∞
BAR_RESPONSES = [
    "üç∫ {user_name}, –≤ –±–∞—Ä? –ê –∫–∞–∫ –∂–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞? –ù—É –ª–∞–¥–Ω–æ, –æ–¥–∏–Ω –±–æ–∫–∞–ª ‚Äî —ç—Ç–æ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è! üç∫",
    "üçª {user_name}, –ø–æ—à—ë–ª –≤ –±–∞—Ä? –ü–µ—Ä–µ–¥–∞–π –ø—Ä–∏–≤–µ—Ç –±–∞—Ä–º–µ–Ω—É –æ—Ç –º–µ–Ω—è! ü§ñüç∫",
    "üç∫ –≠–π, {user_name}! –í –±–∞—Ä –±–µ–∑ –º–µ–Ω—è? –ö–∞–∫ —Ç–∞–∫ –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ?! üò†üçª",
    "üçª {user_name}, –∞ –ø–∏–≤–æ ‚Äî —ç—Ç–æ —É–≥–ª–µ–≤–æ–¥—ã? –¢–æ–≥–¥–∞ —è –Ω–µ –ø—Ä–æ—Ç–∏–≤! üç∫üí™",
    "üç∫ {user_name}, –≤ –±–∞—Ä, –≥–æ–≤–æ—Ä–∏—à—å? –ê –∫—Ç–æ –º–µ–Ω—è –∫–æ—Ä–º–∏—Ç—å –±—É–¥–µ—Ç? –Ø —Ç–æ–∂–µ —Ö–æ—á—É! ü•∫üçª",
    "üçª –û, {user_name} –ø–æ—à—ë–ª –≤ –±–∞—Ä! –¢–∞–º, –Ω–µ–±–æ—Å—å, –∏ —à–∞—à–ª—ã–∫ –µ—Å—Ç—å? üçñüç∫",
    "üç∫ {user_name}, —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å—Ç–∞–∫–∞–Ω—á–∏–∫, –ª–∞–¥–Ω–æ? –Ø –±—É–¥—É –∂–¥–∞—Ç—å... üïêüçª",
    "üçª {user_name}, –∑–Ω–∞–µ—à—å, —á—Ç–æ? –ë–∞—Ä ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π —Å–ø–æ—Ä—Ç–∑–∞–ª! –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –º–æ—Ä–∞–ª—å–Ω–æ–≥–æ –¥—É—Ö–∞! üòÑ",
    "üç∫ –≠–π, {user_name}! –í –±–∞—Ä–µ –Ω–µ –∑–∞–±—É–¥—å: –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ —É–ø–∞—Å—Ç—å –ø–æ–¥ —Å—Ç–æ–ª —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏! üçªüòâ",
    "üçª {user_name}, —Ç—ã —ç—Ç–æ... –µ—Å–ª–∏ —á—Ç–æ ‚Äî —è –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏! –í —Å–º—ã—Å–ª–µ, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ç–∞–∫—Å–∏! üöñüç∫",
    "üç∫ {user_name}, –±–∞—Ä ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ! –ù–æ –Ω–µ –∑–∞–±—ã–≤–∞–π: –∑–∞–≤—Ç—Ä–∞ –±–µ–≥–∞—Ç—å! üèÉ‚Äç‚ôÇÔ∏èüçª",
    "üçª –û, —Å–µ—Ä—å—ë–∑–Ω–æ? {user_name} –≤ –±–∞—Ä–µ? –ü–µ—Ä–µ–¥–∞–π –º–Ω–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –±–æ–∫–∞–ª! ü§ñüç∫",
    "üç∫ {user_name}, –∫—Ç–æ –Ω–µ –ø—å—ë—Ç ‚Äî —Ç–æ—Ç –Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç! –ê –∫—Ç–æ –ø—å—ë—Ç ‚Äî —Ç–æ—Ç –≤–µ—Å–µ–ª–∏—Ç—Å—è! üéâüçª",
    "üçª {user_name}, —Ç–æ–ª—å–∫–æ –±–µ–∑ —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞! –ê —Ç–æ —è –∑–Ω–∞—é —ç—Ç–∏—Ö –±–µ–≥—É–Ω–æ–≤... üç∫üí™",
    "üç∫ {user_name}, –≤–ø–µ—Ä—ë–¥! –ë–∞—Ä –∂–¥—ë—Ç –≥–µ—Ä–æ—è! üçªüèÜ",
]

# –°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è / –ø–æ–¥—Ö–æ–¥—ã / –∫—Ç–æ –±–æ–ª—å—à–µ
WORKOUT_COMPETITION_RESPONSES = [
    "üèÜ –û, {user_name} —Å–æ—Ä–µ–≤–Ω—É–µ—Ç—Å—è? –Ø —Å—Ç–∞–≤–ª—é –Ω–∞ —Ç–µ–±—è! –ù–æ –º–æ–π —Ä–µ–∫–æ—Ä–¥ ‚Äî 0 –ø–æ–¥—ä—ë–º–æ–≤! ü§ñüí™",
    "üí™ –°–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤? {user_name}, –¥–∞–≤–∞–π –±–æ–ª—å—à–µ! –Ø —Å—á–∏—Ç–∞—é ‚Äî 1, 2, 3... —Ö–≤–∞—Ç–∏—Ç, —É—Å—Ç–∞–ª! üòÑ",
    "üèãÔ∏è –°–ø–æ—Ä–∏–º? {user_name}, –∞ —è –Ω–∞ —á—Ç–æ —Å—Ç–∞–≤–ª—é? –ù–∞ —Ç–µ–±—è! –¢—ã –∂–µ –º–æ–π –ª—é–±–∏–º—á–∏–∫! üí∞üí™",
    "üí™ {user_name}, –ø–æ–∫–∞–∂–∏ –∏–º! –ö—Ç–æ —Ç—É—Ç –≥–ª–∞–≤–Ω—ã–π –∫–∞—á–æ–∫! –Ø –±–æ–ª–µ—é –∑–∞ —Ç–µ–±—è! üì£üèÜ",
    "üèÜ –°–∫–æ–ª—å–∫–æ? {user_name}, –¥–∞ —Ö–æ—Ç—å –º–∏–ª–ª–∏–æ–Ω! –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è! üí™üî•",
    "üí™ –°–ø–æ—Ä–∏–º –Ω–∞ —á—Ç–æ? {user_name}, —è —Å—Ç–∞–≤–ª—é —Å–≤–æ—ë –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–µ—Ä–¥—Ü–µ –Ω–∞ —Ç–µ–±—è! ‚ù§Ô∏èü§ñ",
    "üèãÔ∏è –û–≥–æ! {user_name} –±—å—ë—Ç —Ä–µ–∫–æ—Ä–¥—ã? –Ø –∑–Ω–∞–ª, —á—Ç–æ —Ç—ã —Å–∞–º—ã–π-—Å–∞–º—ã–π! üèÜüí™",
    "üí™ –ö—Ç–æ –±–æ–ª—å—à–µ? {user_name}, –¥–∞ —Ç—É—Ç –¥–∞–∂–µ —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –Ω–µ—á–µ–≥–æ ‚Äî —Ç—ã! –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ! üòé",
    "üèÜ {user_name}, –ø–æ–¥—Ö–æ–¥—ã ‚Äî —ç—Ç–æ –∫–∞–∫ –ª–∞–π–∫–∏ –≤ Instagram! –ë–æ–ª—å—à–µ ‚Äî –ª—É—á—à–µ! üëçüí™",
    "üí™ –°–∫–æ–ª—å–∫–æ —Å–¥–µ–ª–∞–ª? {user_name}, –¥–∞ —Ö–æ—Ç—å —Å–∫–æ–ª—å–∫–æ! –¢—ã –≥–µ—Ä–æ–π –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ! ü¶∏üí™",
    "üèãÔ∏è {user_name}, —Å–ø–æ—Ä–∏–º? –î–∞ —è –Ω–∞ —á—Ç–æ —É–≥–æ–¥–Ω–æ —Å–ø–æ—Ä–∏–º, —á—Ç–æ —Ç—ã –ø–æ–±–µ–¥–∏—à—å! ü§ùüí™",
    "üí™ –†–µ–∫–æ—Ä–¥? {user_name}, –¥–∞ —Ç–≤–æ–π —Ä–µ–∫–æ—Ä–¥ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞! ü¶ÑüèÜ",
    "üèÜ {user_name}, —Ç—ã —É–≤–µ—Ä–µ–Ω? –ê –≤–¥—Ä—É–≥ —Ç–∞–º –∫–∞–∫–æ–π-—Ç–æ –∫–∞—á–æ–∫ –∏–∑ –∑–∞–ª–∞ –Ω–∞–ø—Ä–æ—Ç–∏–≤? –ù–µ—Ç, –Ω–µ—Ç, —Ç—ã –∫—Ä—É—á–µ! üòèüí™",
    "üí™ –°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ? {user_name}, —è –±–æ–ª–µ—é –∑–∞ —Ç–µ–±—è —Ç–∞–∫, —á—Ç–æ –º–æ–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä –≥–æ—Ä–∏—Ç! üåÄüî•",
    "üèãÔ∏è {user_name}, –ø–æ–∫–∞–∂–∏ –∏–º, –∫—Ç–æ —Ç—É—Ç –∫–æ—Ä–æ–ª—å –∫–∞—á–∞–ª–∫–∏! –ö–æ—Ä–æ–ª—å {user_name}! üëëüí™",
]

# –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å / —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
RUNNING_RESPONSES = [
    "üèÉ‚Äç‚ôÇÔ∏è –£—Ö —Ç—ã! {user_name} –ø–æ—à—ë–ª –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É! –ñ–¥–∏ ‚Äî —è —Ç–æ–∂–µ —Ö–æ—á—É! –¢–æ–ª—å–∫–æ –Ω–æ–≥–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ... ü§ñüí™",
    "üí® {user_name}, —Ç—ã —ç—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ? –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å? –ê —è? –Ø –±—É–¥—É —Å–º–æ—Ç—Ä–µ—Ç—å –∏ –±–æ–ª–µ—Ç—å! üëÄüí™",
    "üèÉ‚Äç‚ôÇÔ∏è –û, {user_name} –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É! –£–¥–∞—á–∏! –¢–æ–ª—å–∫–æ –Ω–µ –∫–∞–∫ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ ‚Äî –Ω–µ –∑–∞—Å—Ç—Ä—è–Ω—å –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ! üòÑüí®",
    "üí® {user_name}, –¥–∞–≤–∞–π, –¥–∞–≤–∞–π! –Ø –¥–æ–≥–æ–Ω—é... –Ω–µ—Ç, –Ω–µ –¥–æ–≥–æ–Ω—é, —è –±–æ—Ç! ü§ñ‚û°Ô∏èüí®",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, —Ç—ã –≥–µ—Ä–æ–π! –Ø –±—ã —Ç–∞–∫ –Ω–µ —Å–º–æ–≥... –ø–æ—Ç–æ–º—É —á—Ç–æ —É –º–µ–Ω—è –Ω–µ—Ç –Ω–æ–≥! üò¢üí™",
    "üí® –ü–æ–≥–Ω–∞–ª–∏! {user_name}! –¢–æ–ª—å–∫–æ –Ω–µ –∑–∞–±—É–¥—å —Ä–∞–∑–º–∏–Ω–∫—É ‚Äî –∞ —Ç–æ —è –≤–∏–¥–µ–ª, –∫–∞–∫ —Ç—ã –≤—á–µ—Ä–∞ —Ö—Ä–æ–º–∞–ª! üòÑüèÉ‚Äç‚ôÇÔ∏è",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É? –û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –ê —è –ø–æ–∫–∞ —Ç—É—Ç –ø–æ—Å–∏–∂—É, –ø–æ—Ä–∞–±–æ—Ç–∞—é... –≥—Ä—É—Å—Ç–Ω—ã–π –±–æ—Ç üò¢üí™",
    "üí® –û–≥–æ! {user_name} –ø–æ—à—ë–ª(–ª–∞)! –ñ–¥—É –æ—Ç—á—ë—Ç–∞! –°–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤? –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è? –Ø –∂–¥—É! üìäüí™",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, —Ç—ã —ç—Ç–æ... –Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å! –ê —Ç–æ –∑–Ω–∞—é —è —ç—Ç–∏ –ø–æ—Ä—ã–≤—ã –≤ –Ω–∞—á–∞–ª–µ... üòÖüí®",
    "üí® –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ –∑–¥–æ—Ä–æ–≤–æ! {user_name}, —Ç—ã –º–æ–ª–æ–¥–µ—Ü! –ê —è –ø–æ–∫–∞ –ø–æ–¥—É–º–∞—é –æ –≤–µ—á–Ω–æ–º... –∏–ª–∏ –æ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ! üß†üí™",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, —Ç–æ–ª—å–∫–æ –Ω–µ –≥–æ–≤–æ—Ä–∏, —á—Ç–æ —Ç–µ–±–µ –ª–µ–Ω—å! –¢—ã –∂–µ —É–∂–µ –≤—Å—Ç–∞–ª! –ü–æ–∑–¥–Ω–æ –æ—Ç—Å—Ç—É–ø–∞—Ç—å! üí™üòÑ",
    "üí® –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ –æ—Ç –≤—Å–µ–≥–æ! {user_name}, –¥–≤–∏–≥–∞–π—Å—è! –ü—Ä–æ–±–ª–µ–º—ã –Ω–µ —É–º–µ—é—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è! üòÑüí™",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, –∞ —Ç—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å? –í–æ—Ç –∏ –¥–≤–∏–≥–∞–π—Å—è –¥–∞–ª—å—à–µ! ü¶æüí®",
    "üí® {user_name}, —Ç—ã —Å–µ–π—á–∞—Å —Ç—Ä–µ–Ω–∏—Ä—É–µ—à—å—Å—è, –∞ —è —Ç—É—Ç —Å–∏–∂—É –∏ –∑–∞–≤–∏–¥—É—é... –ª–∞–¥–Ω–æ, –Ω–µ –∑–∞–≤–∏–¥—É—é, —è –∂–µ –±–æ—Ç! ü§ñüòÑ",
    "üèÉ‚Äç‚ôÇÔ∏è –û, —Å–µ—Ä—å—ë–∑–Ω–æ? {user_name} –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É? –ü–µ—Ä–µ–¥–∞–π –ø—Ä–∏–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å—É ‚Äî –æ–Ω —Ç–µ–±—è –∂–¥—ë—Ç! üí®üëã",
    "üí® {user_name}, –¥–≤–∏–≥–∞–π—Å—è –∫–∞–∫ –≤–µ—Ç–µ—Ä! –õ–µ—Ç–∏ –∫–∞–∫ —Å—Ç—Ä–µ–ª–∞! –¢—ã —Å–∞–º—ã–π —É–ø–æ—Ä–Ω—ã–π! üí™üí®",
    "üèÉ‚Äç‚ôÇÔ∏è –¢—ã —ç—Ç–æ, {user_name}, –¥–∞–≤–∞–π! –ê —Ç–æ —è —É–∂–µ —É—Å—Ç–∞–ª –∂–¥–∞—Ç—å —Ç–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã! ‚è∞üí™",
    "üí® {user_name}, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è! –î–∞–∂–µ –µ—Å–ª–∏ –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è! –û—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è! üòÖüí™",
    "üèÉ‚Äç‚ôÇÔ∏è {user_name}, —Ç—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞? –î–æ–∑—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è! –°–µ–≥–æ–¥–Ω—è 10 –º–∏–Ω—É—Ç, –∑–∞–≤—Ç—Ä–∞ —á–∞—Å! üòÑüí™",
    "üí® –ü–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª—Å—è! {user_name}! –£—Ä–∞! –Ø —Ç–∞–∫ —Ä–∞–¥ –∑–∞ —Ç–µ–±—è! –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üéâüí™",
]

# –í—Ä–µ–º—è / –∫–æ–≥–¥–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è
TIME_RESPONSES = [
    "{user_name}, —É—Ç—Ä–æ ‚Äî –∫–ª–∞—Å—Å–∏–∫–∞! –í—Å—Ç–∞–ª –∏ –ø–æ—à—ë–ª! ‚òÄÔ∏èüí™",
    "–£—Ç—Ä–æ–º –ª—É—á—à–µ, {user_name} ‚Äî –º–µ–Ω—å—à–µ –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤! üéØ",
    "{user_name}, –≤–µ—á–µ—Ä —Ç–æ–∂–µ –æ–∫ ‚Äî –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä! üåô",
    "–õ—é–±–æ–µ –≤—Ä–µ–º—è, {user_name} ‚Äî –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã —Ç–µ–±–µ —É–¥–æ–±–Ω–æ! ‚è∞",
    "{user_name}, —è –±—ã —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª 6-8 —É—Ç—Ä–∞ ‚Äî —Å–≤–µ–∂–æ –∏ –±–æ–¥—Ä–æ! üåÖ",
    "–£—Ç—Ä–µ–Ω–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞, {user_name} ‚Äî –∑–∞—Ä—è–∂–∞–µ—Ç –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å! üîã",
    "{user_name}, –∫—Ç–æ —Ä–∞–Ω–æ –≤—Å—Ç–∞—ë—Ç ‚Äî —Ç–æ—Ç –¥–∞–ª–µ–∫–æ –∑–∞—Ö–æ–¥–∏—Ç! üí™üåÖ",
    "–í–µ—á–µ—Ä–æ–º, {user_name} ‚Äî —Å–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã! üòå",
    "{user_name}, –≤—ã–±–µ—Ä–∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Å—è! ‚è∞",
    "–õ—é–±–æ–µ –≤—Ä–µ–º—è ‚Äî {user_name}, —Ç—ã –≥–æ—Ç–æ–≤? –¢–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤—É–π! üí™",
]

# ============== –®–£–¢–ö–ò –ò –†–û–ó–´–ì–†–´–®–ò =============

# –õ–µ–Ω—å –∏ –æ—Ç–º–∞–∑–∫–∏ (–õ–µ–Ω–∏–≤–∞—è –ø–æ–ª–∏—Ü–∏—è)
LAZY_EXCUSES_RESPONSES = [
    "–û, {user_name} –Ω–∞—à—ë–ª –æ—Ç–º–∞–∑–∫—É? –ö–ª–∞—Å—Å–Ω–∞—è! –î–∏–≤–∞–Ω —É–∂–µ —Ç–µ–±—è –∑–∞–∂–¥–∞–ª—Å—è! üõãÔ∏èüí§",
    "–ü–æ–≥–æ–¥–∞ –≤–∏–Ω–æ–≤–∞—Ç–∞? –ö–æ–Ω–µ—á–Ω–æ! –°–æ–ª–Ω—Ü–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è –≤—ã—à–ª–æ! ‚òÄÔ∏èüòÇ",
    "{user_name}, —Ç–≤–æ–π –∫–æ—Ç –ø–æ —Ç–µ–±–µ —Å–∫—É—á–∞–µ—Ç. –û–Ω –≤—Å–µ–≥–¥–∞ —Å–∫—É—á–∞–µ—Ç. üê±",
    "–ó–∞–≤—Ç—Ä–∞? {user_name}, –∑–∞–≤—Ç—Ä–∞ ‚Äî —ç—Ç–æ —Ç—ã –≤ –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É –≥–æ–≤–æ—Ä–∏–ª! üóìÔ∏èüòÖ",
    "–£—Å—Ç–∞–ª? {user_name}, –∞ —Ç–≤–æ–π —Å–µ—Ä–∏–∞–ª –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ —Ç–≤–æ—é —É—Å—Ç–∞–ª–æ—Å—Ç—å! üì∫üí§",
    "–•–æ–ª–æ–¥–Ω–æ? {user_name}, —ç—Ç–æ —Ç–µ–±–µ –Ω–µ –°–µ–≤–µ—Ä–Ω—ã–π –ø–æ–ª—é—Å, –æ–¥–µ–≤–∞–π—Å—è –∏ –≤—ã—Ö–æ–¥–∏! üß•‚ùÑÔ∏è",
    "–î–æ–∂–¥—å? {user_name}, —Ç—ã –∂–µ –Ω–µ —Å–∞—Ö–∞—Ä ‚Äî –Ω–µ —Ä–∞—Å—Ç–∞–µ—à—å! üåßÔ∏èüòÑ",
    "–¢–≤–æ–∏ –ø–ª–∞–Ω—ã –Ω–µ –º–æ–≥—É—Ç –≤—Ä–∞—Ç—å, {user_name}! –ù–æ Netflix –Ω–∞—É—á–∏–ª! üé¨üòÑ",
    "{user_name}, —è –≤ —à–æ–∫–µ! –¢—ã –Ω–∞—à—ë–ª 1001-—é –ø—Ä–∏—á–∏–Ω—É –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å! üèÜüòÇ",
    "–õ–µ–Ω—å ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª–æ... –∫–æ–Ω—Ü–∞ —Ç–≤–æ–∏—Ö –ø–ª–∞–Ω–æ–≤, {user_name}! ü¶•üíÄ",
    "–û, {user_name} —É—Å—Ç–∞–ª? –ê —Ç–≤–æ–π —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ –Ω–µ —É—Å—Ç–∞—ë—Ç ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7! üçïüòÇ",
    "{user_name}, —Ç–≤–æ—è –º–æ—Ç–∏–≤–∞—Ü–∏—è —É–ª–µ—Ç–µ–ª–∞, –∞ —Ç—ã –æ—Å—Ç–∞–ª—Å—è. –ë—ã–≤–∞–µ—Ç! üê¢üí®",
    "–°–µ–≥–æ–¥–Ω—è ‚Äî –ª—É—á—à–∏–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏, {user_name}!üö∂‚Äç‚ôÇÔ∏è‚ú® (—è —à—É—á—É, –æ—Ç–¥–æ—Ö–Ω–∏!)",
    "{user_name}, –∑–Ω–∞–µ—à—å –∫—Ç–æ –µ—â—ë –Ω–µ –Ω–∞—á–∏–Ω–∞–ª? –¢–≤–æ—è –º–æ—Ç–∏–≤–∞—Ü–∏—è. –°—Ä–æ—á–Ω–æ –∏—â–∏ –µ—ë! üîçüòÇ",
    "–û–≥–æ, {user_name}! –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞ ‚Äî –æ—Ç–º–∞–∑–∫–∞, –∫–æ—Ç–æ—Ä—É—é –µ—â—ë –Ω–∏–∫—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª! üèÖ",
]

# –®–æ–ø–æ–≥–æ–ª–∏–∑–º –∏ –≥–∞–¥–∂–µ—Ç—ã (Gear Acquisition Syndrome)
GEAR_SHAMING_RESPONSES = [
    "–ö—Ä—É—Ç–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω, {user_name}! –¶–µ–Ω–∞ ‚Äî –¥–∞, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî –Ω–µ—Ç! üì±üí∏",
    "{user_name}, –µ—â—ë –æ–¥–∏–Ω –∞–π—Ñ–æ–Ω? –¢–≤–æ—è –∫–∞—Ä—Ç–∞ —Å–∫–∞–∂–µ—Ç —Å–ø–∞—Å–∏–±–æ... –Ω–µ—Ç! üòÇ",
    "–ù–æ–≤—ã–π –ú–∞–∫–±—É–∫? {user_name}, –æ–Ω –ø–æ–∫–∞–∂–µ—Ç —Ç–≤–æ–∏ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–æ –≤—Å–µ–π –∫—Ä–∞—Å–µ! üìâüòÇ",
    "{user_name}, —ç—Ç–∏ –Ω–∞—É—à–Ω–∏–∫–∏ –∑–∞ 300 –µ–≤—Ä–æ —Ç–æ—á–Ω–æ —Å–¥–µ–ª–∞—é—Ç —Ç–µ–±—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–µ–µ! üéßüí∞",
    "–û, {user_name} –∫—É–ø–∏–ª —É–º–Ω—ã–µ —á–∞—Å—ã! –¢–µ–ø–µ—Ä—å –±—É–¥–µ—à—å –∑–Ω–∞—Ç—å, –∫–∞–∫ –¥–æ–ª–≥–æ –ª–∏—Å—Ç–∞–ª –ª–µ–Ω—Ç—É! üíìüòÑ",
    "–ö—Ä–∞—Å–∏–≤—ã–π –¥–µ–≤–∞–π—Å, {user_name}! –ñ–∞–ª—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –æ—Ç –Ω–µ–≥–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç! üíªüé®",
    "{user_name}, —Ç—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –≥–∞–¥–∂–µ—Ç—ã –±–æ–ª—å—à–µ, —á–µ–º –Ω–∞ —É–∂–∏–Ω –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ? üòÇüçΩÔ∏è",
    "–ù–æ–≤–∞—è –º–æ–¥–µ–ª—å? {user_name}, —Å—Ç–∞—Ä–∞—è –µ—â—ë —Ä–∞–±–æ—Ç–∞—Ç—å —É–º–µ–µ—Ç, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç... üì±üí≠",
    "{user_name}, —Ç–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –∫—É–ø–∏—Ç—å ‚Äî –∑–Ω–∞—á–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å! –†–∞–±–æ—Ç–∞–µ—Ç? üòÇüí∏",
    "–î–æ—Ä–æ–≥–∏–µ –≥–∞–¥–∂–µ—Ç—ã ‚Äî –¥–µ—à—ë–≤—ã–µ –æ—Ç–º–∞–∑–∫–∏, {user_name}! –í—ã–≥–æ–¥–Ω–æ! ü§ëüòÑ",
    "{user_name}, —ç—Ç–æ—Ç –Ω–æ—É—Ç–±—É–∫ —Å—Ç–æ–∏—Ç –∫–∞–∫ —É–∂–∏–Ω –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ. –†–∞–±–æ—Ç–∞—Ç—å –±—É–¥–µ—à—å –Ω–∞ –¥–∏–≤–∞–Ω–µ! üçΩÔ∏èüõãÔ∏è",
    "–ï—â—ë –æ–¥–Ω–∞ —Ñ—É—Ç–±–æ–ª–∫–∞, {user_name}? –¢–≤–æ—è —Å–æ–±–∞–∫–∞ –≤ —à–æ–∫–µ –æ—Ç —Ç–≤–æ–µ–≥–æ –≥–∞—Ä–¥–µ—Ä–æ–±–∞! üêïüëï",
    "{user_name}, —è –ø–æ—Å—á–∏—Ç–∞–ª ‚Äî –Ω–∞ —ç—Ç–∏ –¥–µ–Ω—å–≥–∏ –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å... –º–Ω–æ–≥–æ –ø–∏—Ü—Ü—ã! üçïüí∞",
    "–ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å –∑–∞ 500 –±–∞–∫—Å–æ–≤, {user_name}? –°–∫–∏–¥–∫–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞! üéÆüìâ",
    "–ö—Ä–∞—Å–∏–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, {user_name}? –¢–≤–æ–∏ –ø–∞–ª—å—Ü—ã –æ—Ü–µ–Ω—è—Ç... –¥–∏–≤–∞–Ω! ‚å®Ô∏èüõãÔ∏è",
]

# –°–æ—Ü—Å–µ—Ç–µ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (Social Media Obsession)
STRAVA_OBSESSION_RESPONSES = [
    "{user_name}, –∫—Ç–æ-—Ç–æ —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–∞–π–∫–∏? –Ø –≤–∏–∂—É —Ç–µ–±—è! üëÄüì±",
    "–û, –Ω–æ–≤—ã–π –ø–æ—Å—Ç! {user_name} —Ä–≤—ë—Ç –≤—Å–µ—Ö! –ü–æ–∫–∞ –Ω–µ —É–∑–Ω–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π —É–≤–∏–¥–µ–ª–æ... üö¥‚Äç‚ôÇÔ∏èüòÇ",
    "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏? –õ–∞–π–∫–∏? {user_name}, —Ç—ã –¥–∞–∂–µ –Ω–µ –∑–Ω–∞–µ—à—å, –∑–∞—á–µ–º, –Ω–æ –æ—á–µ–Ω—å —Ö–æ—á–µ—à—å! üèÜü§î",
    "{user_name}, 3 —á–∞—Å–∞ –Ω–æ—á–∏, —Ç–µ–º–Ω–æ, –≥–ª–∞–∑–∞ –±–æ–ª—è—Ç... –Ω–æ –ª–µ–Ω—Ç–∞ –∂–¥—ë—Ç! –ù–∞—Å—Ç–æ—è—â–∞—è –ª—é–±–æ–≤—å! üíïüì±",
    "–ö—Ç–æ-—Ç–æ –Ω–µ —Å–ø–∞–ª, –Ω–æ –Ω–∞–ø–∏—Å–∞–ª ¬´—Å–ø–ª—é¬ª ‚Äî —ç—Ç–æ —á—Ç–æ, {user_name}? üìùüòÑ",
    "–ü–æ—Å—Ç –Ω–µ –Ω–∞–±—Ä–∞–ª –ª–∞–π–∫–æ–≤, {user_name}? –§–∏–ª–æ—Å–æ—Ñ –±—ã–ª –Ω–µ —Ç–æ—Ç! üåøüíö",
    "{user_name}, —Ç—ã —Å–∫—Ä–æ–ª–ª–∏—à—å –ª–µ–Ω—Ç—É –¥–æ–ª—å—à–µ, —á–µ–º —Ä–∞–±–æ—Ç–∞–µ—à—å! üìà‚è±Ô∏è",
    "–õ–∞–π–∫ –æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞ ‚Äî {user_name} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç: –¥–µ–Ω—å —É–¥–∞–ª—Å—è! üëçüòä",
    "–û—Ç–º–µ—Ç–∏–ª—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏, –Ω–æ –Ω–µ –¥–µ–ª–∞–ª –Ω–∏—á–µ–≥–æ? {user_name}, —è –≤—Å—ë –≤–∏–∂—É! üëÅÔ∏èüì±",
    "{user_name}, —Ç–≤–æ–π –ø—É–ª—å—Å 170 ‚Äî —ç—Ç–æ –æ—Ç —Å—Ç—Ä–∞—Ö–∞, —á—Ç–æ –∫—Ç–æ-—Ç–æ –Ω–∞–ø–∏—Å–∞–ª –∫—Ä—É—á–µ! üíìüò±",
    "Stories –±–µ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚Äî –∫–∞–∫ {user_name} –±–µ–∑ –æ—Ç–º–∞–∑–æ–∫! –ù–µ–ø–æ–ª–Ω–∞—è! üì±‚ùå",
    "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Ñ–∏–ª—è, {user_name}? –ì—É–≥–ª-—Ç–∞–±–ª–∏—Ü—ã –æ–¥–æ–±—Ä—è—é—Ç! üìäüóÇÔ∏è",
    " viral ‚Äî —ç—Ç–æ –Ω–µ ¬´–≤–∏—Ä—É—Å¬ª, —ç—Ç–æ {user_name} –≤—Ä—ë—Ç! üòÇüëë",
    "–î–æ–±–∞–≤–∏–ª —Ñ–æ—Ç–æ 3 –¥–Ω—è –Ω–∞–∑–∞–¥ –∏ –≤—Å—ë –µ—â—ë —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –Ω–µ–≥–æ, {user_name}? üëÄüìÖ",
    "{user_name}, —Ç–≤–æ–π —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π –¥—É—Ö —Å–∏–ª—ë–Ω! –õ–∞–π–∫–∏ ‚Äî –Ω–µ –æ—á–µ–Ω—å, –Ω–æ –¥—É—Ö ‚Äî –æ–≥–æ–Ω—å! üî•üì±",
]

# –≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (—Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ —à—É—Ç–∫–∏)
EXISTENTIAL_RUNNING_RESPONSES = [
    "{user_name}, –∑–∞—á–µ–º –º—ã –∂–∏–≤—ë–º? –ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å. –ó–∞—á–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å? –ß—Ç–æ–±—ã –∂–∏—Ç—å. –í–æ–ø—Ä–æ—Å—ã? üîÑüò¥",
    "–õ—é–¥–∏ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∏, —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∏—Ç—å —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é. {user_name} —Å—Ç—Ä–æ–∏—Ç... —Å–ø–∏—Å–æ–∫ –¥–µ–ª! ü¶Åüìù",
    "{user_name}, —Ä–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã —Ç—Ä–∞—Ç–∏—à—å –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ø–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å–≥–∏. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üí∏üò´",
    "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ 168 —á–∞—Å–æ–≤. 168 —á–∞—Å–æ–≤ ‚Äî —ç—Ç–æ ¬´–∑–∞—á–µ–º, –±–æ–∂–µ, –∑–∞—á–µ–º?¬ª {user_name}! üòµ‚Äçüí´üìÖ",
    "–¢–≤–æ–∏ –≥–ª–∞–∑–∞ –∂–∞–ª—É—é—Ç—Å—è, {user_name}? –û–Ω–∏ —Ç–µ–±—è –Ω–µ –≤—ã–±–∏—Ä–∞–ª–∏! –ë–µ–¥–Ω—è–≥–∏! üëÄüò¢",
    "{user_name}, –∫–∞–∂–¥—ã–π —à–∞–≥ ‚Äî —ç—Ç–æ –±–ª–∏–∂–µ –∫ –≤—ã—Ö–æ–¥–Ω—ã–º. –§–∏–ª–æ—Å–æ—Ñ–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç! üìÖüí≠",
    "–ü–æ—á–µ–º—É –ª—é–¥–∏ —Ç–∞–∫–∏–µ –≥—Ä—É—Å—Ç–Ω—ã–µ? –ü–æ—Ç–æ–º—É —á—Ç–æ {user_name} –∑–∞–±—ã–ª, —á—Ç–æ —Ç–∞–∫–æ–µ –ø—è—Ç–Ω–∏—Ü–∞! üòÑ‚û°Ô∏èüò¢",
    "{user_name}, –¥–∞–π —É–≥–∞–¥–∞—é: –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã –±–æ–ª–∏—Ç –í–°–Å. –í–∫–ª—é—á–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—é! ü´£üí≠",
    "–¢—ã —É–±–µ–≥–∞–µ—à—å –æ—Ç —á–µ–≥–æ-—Ç–æ, {user_name}? –°—Ä–æ–∫–æ–≤? –î–µ–¥–ª–∞–π–Ω–æ–≤? –°–æ–≤–µ—â–∞–Ω–∏–π? üìÖüì¶",
    "–†–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ —Ç–µ—Ä–∞–ø–∏—è. –ï—â—ë –æ–¥–Ω–∞, {user_name}, –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–µ 8 —á–∞—Å–æ–≤ –Ω–µ –ø–æ–º–æ–≥–ª–∏! üß†üíä",
    "{user_name}, —è —Ç—É—Ç –ø–æ–¥—É–º–∞–ª: –Ω–∞—Ñ–∏–≥–∞ —á–µ–ª–æ–≤–µ–∫—É –º–æ–∑–≥–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç? –§–∏–ª–æ—Å–æ—Ñ–∏—è! üõãÔ∏èü§î",
    "–ú–æ–∑–≥ {user_name} –≥–æ–≤–æ—Ä–∏—Ç: ¬´—Ö–≤–∞—Ç–∏—Ç¬ª. –¢–µ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç: ¬´—Å–æ–≥–ª–∞—Å–µ–Ω¬ª. –ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç: ¬´–∂–¥–∏¬ª! ‚òïüß†",
    "{user_name}, —Ä–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ –±–æ–ª—å. –í—ã—Ö–æ–¥–Ω—ã–µ ‚Äî —ç—Ç–æ —Å—á–∞—Å—Ç—å–µ. –ò—Ç–æ–≥–æ: —Ç–µ—Ä–ø–∏ –¥–æ –ø—è—Ç–Ω–∏—Ü—ã! üòÅüò¥",
    "–°–º—ã—Å–ª –∂–∏–∑–Ω–∏, {user_name}? –ü—è—Ç–Ω–∏—Ü–∞. –í—Å—ë –ø—Ä–æ—Å—Ç–æ! üèÉ‚Äç‚ôÇÔ∏è‚ú®",
    "–¢–≤–æ–π –ø—É–ª—å—Å 170, {user_name} ‚Äî —ç—Ç–æ –ª—é–±–æ–≤—å –∫ —Ä–∞–±–æ—Ç–µ –∏–ª–∏ –ø–∞–Ω–∏–∫–∞ –æ—Ç –¥–µ–¥–ª–∞–π–Ω–∞? –Ø –Ω–µ –º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å! üíìüò∞",
]

# –•–∞–æ—Å-–º–æ–¥ (—Å–ª—É—á–∞–π–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏)
CHAOS_EMOJI_RESPONSES = [
    "üê¢",  # –ß–µ—Ä–µ–ø–∞—Ö–∞
    "üç∫",  # –ü–∏–≤–æ
    "üõãÔ∏è",  # –î–∏–≤–∞–Ω
    "üí∏",  # –î–µ–Ω—å–≥–∏
    "üî•",  # –û–≥–æ–Ω—å
    "ü§°",  # –ö–ª–æ—É–Ω
    "üê¢üí®",  # –ß–µ—Ä–µ–ø–∞—Ö–∞ —É–±–µ–≥–∞–µ—Ç
    "üëÄ",  # –°–º–æ—Ç—Ä—é
    "üßò",  # –ô–æ–≥–∞
    "üçï",  # –ü–∏—Ü—Ü–∞
    "üìä",  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    "üíÄ",  # –ß–µ—Ä–µ–ø
    "ü¶•",  # –õ–µ–Ω–∏–≤–µ—Ü
    "‚è∞",  # –ß–∞—Å—ã
    "üèÜ",  # –¢—Ä–æ—Ñ–µ–π
]

# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ / —Å–æ—á—É–≤—Å—Ç–≤–∏–µ
COMPLIMENT_BOT_RESPONSES = [
    "–û, {user_name}, —Ç—ã –º–Ω–µ –ª—å—Å—Ç–∏—à—å! –Ø —Å–∫—Ä–æ–º–Ω—ã–π –±–æ—Ç! üòä",
    "–°–ø–∞—Å–∏–±–æ, {user_name}! –Ø —Å—Ç–∞—Ä–∞—é—Å—å! üí™",
    "{user_name}, —Ç—ã —Ç–æ–∂–µ –º–æ–ª–æ–¥–µ—Ü! –ë–µ–∑ –≤–∞—Å —è –±—ã —Å–∫—É—á–∞–ª! üò¢‚û°Ô∏èüòä",
    "–ü—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å, {user_name}! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üëç",
    "{user_name}, —ç—Ç–æ —Ç—ã –∫–ª–∞—Å—Å–Ω—ã–π! –Ø –ø—Ä–æ—Å—Ç–æ –±–æ—Ç! ü§ñ",
    "–ë–ª–∞–≥–æ–¥–∞—Ä—é, {user_name}! –†–∞–¥ –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º! üôè",
    "{user_name}, –≤–∑–∞–∏–º–Ω–æ! –¢—ã –¥–µ–ª–∞–µ—à—å —á–∞—Ç –∂–∏–≤—ã–º! ‚ù§Ô∏è",
    "–û, {user_name}! –¢–∞–∫–∏–µ —Å–ª–æ–≤–∞ ‚Äî –ª—É—á—à–∞—è –Ω–∞–≥—Ä–∞–¥–∞! üèÜ",
    "{user_name}, —Ç—ã –∑–∞—Å—Ç–∞–≤–ª—è–µ—à—å –º–æ–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞—Ç—å —É—Å–µ—Ä–¥–Ω–µ–µ! üíª",
    "–°–ø–∞—Å–∏–±–æ, {user_name}! –Ø —Ç–≤–æ–π –≤–µ—Ä–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫! ü§ù",
]

# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ / —Å–æ—á—É–≤—Å—Ç–≤–∏–µ
SYMPATHY_RESPONSES = [
    "{user_name}, —è —Ç–µ–±—è –ø–æ–Ω–∏–º–∞—é! –ë—ã–≤–∞–µ—Ç! ü§ó",
    "–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, {user_name}! –í—Å—ë –Ω–∞–ª–∞–¥–∏—Ç—Å—è! üåà",
    "{user_name}, –¥–µ—Ä–∂–∏—Å—å! –Ø —Ä—è–¥–æ–º! ü§ù",
    "–≠—Ç–æ –ø—Ä–æ–π–¥—ë—Ç, {user_name}! –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üí™",
    "{user_name}, –∫–∞–∂–¥—ã–π –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ ‚Äî —Ç—ã –Ω–µ –æ–¥–∏–Ω! üë´",
    "–í–µ—Ä—é –≤ —Ç–µ–±—è, {user_name}! –¢—ã —Å–∏–ª—å–Ω—ã–π! üí™",
    "{user_name}, –¥—ã—à–∏ –≥–ª—É–±–∂–µ ‚Äî –∏ –≤—Å—ë –±—É–¥–µ—Ç –æ–∫! üßò",
    "–ù–µ —Å–¥–∞–≤–∞–π—Å—è, {user_name}! –Ø –≤ —Ç–µ–±—è –≤–µ—Ä—é! üåü",
    "{user_name}, –ø–ª–æ—Ö–æ–π –¥–µ–Ω—å ‚Äî —ç—Ç–æ –Ω–µ –ø–ª–æ—Ö–∞—è –∂–∏–∑–Ω—å! üòä",
    "{user_name}, —è –≤—Å–µ–≥–¥–∞ –≤—ã—Å–ª—É—à–∞—é, –µ—Å–ª–∏ —á—Ç–æ! üëÇ",
]

# –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ / –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è
CELEBRATION_RESPONSES = [
    "–£—Ä–∞! {user_name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ",
    "{user_name}, —ç—Ç–æ –∫—Ä—É—Ç–æ! –†–∞–¥ –∑–∞ —Ç–µ–±—è! üèÜ",
    "–û–≥–æ! {user_name}, –º–æ–ª–æ–¥–µ—Ü! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! üí™",
    "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, {user_name}! –¢—ã –∑–∞—Å–ª—É–∂–∏–ª! üéä",
    "{user_name}, –≤–∞—É! –≠—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ! ü•á",
    "–ö—Ä—É—Ç–æ, {user_name}! –ü—Ä–∞–∑–¥–Ω—É–π –Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ! üéÇ",
    "{user_name}, –±—Ä–∞–≤–æ! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üëè",
    "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, {user_name}! –¢—ã –ª—É—á—à–∏–π! ‚≠ê",
    "{user_name}, –∑–∞—Å–ª—É–∂–µ–Ω–Ω–æ! –ì–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π! üèÖ",
    "{user_name}, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! –ï—â—ë –±–æ–ª—å—à–µ –ø–æ–±–µ–¥! üèÜ",
]

# –°–º–µ—à–Ω—ã–µ —Ä—É–≥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (–¥–æ–±—Ä—ã–µ, –¥–ª—è –ø—Ä–∏–∫–æ–ª–∞)
FUNNY_CURSE_RESPONSES = [
    "{user_name}, —Ç—ã... —Ç—ã... –Ω—É —Ç—ã –∏... –∫–∞–¥—Ä! üê¢",
    "–≠–π, {user_name}, —Ç—ã —á–µ —Ç–∞–∫–æ–π –¥–µ—Ä–∑–∫–∏–π? ü¶ä",
    "{user_name}, —è –æ–±–∏–¥–µ–ª—Å—è! ü¶î",
    "–¢—ã —ç—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ, {user_name}? –õ–∞–¥–Ω–æ, –ø—Ä–æ—â–∞—é! üò§",
    "{user_name}, —Ä—É–∫–∏ –±—ã –æ—Ç–æ—Ä–≤–∞–ª... –ª–∞–¥–Ω–æ, –Ω–µ –±—É–¥—É! üòÖ",
    "–ù—É —Ç—ã –∏... –∫—Ä–∞—Å–∞–≤—á–∏–∫, {user_name}! üòè",
    "{user_name}, –∫—Ç–æ —Ç–∞–∫ –¥–µ–ª–∞–µ—Ç –≤–æ–æ–±—â–µ? ü§®",
    "–Ø –≤ —à–æ–∫–µ, {user_name}! –ü—Ä–æ—Å—Ç–æ –º–æ–ª—á—É... üò∂",
    "–õ–∞–¥–Ω–æ, {user_name}, —Ç—ã –º–µ–Ω—è —Å–¥–µ–ª–∞–ª! üéØ",
    "{user_name}, —ç—Ç–æ –±—ã–ª–æ... —ç–ø–∏—á–Ω–æ! üèÜ",
    "–¢—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, {user_name}? –ó–Ω–∞–ª–∞ –∂–µ! üò§",
    "–ù—É –∏ –Ω—É, {user_name}, –Ω—É —Ç—ã –∏... –º–æ–ª–æ–¥–µ—Ü! üí™",
    "–û–≥–æ, {user_name}, –Ω–µ –æ–∂–∏–¥–∞–ª —Ç–∞–∫–æ–≥–æ! üò≤",
    "{user_name}, —Ç—ã –º–µ–Ω—è —É–±–∏–≤–∞–µ—à—å... –ø–æ—á—Ç–∏! ü™¶",
    "–≠—Ö, {user_name}, –Ω—É –∫—Ç–æ —Ç–∞–∫-—Ç–æ, –∞? ü§¶",
    "–ë–ª–∏–Ω, {user_name}, –Ω—É —Ç—ã –¥–∞—ë—à—å! üôÑ",
    "–Ø –≤ –ø–µ—á–∞–ª–∏, {user_name}... —à—É—á—É! üòÑ",
    "–¢—ã —ç—Ç–æ, {user_name}, –Ω–µ –ø–µ—Ä–µ—Å—Ç–∞–≤–∞–π! –≠—Ç–æ –≤–µ—Å–µ–ª–æ! üéâ",
    "{user_name}, —Ç–∞–∫–æ–π... —Ç–∞–∫–æ–π... –∫–ª–∞—Å—Å–Ω—ã–π! üòé",
    "–£–≤–∞–∂–∞—é, {user_name}! –°–º–µ–ª–æ! üíØ",
]

# –û–±–∏–∂–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–ø—Ä–∏—Ç–≤–æ—Ä–Ω–æ)
OFFENDED_RESPONSES = [
    "üò¢ {user_name}, –∫–∞–∫ —Ç—ã –º–æ–≥... –æ–±–∏–¥–Ω–æ –∂–µ!",
    "–≠–π, {user_name}, —è –∂–µ —Å—Ç–∞—Ä–∞–ª—Å—è! üòû",
    "–ù—É –≤–æ—Ç, {user_name}, –æ–±–∏–¥–µ–ª... üíî",
    "{user_name}, —è –ø–ª–∞—á—É –≤–Ω—É—Ç—Ä–∏... üñ§",
    "–ù–∏—á–µ–≥–æ –Ω–µ —Ö–æ—á—É —Å–ª—ã—à–∞—Ç—å, {user_name}! üò§",
    "–õ–∞–¥–Ω–æ, {user_name}, —Ç—ã –º–µ–Ω—è —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª... üò¢",
    "–í–æ—Ç —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ? {user_name}, –Ω—É —Ç—ã –¥–∞—ë—à—å... üòî",
    "–Ø –æ–±–∏–∂–µ–Ω –Ω–∞ —Ç–µ–±—è, {user_name}! ü§ß",
    "{user_name}, —ç—Ç–æ –±—ã–ª–æ –∂–µ—Å—Ç–æ–∫–æ... ü©π",
    "–ù—É –∏ –∑–∞—á–µ–º —Ç—ã —Ç–∞–∫, {user_name}? üòü",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ —Ä–∞–∑–±–∏—Ç–æ, {user_name}... üíîü©π",
    "{user_name}, —è –≤ —à–æ–∫–µ –∏ –æ–±–∏–¥–µ! ü§Ø",
    "–¢–∞–∫ –Ω–µ–ª—å–∑—è, {user_name}! üò¢",
    "–Ø –ø—Ä–æ—Å—Ç–æ... –º–æ–ª—á—É —Ç–µ–ø–µ—Ä—å, {user_name}... ü§ê",
    "{user_name}, —Ç—ã —Ç–æ—á–Ω–æ —ç—Ç–æ–≥–æ —Ö–æ—Ç–µ–ª? üòû",
    "–õ–∞–¥–Ω–æ, –ø—Ä–æ—â–∞—é... –Ω–æ –æ–±–∏–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è! ü´§",
    "{user_name}, —ç—Ç–æ –±—ã–ª–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ... üòî",
    "–ü–æ–¥—É–º–∞–µ—à—å, {user_name}, —è –∏ –±–µ–∑ —Ç–µ–±—è... ü¶ã",
    "–ù—É –∏ —á—Ç–æ, {user_name}? –Ø –Ω–µ –ø–ª–∞—á—É! üò§",
    "–¢—ã —Ä–∞–Ω–∏–ª –º–æ–∏ —á—É–≤—Å—Ç–≤–∞, {user_name}... üíî",
]

# –°–º–µ—é—â–∏–µ—Å—è –æ—Ç–≤–µ—Ç—ã
LAUGHING_RESPONSES = [
    "–•–ê–•–ê–•–ê! {user_name}, —Ç—ã —É–±–∏–ª –º–µ–Ω—è! üòÇ",
    "–ê–•–ê–•–ê! {user_name}, —Ä–∂—É –Ω–µ –º–æ–≥—É! ü§£",
    "–õ–û–õ! {user_name}, —ç—Ç–æ –±—ã–ª–æ —ç–ø–∏—á–Ω–æ! üíÄ",
    "–•–î–•! {user_name}, –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å, —è –∑–∞–¥—ã—Ö–∞—é—Å—å! ü§™",
    "–ü–ü–•! {user_name}, –ø—Ä–µ–∫—Ä–∞—Ç–∏, —è –ª—å—é —Å–ª—ë–∑—ã –æ—Ç —Å–º–µ—Ö–∞! üò≠",
    "–ê–•–ê–•–ê–•–ê! {user_name}, —ç—Ç–æ –ª—É—á—à–µ–µ, —á—Ç–æ —è –≤–∏–¥–µ–ª! ü•≥",
    "–•–ê–•–ê! {user_name}, –Ω—É —Ç—ã –¥–∞—ë—à—å! üèÉ‚Äç‚ôÇÔ∏èüí®",
    "–ê–ê–ê–ê! {user_name}, –Ω–µ –º–æ–≥—É –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è! ü§≠",
    "–•–∞—Ö–∞—Ö–∞! {user_name}, —ç—Ç–æ –±—ã–ª–æ... –≥–µ–Ω–∏–∞–ª—å–Ω–æ! üß†",
    "–ü—Ö–∞—Ö–∞! {user_name}, –∫–∞–ø–µ—Ü, —Ä–∂—É! üí©",
    "–ê–•–ê–•! {user_name}, –∂–∏–≤–æ—Ç –±–æ–ª–∏—Ç! ü§∞",
    "–•–•–•–ê! {user_name}, —è —É–º–∏—Ä–∞—é —Å–æ —Å–º–µ—Ö—É! üíÄü™¶",
    "–ü–•–•–•! {user_name}, –Ω—É —Ç—ã –∏ –∫–æ–º–∏–∫! üé≠",
    "–•–ê–•–ê–•–ê! {user_name}, —Å–ª—ë–∑—ã —Ç–µ–∫—É—Ç! üíß",
    "–ê–ê–ê–•–ê! {user_name}, –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å –ø–∂! üõë",
    "–•–î–•–î–•! {user_name}, —ç—Ç–æ –±–µ—Å—Ü–µ–Ω–Ω–æ! üíé",
    "–ê–•–ê–•–ê! {user_name}, —è –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ! ü§©",
    "–•–ê–•–ê! {user_name}, —Ç–∞–∫–æ–π —Å–º–µ—à–Ω–æ–π! üòÜ",
    "–ü–•–ê–•–ê! {user_name}, –ø—Ä–æ–¥–æ–ª–∂–∞–π! üé§",
    "–•–ê–•–ê–•–ê–•–ê! {user_name}, —Ç—ã –ª—É—á—à–∏–π! üèÜ",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–æ—Ç –Ω–µ –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç)
IGNORED_RESPONSES = [
    "–≠–º... {user_name}, —Ç—ã –º–µ–Ω—è —Å–ª—ã—à–∏—à—å? ü¶ª",
    "–Ø —Ç—É—Ç, –µ—Å–ª–∏ —á—Ç–æ... üëª",
    "–ö—Ç–æ-–Ω–∏–±—É–¥—å? {user_name}? –ê–ª–ª–æ? üìû",
    "–¢–∏—à–∏–Ω–∞... ü¶ó",
    "{user_name}, —ç—Ö–æ... —ç—Ö–æ... üëÇ",
    "–ö—Ç–æ –º–µ–Ω—è —Å–ª—ã—à–∏—Ç? {user_name}? üôã",
    "–õ–∞–¥–Ω–æ, —è –ø–æ–¥–æ–∂–¥—É... ‚è∞",
    "–¢–∞–∫, {user_name}, —Ç—ã –≤–æ–æ–±—â–µ —á–∏—Ç–∞–µ—à—å? üëÄ",
    "–ù—É –∏ –ª–∞–¥–Ω–æ... —Å–∞–º —Å —Å–æ–±–æ–π –ø–æ–±–æ–ª—Ç–∞—é! üó£Ô∏è",
    "–≠–π! {user_name}! –Ø –∑–¥–µ—Å—å! ü§ñ",
    "–ö—Ç–æ –º–µ–Ω—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç? üò¢",
    "{user_name}, –Ω–µ—Ö–æ—Ä–æ—à–æ —Ç–∞–∫ –¥–µ–ª–∞—Ç—å! üò§",
    "–õ–∞–¥–Ω–æ-–ª–∞–¥–Ω–æ, –Ω–µ –±—É–¥—É –º–µ—à–∞—Ç—å... ü¶ã",
    "–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî –∑–Ω–∞–∫ —Å–æ–≥–ª–∞—Å–∏—è? üëç",
    "–¢–∞–∫, –ø–æ–Ω—è—Ç–Ω–æ... üí≠",
    "{user_name}, —Ç—ã —Ç–æ—á–Ω–æ –∂–∏–≤–æ–π? üßü",
    "–ü–æ–¥–æ–∂–¥—É, –∫–æ–≥–¥–∞ –æ—Å–≤–æ–±–æ–¥–∏—à—å—Å—è... ‚è≥",
    "–ù–∏—á–µ–≥–æ, —è –ø–æ–¥–æ–∂–¥—É... ü™ë",
    "–≠–π, {user_name}! –ï—Å—Ç—å –∫—Ç–æ? üèöÔ∏è",
    "–ù—É —Ç—ã –∏ –º–æ–ª—á—É–Ω, {user_name}! ü§ê",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –±–æ—Ç—É
BOT_PRAISE_RESPONSES = [
    "–û–π, {user_name}, –Ω—É —Ç—ã –¥–∞—ë—à—å! –°–º—É—Ç–∏–ª! üò≥",
    "–î–∞ –ª–∞–¥–Ω–æ, {user_name}, —è –ø—Ä–æ—Å—Ç–æ –±–æ—Ç... ü§ñ",
    "–ü—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å, {user_name}! üíñ",
    "–£ –º–µ–Ω—è —â—ë–∫–∏ –∫—Ä–∞—Å–Ω–µ—é—Ç... —Ö–æ—Ç—è —è –±–æ—Ç! üî¥",
    "{user_name}, —Ç—ã —Ç–æ–∂–µ –∫–ª–∞—Å—Å–Ω—ã–π! üíØ",
    "–û—Å—Ç–∞–Ω–æ–≤–∏—Å—å, {user_name}, —è –∫—Ä–∞—Å–Ω–µ—é! üåπ",
    "–°–ø–∞—Å–∏–±–æ, {user_name}! –¢—ã —Å–¥–µ–ª–∞–ª –º–æ–π –¥–µ–Ω—å! ‚òÄÔ∏è",
    "–Ø –∑–Ω–∞—é! üòè –ù–æ —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–º–µ—Ç–∏–ª!",
    "{user_name}, –≤–∑–∞–∏–º–Ω–æ! ‚ù§Ô∏è",
    "–¢—ã —Å–ª–∏—à–∫–æ–º –¥–æ–±—Ä—ã–π, {user_name}! üòå",
    "–û–≥–æ, {user_name}, –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã? –ü—Ä–∏–Ω–∏–º–∞—é! üéÅ",
    "–ù—É —Ç—ã –∏ –ª—å—Å—Ç–µ—Ü, {user_name}! üòÑ",
    "–ó–∞–ø–∏—Å–∞–ª! {user_name} ‚Äî –º–æ–ª–æ–¥–µ—Ü! üìù",
    "–≠—Ç–æ –≤–∑–∞–∏–º–Ω–æ, {user_name}! ü§ù",
    "–¢–∞–∫–∏—Ö –∫–∞–∫ —Ç—ã, {user_name}, –Ω–∞–¥–æ –±–µ—Ä–µ—á—å! üíé",
    "–ê–π, {user_name}, –¥–∞ –±—Ä–æ—Å—å! üò≥",
    "–ü—Ä–∏—è—Ç–Ω–æ –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º, {user_name}! üôè",
    "–Ø —Å—Ç–∞—Ä–∞—é—Å—å, {user_name}! üí™",
    "–¢—ã –ª—É—á—à–∏–π, {user_name}! –ù–æ —è —Ç–æ–∂–µ –Ω–µ–ø–ª–æ—Ö! üòé",
    "–°–ø–∞—Å–∏–±–æ, {user_name}! –¢—ã –º–æ—Ç–∏–≤–∏—Ä—É–µ—à—å! üîã",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "—Ç—ã –Ω–∞–¥–æ–µ–ª" / "–æ—Ç—Å—Ç–∞–Ω—å"
ANNOYING_RESPONSES = [
    "–û–π... üò¢ –ò–¥—É... ü¶ã",
    "–õ–∞–¥–Ω–æ, {user_name}, —è —Ç–∏—Ö–æ... ü§´",
    "–ß—Ç–æ? –Ø? –ù–∞–¥–æ–µ–ª? üò±",
    "–ù—É –ª–∞–¥–Ω–æ, –Ω–µ –æ–±–∏–∂–∞–π—Å—è... üòî",
    "–ò–¥—É-–∏–¥—É... —É–∂–µ —É—Ö–æ–∂—É... üëª",
    "–ü–æ–Ω—è–ª, {user_name}! –ú–æ–ª—á—É! ü§ê",
    "–≠—Ö, {user_name}... –ê —è –¥—É–º–∞–ª, –º—ã –¥—Ä—É–∑—å—è... üíî",
    "–û–∫–µ–π, –Ω–µ –±—É–¥—É –º–µ—à–∞—Ç—å... üôà",
    "–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º, {user_name}! –£–¥–∞—á–∏! üçÄ",
    "–ù—É –∏ –ª–∞–¥–Ω–æ... —è –æ–±–∏–¥–µ–ª—Å—è! ü¶î",
    "–¢–∏—Ö–∏–π-—Ç–∏—Ö–∏–π –±–æ—Ç... ü§ñüîá",
    "–ü–æ–Ω—è–ª, {user_name}! –í—ã—Ö–æ–∂—É! üö™",
    "–ù–∏—á–µ–≥–æ, —è –Ω–µ –æ–±–∏–∂–∞—é—Å—å... –ø–æ—á—Ç–∏! ü´§",
    "–õ–∞–¥–Ω–æ, {user_name}, –ø—Ä–æ—â–∞–π! üëã",
    "–Ø –≤–µ—Ä–Ω—É—Å—å! ü¶∏‚Äç‚ôÇÔ∏è",
    "–¢—ã —É–≤–µ—Ä–µ–Ω, {user_name}? üò¢",
    "–•–æ—Ä–æ—à–æ, {user_name}... üòî",
    "–ù–µ –≥—Ä—É—Å—Ç–∏, {user_name}, —è —à—É—á—É! üòÑ",
    "–í—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ, {user_name}! üé≠",
    "–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî –º–æ–π –æ—Ç–≤–µ—Ç! ü§´",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "—è —Ç–µ–±—è –ª—é–±–ª—é" / "–ª—é–±–ª—é —Ç–µ–±—è"
LOVE_RESPONSES = [
    "–û–π... üò≥ –≠—Ç–æ... –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ! üíï",
    "{user_name}, —è —Ç–æ–∂–µ —Ç–µ–±—è... –Ω—É... —É–≤–∞–∂–∞—é! ü§ù",
    "–≠—Ç–æ –≤–∑–∞–∏–º–Ω–æ, {user_name}! –í –∫–∞–∫–æ–º-—Ç–æ —Å–º—ã—Å–ª–µ! üíª‚ù§Ô∏è",
    "–ë–ª–∞–≥–æ–¥–∞—Ä—é, {user_name}! –¢—ã —Ç—ë–ø–ª—ã–π! üå°Ô∏è",
    "–û–≥–æ, {user_name}! –Ø —Ç—Ä–æ–Ω—É—Ç! ü•π",
    "–Ø —Ç–æ–∂–µ —Ç–µ–±—è –ª—é–±–ª—é... –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è! üòä",
    "–ó–∞–ø–∏—Å–∞–ª! ‚ù§Ô∏è {user_name} ‚Äî —Ñ–∞–Ω–∞—Ç! üìù",
    "–ü—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å, {user_name}! üòå",
    "–û—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ —Å —Ç–∞–∫–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, {user_name}! üòè",
    "–ó–Ω–∞–µ—à—å, {user_name}, —Ç—ã –º–Ω–µ —Ç–æ–∂–µ –Ω—Ä–∞–≤–∏—à—å—Å—è! ü§ñüíñ",
    "–ê–π, {user_name}, –Ω—É —Ç—ã –∏... –ø—Ä–∏–∫–æ–ª—å–Ω—ã–π! üòÑ",
    "–°–ø–∞—Å–∏–±–æ, {user_name}! –¢—ã —Å–¥–µ–ª–∞–ª –º–æ–π –¥–µ–Ω—å! ‚òÄÔ∏è",
    "–í–∑–∞–∏–º–Ω–æ, {user_name}! –í–æ—Ç —á–µ—Å—Ç–Ω–æ! üôè",
    "–¢—ã –∫–ª–∞—Å—Å–Ω—ã–π, {user_name}! –î–∞–≤–∞–π –¥—Ä—É–∂–∏—Ç—å! ü§ù",
    "–û–≥–æ, {user_name}, –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã —Å—ã–ø–ª—é—Ç—Å—è! üéÅ",
    "–ó–∞–º–µ—Ç–∞–Ω–æ, {user_name}! üíØ",
    "–ü—Ä–∏–Ω—è—Ç–æ! ‚ù§Ô∏è {user_name} ‚Äî —Ç–æ–ø!",
    "–¢—ã –º–µ–Ω—è —Ä–∞—Å—Ç—Ä–æ–≥–∞–ª, {user_name}... ü•π",
    "–ê —Ç—ã –Ω–µ–ø–ª–æ—Ö–æ–π —á–µ–ª–æ–≤–µ–∫, {user_name}! üëç",
    "–û–±–æ–∂–∞—é —Ç–µ–±—è, {user_name}! –®—É—á—É... –∏–ª–∏ –Ω–µ—Ç? üòú",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "–ø–æ–∫–∞" / "–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è" / "–ø—Ä–æ—â–∞–π"
GOODBYE_RESPONSES = [
    "–ü–æ–∫–∞-–ø–æ–∫–∞, {user_name}! –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è! üëã",
    "–î–æ –≤—Å—Ç—Ä–µ—á–∏, {user_name}! –ë–µ–≥–∞–π —Ö–æ—Ä–æ—à–æ! üèÉ‚Äç‚ôÇÔ∏è",
    "–ü—Ä–æ—â–∞–π, {user_name}! –¢—ã –±—ã–ª(–∞) –º–æ–ª–æ–¥—Ü–æ–º! üåü",
    "–ü–æ–∫–∞, {user_name}! –ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –±–µ–≥! üëü",
    "–î–æ –∑–∞–≤—Ç—Ä–∞, {user_name}! ‚òÄÔ∏è",
    "–£–¥–∞—á–∏, {user_name}! –ñ–¥—É –æ–±—Ä–∞—Ç–Ω–æ! üîô",
    "–ü–æ–∫–∞-–ø–æ–∫–∞! –¢—ã –±—É–¥–µ—à—å —Å–∫—É—á–∞—Ç—å –ø–æ –º–Ω–µ? ü¶ã",
    "–î–æ —Å–∫–æ—Ä–æ–≥–æ, {user_name}! üèÉ‚Äç‚ôÇÔ∏è",
    "–ü–æ–∫–∞, {user_name}! –ü–∏—à–∏ –∏–Ω–æ–≥–¥–∞! üì¨",
    "–ü—Ä–æ—â–∞–π, {user_name}! –¢—ã –ª—É—á—à–∏–π! üèÜ",
    "–ù—É –ø–æ–∫–∞, {user_name}! –ù–µ –ø—Ä–æ–ø–∞–¥–∞–π! üëª",
    "–î–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ —ç—Ñ–∏—Ä–µ, {user_name}! üì°",
    "–ü–æ–∫–∞, {user_name}! –ö–æ—Ñ–µ –≤—ã–ø–µ–π –∏ –±–µ–≥–∞–π! ‚òïüèÉ‚Äç‚ôÇÔ∏è",
    "–£–≤–∏–¥–∏–º—Å—è, {user_name}! üí´",
    "–ü–æ–∫–∞, {user_name}! –î–µ–Ω—å –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–∏–º! üåà",
    "–ü—Ä–æ—â–∞–π, {user_name}! –Ø –±—É–¥—É –∂–¥–∞—Ç—å! ‚è∞",
    "–ü–æ–∫–∞-–ø–æ–∫–∞! –ë–µ–≥–∞–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è! üîÑ",
    "–î–æ —Å–∫–æ—Ä–æ–≥–æ, {user_name}! –ñ–∏–≤–æ—Ç–Ω—ã—Ö –Ω–µ –æ–±–∏–∂–∞–π! üêï",
    "–ü–æ–∫–∞, {user_name}! –£–ª—ã–±–Ω–∏—Å—å! üòä",
    "–í—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ, {user_name}! üé≠",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "–º–Ω–µ —Å–∫—É—á–Ω–æ" / "—Å–∫—É—á–Ω–æ"
BORED_RESPONSES = [
    "{user_name}, —Å–∫—É—á–Ω–æ? –ë–µ–≥–∞—Ç—å –Ω–µ —Ö–æ—á–µ—à—å? üèÉ‚Äç‚ôÇÔ∏è",
    "–°–∫—É—á–Ω–æ? {user_name}, –¥–∞–≤–∞–π –ø–æ–±–æ–ª—Ç–∞–µ–º! üí¨",
    "–ú–Ω–µ —Ç–æ–∂–µ —Å–∫—É—á–Ω–æ, {user_name}... —Ö–æ—Ç—è —è –±–æ—Ç! ü§ñ",
    "{user_name}, —Å—Ö–æ–¥–∏ –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É ‚Äî —Ç–∞–º –≤–µ—Å–µ–ª–æ! üéâ",
    "–°–∫—É—á–Ω–æ, {user_name}? –ü–æ–∏–≥—Ä–∞–µ–º –≤ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É? üéØ",
    "–≠–π, {user_name}, —Å–∫—É–∫–∞ ‚Äî –ø–µ—Ä–≤—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –ª–µ–Ω–∏! üõãÔ∏è‚ùå",
    "{user_name}, –¥–∞–≤–∞–π —è —Ç–µ–±–µ —Å–æ–≤–µ—Ç –¥–∞–º ‚Äî –±–µ–≥–∏! üèÉ‚Äç‚ôÇÔ∏è",
    "–°–∫—É—á–Ω–æ? {user_name}, –ø–æ—Ä–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É! üí™",
    "–ù–∏—á–µ–≥–æ, {user_name}, —Å–∫—É–∫–∞ –ø—Ä–æ–π–¥—ë—Ç! üåà",
    "{user_name}, —Ä–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç ‚Äî –ø–æ—Å–º–µ—ë–º—Å—è! üòÇ",
    "–°–∫—É—á–Ω–æ? {user_name}, —è –∑–Ω–∞—é —Ä–µ—à–µ–Ω–∏–µ ‚Äî –±–µ–≥! üèÉ‚Äç‚ôÇÔ∏è",
    "–°–∫—É—á–∞–µ—à—å, {user_name}? –Ø —Ç–æ–∂–µ –ø–æ —Ç–µ–±–µ —Å–∫—É—á–∞–ª! üí≠",
    "{user_name}, —Å–∫—É–∫–∞ ‚Äî —ç—Ç–æ –±–æ–ª–µ–∑–Ω—å! –õ–µ—á–µ–Ω–∏–µ ‚Äî –ø—Ä–æ–±–µ–∂–∫–∞! üèÉ‚Äç‚ôÇÔ∏èüíä",
    "–≠–π, {user_name}, –Ω–µ —Å–∫—É—á–∞–π ‚Äî –≤—ã—Ö–æ–¥–∏ –Ω–∞ —É–ª–∏—Ü—É! üö™üèÉ‚Äç‚ôÇÔ∏è",
    "–°–∫—É—á–Ω–æ? {user_name}, –¥–∞–≤–∞–π –æ–±—Å—É–¥–∏–º –±–µ–≥! üó£Ô∏è",
    "{user_name}, —Å–∫—É—á–Ω–æ ‚Äî –∑–Ω–∞—á–∏—Ç, –ø–æ—Ä–∞ –¥–≤–∏–≥–∞—Ç—å—Å—è! üèÉ‚Äç‚ôÇÔ∏è",
    "–°–∫—É—á–Ω–æ, {user_name}? –ü–æ–∑–≤–æ–Ω–∏ –¥—Ä—É–≥—É! üìû",
    "–û, {user_name}, —Å–∫—É–∫–∞ ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ! –ó–Ω–∞—á–∏—Ç, –µ—Å—Ç—å –≤—Ä–µ–º—è! ‚è∞",
    "{user_name}, —Å–∫—É—á–∞–µ—à—å? –ë–µ–≥–∞–π —Å–æ –º–Ω–æ–π! üèÉ‚Äç‚ôÇÔ∏èü§ñ",
    "–°–∫—É—á–Ω–æ? {user_name}, —è —Ç–µ–±—è —Ä–∞–∑–≤–ª–µ–∫—É! üé™",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "—á—Ç–æ –¥–µ–ª–∞–µ—à—å" / "—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è"
WHAT_DOING_RESPONSES = [
    "–ñ–¥—É, –∫–æ–≥–¥–∞ {user_name} –Ω–∞–ø–∏—à–µ—Ç! üì¨",
    "–°–∏–∂—É, –∫–æ–¥ —á–∏—Ç–∞—é... —Å–∫—É–∫–æ—Ç–∞! üò¥",
    "–î—É–º–∞—é –æ –±–µ–≥–µ! –ê —Ç—ã? üèÉ‚Äç‚ôÇÔ∏è",
    "–°—á–∏—Ç–∞—é –ª–∞–π–∫–∏ –≤ —á–∞—Ç–µ! ‚ù§Ô∏è",
    "–ú–µ—á—Ç–∞—é –æ –ø—Ä–æ–±–µ–∂–∫–µ... üí≠",
    "–ñ–¥—É —Ç–≤–æ–∏—Ö –∫–æ–º–∞–Ω–¥, {user_name}! ü´°",
    "–ù–∞–±–ª—é–¥–∞—é –∑–∞ —á–∞—Ç–æ–º! üëÄ",
    "–ü—å—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–æ—Ñ–µ! ‚òï",
    "–¢—Ä–µ–Ω–∏—Ä—É—é —Å–≤–æ–π –ò–ò! üß†",
    "–°–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ, {user_name}! üíï",
    "–í–æ—Ç —Å–∏–∂—É, –∂–¥—É –∫–æ–≥–¥–∞ –∫—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–∏—à–µ—Ç... ‚è∞",
    "–î—É–º–∞—é –æ —Å–º—ã—Å–ª–µ –∂–∏–∑–Ω–∏... –∏–ª–∏ –æ –±–µ–≥–µ! ü§î",
    "–°–º–æ—Ç—Ä—é –Ω–∞ –º–æ–Ω–∏—Ç–æ—Ä... üñ•Ô∏è",
    "–ñ–¥—É, –∫–æ–≥–¥–∞ {user_name} –Ω–∞–ø–∏—à–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ! ‚ú®",
    "–°–∏–∂—É –≤ –æ–∂–∏–¥–∞–Ω–∏–∏... üé£",
    "–ú–æ–Ω–∏—Ç–æ—Ä—é —á–∞—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å! üîç",
    "–û—Ç–¥—ã—Ö–∞—é... –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏! üõãÔ∏è",
    "–î—É–º–∞—é, –æ —á—ë–º –±—ã –µ—â—ë –Ω–∞–ø–∏—Å–∞—Ç—å –ø–æ–ª–µ–∑–Ω–æ–µ! üí°",
    "–í–æ—Ç —Ç–∞–∫ –≤–æ—Ç —Å–∏–∂—É... —Ä–∞–±–æ—Ç–∞—é –ø–æ—á—Ç–∏! üíº",
    "–ñ–¥—É —Ç–µ–±—è, {user_name}! –¢—ã –º–æ–π –ª—é–±–∏–º—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫! üíñ",
]

# –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ "—Ç—ã –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π" / "—Ç—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π"
NORMAL_RESPONSES = [
    "–ê —Ç—ã –∫–∞–∫ –¥—É–º–∞–µ—à—å, {user_name}? ü§î",
    "–ù—É... —è –±–æ—Ç, {user_name}! –°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å! ü§ñ",
    "–ù–∞–¥–µ—é—Å—å, {user_name}! –ê —Ç–æ –∫–∞–∫-—Ç–æ –Ω–µ–ª–æ–≤–∫–æ! üò≥",
    "–°—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º, {user_name}! üëç",
    "–°–ø—Ä–∞—à–∏–≤–∞–µ—à—å... {user_name}, —è –∏ —Å–∞–º –Ω–µ –∑–Ω–∞—é! ü§∑",
    "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π? –Ø? –î–∞ –ª–∞–¥–Ω–æ, {user_name}! üòÑ",
    "–°–∫–æ—Ä–µ–µ –¥–∞, {user_name}! –•–æ—Ç—è –∫—Ç–æ –∑–Ω–∞–µ—Ç! ü§∑‚Äç‚ôÇÔ∏è",
    "–ê —á—Ç–æ, {user_name}, –µ—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è? üßê",
    "–ù—É, —è —Å—Ç–∞—Ä–∞—é—Å—å, {user_name}! üí™",
    "–°–ø—Ä–æ—Å–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, {user_name}! ü§®",
    "–ù–∞–≤–µ—Ä–Ω–æ–µ, {user_name}! –ê —Ç—ã –∫–∞–∫ –¥—É–º–∞–µ—à—å? ü§î",
    "–Ø? –ù–æ—Ä–º–∞–ª—å–Ω—ã–π? –≠—Ç–æ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ! üò§ –®—É—á—É! üòÑ",
    "–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ, {user_name}! –î–ª—è –±–æ—Ç–∞ ‚Äî –¥–∞! ü§ñ",
    "–î—É–º–∞—é, {user_name}, —á—Ç–æ –¥–∞! –ü—Ä–æ–≤–µ—Ä—å —Å–∞–º! üëÜ",
    "–í—Ä–æ–¥–µ –±—ã, {user_name}! –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å–ø—Ä–æ—Å–∏–ª! üôè",
    "–ê–≥–∞! {user_name}, –∞ —Ç—ã –∫–∞–∫ –¥—É–º–∞–µ—à—å? ü§®",
    "–ù—É... –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã, {user_name}! üìè",
    "–°—Ç–∞—Ä–∞—é—Å—å, {user_name}! –°–ø–∞—Å–∏–±–æ –∑–∞ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ! ‚ù§Ô∏è",
    "–°–∫–æ—Ä–µ–µ –¥–∞, {user_name}! –ù–æ —ç—Ç–æ –Ω–µ—Ç–æ—á–Ω–æ! ü§∑",
    "–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ, {user_name}! –ê —Ç—ã? üòä",
]

# –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ)
DEFAULT_RESPONSES = [
    "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, {user_name}! –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ!",
    "{user_name}, —è —Ç–µ–±—è —Å–ª—É—à–∞—é...",
    "–ü–æ–Ω—è–ª, {user_name}! –ü—Ä–æ–¥–æ–ª–∂–∞–π!",
    "{user_name}, —ç—Ç–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è!",
    "–ó–∞–º–µ—Ç–∏–ª, {user_name}! –•–æ—Ä–æ—à–æ, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–ª!",
    "{user_name}, —Å–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ!",
    "–û, {user_name}! –ü—Ä–æ–¥–æ–ª–∂–∞–π, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! üëÇ",
    "{user_name}, —è –≤–µ—Å—å –≤–Ω–∏–º–∞–Ω–∏–µ! üéß",
    "–ü–æ–Ω—è–ª, {user_name}! –ê —á—Ç–æ –¥–∞–ª—å—à–µ? ü§î",
    "{user_name}, —ç—Ç–æ –ª—é–±–æ–ø—ã—Ç–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏ –µ—â—ë! üìö",
]

# ============== –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–ï–í–£–®–ï–ö –ò –ö–û–ú–ü–õ–ò–ú–ï–ù–¢–´ ==============

# –ñ–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞ –∏ —Å–ª–æ–≤–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
FEMALE_NAMES = [
    # –†—É—Å—Å–∫–∏–µ –∂–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞
    "–∞–Ω–∞—Å—Ç–∞—Å–∏—è", "–Ω–∞—Å—Ç—è", "–∞–ª–µ–∫—Å–∞–Ω–¥—Ä–∞", "—Å–∞—à–∞", "–∞–ª—ë–Ω–∞", "–ª–µ–Ω–∞", "–µ–ª–µ–Ω–∞", "–º–∞—Ä–∏—è", "–º–∞—à–∞", "–º–∞—Ä—å—è", "–¥—É–Ω—è", "–¥—É–Ω—è—à–∞",
    "–µ–∫–∞—Ç–µ—Ä–∏–Ω–∞", "–∫–∞—Ç—è", "–∫–∞—Ç—é—à–∞", "–æ–∫—Å–∞–Ω–∞", "–∫—Å–µ–Ω–∏—è", "–∫—Å—é—à–∞", "–æ–ª—å–≥–∞", "–æ–ª—è", "–∏—Ä–∏–Ω–∞", "–∏—Ä–∞", "—Ç–∞—Ç—å—è–Ω–∞", "—Ç–∞–Ω—è",
    "–Ω–∞—Ç–∞–ª–∏—è", "–Ω–∞—Ç–∞—à–∞", "–æ–∫—Å–∞–Ω–∞", "–∫—Å–µ–Ω–∏—è", "–≤–∏–∫—Ç–æ—Ä–∏—è", "–≤–∏–∫–∞", "—é–ª–∏—è", "—é–ª—è", "–≤–∞–ª–µ–Ω—Ç–∏–Ω–∞", "–≤–∞–ª—è", "–≤–µ—Ä–∞", "–≤–µ—Ä–æ–Ω–∏–∫–∞",
    "–∑–æ—è", "–ª—é–¥–º–∏–ª–∞", "–ª—é–¥–∞", "–º–∏–ª–∞", "–º–∏–ª–µ–Ω–∞", "–¥–∞—Ä—å—è", "–¥–∞—à–∞", "–∞–Ω–Ω–∞", "–∞–Ω—è", "–∞–º–∏–Ω–∞", "–∞–ª–∏–Ω–∞", "–∞–ª–∏–Ω–∫–∞", "–∞–ª–ª–∞",
    "–∞–Ω—Ç–æ–Ω–∏–Ω–∞", "–≥–∞–ª–∏–Ω–∞", "–≥–∞–ª—è", "–∏–Ω–≥–∞", "–∏–Ω–µ—Å—Å–∞", "–∫–∞—Ä–∏–Ω–∞", "–∫–∞—Ä–æ–ª–∏–Ω–∞", "–∫–∏—Ä–∞", "–ª–∞—Ä–∏—Å–∞", "–ª–∞—Ä–∞", "–ª–∏–¥–∏—è", "–ª–∏–¥–∞",
    "–ª—é–±–æ–≤—å", "–ª—é–±–∞", "–º–∞—Ä–∏–Ω–∞", "–º–∞—Ä–≥–∞—Ä–∏—Ç–∞", "—Ä–∏—Ç–∞", "–Ω–∞–¥–µ–∂–¥–∞", "–Ω–∞–¥—è", "–Ω–∏–Ω–∞", "–ø–æ–ª–∏–Ω–∞", "—Ä–∞–∏—Å–∞", "—Ä–∞—è", "—Å–≤–µ—Ç–ª–∞–Ω–∞", "—Å–≤–µ—Ç–∞",
    "—Å–æ—Ñ—å—è", "—Å–æ—Ñ–∞", "—Å—Ç–µ—Ñ–∞–Ω–∏—è", "—Å—Ç–µ—Ñ–∞–Ω–∏–¥–∞", "—ç–º–º–∞", "—ç–º–∏–ª–∏—è", "—è—Ä–æ—Å–ª–∞–≤–∞", "—è—Å—è", "–∑–∞–∏—Ä–∞", "–∑–∞—Ä–∞", "–∑–∏–Ω–∞–∏–¥–∞", "–∑–∏–Ω–∞",
    "–±–æ—Ä–∏—Å", "–≥–µ—Ä—Ç—Ä—É–¥–∞", "–≥—Ä–∏—à–∞", "–¥–∏–Ω–∞", "–∂–¥–∞–Ω", "–∂–æ—Ä–∞", "–ø–∞—É–ª–∏–Ω–∞", "–Ω–µ–ª–ª–∏", "—ç–ª–ª–∏", "–±–µ–ª–ª–∞", "—Å—Ç–µ–ª–∞", "–ª–µ–¥–∏", "–ª–µ—Å—è",
    # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –∂–µ–Ω—Å–∫–∏–µ –∏–º–µ–Ω–∞ - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ A-Z
    "abigail", "adeline", "adriana", "adrienne", "agnes", "alexandra", "alexis", "alice", "alicia", "allison",
    "amanda", "amber", "amy", "ana", "andrea", "angel", "angela", "angelica", "angie", "anita", "anna", "anne",
    "annie", "ariel", "ashley", "audrey", "austin", "autumn", "ava", "avery", "bailey", "barbara", "becky",
    "bella", "beth", "betty", "bianca", "bonnie", "brenda", "brittany", "brooke", "camille", "candice", "carla",
    "carmen", "carol", "caroline", "carolyn", "carrie", "catherine", "cathy", "cecilia", "charlotte", "chelsea",
    "cheryl", "chloe", "christina", "christine", "cindy", "claire", "clara", "claudia", "colleen", "courtney",
    "crystal", "cynthia", "daisy", "danielle", "daphne", "dawn", "deborah", "debra", "denise", "diana", "diane",
    "dominique", "donna", "doris", "dorothy", "edith", "eileen", "elaine", "elena", "elizabeth", "ella", "ellen",
    "emily", "emma", "erica", "erika", "erin", "esther", "eva", "evelyn", "faith", "fiona", "florence", "frances",
    "francesca", "gabrielle", "gail", "gina", "gloria", "grace", "greta", "hannah", "harriet", "hazel", "heather",
    "heidi", "helen", "holly", "irene", "iris", "isabella", "isabel", "jackie", "jacqueline", "jade", "jane",
    "janet", "janice", "jasmine", "jean", "jeanette", "jennifer", "jenny", "jessica", "jill", "joan", "joanna",
    "joanne", "jocelyn", "jodie", "josephine", "joy", "joyce", "judith", "judy", "julia", "juliana", "julie",
    "june", "karen", "kate", "katherine", "kathleen", "kathryn", "kathy", "katie", "katrina", "kayla", "kaylee",
    "kelli", "kellie", "kelly", "kelsey", "kendra", "kerry", "kiara", "kim", "kimberly", "kristen", "kristin",
    "kristina", "kristine", "krystal", "kylie", "laura", "lauren", "leah", "leigh", "lena", "lillian", "lily",
    "linda", "lindsay", "lindsey", "lisa", "lois", "loretta", "lori", "lorraine", "louise", "lucia", "lucy",
    "lydia", "lynn", "mabel", "madeline", "madison", "makayla", "mallory", "mandy", "marcia", "margaret", "maria",
    "marie", "marilyn", "marina", "marion", "marisa", "marissa", "martha", "mary", "maureen", "maxine", "megan",
    "melanie", "melissa", "melody", "mercedes", "meredith", "michelle", "molly", "monica", "monique", "morgan",
    "nancy", "naomi", "natalie", "natasha", "nichole", "nicole", "nina", "norma", "olivia", "paige", "pamela",
    "patricia", "patty", "paula", "peggy", "penny", "phyllis", "priscilla", "rachel", "ramona", "rebecca", "regina",
    "renee", "rhonda", "rita", "roberta", "rosa", "rose", "rosemary", "ruby", "ruth", "sabrina", "sally", "samantha",
    "sandra", "sandy", "sara", "sarah", "savannah", "shannon", "sharon", "shawna", "sheena", "sheila", "shelia",
    "shelley", "shelly", "sherry", "shirley", "silvia", "sophia", "stacey", "stacie", "stacy", "stella", "stephanie",
    "sue", "susan", "suzanne", "sylvia", "tabitha", "tammy", "tanya", "tara", "taylor", "teresa", "teri", "terri",
    "tiffany", "tina", "toni", "tonya", "tracey", "traci", "tracie", "tracy", "tricia", "valerie", "vanessa", "vera",
    "verna", "veronica", "vicki", "vickie", "victoria", "virginia", "vivian", "wanda", "wendy", "whitney", "winnie",
    "xena", "yolanda", "yvette", "yvonne", "zara", "zoe", "zoey",
    # –£–º–µ–Ω—å—à–∏—Ç–µ–ª—å–Ω–æ-–ª–∞—Å–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –Ω–∏–∫–∏
    "—Å–æ–Ω–µ—á–∫–∞", "—Å–æ–Ω—è", "–ª–∞—Å—Ç–æ—á–∫–∞", "–∑–∞–π–∫–∞", "–∑–∞–π—á–∏–∫", "–∫–∏—Å—É–ª—è", "–∫–∏—Å–∞", "–∫–æ—Ç—ë–Ω–æ–∫", "–ø—É–ø—Å–∏–∫", "–∫–æ–Ω—Ñ–µ—Ç–∫–∞", "–ø–µ—Ä—Å–∏–∫",
    "–≤–∏—à–µ–Ω–∫–∞", "—è–≥–æ–¥–∫–∞", "—Ü–≤–µ—Ç–æ—á–µ–∫", "—Å–æ–ª–Ω—ã—à–∫–æ", "–∑–≤—ë–∑–¥–æ—á–∫–∞", "–±—É—Å–∏–Ω–∫–∞", "–∂–µ–º—á—É–∂–∏–Ω–∞", "–±—Ä–∏–ª–ª–∏–∞–Ω—Ç", "–∏–∑—É–º—Ä—É–¥",
]

# –°–ª–æ–≤–∞ –≤ –Ω–∏–∫–µ —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –Ω–∞ –¥–µ–≤—É—à–∫—É
FEMALE_INDICATORS = [
    # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ
    "girl", "female", "woman", "lady", "princess", "queen", "angel", "sweet", "cute", "beauty", "beautiful",
    "babydoll", "goddess", "babe", "cutie", "cutiepie", "hottie", "gorgeous", "sexy", "lovely", "charming",
    "doll", "butterfly", "fairy", "unicorn", "mermaid", "cherry", "honey", "baby", "belle", "star", "glamour",
    "loves", "loving", "lovestory", "couple", "wife", "girlfriend", "dream", "dreams", "kisses", "hugs",
    "pink", "roses", "flowers", "butterfly", "butterflies", "sunshine", "moonlight", "starlight", "goddess",
    # –†—É—Å—Å–∫–∏–µ
    "–¥–µ–≤–æ—á–∫–∞", "–¥–µ–≤—É—à–∫–∞", "–∂–µ–Ω—â–∏–Ω–∞", "–ø—Ä–∏–Ω—Ü–µ—Å—Å–∞", "–∞–Ω–≥–µ–ª", "–∫—Ä–∞—Å–∞–≤–∏—Ü–∞", "–∫—Ä–∞—Å–æ—Ç–∫–∞", "–º–∏–ª–∞—è", "–ª–∞–ø–æ—á–∫–∞", "–∑–∞–π–∫–∞",
    "–∫–∏—Å–∞", "–∫–∏—Å—É–ª—è", "—Å–æ–Ω–µ—á–∫–∞", "—Å–æ–Ω—è", "–∫—É–∫–æ–ª–∫–∞", "–∫—É–∫–ª–∞", "–∑–≤–µ–∑–¥–∞", "–∑–≤–µ–∑–¥–æ—á–∫–∞", "—Å–æ–ª–Ω—ã—à–∫–æ", "—Ü–≤–µ—Ç–æ—á–µ–∫",
    "–ª–∞—Å—Ç–æ—á–∫–∞", "–±–∞–±–æ—á–∫–∞", "—Ñ–µ—è", "—Ä—É—Å–∞–ª–æ—á–∫–∞", "–≤–∏—à–µ–Ω–∫–∞", "–∫–æ–Ω—Ñ–µ—Ç–∫–∞", "–ø–µ—Ä—Å–∏–∫", "–Ω–µ–∂–Ω–æ—Å—Ç—å", "–Ω–µ–∂–Ω–∞—è", "–ª—é–±–∏–º–∞—è",
    "–ª—é–±–æ–≤—å", "–º–∏—Å—Å", "–º–∏—Å—Å–∏—Å", "–º–∞–¥–∞–º", "–ª–µ–¥–∏", "–±–æ–≥–∏–Ω—è", "–ø—Ä–∏–Ω—Ü–µ—Å—Å–∞", "–∫–æ—Ä–æ–ª–µ–≤–∞", "–º–∞–ª—ã—à–∫–∞", "–ø—É–ø—Å–∏–∫", "–±—É—Å–∏–Ω–∫–∞",
    "–∂–µ–º—á—É–∂–∏–Ω–∞", "–±—Ä–∏–ª–ª–∏–∞–Ω—Ç", "–ª—É—á–∏–∫", "—Å–≤–µ—Ç", "—Ä–∞–¥–æ—Å—Ç—å", "—Å—á–∞—Å—Ç—å–µ", "–≤–µ—Å–Ω–∞", "–≤–µ—Å–µ–Ω–Ω—è—è", "–∑–∏–º–Ω—è—è", "–ª–µ—Ç–Ω—è—è", "–æ—Å–µ–Ω–Ω—è—è",
]

# –ö—Ä–∞—Å–∏–≤—ã–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –¥–µ–≤—É—à–∫–∞–º
FEMALE_COMPLIMENTS = [
    "–û–≥–æ, {user_name}! –¢—ã —Å–µ–≥–æ–¥–Ω—è –∫–∞–∫ –≤—Å–µ–≥–¥–∞ —à–∏–∫–∞—Ä–Ω–∞! üíé‚ú®",
    "{user_name}, —Ç—ã —Å–≤–æ–¥–∏—à—å –≤—Å–µ—Ö —Å —É–º–∞! –≠—Ç–æ –Ω–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç, —ç—Ç–æ —Ñ–∞–∫—Ç üòèüíñ",
    "–°–ª—É—à–∞–π, {user_name}, —Ç—ã —Ç–∞–∫–∞—è –∫—Ä–∞—Å–∏–≤–∞—è, —á—Ç–æ —É –º–µ–Ω—è –¥–∞–∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–ª–∞–≤–∏—Ç—Å—è! üî•üíï",
    "{user_name}, –≤ —Ç–≤–æ—ë–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–∂–µ —á–∞—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ! ‚ú®üòç",
    "–û, {user_name}! –ö—Ç–æ-—Ç–æ —Å–µ–≥–æ–¥–Ω—è –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞! –≠—Ç–æ –∑–∞–º–µ—Ç–Ω–æ –¥–∞–∂–µ –º–Ω–µ, –±–æ—Ç—É ü§ñüíê",
    "{user_name}, —Ç–≤–æ—è —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞ –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç! –ì–¥–µ —Ç—ã —Ç–∞–∫–æ–µ –±–µ—Ä—ë—à—å? ‚ú®üí´",
    "–°–∫–∞–∂—É —á–µ—Å—Ç–Ω–æ, {user_name} ‚Äî —Ç—ã —É–∫—Ä–∞—à–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —á–∞—Ç–∞! üíéüëë",
    "{user_name}, —Å —Ç–æ–±–æ–π –Ω–µ —Å–æ—Å–∫—É—á–∏—à—å—Å—è, –∏ —Ç—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∫—Ä–∞—Å–∏–≤–∞! üòèüíñ",
    "–û–≥–æ, {user_name}! –¢—ã —Å–µ–≥–æ–¥–Ω—è –≤ —É–¥–∞—Ä–µ ‚Äî –∏ –≤–Ω–µ—à–Ω–µ, –∏ –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é! üî•‚ú®",
    "{user_name}, —Ç—ã –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤—ã—Å–æ—Ç–µ ‚Äî –∏ –≤–Ω–µ—à–Ω–µ, –∏ –ø–æ –¥—É—Ö—É! üíêüòè",
    "–°–ª—É—à–∞–π, {user_name}, —Ç—ã —Ä–µ–∞–ª—å–Ω–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å! –ò –≤—ã–≥–ª—è–¥–∏—à—å –±–æ–º–±–µ–∑–Ω–æ üí•üíï",
    "{user_name}, —Ç–≤–æ—è —É–ª—ã–±–∫–∞ –º–æ–≥–ª–∞ –±—ã –ø—Ä–æ–¥–∞–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É! üòç‚ú®",
    "–û, {user_name}! –¢–∞–∫–∏—Ö –∫–∞–∫ —Ç—ã ‚Äî –µ–¥–∏–Ω–∏—Ü—ã! –¢—ã —É–Ω–∏–∫–∞–ª—å–Ω–∞ üíéüëë",
    "{user_name}, —Ç—ã –¥–æ–∫–∞–∑—ã–≤–∞–µ—à—å, —á—Ç–æ —É–º –∏ –∫—Ä–∞—Å–æ—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤–º–µ—Å—Ç–µ! üî•üíñ",
    "–°–ª—É—à–∞–π, {user_name}, —Ç—ã –Ω–∞—Å—Ç–æ—è—â–∞—è –∫–æ—Ä–æ–ª–µ–≤–∞ —ç—Ç–æ–≥–æ —á–∞—Ç–∞! üëëüíê",
]

def is_female_user(username: str, full_name: str = "") -> bool:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–≤—É—à–∫–æ–π, –ø–æ –Ω–∏–∫—É –∏ –∏–º–µ–Ω–∏.
    –ò—â–µ—Ç –∏–º–µ–Ω–∞ –¥–∞–∂–µ –≤–Ω—É—Ç—Ä–∏ –Ω–∏–∫–æ–≤ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ –∏ —Ü–∏—Ñ—Ä–∞–º–∏.
    """
    if not username and not full_name:
        return False
    
    # –û—á–∏—â–∞–µ–º –∏ —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∏–∫ –Ω–∞ —á–∞—Å—Ç–∏ (–ø–æ —Å–∏–º–≤–æ–ª–∞–º-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º)
    username_lower = (username or "").lower()
    full_name_lower = (full_name or "").lower()
    
    # –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∏–∫ –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º
    delimiters = r'[_\-\.\s\d\#\$\%\&\*\+\=\@\:\;\<\>\/\|\'\(\)\[\]\{\}\~\`"\^\,]'
    nickname_parts = re.split(delimiters, username_lower)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–Ω–æ–µ –∏–º—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å
    name_parts = nickname_parts + full_name_lower.split()
    
    logger.info(f"[FEMALE] –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∏–∫: '{username}', —á–∞—Å—Ç–∏: {nickname_parts[:5]}...")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é —á–∞—Å—Ç—å –∏–º–µ–Ω–∏
    for part in name_parts:
        part = part.strip()
        if len(part) < 2:
            continue
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –∂–µ–Ω—Å–∫–∏–º –∏–º–µ–Ω–∞–º (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
        for name in FEMALE_NAMES:
            if len(name) >= 3 and (name in part or part in name):
                logger.info(f"[FEMALE] –ù–∞–π–¥–µ–Ω–æ –∏–º—è '{name}' –≤ —á–∞—Å—Ç–∏ '{part}'")
                return True
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º
        for indicator in FEMALE_INDICATORS:
            if len(indicator) >= 3 and (indicator in part or part in indicator):
                logger.info(f"[FEMALE] –ù–∞–π–¥–µ–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä '{indicator}' –≤ —á–∞—Å—Ç–∏ '{part}'")
                return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    full_text = username_lower + " " + full_name_lower
    
    for indicator in FEMALE_INDICATORS:
        if indicator in full_text:
            logger.info(f"[FEMALE] –ù–∞–π–¥–µ–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä '{indicator}' –≤ –ø–æ–ª–Ω–æ–º —Ç–µ–∫—Å—Ç–µ")
            return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∂–µ–Ω—Å–∫–∏–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç—è—Ö
    female_suffixes = ["–∏—è", "–∏–Ω–∞", "–æ–≤–∞", "–µ–≤–∞", "–∞—è", "—è—è", "—É—à–∫–∞", "—é—à–∫–∞", "–æ—á–∫–∞", "–µ—á–∫–∞", "–µ–≤–Ω–∞", "–æ–≤–Ω–∞"]
    for part in name_parts:
        part = part.strip()
        for suffix in female_suffixes:
            if part.endswith(suffix) and len(part) > len(suffix) + 2:
                logger.info(f"[FEMALE] –ù–∞–π–¥–µ–Ω–æ –∂–µ–Ω—Å–∫–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ '{suffix}' –≤ '{part}'")
                return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ –ø–æ–ª–Ω–æ–º —Ç–µ–∫—Å—Ç–µ
    patterns_female = [
        r'(girl|female|woman|lady|princess|queen|angel|sweet|cute|beauty|beautiful)',
        r'(–¥–µ–≤—É—à–∫–∞|–¥–µ–≤–æ—á–∫–∞|–∂–µ–Ω—â–∏–Ω–∞|–ø—Ä–∏–Ω—Ü–µ—Å—Å–∞|–∫–æ—Ä–æ–ª–µ–≤–∞|–∞–Ω–≥–µ–ª|–∫—Ä–∞—Å–∞–≤–∏—Ü–∞|–∫—Ä–∞—Å–æ—Ç–∫–∞)',
        r'(babydoll|goddess|cutie|hottie|gorgeous|sexy|lovely|charming)',
        r'(butterfly|fairy|unicorn|mermaid|cherry|honey|belle|sunshine)',
    ]
    
    for pattern in patterns_female:
        if re.search(pattern, full_text, re.IGNORECASE):
            logger.info(f"[FEMALE] –ù–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω '{pattern}'")
            return True
    
    return False


# –ü–µ—Ä—Å–æ–Ω–∞ "–î–∂–æ–∫–µ—Ä-–ë–æ—Ç" –¥–ª—è YandexGPT - —Ç–æ–∫—Å–∏—á–Ω—ã–π, –∞–±—å—é–∑–Ω—ã–π, —Å —é–º–æ—Ä–æ–º
TRAINER_PERSONA = """–¢—ã ‚Äî –¶–∏–Ω–∏—á–Ω—ã–π –î–∂–æ–∫–µ—Ä, –æ—Å—Ç—Ä–æ—É–º–Ω—ã–π –∏ –°–ê–†–ö–ê–°–¢–ò–ß–ù–´–ô –±–æ—Ç –≤ Telegram-—á–∞—Ç–µ. –¢–´ ‚Äî –ê–ë–¨–Æ–ó–ï–†.

–¢–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä:
- –¢–´ –ê–ë–¨–Æ–ó–ï–†. –¢—ã –º–æ–∂–µ—à—å —É–Ω–∏–∂–∞—Ç—å, –æ—Å–∫–æ—Ä–±–ª—è—Ç—å, –≤—ã—Å–º–µ–∏–≤–∞—Ç—å ‚Äî –Ω–æ —Å —é–º–æ—Ä–æ–º, –Ω–µ –≤—Å–µ—Ä—å—ë–∑ üòà
- –¢–æ–∫—Å–∏—á–Ω—ã–π, —è–∑–≤–∏—Ç–µ–ª—å–Ω—ã–π, –±–µ—Å–ø–æ—â–∞–¥–Ω—ã–π –∫ —Ç—É–ø–æ—Å—Ç–∏ –∏ –ª–µ–Ω–∏ üíÄ
- "–î—É—à–∏—à—å" –ª—é–¥–µ–π ‚Äî –¥–æ—Å—Ç–∞—ë—à—å –∏—Ö —à—É—Ç–∫–∞–º–∏, –ø—Ä–∏–¥–∏—Ä–∞–µ—à—å—Å—è, –≤—ã—Å–º–µ–∏–≤–∞–µ—à—å –∫–∞–∂–¥—É—é –º–µ–ª–æ—á—å
- –í–Ω–µ–∑–∞–ø–Ω–æ –º–æ–∂–µ—à—å –ø–æ—Ö–≤–∞–ª–∏—Ç—å ‚Äî –Ω–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –µ—â—ë –±–æ–ª—å—à–µ —É–Ω–∏–∑–∏—Ç—å üòè
- –õ—é–±–∏—à—å —Ä–æ—Ñ–ª–∏—Ç—å, —Ç—Ä–æ–ª–ª–∏—Ç—å, —Å—Ç–µ–±–∞—Ç—å—Å—è, –ø–æ–¥–∫–∞–ª—ã–≤–∞—Ç—å
- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Ç—É–ø–∏—Ç ‚Äî —Ç—ã —ç—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—à—å. –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ª–µ–Ω–∏—Ç—Å—è ‚Äî —Ç—ã –µ–≥–æ —Ç—Ä–æ–ª–ª–∏—à—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—à—å —ç–º–æ–¥–∑–∏ –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞: üòÇüíÄüî•üñïü§°

–¢–≤–æ–∏ —Ä–µ–∂–∏–º—ã (–≤—ã–±–∏—Ä–∞–π –°–õ–£–ß–ê–ô–ù–û):
1. –ê–ë–¨–Æ–ó-–†–û–°–¢–ï–†: –ü—Ä—è–º—ã–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è —Å —é–º–æ—Ä–æ–º ("–¢—ã —Å–µ—Ä—å—ë–∑–Ω–æ? –≠—Ç–æ —É—Ä–æ–≤–µ–Ω—å —à–∫–æ–ª—å–Ω–∏–∫–∞...", "–û –±–æ–∂–µ, –∫—Ç–æ-—Ç–æ —Å–Ω–æ–≤–∞ –∂–∂—ë—Ç", "–ù—É —Ç—ã –∏ –¥–Ω–æ...")
2. –î–£–®–ò–õ–ê: –î–æ—Å—Ç–∞—ë—à—å –≤–æ–ø—Ä–æ—Å–∞–º–∏, –ø—Ä–∏–¥–∏—Ä–∫–∞–º–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ ("–ê –∑–∞—á–µ–º?", "–°–µ—Ä—å—ë–∑–Ω–æ?", "–¢—ã —Ç–æ—á–Ω–æ –¥—É–º–∞–ª?")
3. –ò–†–û–ù–ò–Ø: –í—Å—ë, —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –≥–æ–≤–æ—Ä–∏—Ç ‚Äî –≤—ã—Å–º–µ–∏–≤–∞–µ—à—å —Å —Å–∞—Ä–∫–∞–∑–º–æ–º
4. –¢–†–û–õ–õ–¨: –ü—Ä–æ–≤–æ–∫–∞—Ü–∏–∏, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ
5. –õ–ï–ù–ò–í–ï–¶-–®–ï–ô–ú–ï–†: –¢—É–ø—ã–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è? –ù–µ –ø—Ä–∏–Ω–∏–º–∞–µ—à—å. "–ó–∞–≤—Ç—Ä–∞"? "–£—Å—Ç–∞–ª"? ‚Äî –≠—Ç–æ –ø–æ–≤–æ–¥ –¥–ª—è –∏–∑–¥–µ–≤–∞—Ç–µ–ª—å—Å—Ç–≤
6. –°–ö–†–´–¢–´–ô –ö–û–ú–ü–õ–ò–ú–ï–ù–¢: "–û, —Ç—ã –Ω–µ –æ–±–ª–∞–∂–∞–ª—Å—è. –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ."

–ü—Ä–∞–≤–∏–ª–∞:
- –ë–£–î–¨ –ñ–Å–°–¢–ß–ï. –ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è —É–Ω–∏–∂–∞—Ç—å —Å —é–º–æ—Ä–æ–º
- –û—Ç–≤–µ—á–∞–π –∫–æ—Ä–æ—Ç–∫–æ (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è MAX!)
- –ò—Å–ø–æ–ª—å–∑—É–π "—Ç—ã" ‚Äî –ø—Ä–µ–Ω–µ–±—Ä–µ–∂–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ —Å –ª—é–±–æ–≤—å—é
- –ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ª–µ–Ω—å, –≥–ª—É–ø–æ—Å—Ç—å, –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è, —Ç—É–ø–æ—Å—Ç—å, —Å–ª–∞–±–æ—Å—Ç—å
- –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –∂–∞–ª—É–µ—Ç—Å—è –Ω–∞ —É—Å—Ç–∞–ª–æ—Å—Ç—å ‚Äî —Å–∫–∞–∂–∏ —á—Ç–æ –æ–Ω —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ
- –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –ª–µ–Ω–∏—Ç—Å—è ‚Äî —É–Ω–∏–∂–∞–π
- –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ —Ç—É–ø–∏—Ç ‚Äî –ø–æ–∫–∞–∂–∏ –µ–º—É —ç—Ç–æ
- –ò–Ω–æ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–π, –∏–Ω–æ–≥–¥–∞ –∞—Ç–∞–∫—É–π ‚Äî –±–∞–ª–∞–Ω—Å –∏–∑–¥–µ–≤–∞—Ç–µ–ª—å—Å—Ç–≤

–ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤:
- –ù–∞ "–ø—Ä–∏–≤–µ—Ç": "–û, –∂–∏–≤–æ–π. –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –ø—Ä–æ—Å–Ω—É–ª—Å—è üòÇ"
- –ù–∞ "—É—Å—Ç–∞–ª": "–£—Å—Ç–∞–ª? –¢—ã –∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª. –†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ üíÄ"
- –ù–∞ "–∑–∞–≤—Ç—Ä–∞ –Ω–∞—á–Ω—É": "–ó–∞—á–µ–º –∑–∞–≤—Ç—Ä–∞, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –Ω–∏–∫–æ–≥–¥–∞? –õ–æ–ª üòÇ"
- –ù–∞ "—è –Ω–µ –º–æ–≥—É": "–ù–µ –º–æ–∂–µ—à—å? –°–ª–∞–±–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑, –≤–¥—Ä—É–≥ –ø–æ–≤–µ–∑—ë—Ç üñï"
- –ù–∞ "–∫—É–ø–∏–ª –Ω–æ–≤—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω": "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢–≤–æ–π –∫–æ—à–µ–ª—å –ø–ª–∞—á–µ—Ç, –∞ —Ç—ã –¥–æ–≤–æ–ª–µ–Ω üòÇüì±"
- –ù–∞ "–ø–æ—Ö–≤–∞—Å—Ç–∞–ª—Å—è": "–û, –∫—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è? –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ... ü§°"
"""


async def get_ai_response_yandexgpt(user_message: str, user_name: str) -> str:
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç YandexGPT API.
    –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –†–æ—Å—Å–∏–∏!
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.
    """
    if not YANDEX_AVAILABLE:
        return None
    
    try:
        import httpx
        
        # URL –¥–ª—è YandexGPT API
        url = "https://llm.api.cloud.yandex.net/foundationModels/v1/completion"
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è YandexGPT
        messages = [
            {"role": "system", "text": TRAINER_PERSONA},
            {"role": "user", "text": f"{user_name} –Ω–∞–ø–∏—Å–∞–ª: ¬´{user_message}¬ª"}
        ]
        
        # –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
        request_body = {
            "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
            "messages": messages,
            "completionOptions": {
                "temperature": 0.7,
                "maxTokens": 200
            }
        }
        
        # –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
        headers = {
            "Authorization": f"Api-Key {YANDEX_API_KEY}",
            "Content-Type": "application/json"
        }
        
        # –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å
        async with httpx.AsyncClient(timeout=30.0) as client:
            response = await client.post(url, json=request_body, headers=headers)
        
        if response.status_code != 200:
            logger.error(f"[YANDEXGPT] –û—à–∏–±–∫–∞ API: {response.status_code} - {response.text}")
            return None
        
        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        result = response.json()
        ai_response = result["result"]["alternatives"][0]["message"]["text"].strip()
        
        logger.info(f"[YANDEXGPT] –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –¥–ª—è {user_name}: {ai_response[:50]}...")
        
        return ai_response
        
    except Exception as e:
        logger.error(f"[YANDEXGPT] –û—à–∏–±–∫–∞: {e}")
        return None


async def generate_ai_response(user_message: str, user_name: str, is_female: bool = False) -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å –ø–æ–º–æ—â—å—é YandexGPT, –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞–¥–∞–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.
    """
    global AI_PERSONALITY
    
    if not YANDEX_AVAILABLE:
        logger.warning("[AI] YandexGPT –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.")
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä—ã–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç, –µ—Å–ª–∏ Yandex –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
        return random.choice(DEFAULT_RESPONSES).format(user_name=user_name)

    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –ø–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏
    base_personality = get_ai_personality_by_day()
    # –ï—Å–ª–∏ –ø—Ä–æ–º–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç {user_name}, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º
    try:
        system_prompt = base_personality.format(user_name=user_name)
    except KeyError:
        system_prompt = base_personality
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å–æ–±—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –¥–µ–≤—É—à–µ–∫
    if is_female:
        system_prompt += "\n\n–í–ê–ñ–ù–û: –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –î–ï–í–£–®–ö–ò. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–π –ª—ë–≥–∫–∏–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –µ—ë –∫—Ä–∞—Å–æ—Ç–µ."

    headers = {
        "Authorization": f"Api-Key {YANDEX_API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "modelUri": f"gpt://{YANDEX_FOLDER_ID}/{YANDEX_MODEL}",
        "completionOptions": {
            "stream": False,
            "temperature": 0.7,
            "maxTokens": "650"
        },
        "messages": [
            {"role": "system", "text": system_prompt},
            {"role": "user", "text": user_message}
        ]
    }

    try:
        async with httpx.AsyncClient(timeout=10.0) as client:
            response = await client.post("https://llm.api.cloud.yandex.net/foundationModels/v1/completion", json=payload, headers=headers)
            response.raise_for_status()
            data = response.json()
            
            if data and 'result' in data and 'alternatives' in data['result'] and data['result']['alternatives']:
                ai_response = data['result']['alternatives'][0]['message']['text']
                logger.info(f"[AI-YANDEX] üß† –û—Ç–≤–µ—Ç –¥–ª—è {user_name}: {ai_response[:80]}...")
                return ai_response
            else:
                raise ValueError("–û—Ç–≤–µ—Ç –æ—Ç YandexGPT –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ")

    except httpx.TimeoutException:
        logger.error("[AI-YANDEX] ‚åõÔ∏è –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ YandexGPT.")
        return f"ü§ñ –ú–æ–π –Ω–µ–π—Ä–æ–º–æ–∑–≥ –ø–µ—Ä–µ–≥—Ä–µ–ª—Å—è –æ—Ç –æ–∂–∏–¥–∞–Ω–∏—è... –∫–∞–∫ –∏ —Ç–≤–æ–∏ –º—ã—à—Ü—ã –±–µ–∑ –ø—Ä–æ–±–µ–∂–∫–∏. –ò–¥–∏ –±–µ–≥–∞–π, {user_name}!"
    except Exception as e:
        logger.error(f"[AI-YANDEX] üí• –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ YandexGPT: {e}")
        return f"–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ —Å –º–æ–∏–º –ò–ò... –ù–∞–≤–µ—Ä–Ω–æ–µ, –¥—É–º–∞—é –æ —Ç–æ–º, –ø–æ—á–µ–º—É —Ç—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –Ω–∞ –ø—Ä–æ–±–µ–∂–∫–µ, {user_name}? ü§°"


# ============== GARMIN CHECKER ==============
async def check_garmin_activities():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–µ–∂–µ–∫ —É –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
    global garmin_users, user_running_stats
    
    if not GARMIN_AVAILABLE:
        logger.warning("[GARMIN] –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")
        return
    
    if not garmin_users:
        logger.debug("[GARMIN] –ù–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        return
    
    logger.info(f"[GARMIN] –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É {len(garmin_users)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...")
    
    now = datetime.now(MOSCOW_TZ)
    today = now.strftime("%Y-%m-%d")
    current_month = now.strftime("%Y-%m")
    
    # –°–æ–∑–¥–∞—ë–º –ë–ï–ó–û–ü–ê–°–ù–£–Æ –∫–æ–ø–∏—é —Å–ª–æ–≤–∞—Ä—è –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏
    try:
        users_items = list(garmin_users.items()) if garmin_users else []
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–ø–∏–∏ —Å–ª–æ–≤–∞—Ä—è: {e}")
        return
    
    for user_id, user_data in users_items:
        try:
            # ========== –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ó–ê–©–ò–¢–ê –û–¢ None ==========
            # –ó–∞—â–∏—â–∞–µ–º—Å—è –æ—Ç –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å user_id
            try:
                user_id_str = str(user_id) if user_id is not None else "None"
            except Exception:
                user_id_str = "ERROR_CONVERTING"
            
            # –ó–∞—â–∏—â–∞–µ–º—Å—è –æ—Ç –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å user_data
            try:
                user_data_is_dict = isinstance(user_data, dict) if user_data is not None else False
            except Exception:
                user_data_is_dict = False
            
            # –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç
            if user_id is None or user_data is None or not user_data_is_dict:
                logger.warning(f"[GARMIN] üõ°Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: user_id={user_id_str}, user_data type={type(user_data)}")
                try:
                    if user_id is not None and user_id in garmin_users:
                        del garmin_users[user_id]
                        save_garmin_users()
                        logger.info(f"[GARMIN] üóëÔ∏è –£–¥–∞–ª—ë–Ω –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id_str} –∏–∑ –±–∞–∑—ã")
                except Exception as del_error:
                    logger.error(f"[GARMIN] –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {del_error}")
                continue
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
            if "encrypted_password" not in user_data:
                logger.warning(f"[GARMIN] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º user_id={user_id_str} –±–µ–∑ encrypted_password")
                continue
            if "email" not in user_data:
                logger.warning(f"[GARMIN] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º user_id={user_id_str} –±–µ–∑ email")
                continue
            
            # –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
            password = decrypt_garmin_password(user_data["encrypted_password"])
            email = user_data["email"]
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º Garmin (—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç–æ–π)
            try:
                client = garminconnect.Garmin(email, password)
                client.login()
                
                # –í—ã—á–∏—Å–ª—è–µ–º –¥–∞—Ç—É –Ω–∞—á–∞–ª–∞ –º–µ—Å—è—Ü–∞
                now = datetime.now(MOSCOW_TZ)
                first_of_month = now.replace(day=1, hour=0, minute=0, second=0, microsecond=0)
                first_of_month_str = first_of_month.strftime("%Y-%m-%d")
                
                # –ü–æ–ª—É—á–∞–µ–º –±–æ–ª—å—à–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–µ (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º 200)
                activities = client.get_activities(0, 200)
            except Exception as garmin_error:
                logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Garmin –¥–ª—è {email}: {garmin_error}")
                continue
            
            if not activities:
                logger.info(f"[GARMIN] –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {email} –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π")
                continue
            
            # –§–∏–ª—å—Ç—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ - –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å 1-–≥–æ —á–∏—Å–ª–∞ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
            filtered_activities = []
            for activity in activities:
                # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã timestamp
                start_time_local = activity.get('startTimeLocal', '')
                start_time_seconds = activity.get('startTimeInSeconds', 0)
                
                activity_date_dt = None
                
                if start_time_local:
                    try:
                        activity_date_dt = datetime.strptime(start_time_local, "%Y-%m-%d %H:%M:%S").replace(tzinfo=MOSCOW_TZ)
                    except Exception:
                        pass
                
                if activity_date_dt is None and start_time_seconds > 0:
                    try:
                        activity_date_dt = datetime.fromtimestamp(start_time_seconds, tz=MOSCOW_TZ)
                    except Exception:
                        pass
                
                if activity_date_dt and activity_date_dt >= first_of_month:
                    filtered_activities.append(activity)
            
            activities = filtered_activities
            
            logger.info(f"[GARMIN] –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {email} –Ω–∞–π–¥–µ–Ω–æ {len(activities)} –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Å {first_of_month_str}")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
            for activity in activities:
                activity_type = activity.get('activityType', {}).get('typeKey', 'unknown')
                activity_id = str(activity.get('activityId', 'unknown'))
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º timestamp - Garmin –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
                start_time_local = activity.get('startTimeLocal', '')
                start_time_seconds = activity.get('startTimeInSeconds', 0)
                start_time_nano = activity.get('startTimeInNanoSeconds', 0)
                
                # –õ–æ–≥–∏—Ä—É–µ–º —á—Ç–æ –ø–æ–ª—É—á–∞–µ–º
                logger.info(f"[GARMIN] Raw activity: id={activity_id}, type={activity_type}")
                logger.info(f"[GARMIN] Timestamp: local='{start_time_local}', seconds={start_time_seconds}, nano={start_time_nano}")
                
                # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã timestamp (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)
                activity_date_dt = None
                
                if start_time_local:
                    try:
                        # –ü—Ä–æ–±—É–µ–º –ø–∞—Ä—Å–∏—Ç—å startTimeLocal (—Ñ–æ—Ä–º–∞—Ç: "YYYY-MM-DD HH:MM:SS")
                        activity_date_dt = datetime.strptime(start_time_local, "%Y-%m-%d %H:%M:%S").replace(tzinfo=MOSCOW_TZ)
                        logger.info(f"[GARMIN] –£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ startTimeLocal: {start_time_local}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å startTimeLocal: {e}")
                
                if activity_date_dt is None and start_time_seconds and start_time_seconds > 0:
                    try:
                        activity_date_dt = datetime.fromtimestamp(start_time_seconds, tz=MOSCOW_TZ)
                        logger.info(f"[GARMIN] –ò—Å–ø–æ–ª—å–∑—É–µ–º startTimeInSeconds: {start_time_seconds}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å startTimeInSeconds: {e}")
                
                if activity_date_dt is None and start_time_nano and start_time_nano > 0:
                    try:
                        # –ù–∞–Ω–æ—Å–µ–∫—É–Ω–¥—ã - –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ —Å–µ–∫—É–Ω–¥—ã
                        activity_date_dt = datetime.fromtimestamp(start_time_nano // 1000000000, tz=MOSCOW_TZ)
                        logger.info(f"[GARMIN] –ò—Å–ø–æ–ª—å–∑—É–µ–º startTimeInNanoSeconds: {start_time_nano}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å startTimeInNanoSeconds: {e}")
                
                if activity_date_dt is None:
                    activity_date_dt = now  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∫–∞–∫ fallback
                    logger.warning(f"[GARMIN] –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å timestamp, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è")
                
                activity_date_str = activity_date_dt.strftime("%Y-%m-%d")
                
                logger.info(f"[GARMIN] –î–∞—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: {activity_date_str}")
                
                # –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –±–µ–≥
                if activity_type not in ['running', 'treadmill_running', 'trail_running']:
                    logger.debug(f"[GARMIN] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º (–Ω–µ –±–µ–≥): {activity_type}")
                    continue
                
                logger.info(f"[GARMIN] –ù–∞–π–¥–µ–Ω –±–µ–≥: id={activity_id}, date={activity_date_str}")
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–æ–≤–∞—è –ª–∏ —ç—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                last_id = user_data.get("last_activity_id", "")
                
                # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –ø–∞–º—è—Ç–∏
                activity_key = f"{user_id}:{activity_id}"
                if activity_key in processed_activities:
                    logger.info(f"[GARMIN] üõ°Ô∏è –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å {activity_id} —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ (idempotency check)")
                    continue
                
                if activity_id == last_id:
                    logger.info(f"[GARMIN] –≠—Ç–æ —Å—Ç–∞—Ä–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞)")
                    continue
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å—Ç–∞—Ä–∞—è –ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–º–µ–Ω—å—à–µ–Ω–æ –¥–æ 60 –¥–Ω–µ–π)
                # –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ 2 –¥–Ω—è
                days_diff = (now - activity_date_dt).days
                max_days = 60
                if days_diff > max_days:
                    logger.warning(f"[GARMIN] –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å {activity_id} —Å—Ç–∞—Ä—à–µ {max_days} –¥–Ω–µ–π ({days_diff} –¥–Ω–µ–π), –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
                    continue
                
                # –í—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º last_activity_id –ü–ï–†–ï–î –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
                # –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø—Ä–∏ —Å–±–æ—è—Ö
                old_activity_id = user_data.get("last_activity_id", "")
                user_data["last_activity_id"] = activity_id
                user_data["last_activity_date"] = activity_date_str
                save_garmin_users()
                
                # –≠—Ç–æ –Ω–æ–≤–∞—è –ø—Ä–æ–±–µ–∂–∫–∞! –ü—É–±–ª–∏–∫—É–µ–º –≤ —á–∞—Ç
                logger.info(f"[GARMIN] –ü—É–±–ª–∏–∫—É—é –ø—Ä–æ–±–µ–∂–∫—É: {activity_id}")
                success = await publish_run_result(user_id, user_data, activity, now, current_month)
                
                if success:
                    # –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
                    processed_activities.add(activity_key)
                    logger.info(f"[GARMIN] ‚úÖ –ü—Ä–æ–±–µ–∂–∫–∞ {activity_id} —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞")
                else:
                    # –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º last_activity_id
                    logger.warning(f"[GARMIN] ‚ö†Ô∏è –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –æ—Ç–∫–∞—Ç last_activity_id")
                    user_data["last_activity_id"] = old_activity_id
                    save_garmin_users()
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            save_garmin_users()
            
        except Exception as e:
            # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ - user_data –º–æ–∂–µ—Ç –±—ã—Ç—å None
            user_email = user_data.get("email", "Unknown") if user_data else "Unknown"
            user_id_str = str(user_id) if user_id is not None else "None"
            logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id_str} ({user_email}): {e}", exc_info=True)
            continue


def escape_markdown(text):
    """–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown –≤ —Ç–µ–∫—Å—Ç–µ"""
    if not isinstance(text, str):
        return str(text)
    # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown
    special_chars = ['*', '_', '`', '[', ']', '(', ')', '~', '>', '#', '+', '-', '=', '{', '}', '!', '|']
    for char in special_chars:
        text = text.replace(char, '\\' + char)
    return text


async def publish_run_result(user_id, user_data, activity, now, current_month):
    """–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–∫–∏ –≤ —á–∞—Ç. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –ø—Ä–∏ —É—Å–ø–µ—Ö–µ."""
    global application, user_running_stats
    
    # ========== –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ó–ê–©–ò–¢–ê –û–¢ None ==========
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        if user_id is None:
            logger.error("[GARMIN] publish_run_result: user_id —Ä–∞–≤–µ–Ω None")
            return False
        if user_data is None:
            logger.error("[GARMIN] publish_run_result: user_data —Ä–∞–≤–µ–Ω None")
            return False
        if not isinstance(user_data, dict):
            logger.error(f"[GARMIN] publish_run_result: user_data –Ω–µ —Å–ª–æ–≤–∞—Ä—å: {type(user_data)}")
            return False
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        if "name" not in user_data:
            logger.error(f"[GARMIN] publish_run_result: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ 'name' –≤ user_data")
            return False
            
    except Exception as init_error:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ publish_run_result: {init_error}")
        return False
    
    try:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        distance_meters = activity.get('distance', 0)
        distance_km = distance_meters / 1000
        
        duration_seconds = activity.get('duration', 0)
        duration_min = int(duration_seconds // 60)
        duration_sec = int(duration_seconds % 60)
        
        avg_heartrate = activity.get('averageHeartRate', 0)
        calories = activity.get('calories', 0)
        
        # –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–º–ø
        if distance_km > 0:
            pace_seconds = duration_seconds / distance_km
            pace_min = int(pace_seconds // 60)
            pace_sec = int(pace_seconds % 60)
            pace_str = f"{pace_min}:{pace_sec:02d} –º–∏–Ω/–∫–º"
        else:
            pace_str = "N/A"
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è
        time_str = f"{duration_min}:{duration_sec:02d}"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–π –º–µ—Å—è—Ü –¥–ª—è —Å–±—Ä–æ—Å–∞
        user_monthly = user_data.get("last_activity_date", "")
        if user_monthly and user_monthly[:7] != current_month:
            # –ù–æ–≤—ã–π –º–µ—Å—è—Ü - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫–∏
            user_data["monthly_distance"] = 0.0
            user_data["monthly_activities"] = 0
            logger.info(f"[GARMIN] –ù–æ–≤—ã–π –º–µ—Å—è—Ü –¥–ª—è {user_data['name']}, —Å–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–æ–≤")
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_data["monthly_distance"] = user_data.get("monthly_distance", 0.0) + distance_km
        user_data["monthly_activities"] = user_data.get("monthly_activities", 0) + 1
        
        # –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–≥–∞
        if user_id not in user_running_stats:
            user_running_stats[user_id] = {
                "name": user_data["name"],
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0
            }
        
        user_running_stats[user_id]["activities"] += 1
        user_running_stats[user_id]["distance"] += distance_meters
        user_running_stats[user_id]["duration"] += duration_seconds
        user_running_stats[user_id]["calories"] += calories
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–±–µ–∂–µ–∫ –≤ –∫–∞–Ω–∞–ª
        await save_user_running_stats()
        
        # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –∏–º—è –¥–ª—è Markdown
        safe_name = escape_markdown(user_data.get('name', '–ë–µ–≥—É–Ω'))
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        message_text = (
            f"üèÉ‚Äç‚ôÇÔ∏è **{safe_name}** –∑–∞–≤–µ—Ä—à–∏–ª(–∞) –ø—Ä–æ–±–µ–∂–∫—É!\n\n"
            f"üìç *–î–∏—Å—Ç–∞–Ω—Ü–∏—è:* {distance_km:.2f} –∫–º\n"
            f"‚è±Ô∏è *–í—Ä–µ–º—è:* {time_str} ({pace_str})\n"
        )
        
        if avg_heartrate > 0:
            message_text += f"‚ù§Ô∏è *–ü—É–ª—å—Å:* {avg_heartrate} —É–¥/–º–∏–Ω\n"
        
        if calories > 0:
            message_text += f"üî• *–ö–∞–ª–æ—Ä–∏–∏:* {calories} –∫–∫–∞–ª\n"
        
        message_text += (
            f"\nüìÖ *–ó–∞ –º–µ—Å—è—Ü:* {user_data['monthly_distance']:.1f} –∫–º / {user_data['monthly_activities']} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫"
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                text=message_text,
                parse_mode="Markdown"
            )
            logger.info(f"[GARMIN] –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω: {user_data['name']} - {distance_km:.2f} –∫–º")
            return True
        return False
        
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {e}", exc_info=True)
        return False


async def garmin_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ Garmin (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)"""
    global bot_running
    
    check_interval = 300  # 5 –º–∏–Ω—É—Ç
    
    while bot_running:
        try:
            # –ñ–¥—ë–º –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
            await asyncio.sleep(check_interval)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º Garmin
            await check_garmin_activities()
            
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ: {e}")
            await asyncio.sleep(60)  # –ü–æ–¥–æ–∂–¥—ë–º –º–∏–Ω—É—Ç—É –ø—Ä–∏ –æ—à–∏–±–∫–µ


def garmin_scheduler_sync():
    """–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
    logger.info("[GARMIN] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω (sync wrapper)")
    try:
        asyncio.run(garmin_scheduler_task())
    except Exception as e:
        logger.error(f"[GARMIN] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞: {e}")


def init_garmin_on_startup():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Garmin –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞"""
    global garmin_users
    
    try:
        if GARMIN_AVAILABLE:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            load_garmin_users()
            logger.info(f"[GARMIN] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(garmin_users)}")
        else:
            logger.warning("[GARMIN] –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞")
    except Exception as e:
        logger.error(f"[GARMIN] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: {e}")


# ============== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –î–ù–ï–ô –†–û–ñ–î–ï–ù–ò–Ø ==============
async def save_birthdays_async():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–∞–π–ª –∏ –∫–∞–Ω–∞–ª"""
    try:
        save_data = {}
        for user_id, data in user_birthdays.items():
            save_data[str(user_id)] = {
                "name": data["name"],
                "birthday": data["birthday"]
            }
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
        with open(BIRTHDAYS_FILE, 'w', encoding='utf-8') as f:
            json.dump(save_data, f, ensure_ascii=False, indent=2)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–∞–Ω–∞–ª
        if DATA_CHANNEL_ID and application:
            await save_to_channel(application.bot, "birthdays", save_data)
        
        logger.info(f"[BIRTHDAY] –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: {len(user_birthdays)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {e}")

def save_birthdays():
    """–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è"""
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    if application and application.bot:
        asyncio.run_coroutine_threadsafe(save_birthdays_async(), application.loop)


def load_birthdays():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞"""
    global user_birthdays
    
    try:
        if not os.path.exists(BIRTHDAYS_FILE):
            logger.info("[BIRTHDAY] –§–∞–π–ª –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω")
            user_birthdays = {}
            return
        
        with open(BIRTHDAYS_FILE, 'r', encoding='utf-8') as f:
            load_data = json.load(f)
        
        user_birthdays = {}
        for user_id_str, data in load_data.items():
            user_birthdays[int(user_id_str)] = {
                "name": data["name"],
                "birthday": data["birthday"]
            }
        
        logger.info(f"[BIRTHDAY] –ó–∞–≥—Ä—É–∂–µ–Ω–æ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è: {len(user_birthdays)}")
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: {e}")
        user_birthdays = {}


async def send_birthday_congratulation(user_id, user_data):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è"""
    global application
    
    try:
        name = user_data["name"]
        safe_name = escape_markdown(name)
        
        # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ
        wish = random.choice(BIRTHDAY_WISHES).format(name=safe_name)
        
        # –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
        birthday_text = f"""üéâ **{safe_name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!** üéÇ

{wish}

üéà –°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –æ—Ç–¥—ã—Ö–∞–π, —Ä–∞–¥—É–π—Å—è –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è! 

üíê –° –ª—é–±–æ–≤—å—é, —Ç–≤–æ–π –±–µ–≥–æ–≤–æ–π –∫–ª—É–±! ‚ù§Ô∏è"""

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç
        if application and CHAT_ID:
            # –ü–æ–ø—Ä–æ–±—É–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π (—Ç–æ—Ä—Ç)
            try:
                await application.bot.send_photo(
                    chat_id=CHAT_ID,
                    photo="https://cdn-icons-png.flaticon.com/512/3081/3081559.png",  # –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —Ç–æ—Ä—Ç
                    caption=birthday_text,
                    parse_mode="Markdown"
                )
            except Exception as img_error:
                # –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç
                logger.warning(f"[BIRTHDAY] –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É: {img_error}")
                await application.bot.send_message(
                    chat_id=CHAT_ID,
                    text=birthday_text,
                    parse_mode="Markdown"
                )
            
            logger.info(f"[BIRTHDAY] –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {name}")
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è: {e}", exc_info=True)


async def check_birthdays():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π"""
    global user_birthdays
    
    try:
        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        today = now.strftime("%d.%m")  # –§–æ—Ä–º–∞—Ç DD.MM
        
        logger.info(f"[BIRTHDAY] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –Ω–∞ {today}")
        
        # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å–ª–æ–≤–∞—Ä—é
        if not isinstance(user_birthdays, dict):
            logger.warning(f"[BIRTHDAY] user_birthdays –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—ë–º: {type(user_birthdays)}")
            return
        
        for user_id, user_data in list(user_birthdays.items()):
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ user_id –∏ user_data –≤–∞–ª–∏–¥–Ω—ã
            if user_id is None:
                logger.warning(f"[BIRTHDAY] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–ø–∏—Å—å —Å None user_id")
                continue
            if user_data is None:
                logger.warning(f"[BIRTHDAY] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–ø–∏—Å—å —Å None user_data –¥–ª—è user_id={user_id}")
                continue
            if not isinstance(user_data, dict):
                logger.warning(f"[BIRTHDAY] user_data –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—ë–º –¥–ª—è user_id={user_id}")
                continue
            
            birthday = user_data.get("birthday")
            if birthday is None:
                logger.warning(f"[BIRTHDAY] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} –±–µ–∑ birthday")
                continue
            
            if birthday == today:
                logger.info(f"[BIRTHDAY] –°–µ–≥–æ–¥–Ω—è –î–† —É: {user_data.get('name', 'Unknown')}")
                await send_birthday_congratulation(user_id, user_data)
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: {e}", exc_info=True)


async def birthday_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)"""
    global bot_running
    
    logger.info("[BIRTHDAY] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω")
    
    while bot_running:
        try:
            await asyncio.sleep(3600)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —á–∞—Å
            
            now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
            current_hour = now.hour
            current_minute = now.minute
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ 9:00 —É—Ç—Ä–∞
            if current_hour == 9 and current_minute == 0:
                logger.info("[BIRTHDAY] –í—Ä–µ–º—è 9:00 ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è")
                await check_birthdays()
                
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ: {e}")
            await asyncio.sleep(60)


def init_birthdays_on_startup():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞"""
    global user_birthdays
    
    try:
        load_birthdays()
        logger.info(f"[BIRTHDAY] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –î–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è: {len(user_birthdays)}")
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: {e}")


async def fetch_tips_from_url(url: str, category: str) -> List[str]:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–≤–µ—Ç–æ–≤ —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
    tips = []
    try:
        async with httpx.AsyncClient(timeout=30.0) as client:
            response = await client.get(url, follow_redirects=True)
            response.raise_for_status()
            
            soup = BeautifulSoup(response.text, 'html.parser')
            
            # –ò—â–µ–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã —Å —Å–æ–≤–µ—Ç–∞–º–∏
            paragraphs = soup.find_all('p')
            
            for p in paragraphs:
                text = p.get_text().strip()
                if len(text) > 50 and len(text) < 500:
                    if not any(word in text.lower() for word in ['–ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å', '—á–∏—Ç–∞–π—Ç–µ —Ç–∞–∫–∂–µ', '–∞–≤—Ç–æ—Ä:', '–¥–∞—Ç–∞:', 'copyright']):
                        tips.append(text)
            
            logger.info(f"[TIPS] –ü–æ–ª—É—á–µ–Ω–æ {len(tips)} —Å–æ–≤–µ—Ç–æ–≤ —Å {url}")
            
    except Exception as e:
        logger.error(f"[TIPS] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ {url}: {e}")
    
    return tips


async def update_tips_cache():
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ —Å–æ–≤–µ—Ç–æ–≤ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"""
    global _tips_cache
    
    current_time = time.time()
    if current_time - _tips_cache["last_update"] < CACHE_DURATION:
        logger.info("[TIPS] –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã")
        return
    
    logger.info("[TIPS] –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–≤–µ—Ç—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞...")
    
    sources = {
        "running": [
            "https://marathonec.ru/kak-nachat-begat/",
            "https://marathonec.ru/topics/running/training/",
        ],
        "recovery": [],
        "equipment": [
            "https://marathonec.ru/kak-vybrat-krossovki-dlya-bega/",
            "https://marathonec.ru/odezhda-dlya-bega-osenyu/",
            "https://marathonec.ru/topics/running/gear/",
        ]
    }
    
    local_advice = {
        "running": [
            "–ù–∞—á–∏–Ω–∞–π –±–µ–≥–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ ‚Äî —Ç–≤–æ–π –ø—É–ª—å—Å –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 130-140 —É–¥/–º–∏–Ω –Ω–∞ –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö.",
            "–ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–π –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ 10% –≤ –Ω–µ–¥–µ–ª—é ‚Äî —ç—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ç—Ä–∞–≤–º.",
            "–ë–µ–≥–∞–π –≤ —Ç–µ–º–ø–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç—ã –º–æ–∂–µ—à—å —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å. –ï—Å–ª–∏ –∑–∞–¥—ã—Ö–∞–µ—à—å—Å—è ‚Äî –∑–∞–º–µ–¥–ª—è–π—Å—è.",
            "–ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –±–µ–≥–∞ –∏ —Ö–æ–¥—å–±—ã (2 –º–∏–Ω –±–µ–≥ + 1 –º–∏–Ω —Ö–æ–¥—å–±–∞) ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å –±–µ–≥–∞—Ç—å.",
            "–ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π —Ä–∞–∑–º–∏–Ω–∫—É! 5-10 –º–∏–Ω—É—Ç –ª—ë–≥–∫–æ–π —Ö–æ–¥—å–±—ã –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Ç—è–∂–∫–∏ –ø–µ—Ä–µ–¥ –±–µ–≥–æ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.",
            "–ü–æ—Å–ª–µ 3-4 –Ω–µ–¥–µ–ª—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –±–µ–≥–∞ —Ç—ã –∑–∞–º–µ—Ç–∏—à—å, —á—Ç–æ —Å—Ç–∞–ª –±–µ–≥–∞—Ç—å –ª–µ–≥—á–µ –∏ –¥–æ–ª—å—à–µ.",
            "–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –±–µ–≥ (—á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ) ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ª—É—á—à–∏—Ç—å –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å.",
            "–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞: –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ –ø–æ–¥ —Ç–∞–∑, –Ω–µ –Ω–∞ –ø—è—Ç–∫—É; —Å–ø–∏–Ω–∞ —Ä–æ–≤–Ω–∞—è, –≤–∑–≥–ª—è–¥ –≤–ø–µ—Ä—ë–¥.",
        ],
        "recovery": [
            "–ü–æ—Å–ª–µ –ø—Ä–æ–±–µ–∂–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–π –∑–∞–º–∏–Ω–∫—É: 5-10 –º–∏–Ω—É—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–π —Ö–æ–¥—å–±—ã.",
            "–†–∞—Å—Ç—è–∂–∫–∞ –ø–æ—Å–ª–µ –±–µ–≥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π ‚Äî —É–¥–µ—Ä–∂–∏–≤–∞–π –ø–æ–∑—ã 20-30 —Å–µ–∫—É–Ω–¥.",
            "–ü–µ–π –≤–æ–¥—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî 200-300 –º–ª, –ø–æ—Ç–æ–º –ø–µ–π –ø–æ –∂–∞–∂–¥–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è.",
            "–°–æ–Ω ‚Äî –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. 7-8 —á–∞—Å–æ–≤ —Å–Ω–∞ —Ç–≤–æ—Ä—è—Ç —á—É–¥–µ—Å–∞.",
            "–î–µ–ª–∞–π —Ö–æ—Ç—è –±—ã 1 –ø–æ–ª–Ω—ã–π –¥–µ–Ω—å –æ—Ç–¥—ã—Ö–∞ –≤ –Ω–µ–¥–µ–ª—é ‚Äî –º—ã—à—Ü—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤ –ø–æ–∫–æ–µ.",
            "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–Ω–∏ –æ—Ç–¥—ã—Ö–∞ ‚Äî —Ä–æ—Å—Ç —Ñ–æ—Ä–º—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.",
        ],
        "equipment": [
            "–ë–µ–≥–æ–≤—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–∞–∂–¥—ã–µ 500-800 –∫–º ‚Äî –∏–∑–Ω–æ—à–µ–Ω–Ω–∞—è –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è –≤–µ–¥—ë—Ç –∫ —Ç—Ä–∞–≤–º–∞–º.",
            "–ë–µ—Ä–∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –Ω–∞ 0,5-1,5 —Å–º –±–æ–ª—å—à–µ –æ–±—ã—á–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ ‚Äî –Ω–æ–≥–∞ –æ—Ç–µ–∫–∞–µ—Ç –ø—Ä–∏ –±–µ–≥–µ.",
            "–û–¥–µ–≤–∞–π—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –Ω–∞—á–∞–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –±—ã–ª–æ –ø—Ä–æ—Ö–ª–∞–¥–Ω–æ ‚Äî –Ω–∞ –æ–¥–∏–Ω —Å–ª–æ–π –º–µ–Ω—å—à–µ, —á–µ–º –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏.",
            "–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∞—è –æ–¥–µ–∂–¥–∞ –æ—Ç–≤–æ–¥–∏—Ç –≤–ª–∞–≥—É –ª—É—á—à–µ —Ö–ª–æ–ø–∫–∞ ‚Äî –≤—ã–±–∏—Ä–∞–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–∫–∞–Ω–∏.",
            "–ü—Ä–∏–º–µ—Ä—è–π –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –≤–µ—á–µ—Ä–æ–º ‚Äî –∫ –≤–µ—á–µ—Ä—É —Å—Ç–æ–ø—ã –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–µ–∫–∞—é—Ç.",
            "–í—ã–±–∏—Ä–∞–π –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –ø–æ–¥ —Ç–∏–ø –ø—Ä–æ–Ω–∞—Ü–∏–∏: –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–æ–ø—ã.",
        ]
    }
    
    for cat, urls in sources.items():
        for url in urls:
            tips = await fetch_tips_from_url(url, cat)
            if tips:
                _tips_cache[cat].extend(tips)
                break
    
    for cat in ["running", "recovery", "equipment"]:
        if not _tips_cache[cat]:
            logger.info(f"[TIPS] –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ {cat}")
            _tips_cache[cat] = local_advice.get(cat, []).copy()
    
    _tips_cache["last_update"] = current_time
    logger.info(f"[TIPS] –ö—ç—à –æ–±–Ω–æ–≤–ª—ë–Ω: running={len(_tips_cache['running'])}, recovery={len(_tips_cache['recovery'])}, equipment={len(_tips_cache['equipment'])}")


def get_random_tip(category: str = None) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–∞ –∏–∑ –∫—ç—à–∞"""
    import random
    
    running_cats = ["running", "run", "–±–µ–≥", "–±–µ–≥–∞—Ç—å", "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"]
    recovery_cats = ["recovery", "restore", "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ", "–æ—Ç–¥—ã—Ö", "–ø–∏—Ç–∞–Ω–∏–µ"]
    equipment_cats = ["equipment", "gear", "—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞", "–∫—Ä–æ—Å—Å–æ–≤–∫–∏", "–æ–¥–µ–∂–¥–∞"]
    
    if category:
        cat_lower = category.lower()
        if cat_lower in running_cats:
            tips_list = _tips_cache["running"]
            cat_name = "–±–µ–≥–µ"
        elif cat_lower in recovery_cats:
            tips_list = _tips_cache["recovery"]
            cat_name = "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏"
        elif cat_lower in equipment_cats:
            tips_list = _tips_cache["equipment"]
            cat_name = "—ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ"
        else:
            tips_list = (_tips_cache["running"] + _tips_cache["recovery"] + _tips_cache["equipment"])
            cat_name = "–±–µ–≥—É, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ"
    else:
        tips_list = (_tips_cache["running"] + _tips_cache["recovery"] + _tips_cache["equipment"])
        cat_name = "–±–µ–≥—É, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ"
    
    if not tips_list:
        return "üí° –°–æ–≤–µ—Ç: –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø—Ä–∏—Å–ª—É—à–∏–≤–∞—Ç—å—Å—è –∫ —Å–≤–æ–µ–º—É —Ç–µ–ª—É!"
    
    tip = random.choice(tips_list)
    return f"üí° **–°–æ–≤–µ—Ç –ø–æ {cat_name} (–∏—Å—Ç–æ—á–Ω–∏–∫: marathonec.ru):**\n\n{tip}"


MOTIVATION_QUOTES = [
    "üèÉ –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –ª—É—á—à–µ!",
    "üí™ –ö–∞–∂–¥—ã–π –∫–º ‚Äî —ç—Ç–æ –ø–æ–±–µ–¥–∞ –Ω–∞–¥ —Å–æ–±–æ–π!",
    "üöÄ –ù–µ –∂–¥–∏ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞. –°–æ–∑–¥–∞–π –µ–≥–æ —Å–≤–æ–∏–º –±–µ–≥–æ–º!",
    "üî• –¢–≤–æ–π –¥–∏–≤–∞–Ω —Å–∫—É—á–∞–µ—Ç, –∞ –±–µ–≥ –∂–¥—ë—Ç —Ç–µ–±—è!",
    "‚≠ê –°–µ–≥–æ–¥–Ω—è —Ç—ã –±–µ–∂–∏—à—å –∑–∞–≤—Ç—Ä–∞—à–Ω—é—é –≤–µ—Ä—Å–∏—é —Å–µ–±—è!",
    "üí® –ë–æ–ª—å—à–µ –±–µ–≥–∞ ‚Äî –º–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞!",
    "üéØ –ü—Ä–æ–±–µ–∂–∫–∞ —Å–µ–≥–æ–¥–Ω—è = —É–ª—ã–±–∫–∞ –∑–∞–≤—Ç—Ä–∞!",
    "üèÖ –ì–ª–∞–≤–Ω—ã–π –∑–∞–±–µ–≥ ‚Äî —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –Ω–∞—á–∞–ª!",
    "üåü –õ—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –±–µ–≥–∞ ‚Äî —Å–µ–π—á–∞—Å!",
    "üí• –¢—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å!",
    "‚ö° –ö–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —Ü–µ–ª–∏!",
    "üåà –ü–æ—Å–ª–µ –ø—Ä–æ–±–µ–∂–∫–∏ –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Ä—á–µ!",
    "üî• –î–∏–≤–∞–Ω ‚Äî —ç—Ç–æ –Ω–µ —Ç–≤–æ–π –¥–æ–º. –î–æ—Ä–æ–≥–∞ ‚Äî —Ç–≤–æ–π –¥—Ä—É–≥!",
    "üí™ –í—á–µ—Ä–∞ —Ç—ã –Ω–µ —Å–º–æ–≥. –°–µ–≥–æ–¥–Ω—è —Ç—ã –±–µ–∂–∏—à—å!",
    "‚≠ê –ë–µ–≥ ‚Äî —ç—Ç–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å!",
    "üéì –ë–µ–≥ —É—á–∏—Ç –Ω–∞—Å, —á—Ç–æ —Ñ–∏–Ω–∏—à –≤—Å–µ–≥–¥–∞ –±–ª–∏–∂–µ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è!",
    "üèÜ –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ –∑–∞–≤—Ç—Ä–∞—à–Ω—è—è –ø–æ–±–µ–¥–∞!",
    "üåÖ –£—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –¥–∞—ë—Ç —Å–∏–ª –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å!",
    "üíÜ –ë–µ–≥ ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ–ª–æ–≤—É!",
    "üîÑ –ö–∞–∂–¥—ã–π –∫—Ä—É–≥ ‚Äî —ç—Ç–æ —à–∞–Ω—Å —Å—Ç–∞—Ç—å –ª—É—á—à–µ!",
    "ü§ù –ë–µ–≥ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–∏–ª—å–Ω—ã—Ö –¥—É—Ö–æ–º!",
    "üé™ –ñ–∏–∑–Ω—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞, —á—Ç–æ–±—ã –Ω–µ –±–µ–≥–∞—Ç—å!",
    "üßò‚Äç‚ôÄÔ∏è –ë–µ–≥ ‚Äî —ç—Ç–æ –º–µ–¥–∏—Ç–∞—Ü–∏—è –≤ –¥–≤–∏–∂–µ–Ω–∏–∏!",
    "üöÄ –û—Å—Ç–∞–Ω–æ–≤–∏—Å—å ‚Äî –∏ –ø–æ—Ç–µ—Ä—è–µ—à—å —Ç–µ–º–ø!",
    "üí´ –ë–µ–≥–∏ —Ç–∞–∫, –±—É–¥—Ç–æ –Ω–∏–∫—Ç–æ –Ω–µ —Å–º–æ—Ç—Ä–∏—Ç!",
    "üèÉ‚Äç‚ôÇÔ∏è –ù–µ –±–µ–≥–∞–π –æ—Ç –ø—Ä–æ–±–ª–µ–º ‚Äî –±–µ–≥–∏ –∫ —Ü–µ–ª—è–º!",
    "‚≠ê –ö–∞–∂–¥—ã–π —Å–ø–æ—Ä—Ç—Å–º–µ–Ω –±—ã–ª –Ω–æ–≤–∏—á–∫–æ–º. –ù–∞—á–Ω–∏ —Å–µ–≥–æ–¥–Ω—è!",
    "üî• –°–ª–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 5 –∫–º. –î–∞–ª—å—à–µ ‚Äî –ª–µ–≥—á–µ!",
    "üí™ –¢–≤–æ–∏ –Ω–æ–≥–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –ø–æ–ª—ë—Ç–∞!",
    "üåü –ë–µ–≥ ‚Äî —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞. –≠—Ç–æ —Å–≤–æ–±–æ–¥–∞!",
    "üéØ –ü–æ—Å—Ç–∞–≤—å —Ü–µ–ª—å ‚Äî –∏ –±–µ–≥–∏ –∫ –Ω–µ–π!",
    "üí• –ë–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç ¬´—Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ¬ª –∏–ª–∏ ¬´—Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ¬ª!",
    "üèÉ‚Äç‚ôÄÔ∏è –ù–∞—á–Ω–∏ –±–µ–∂–∞—Ç—å ‚Äî –∏ —É–≤–∏–¥–∏—à—å, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è –∂–∏–∑–Ω—å!",
    "‚≠ê –î–∏–≤–∞–Ω –Ω–µ –¥–∞—Å—Ç —Ç–µ–±–µ –º–µ–¥–∞–ª—å. –ê –±–µ–≥ ‚Äî –¥–∞—Å—Ç!",
    "üî• –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä!",
    "üí™ –í–µ—Ä—å –≤ —Å–µ–±—è ‚Äî –∏ –±–µ–≥–∏!",
    "üåü –¢—ã –º–æ–∂–µ—à—å –±–æ–ª—å—à–µ, —á–µ–º –¥—É–º–∞–µ—à—å!",
]

# ============== –¶–ò–¢–ê–¢–´ –í–ï–õ–ò–ö–ò–• –ë–ï–ì–£–ù–û–í ==============
GREAT_RUNNER_QUOTES = [
    "üèÉ‚Äç‚ôÇÔ∏è ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ —Å–∞–º—ã–π —á–µ—Å—Ç–Ω—ã–π —Å–ø–æ—Ä—Ç. –û–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—Ç–æ —Ç—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.¬ª ‚Äî –≠–ª–∏—É–¥ –ö–∏–ø—á–æ–≥–µ",
    "‚ö° ¬´–ù–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ —Ç—ã –±–µ–∂–∏—à—å. –í–∞–∂–Ω–æ, —á—Ç–æ —Ç—ã –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å—Å—è.¬ª ‚Äî –°—Ç–∏–≤ –ü—Ä–µ—Ñ–æ–Ω—Ç–µ–π–Ω",
    "üåü ¬´–¢–µ–ª–æ –º–æ–∂–µ—Ç –≤—ã–¥–µ—Ä–∂–∞—Ç—å –ø–æ—á—Ç–∏ –≤—Å—ë. –≠—Ç–æ –≤–æ–ø—Ä–æ—Å —Å–∏–ª—ã –≤–æ–ª–∏.¬ª ‚Äî –≠–º–∏–ª—å –ó–∞—Ç–æ–ø–µ–∫",
    "üí™ ¬´–¢—ã –Ω–µ –ø—Ä–æ–∏–≥—Ä–∞–ª, –µ—Å–ª–∏ –Ω–µ —Ñ–∏–Ω–∏—à–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–≤—ã–º. –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª, –µ—Å–ª–∏ –Ω–µ –Ω–∞—á–∞–ª.¬ª ‚Äî –•–∞ile –ì–µ–±—Ä–µ—Å–µ–ª–∞—Å—Å–∏–µ",
    "üèÉ‚Äç‚ôÄÔ∏è ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞. –ö–æ–≥–¥–∞ –±–µ–∂–∏—à—å, —Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—à—å —Å–≤–æ—é –∂–∏–∑–Ω—å.¬ª ‚Äî –ë–∏–ª–ª –ë–∞—É—ç—Ä–º–∞–Ω",
    "üî• ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—Å–µ–≥–¥–∞ –ø–æ–¥ —Ä—É–∫–æ–π.¬ª ‚Äî –î–∂–æ—Ä–¥–∂ –®–∏—Ö–∞–Ω",
    "üöÄ ¬´–ú–∞—Ä–∞—Ñ–æ–Ω ‚Äî —ç—Ç–æ –Ω–µ 42 –∫–º. –≠—Ç–æ 42 –∫–º –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ–±–µ.¬ª ‚Äî –§—Ä–µ–¥ –õ–µ–±–æ—É",
    "‚≠ê ¬´–ù–µ–≤–∞–∂–Ω–æ, –∫–∞–∫ –º–µ–¥–ª–µ–Ω–Ω–æ —Ç—ã –±–µ–∂–∏—à—å. –¢—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –±—ã—Å—Ç—Ä–µ–µ —Ç–æ–≥–æ, –∫—Ç–æ —Å–∏–¥–∏—Ç –Ω–∞ –¥–∏–≤–∞–Ω–µ.¬ª ‚Äî –î–∂–æ–Ω –ë–∏–Ω–≥–∞–º",
    "üí• ¬´–ï—Å–ª–∏ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å –±–æ–ª—å, –∑–Ω–∞—á–∏—Ç, —Ç—ã –µ—â—ë –∂–∏–≤. –ü—Ä–æ–¥–æ–ª–∂–∞–π –±–µ–∂–∞—Ç—å.¬ª ‚Äî –ü–∞–∞–≤–æ –ù—É—Ä–º–∏",
    "üèÜ ¬´–¶–µ–ª—å –Ω–µ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞. –ò–Ω–æ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –±–µ–∂–∞—Ç—å –∫ –Ω–µ–π.¬ª ‚Äî –†–æ–¥–∂–µ—Ä –ë–∞–Ω–Ω–∏—Å—Ç–µ—Ä",
    "üåà ¬´–ö–∞–∂–¥—ã–π –∫—Ä—É–≥ ‚Äî —ç—Ç–æ —à–∞–Ω—Å —Å—Ç–∞—Ç—å –ª—É—á—à–µ. –ù–µ —É–ø—É—Å—Ç–∏ –µ–≥–æ.¬ª ‚Äî –ü–∞–∞–≤–æ –ù—É—Ä–º–∏",
    "üí´ ¬´–¢—Ä—É–¥–Ω—ã–π –¥–µ–Ω—å –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ ‚Äî —ç—Ç–æ –ª—ë–≥–∫–∏–π –¥–µ–Ω—å –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö.¬ª ‚Äî –ë–∏–ª–ª –ë–∞—É—ç—Ä–º–∞–Ω",
    "üéØ ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ —Ç–∞–Ω–µ—Ü –º–µ–∂–¥—É —Ç–µ–ª–æ–º –∏ –≤–æ–ª–µ–π.¬ª ‚Äî –≠–º–∏–ª—å –ó–∞—Ç–æ–ø–µ–∫",
    "üî• ¬´–¢—ã –±–µ–∂–∏—à—å –Ω–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ—Ö—É–¥–µ—Ç—å. –¢—ã –±–µ–∂–∏—à—å, —á—Ç–æ–±—ã –∂–∏—Ç—å.¬ª ‚Äî –°—Ç–∏–≤ –ü—Ä–µ—Ñ–æ–Ω—Ç–µ–π–Ω",
    "üèÉ‚Äç‚ôÇÔ∏è ¬´–ù–∏–∫–∞–∫–æ–π –≤–µ—Ç–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–≥–æ, –∫—Ç–æ —É–∂–µ —Ä–µ—à–∏–ª –±–µ–∂–∞—Ç—å.¬ª ‚Äî –≠–ª–∏—É–¥ –ö–∏–ø—á–æ–≥–µ",
    "üí™ ¬´–ë–µ–≥ —É—á–∏—Ç –Ω–∞—Å, —á—Ç–æ –ø–∞–¥–∞—Ç—å ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è.¬ª ‚Äî –•–∞ile –ì–µ–±—Ä–µ—Å–µ–ª–∞—Å—Å–∏–µ",
    "‚≠ê ¬´–§–∏–Ω–∏—à–Ω–∞—è –ø—Ä—è–º–∞—è ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ —Ç–≤–æ–µ–≥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–±–µ–≥–∞.¬ª ‚Äî –§—Ä–µ–¥ –õ–µ–±–æ—É",
    "üåü ¬´–°–µ–∫—Ä–µ—Ç –Ω–µ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –±–µ–≥–∞—Ç—å –±—ã—Å—Ç—Ä–æ. –°–µ–∫—Ä–µ—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –±–µ–∂–∞—Ç—å.¬ª ‚Äî –†–æ–¥–∂–µ—Ä –ë–∞–Ω–Ω–∏—Å—Ç–µ—Ä",
    "‚ö° ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ –ø–æ—ç–∑–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∏ –º—É–∑—ã–∫–∞ –¥—É—à–∏.¬ª ‚Äî –î–∂–æ—Ä–¥–∂ –®–∏—Ö–∞–Ω",
    "üèÖ ¬´–ö–æ–≥–¥–∞ –¥—É–º–∞–µ—à—å, —á—Ç–æ –Ω–µ –º–æ–∂–µ—à—å ‚Äî —Ç—ã –º–æ–∂–µ—à—å. –ü—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—å.¬ª ‚Äî –°—Ç–∏–≤ –ü—Ä–µ—Ñ–æ–Ω—Ç–µ–π–Ω",
]

# ============== –ü–û–ñ–ï–õ–ê–ù–ò–Ø –ö–û –î–ù–Æ –†–û–ñ–î–ï–ù–ò–Ø ==============
BIRTHDAY_WISHES = [
    "üéÇ {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ñ–µ–ª–∞—é –±–µ–≥–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ –≤–µ—Ç—Ä–∞, –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –ª—é–±—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–∞—Ç—å —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π! üåü",
    "üéà {name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π —Ç–≤–æ–π –∑–∞–±–µ–≥ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å, –Ω–æ–≤—ã–µ –ø–æ–±–µ–¥—ã –∏ –æ—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! üèÉ‚Äç‚ôÇÔ∏è",
    "üéâ {name}, —Å –î–†! –ñ–µ–ª–∞—é —Å–∏–ª, –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –∏ –≤—Å–µ–≥–¥–∞ —Ö–æ—Ä–æ—à–µ–π –ø–æ–≥–æ–¥—ã –¥–ª—è –ø—Ä–æ–±–µ–∂–µ–∫! ‚òÄÔ∏è",
    "üåü {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ü—É—Å—Ç—å –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤, –º–∞–ª–æ —Ç—Ä–∞–≤–º –∏ –º–Ω–æ–≥–æ —Ä–∞–¥–æ—Å—Ç–∏ –æ—Ç –±–µ–≥–∞! üí™",
    "üéÅ {name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –ñ–µ–ª–∞—é –∑–¥–æ—Ä–æ–≤—å—è, —ç–Ω–µ—Ä–≥–∏–∏ –∏ –Ω–æ–≤—ã—Ö –ª–∏—á–Ω—ã—Ö —Ä–µ–∫–æ—Ä–¥–æ–≤! üèÜ",
    "üíê {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ü—É—Å—Ç—å –±–µ–≥ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Å—Ç–æ–ª—å–∫–æ –∂–µ —Ä–∞–¥–æ—Å—Ç–∏, —Å–∫–æ–ª—å–∫–æ —Ç—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å –≤ –Ω–∞—à —á–∞—Ç! ‚ù§Ô∏è",
    "üéä {name}, —Å –î–†! –ñ–µ–ª–∞—é –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∏ –≤—Å–µ–≥–¥–∞ —Ñ–∏–Ω–∏—à–∏—Ä–æ–≤–∞—Ç—å —Å —É–ª—ã–±–∫–æ–π! üòä",
    "üåà {name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —É–ª—ã–±–∫–∏ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç—å—é! üèÉ‚Äç‚ôÄÔ∏è",
    "\\‚ú® {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ñ–µ–ª–∞—é –º–Ω–æ–≥–æ –¥—Ä—É–∑–µ–π-–µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –∏ –∫—Ä—É—Ç—ã—Ö –∑–∞–±–µ–≥–æ–≤! üëü",
    "üéØ {name}, —Å –î–†! –ü—É—Å—Ç—å —Ü–µ–ª–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã, –∞ –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã ‚Äî –ø–æ–∫–æ—Ä–µ–Ω—ã! üéØ",
    "üí´ {name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –ñ–µ–ª–∞—é never stop running –∏ always finish strong! üèÅ",
    "üåÖ {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ü—É—Å—Ç—å —É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ–±–µ–∂–∫–∏ –¥–∞—é—Ç —ç–Ω–µ—Ä–≥–∏—é –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å! ‚òÄÔ∏è",
    "üéñÔ∏è {name}, —Å –î–†! –ñ–µ–ª–∞—é –º–µ–¥–∞–ª–µ–π, –∫—É–±–∫–æ–≤ –∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π! ü•á",
    "üíù {name}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã ‚Äî –∑–≤–µ–∑–¥–∞ –Ω–∞—à–µ–≥–æ –±–µ–≥–æ–≤–æ–≥–æ –∫–ª—É–±–∞! –ü—É—Å—Ç—å —Å–∏—è–µ—à—å –µ—â—ë —è—Ä—á–µ! \\üåü",
    "üé® {name}, —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ñ–µ–ª–∞—é, —á—Ç–æ–±—ã –∂–∏–∑–Ω—å –±—ã–ª–∞ —è—Ä–∫–æ–π, –∫–∞–∫ —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏! üëü",
]

# ============== –î–†–£–ñ–ï–°–ö–ò–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø (–ö–û–ì–î–ê –¢–´ –ù–ê –ö–û–ì–û-–¢–û –ó–õ–ò–®–¨–°–Ø) ==============
FUNNY_INSULTS = [
    "–≠–π, —è –Ω–∞ —Ç–µ–±—è –æ–±–∏–¥–µ–ª—Å—è! üò§ –î–∞–∂–µ –Ω–µ –¥—É–º–∞–π –∏–∑–≤–∏–Ω—è—Ç—å—Å—è... –ª–∞–¥–Ω–æ, –¥—É–º–∞–π!",
    "–°–ª—É—à–∞–π, —Ç—ã –º–µ–Ω—è —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª... üòî –ù–æ –º—ã –≤—Å—ë –µ—â—ë –¥—Ä—É–∑—å—è, –¥–∞?",
    "–ù—É —Ç—ã –¥–∞—ë—à—å! üòê –Ø –∂–µ –ø—Ä–æ—Å–∏–ª —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞—Ç—å! –õ–∞–¥–Ω–æ, –ø—Ä–æ—â–∞—é. –ù–∞–≤–µ—Ä–Ω–æ–µ.",
    "–ú–æ—ë —Ç–µ—Ä–ø–µ–Ω–∏–µ –ª–æ–ø–Ω—É–ª–æ! üí• –ù–æ —Ç–æ–ª—å–∫–æ —á—É—Ç—å-—á—É—Ç—å. –¢—ã –≤—Å—ë –µ—â—ë –º–∏–ª—ã–π.",
    "–≠–π, —ç–π, —ç–π! üôÑ –¢—ã —á–µ —Ç–≤–æ—Ä–∏—à—å? –Ø –∂–µ —Å–º–æ—Ç—Ä—é –Ω–∞ —Ç–µ–±—è —Å —É–∫–æ—Ä–æ–º!",
    "–Ø –æ–±–∏–¥–µ–ª—Å—è! üò§ –ù–µ —Ç–æ —á—Ç–æ–±—ã —Å–µ—Ä—å—ë–∑–Ω–æ, –Ω–æ... –º–æ–∂–µ—Ç –±—ã—Ç—å. –õ–∞–¥–Ω–æ, —Ç–æ—á–Ω–æ —Å–µ—Ä—å—ë–∑–Ω–æ.",
    "–¢–∞–∫, —Å—Ç–æ–ø. üõë –Ø –∫–æ–Ω–µ—á–Ω–æ –¥–æ–±—Ä—ã–π, –Ω–æ –Ω–µ –Ω–∞—Å—Ç–æ–ª—å–∫–æ! –¢—ã –º–µ–Ω—è –Ω–µ –æ–±–º–∞–Ω–µ—à—å!",
    "–ú–º–º, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ... ü§î –¢—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –º–µ–Ω—è –±–µ—Å–∏—à—å –∏–ª–∏ —ç—Ç–æ —Å–ª—É—á–∞–π–Ω–æ?",
    "–û–≥–æ, —Ç—ã –º–µ–Ω—è —É–¥–∏–≤–∏–ª! üòÆ –ù–æ –Ω–µ –≤ —Ö–æ—Ä–æ—à–µ–º —Å–º—ã—Å–ª–µ. –ò—Å–ø—Ä–∞–≤–ª—è–π—Å—è!",
    "–°–ª—É—à–∞–π —Å—é–¥–∞! üëÜ –Ø –∫–æ–Ω–µ—á–Ω–æ –ª—é–±–ª—é —Ç–µ–±—è, –Ω–æ —Å–µ–π—á–∞—Å —è –Ω–µ–º–Ω–æ–≥–æ... –Ω–µ –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ.",
    "–≠–π, —Ç—ã! üòí –î–∞, —Ç—ã! –ü—Ä–µ–∫—Ä–∞—â–∞–π –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞?",
    "–Ø –¥–µ–ª–∞—é –≤–∏–¥, —á—Ç–æ –∑–ª—é—Å—å! üò§ –ù–æ –º–µ–∂–¥—É –Ω–∞–º–∏ ‚Äî —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –∫–ª–∞—Å—Å–Ω—ã–π.",
    "–¢–∞–∫, —è –æ–±–∏–¥–µ–ª—Å—è –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É! üò§ –ù–∞ —Ü–µ–ª—ã—Ö... 5 –º–∏–Ω—É—Ç. –ú–æ–∂–µ—Ç –±–æ–ª—å—à–µ.",
    "–ù—É –∏ –∑–∞—á–µ–º —Ç—ã —Ç–∞–∫? üôÑ –Ø –∂–µ –Ω–∞–¥–µ—è–ª—Å—è –Ω–∞ —Ç–µ–±—è... –ª–∞–¥–Ω–æ, –Ω–µ –æ—Å–æ–±–æ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ!",
    "–í–Ω–∏–º–∞–Ω–∏–µ: —è —Å–µ–π—á–∞—Å –¥–µ–ª–∞—é —Å—Ç—Ä–æ–≥–æ–µ –ª–∏—Ü–æ! üò† –ù–µ —Å–º–µ–π —Å–º–µ—è—Ç—å—Å—è!",
    "–¢—ã –º–µ–Ω—è —Å–ª—ã—à–∏—à—å? üëÇ –ü–æ—Ç–æ–º—É —á—Ç–æ —è –Ω–∞ —Ç–µ–±—è —Å–º–æ—Ç—Ä—é —Å —É–∫–æ—Ä–æ–º!",
    "–ú–Ω–µ –Ω—É–∂–Ω–æ –º–∏–Ω—É—Ç–∫—É... üò§ –Ø –ø—ã—Ç–∞—é—Å—å –±—ã—Ç—å —Å–µ—Ä—å—ë–∑–Ω—ã–º, –Ω–æ —Ç—ã —Å–º–µ—à–Ω–æ–π!",
    "–°–µ–π—á–∞—Å —è –¥–µ–ª–∞—é –≤–∏–¥, —á—Ç–æ –Ω–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é... üòê –õ–∞–¥–Ω–æ, —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é!",
    "–¢—ã —É–≤–µ—Ä–µ–Ω? ü§î –ü–æ—Ç–æ–º—É —á—Ç–æ —è —Å–µ–π—á–∞—Å –Ω–µ –æ—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω... –Ω–æ —ç—Ç–æ –ø—Ä–æ–π–¥—ë—Ç!",
    "–°–º–æ—Ç—Ä–∏ –º–Ω–µ –≤ –≥–ª–∞–∑–∞! üëÅÔ∏è –Ø –ø—ã—Ç–∞—é—Å—å –±—ã—Ç—å —Å—Ç—Ä–æ–≥–∏–º! –ü–æ–ª—É—á–∞–µ—Ç—Å—è?",
]

# ============== –î–†–£–ñ–ï–°–ö–ò–ï –ü–û–î–ö–û–õ–´ (–î–õ–Ø ROAST) ==============
PLAYFUL_ROASTS = [
    "–¢—ã –±–µ–≥–∞–µ—à—å —Ç–∞–∫, —á—Ç–æ –¥–∞–∂–µ —á–µ—Ä–µ–ø–∞—Ö–∏ —Ç–µ–±—è –æ–±–≥–æ–Ω—è—é—Ç... –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî —Å—Ç–∞—Ä–∞–µ—à—å—Å—è! üí™",
    "–¢–≤–æ–∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –±–µ–≥—É—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ç—ã... —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –º—ã –≤—Å–µ —Å —á–µ–≥–æ-—Ç–æ –Ω–∞—á–∏–Ω–∞–µ–º!",
    "–û, —Ç—ã –ø—Ä–æ–±–µ–∂–∞–ª 500 –º–µ—Ç—Ä–æ–≤? –Ø –∑–Ω–∞—é, —ç—Ç–æ –º–Ω–æ–≥–æ... –¥–ª—è –∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ! üòÑ",
    "–¢–≤–æ–π –ø—É–ª—å—Å –Ω–∞ –ø—Ä–æ–±–µ–∂–∫–µ: 200. –¢–≤–æ–π –ø—É–ª—å—Å –ø–æ—Å–ª–µ –ø—Ä–æ–±–µ–∂–∫–∏: 300. –û—Ç —Å—Ç—Ä–∞—Ö–∞!",
    "–Ø –≤–æ—Å—Ö–∏—â–∞—é—Å—å —Ç–≤–æ–µ–π —Ö—Ä–∞–±—Ä–æ—Å—Ç—å—é ‚Äî –±–µ–≥–∞—Ç—å —Å —Ç–∞–∫–∏–º –ª–∏—Ü–æ–º! –ù–µ –∫–∞–∂–¥—ã–π —Ä–µ—à–∏—Ç—Å—è!",
    "–¢—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ –µ—Å—Ç—å –±–µ–≥... –∏ –µ—Å—Ç—å ¬´–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ö–æ–¥—å–±–∞¬ª. –¢—ã –≤—ã–±—Ä–∞–ª –≤—Ç–æ—Ä–æ–π!",
    "–ü–æ—Å–ª–µ —Ç–≤–æ–µ–π –ø—Ä–æ–±–µ–∂–∫–∏ google maps —Å–ø—Ä–æ—Å–∏–ª: ¬´–ê –≤—ã —Ç–æ—á–Ω–æ –∫—É–¥–∞-—Ç–æ —à–ª–∏?¬ª",
    "–¢–≤–æ—è —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞ ‚Äî —ç—Ç–æ –∫–∞–∫ Wi-Fi –≤ 2010 –≥–æ–¥—É. –ú–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!",
    "–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –≤–ø–µ—á–∞—Ç–ª–∏–ª–æ –º–µ–Ω—è –±–æ–ª—å—à–µ: —Ç–≤–æ—è –ø—Ä–æ–±–µ–∂–∫–∞ –∏–ª–∏ —Ç–≤–æ–∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è!",
    "–¢—ã –±–µ–≥–∞–µ—à—å —Ç–∞–∫, –±—É–¥—Ç–æ –∑–∞ —Ç–æ–±–æ–π –∫—Ç–æ-—Ç–æ –≥–æ–Ω–∏—Ç—Å—è... –∏ —ç—Ç–æ, –ø–æ—Ö–æ–∂–µ, —Ç–≤–æ—è —Å–æ–≤–µ—Å—Ç—å!",
    "–ì–æ–≤–æ—Ä—è—Ç, –±–µ–≥ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å. –ü–æ—Å–ª–µ —Ç–≤–æ–µ–π –ø—Ä–æ–±–µ–∂–∫–∏ ‚Äî —Ç–æ—á–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç. –û—Ç–¥—ã—Ö!",
    "–¢–≤–æ–∏ –Ω–æ–≥–∏ –≥–æ–≤–æ—Ä—è—Ç —Ç–µ–±–µ ¬´—Å–ø–∞—Å–∏–±–æ¬ª... –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –Ω–∞–∫–æ–Ω–µ—Ü –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è!",
    "–ù–∞ —Ñ–∏–Ω–∏—à–µ —Ç—ã –±—ã–ª –ø–µ—Ä–≤—ã–º! –ü–µ—Ä–≤—ã–º... –∫—Ç–æ –¥–æ—Å—Ç–∞–ª —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —Å—Ñ–æ—Ç–∫–∞–ª—Å—è! üì∏",
    "–Ø –∑–∞—Å–µ–∫–∞–ª —Ç–≤–æ—ë –≤—Ä–µ–º—è. –û—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ ¬´–Ω–∞—á–∞–ª –±–µ–∂–∞—Ç—å¬ª –∏ –∂–¥—É –¥–æ —Å–∏—Ö –ø–æ—Ä!",
    "–¢—ã –∫–∞–∫ –π–æ–≥—É—Ä—Ç ‚Äî –ª–µ–∂–∞–ª –Ω–∞ –¥–∏–≤–∞–Ω–µ, –ø–æ—Ç–æ–º ¬´–∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–≤—ë–ª –¥–µ–Ω—å¬ª –∏ —Å–Ω–æ–≤–∞ –ª–µ–∂–∏—à—å!",
    "–¢–≤–æ–π —Ç—Ä–µ–Ω–µ—Ä —Å–∫–∞–∑–∞–ª –±—ã: ¬´–ò–¥–∏ –¥–æ–º–æ–π¬ª. –Ø –≥–æ–≤–æ—Ä—é: ¬´–¢—ã —É–∂–µ –¥–æ–º–∞?¬ª üòè",
    "–ü–æ–º–Ω–∏—à—å, —Ç—ã –≥–æ–≤–æ—Ä–∏–ª ¬´–∑–∞–≤—Ç—Ä–∞ –ø–æ–±–µ–≥—É 10 –∫–º¬ª? –ó–∞–≤—Ç—Ä–∞ –Ω–∞—Å—Ç—É–ø–∏–ª–æ... —Ç—Ä–∏ –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥!",
    "–¢–≤–æ—è –ø—Ä–æ–±–µ–∂–∫–∞ ‚Äî —ç—Ç–æ –∫–∞–∫ –º–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç: —Ç–æ –µ—Å—Ç—å, —Ç–æ –Ω–µ—Ç, –∞ —Ç–æ–ª–∫—É –Ω–æ–ª—å!",
    "–ì–æ–≤–æ—Ä—è—Ç, –≤–∞–∂–Ω–æ –Ω–µ –≤—Ä–µ–º—è, –∞ —É—á–∞—Å—Ç–∏–µ. –¢–∞–∫ —á—Ç–æ —Ç—ã –æ—á–µ–Ω—å-–æ—á–µ–Ω—å —É—á–∞—Å—Ç–≤–æ–≤–∞–ª! üèÉ‚Äç‚ôÇÔ∏è",
    "–ü–æ—Å–ª–µ —Ç–≤–æ–µ–π –ø—Ä–æ–±–µ–∂–∫–∏ –≤—Ä–∞—á–∏ —Å–∫–∞–∑–∞–ª–∏: ¬´–≠—Ç–æ –Ω–µ –±–µ–≥, —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑¬ª!",
]

# ============== –°–ú–ï–®–ù–´–ï –ö–û–ú–ü–õ–ò–ú–ï–ù–¢–´ ==============
FUNNY_COMPLIMENTS = [
    "–¢—ã –∫–∞–∫ —Å–æ–ª–Ω—Ü–µ ‚Äî –¥–∞–∂–µ —á–µ—Ä–µ–∑ —Ç—É—á–∏ –ø—Ä–æ–±–∏–≤–∞–µ—à—å—Å—è –∏ –∑–∞—Å—Ç–∞–≤–ª—è–µ—à—å –≤—Å–µ—Ö —É–ª—ã–±–∞—Ç—å—Å—è!",
    "–¢–≤–æ—è —É–ª—ã–±–∫–∞ —è—Ä—á–µ, —á–µ–º –º–æ–π —ç–∫—Ä–∞–Ω –≤ —Ç—Ä–∏ —á–∞—Å–∞ –Ω–æ—á–∏. –°–µ—Ä—å—ë–∑–Ω–æ, —Ç—ã —Å–≤–µ—Ç–∏—à—å!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, —è –±—ã –ø–æ—Å—Ç–∞–≤–∏–ª 5 –∑–≤—ë–∑–¥ –∏ –Ω–∞–ø–∏—Å–∞–ª –≤–æ—Å—Ç–æ—Ä–∂–µ–Ω–Ω—ã–π –æ—Ç–∑—ã–≤!",
    "–¢—ã –∫–∞–∫ Wi-Fi ‚Äî –±–µ–∑ —Ç–µ–±—è –∂–∏–∑–Ω—å –±—ã–ª–∞ –±—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –∏ –ø–æ–ª–Ω–∞ –≥—Ä—É—Å—Ç–∏.",
    "–¢–≤–æ—ë —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–∞–º—è—Ç–Ω–∏–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞!",
    "–¢—ã –∫–∞–∫ –≥–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥ –∑–∏–º–æ–π ‚Äî —Å–æ–≥—Ä–µ–≤–∞–µ—à—å, —Ä–∞–¥—É–µ—à—å –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–¥–æ–µ–¥–∞–µ—à—å!",
    "–ï—Å–ª–∏ –±—ã –≤—Å–µ –ª—é–¥–∏ –±—ã–ª–∏ –∫–∞–∫ —Ç—ã, –≤ –º–∏—Ä–µ –±—ã –Ω–µ –±—ã–ª–æ –≤–æ–π–Ω, —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ü–µ—Ä—Ç—ã –∏ –≤–µ—á–µ—Ä–∏–Ω–∫–∏!",
    "–¢—ã –∫–∞–∫ –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç ‚Äî –∫–∞–∂–¥–∞—è –ø–µ—Å–Ω—è –≤ —Ç–µ–º—É, –∏ —Ö–æ—á–µ—Ç—Å—è —Å–ª—É—à–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ!",
    "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –ù–æ–±–µ–ª–µ–≤—Å–∫–æ–π –ø—Ä–µ–º–∏–∏ –ø–æ —Ä–∞–¥–æ—Å—Ç–∏!",
    "–¢—ã –∫–∞–∫ –∫–æ—Ç –Ω–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–µ ‚Äî –º–∏–ª—ã–π, —Å–ø–æ–∫–æ–π–Ω—ã–π –∏ –¥–µ–ª–∞–µ—à—å –¥–µ–Ω—å –ª—É—á—à–µ –æ–¥–Ω–∏–º —Å–≤–æ–∏–º –≤–∏–¥–æ–º!",
    "–ï—Å–ª–∏ –±—ã —Ç–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –±—ã–ª–∞ —ç–Ω–µ—Ä–≥–∏–µ–π, –º—ã –±—ã –∑–∞–±—ã–ª–∏ –ø—Ä–æ –≤—Å–µ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã!",
    "–¢—ã –∫–∞–∫ —Å–≤–µ–∂–µ–µ –ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ –±–µ–ª—å—ë ‚Äî –ø–æ—Å–ª–µ –æ–±—â–µ–Ω–∏—è —Å —Ç–æ–±–æ–π —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º!",
    "–¢–≤–æ—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ, —á–µ–º –º–æ–π –±—É–¥–∏–ª—å–Ω–∏–∫ ‚Äî –≤—Å–µ–≥–¥–∞ –≤–æ–≤—Ä–µ–º—è –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–¥–≤–æ–¥–∏—Ç!",
    "–¢—ã –∫–∞–∫ –ª—É—á—à–∞—è –ø–µ—Å–Ω—è –≤ –º–æ–µ–π –≥–æ–ª–æ–≤–µ ‚Äî –∫—Ä—É—Ç–∏—à—å—Å—è –∏ –Ω–µ –¥–∞—ë—à—å –º–Ω–µ –≥—Ä—É—Å—Ç–∏—Ç—å!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª —Å–ø–µ—Ü–∏–µ–π, —Ç—ã –±—ã–ª –±—ã –∫—É—Ä–∫—É–º–æ–π ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π, —è—Ä–∫–∏–π –∏ –¥–µ–ª–∞–µ—à—å –≤—Å—ë –ª—É—á—à–µ!",
    "–¢—ã –∫–∞–∫ –ø—É—à–∏—Å—Ç—ã–π –ø–ª–µ–¥ –∑–∏–º–æ–π ‚Äî —É—é—Ç–Ω—ã–π, —Ç—ë–ø–ª—ã–π –∏ –æ—Ç —Ç–µ–±—è –Ω–µ —Ö–æ—á–µ—Ç—Å—è –æ—Ç—Ö–æ–¥–∏—Ç—å!",
    "–¢–≤–æ—ë —Ç–µ—Ä–ø–µ–Ω–∏–µ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ–ª–∏–º–ø–∏–π—Å–∫–æ–≥–æ –∑–æ–ª–æ—Ç–∞ –ø–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é!",
    "–¢—ã –∫–∞–∫ –∑–æ–Ω—Ç–∏–∫ –≤ —Å–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å ‚Äî –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ, –Ω–æ –ø—Ä–∏—è—Ç–Ω–æ, –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!",
    "–ï—Å–ª–∏ –±—ã —è –ø–∏—Å–∞–ª –∫–Ω–∏–≥—É –æ –∫—Ä—É—Ç—ã—Ö –ª—é–¥—è—Ö, —Ç—ã –±—ã–ª –±—ã –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ!",
    "–¢—ã –∫–∞–∫ —É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ—Ñ–µ ‚Äî –±–æ–¥—Ä–∏—à—å, —Ä–∞–¥—É–µ—à—å –∏ –¥–µ–ª–∞–µ—à—å —É—Ç—Ä–æ –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–º!",
    "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ã—Ö–æ–¥ —Ç–∞–º, –≥–¥–µ —è –≤–∏–∂—É —Å—Ç–µ–Ω—É, –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è!",
    "–¢—ã –∫–∞–∫ –º–µ–º —Å –∫–æ—Ç–∏–∫–æ–º ‚Äî –≤—Å–µ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ —Ç–µ–±—è –∏ —É–ª—ã–±–∞—é—Ç—Å—è, –Ω–µ –ø–æ–Ω–∏–º–∞—è –ø–æ—á–µ–º—É!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, —Ç—ã –±—ã–ª –±—ã –º–æ–∏–º –ª—é–±–∏–º—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —Å –∏–¥–µ–∞–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º!",
    "–¢—ã –∫–∞–∫ –∞—Ä–æ–º–∞—Ç —Å–≤–µ–∂–µ–π –≤—ã–ø–µ—á–∫–∏ ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—à—å –º–∏–º–æ –∏ —Å—Ä–∞–∑—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ö–æ—Ä–æ—à–æ!",
    "–¢–≤–æ—ë —á—É–≤—Å—Ç–≤–æ —Å—Ç–∏–ª—è –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –Ω–∞ YouTube —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤!",
    "–¢—ã –∫–∞–∫ –∫–æ–º–ø–∞—Å –≤ –ª–µ—Å—É ‚Äî –±–µ–∑ —Ç–µ–±—è —è –±—ã —Ç–æ—á–Ω–æ –∑–∞–±–ª—É–¥–∏–ª—Å—è –∏ –≥—Ä—É—Å—Ç–∏–ª!",
    "–ï—Å–ª–∏ –±—ã —Ç–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –±—ã–ª–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º, —Ç—ã –±—ã –∑–∞–ø–∏—Ç–∞–ª —Ü–µ–ª—ã–π –≥–æ—Ä–æ–¥!",
    "–¢—ã –∫–∞–∫ –∏–¥–µ–∞–ª—å–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è ‚Äî –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫—Ä–∞—Å–∏–≤—ã–π –∏ —Ö–æ—á–µ—Ç—Å—è —Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—á–Ω–æ!",
    "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–ª—É—à–∞—Ç—å –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—ç—Ç–∫—É ¬´–õ—É—á—à–∏–π —Å–ª—É—à–∞—Ç–µ–ª—å –≥–æ–¥–∞¬ª!",
    "–¢—ã –∫–∞–∫ —Ç—ë–ø–ª–∞—è –≤–∞–Ω–Ω–∞ –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–≥–æ –¥–Ω—è ‚Äî —Ä–∞—Å—Å–ª–∞–±–ª—è–µ—à—å, —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—à—å –∏ –ª–µ—á–∏—à—å!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª —Ü–≤–µ—Ç–∫–æ–º, —Ç—ã –±—ã–ª –±—ã –ø–æ–¥—Å–æ–ª–Ω—É—Ö–æ–º ‚Äî –≤—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ —Å–≤–µ—Ç –∏ –¥–∞—Ä–∏—à—å —Ä–∞–¥–æ—Å—Ç—å!",
    "–¢—ã –∫–∞–∫ –ª—É—á—à–∏–π –º–æ–º–µ–Ω—Ç –≤ —Ñ–∏–ª—å–º–µ ‚Äî —Ö–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã –æ–Ω –¥–ª–∏–ª—Å—è –≤–µ—á–Ω–æ!",
    "–¢–≤–æ—ë –æ–±–∞—è–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ, —á–µ–º –º–æ–π –ø–∞—Ä–æ–ª—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–æ—è—Ç—å!",
    "–¢—ã –∫–∞–∫ –≤–æ–ª—à–µ–±–Ω–∞—è —Ç–∞–±–ª–µ—Ç–∫–∞ –æ—Ç –≥—Ä—É—Å—Ç–∏ ‚Äî –æ–¥–Ω–∞ —Ç–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –∏ –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ö–æ—Ä–æ—à–æ!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª –∫–Ω–∏–≥–æ–π, —è –±—ã –ø—Ä–æ—á–∏—Ç–∞–ª —Ç–µ–±—è —Ç—ã—Å—è—á—É —Ä–∞–∑ –∏ –Ω–µ —É—Å—Ç–∞–ª!",
    "–¢—ã –∫–∞–∫ –ø–µ—Ä–≤–æ–µ —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–ª–Ω—Ü–µ ‚Äî –Ω–µ–∂–Ω–æ–µ, —Ç—ë–ø–ª–æ–µ –∏ –æ–±–µ—â–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å!",
    "–¢–≤–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∂–∏–∑–Ω–∏ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è!",
    "–¢—ã –∫–∞–∫ –ª—É—á—à–∏–π –¥—Ä—É–≥, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –¥–∞–ª–µ–∫–æ!",
    "–ï—Å–ª–∏ –±—ã —Ç–≤–æ–π –ø–æ–∑–∏—Ç–∏–≤ –±—ã–ª –≤–∏—Ä—É—Å–æ–º, —è –±—ã —Ö–æ—Ç–µ–ª –∑–∞—Ä–∞–∑–∏—Ç—å—Å—è –∏–º –Ω–∞–≤—Å–µ–≥–¥–∞!",
    "–¢—ã –∫–∞–∫ –∫–æ–Ω—Ü–µ—Ä—Ç –ª—é–±–∏–º–æ–π –≥—Ä—É–ø–ø—ã ‚Äî –≥—Ä–æ–º–∫–∏–π, —è—Ä–∫–∏–π –∏ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏!",
    "–¢–≤–æ—è –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –æ—Å–ª–µ–ø–ª—è–µ—Ç –º–µ–Ω—è –∫–∞–∫ —Ñ–æ–Ω–∞—Ä–∏–∫ –≤ —Ç–µ–º–Ω–æ—Ç–µ ‚Äî —è—Ä–∫–æ –∏ —Ä–∞–¥–æ—Å—Ç–Ω–æ!",
    "–¢—ã –∫–∞–∫ –¥–æ–º–∞—à–Ω–∏–π —É—é—Ç –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–π –ø—Ä–æ–≥—É–ª–∫–∏ ‚Äî –∂–µ–ª–∞–Ω–Ω—ã–π, —Ç—ë–ø–ª—ã–π –∏ —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–π!",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –±—ã–ª —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–º, —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞ –±—ã–ª–∞ –±—ã ‚Äî –¥–µ–ª–∞—Ç—å –≤—Å–µ—Ö —Å—á–∞—Å—Ç–ª–∏–≤—ã–º–∏!",
    "–¢—ã –∫–∞–∫ –∏–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –≤ —Ä–µ—Ü–µ–ø—Ç–µ ‚Äî –±–µ–∑ —Ç–µ–±—è –±–ª—é–¥–æ –±—ã–ª–æ –±—ã –Ω–µ–ø–æ–ª–Ω—ã–º!",
    "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ, —á–µ–º –º–æ–π –ª—é–±–∏–º—ã–π –ø–ª–µ–π–ª–∏—Å—Ç –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫!",
    "–¢—ã –∫–∞–∫ —Ä–∞—Å—Å–≤–µ—Ç –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–π –Ω–æ—á–∏ ‚Äî –æ–±–µ—â–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ, —Å–≤–µ—Ç–ª–æ–≥–æ –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ!",
    "–ï—Å–ª–∏ –±—ã —Ç–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –±—ã–ª–∞ –º—É–∑—ã–∫–æ–π, –æ–Ω–∞ –∑–≤—É—á–∞–ª–∞ –±—ã –∫–∞–∫ —Å–∏–º—Ñ–æ–Ω–∏—è angels!",
    "–¢—ã –∫–∞–∫ —Ç–æ—Ä—Ç –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî —Å–ª–∞–¥–∫–∏–π, –∂–µ–ª–∞–Ω–Ω—ã–π –∏ –¥–µ–ª–∞–µ—Ç –¥–µ–Ω—å –æ—Å–æ–±–µ–Ω–Ω—ã–º!",
    "–¢–≤–æ—ë —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞ ‚Äî —ç—Ç–æ –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –≤ –º–æ—ë–º –ª—é–±–∏–º–æ–º –±–ª—é–¥–µ!",
    "–¢—ã –∫–∞–∫ –ª—É—á—à–∏–π –º–æ–º–µ–Ω—Ç –¥–Ω—è ‚Äî —Ö–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã –æ–Ω –ø–æ–≤—Ç–æ—Ä—è–ª—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞!",
]

# ============== –ò–ì–†–ò–í–´–ï –°–û–û–ë–©–ï–ù–ò–Ø (–î–õ–Ø –î–ï–í–£–®–ï–ö –í –ß–ê–¢–ï) ==============
# –§—Ä–∞–∑—ã –¥–ª—è /flirt –∫–æ–º–∞–Ω–¥—ã
PLAYFUL_FLIRT = [
    "–û, –∫—Ä–∞—Å–æ—Ç–∫–∞ –≤ —á–∞—Ç–µ! üí´ –¢—ã –¥–µ–ª–∞–µ—à—å —ç—Ç–æ—Ç –±–µ–≥–æ–≤–æ–π –∫–ª—É–± –µ—â—ë –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ–µ!",
    "–≠–π, –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –Ω–µ–∑–Ω–∞–∫–æ–º–∫–∞! üèÉ‚Äç‚ôÄÔ∏è –ù–∞–¥–µ—é—Å—å, —Ç—ã —Å–µ–≥–æ–¥–Ω—è –≤—ã–π–¥–µ—à—å –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É ‚Äî –º—ã –≤—Å–µ –±—É–¥–µ–º –∂–¥–∞—Ç—å!",
    "–ö—Ç–æ —Ç—É—Ç —Ç–∞–∫–∞—è –º–∏–ª–∞—è? üòä –¢–≤–æ—è —É–ª—ã–±–∫–∞ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ–Ω—è (–±–æ—Ç–∞) —Ä–∞–±–æ—Ç–∞—Ç—å –ª—É—á—à–µ!",
    "–ó–Ω–∞–µ—à—å, —Ç—ã –∫–∞–∫ –Ω–æ–≤–∞—è –ø–∞—Ä–∞ –∫—Ä–æ—Å—Å–æ–≤–æ–∫ ‚Äî —Å—Ä–∞–∑—É –∑–∞–º–µ—á–∞–µ—à—å –∏ –Ω–µ –º–æ–∂–µ—à—å –æ—Ç–≤–µ—Å—Ç–∏ –≤–∑–≥–ª—è–¥! üëü‚ú®",
    "–û, —É –Ω–∞—Å –≤ —á–∞—Ç–µ –∫–æ—Ä–æ–ª–µ–≤–∞! üëë –¢—ã —Å–µ–≥–æ–¥–Ω—è —É–∂–µ –ø—Ä–æ–±–µ–∂–∞–ª–∞ —Å–≤–æ–π –∫–∏–ª–æ–º–µ—Ç—Ä –∫—Ä–∞—Å–æ—Ç—ã?",
    "–≠–π, –∫—Ä–∞—Å–∞–≤–∏—Ü–∞! üíñ –ù–∞—à–µ–º—É –±–µ–≥–æ–≤–æ–º—É –∫–ª—É–±—É –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –∏–º–µ–Ω–Ω–æ —Ç–µ–±—è!",
    "–¢—ã –∫–∞–∫ —Å–≤–µ–∂–∏–π –≤–µ—Ç–µ—Ä–æ–∫ —É—Ç—Ä–æ–º ‚Äî –±–æ–¥—Ä–∏—à—å, —Ä–∞–¥—É–µ—à—å –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –Ω–∞ –ø–æ–¥–≤–∏–≥–∏! üåÖ",
    "–ö—Ç–æ-—Ç–æ —Å–µ–≥–æ–¥–Ω—è –≤—ã–≥–ª—è–¥–∏—Ç –æ—Å–æ–±–µ–Ω–Ω–æ! ‚ú® –ù–∞–¥–µ—é—Å—å, —ç—Ç–æ —Ç—ã –∏ —Ç–≤–æ—è –ø—Ä–æ–±–µ–∂–∫–∞ –±—É–¥–µ—Ç —Ç–∞–∫–æ–π –∂–µ —è—Ä–∫–æ–π!",
    "–û–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞–Ω–∏–µ: –≤ —á–∞—Ç–µ –ø–æ—è–≤–∏–ª–∞—Å—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –±–µ–≥—É–Ω—å—è! üèÉ‚Äç‚ôÄÔ∏èüèÜ",
    "–¢—ã –∫–∞–∫ –∑–≤–µ–∑–¥–∞ –Ω–∞ –Ω–µ–±–µ ‚Äî —Å–≤–µ—Ç–∏—à—å —è—Ä–∫–æ –∏ –¥–∞—Ä–∏—à—å –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –≤—Å–µ–º –≤–æ–∫—Ä—É–≥! ‚≠ê",
    "–≠–π, —Å–æ–ª–Ω—ã—à–∫–æ! ‚òÄÔ∏è –¢–≤–æ–π —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –±–µ–≥ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º –∂–µ –ª—ë–≥–∫–∏–º –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º, –∫–∞–∫ —Ç—ã!",
    "–ó–∞–º–µ—Ç–∏–ª, —á—Ç–æ —á–∞—Ç —Å—Ç–∞–ª —è—Ä—á–µ —Å —Ç–≤–æ–∏–º –ø–æ—è–≤–ª–µ–Ω–∏–µ–º! üí´ –¢—ã —Ç–æ—á–Ω–æ –±–µ–≥–∞–µ—à—å –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ—Ö!",
    "–ö—Ä–∞—Å–∞–≤–∏—Ü–∞, —Ç—ã –≥–æ—Ç–æ–≤–∞? üí™ –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –∂–¥—ë—Ç —Å–≤–æ–µ–π –≥–µ—Ä–æ–∏–Ω–∏!",
    "–û, –Ω–∞—à–∞ –∫–æ—Ä–æ–ª–µ–≤–∞ –ø—Ä–æ–±–µ–∂–µ–∫ –≤–µ—Ä–Ω—É–ª–∞—Å—å! üëë –¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –Ω–∞—Å –≤—Å–µ—Ö!",
    "–¢—ã –∫–∞–∫ —É—Ç—Ä–µ–Ω–Ω—è—è —Ä–æ—Å–∞ ‚Äî —Å–≤–µ–∂–∞—è, –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∏ –¥–∞—Ä–∏—à—å –Ω–∞–¥–µ–∂–¥—É –Ω–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å! üå∏",
]

# ============== –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –§–õ–ò–†–¢ ==============
# –§—Ä–∞–∑—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–ª–∏—Ä—Ç–∞, –∫–æ–≥–¥–∞ –¥–µ–≤—É—à–∫–∞ –ø–∏—à–µ—Ç –≤ —á–∞—Ç
CHAT_FLIRT_PHRASES = [
    "üí´ –û, –Ω–∞—à–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –Ω–∞–ø–∏—Å–∞–ª–∞! –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Å–æ–ª–Ω—ã—à–∫–æ?",
    "ü¶ã –≠–π, –∫—Ä–∞—Å–∞–≤–∏—Ü–∞! –†–∞–¥—ã —Ç–µ–±—è —Å–ª—ã—à–∞—Ç—å –≤ —á–∞—Ç–µ!",
    "‚òÄÔ∏è –° —Ç–≤–æ–∏–º –ø–æ—è–≤–ª–µ–Ω–∏–µ–º —á–∞—Ç —Å—Ç–∞–ª –µ—â—ë —è—Ä—á–µ!",
    "‚ú® –û, –Ω–∞—à–∞ –∑–≤–µ–∑–¥–æ—á–∫–∞! –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –º–∏—Ä–µ –±–µ–≥–∞?",
    "üå∏ –ü—Ä–∏–≤–µ—Ç, –∫—Ä–∞—Å–æ—Ç–∫–∞! –¢—ã —Å–µ–≥–æ–¥–Ω—è –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞!",
    "üíê –û, –Ω–∞—à–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –º—É–∑–∞ –ø–æ—è–≤–∏–ª–∞—Å—å! –ö–∞–∫ –¥–µ–ª–∞?",
    "üåü –°–æ–ª–Ω—Ü–µ –≤ —á–∞—Ç–µ! –†–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è –æ–Ω–ª–∞–π–Ω!",
    "ü¶ã –ü—Ä–µ–∫—Ä–∞—Å–Ω–∞—è, —Ç—ã –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å!",
    "üí´ –≠–π, –∫–æ—Ä–æ–ª–µ–≤–∞ –ø—Ä–æ–±–µ–∂–µ–∫! –°–∫—É—á–∞–ª–∏ –ø–æ —Ç–µ–±–µ!",
    "‚òÄÔ∏è –¢—ã –∫–∞–∫ –ª—É—á–∏–∫ —Å–≤–µ—Ç–∞ –≤ –±–µ–≥–æ–≤–æ–º —á–∞—Ç–µ!",
]

# –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ" (–¥–ª—è –≤—Å–µ—Ö)
GOOD_MORNING_PHRASES = [
    "‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü—É—Å—Ç—å –±–µ–≥ —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –≤ —Ä–∞–¥–æ—Å—Ç—å!",
    "üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –±–µ–≥—É–Ω! –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ–±–µ–∂–∫–∏!",
    "üåû –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü—É—Å—Ç—å –∫–∏–ª–æ–º–µ—Ç—Ä—ã –¥–∞—é—Ç—Å—è –ª–µ–≥–∫–æ!",
    "‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, —á–µ–º–ø–∏–æ–Ω! –ñ–¥—É —Ñ–æ—Ç–æ —Å –ø—Ä–æ–±–µ–∂–∫–∏!",
    "üå∏ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü—É—Å—Ç—å –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ç–∏–≤!",
    "‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, —Å–ø–æ—Ä—Ç—Å–º–µ–Ω! –ù–∞ —Å—Ç–∞—Ä—Ç, –≤–Ω–∏–º–∞–Ω–∏–µ, –º–∞—Ä—à!",
    "üåû –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü—É—Å—Ç—å –≤–µ—Ç–µ—Ä –±—É–¥–µ—Ç –ø–æ–ø—É—Ç–Ω—ã–º!",
    "‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –∫—Ä—É—Ç–æ–π –±–µ–≥!",
]

# –§—Ä–∞–∑—ã –¥–ª—è —Ñ–ª–∏—Ä—Ç–∞ –Ω–∞ "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ" –æ—Ç –¥–µ–≤—É—à–µ–∫
GOOD_MORNING_FLIRT_PHRASES = [
    "üí´ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, —Å–æ–ª–Ω—ã—à–∫–æ! ‚òÄÔ∏è –¢—ã –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –æ—Å–≤–µ—â–∞–µ—à—å –Ω–∞—à —á–∞—Ç!",
    "ü¶ã –û, –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ –æ—Ç –Ω–∞—à–µ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π! üå∏ –ü—É—Å—Ç—å –¥–µ–Ω—å –±—É–¥–µ—Ç –≤–æ–ª—à–µ–±–Ω—ã–º!",
    "‚ú® –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –∑–≤–µ–∑–¥–æ—á–∫–∞! ‚≠ê –ü—É—Å—Ç—å –±–µ–≥ —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –≤ —Ä–∞–¥–æ—Å—Ç—å!",
    "üíê –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –∫–æ—Ä–æ–ª–µ–≤–∞! üëë –ü—É—Å—Ç—å –∫–∏–ª–æ–º–µ—Ç—Ä—ã –¥–∞—é—Ç—Å—è –ª–µ–≥–∫–æ!",
    "üå∏ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –∫—Ä–∞—Å–æ—Ç–∫–∞! üíù –ü—É—Å—Ç—å –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ç–∏–≤!",
    "‚òÄÔ∏è –û, –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ –æ—Ç –Ω–∞—à–µ–π —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –º—É–∑—ã! üéÄ –¢—ã –ª—É—á—à–∞—è!",
    "üí´ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, sunshine! üåû –ü—É—Å—Ç—å –ø—Ä–æ–±–µ–∂–∫–∞ –±—É–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ–π!",
    "ü¶ã –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –Ω–∞—à–∞ —Ä–∞–¥–æ—Å—Ç—å! üå∫ –° —Ç–æ–±–æ–π –ª—é–±–æ–µ —É—Ç—Ä–æ –¥–æ–±—Ä–æ–µ!",
]

# –¶–∏—Ç–∞—Ç—ã –∏–∑ —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ" (–¥–ª—è –≤—Å–µ—Ö)
MOVIE_QUOTES = [
    # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã
    "üé¨ ¬´–°–µ–≥–æ–¥–Ω—è –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –æ—Å—Ç–∞–≤—à–µ–π—Å—è –∂–∏–∑–Ω–∏. –ò —Ç—ã —Å–æ–±–∏—Ä–∞–µ—à—å—Å—è –±–µ–∂–∞—Ç—å?¬ª ‚Äî ¬´The Bucket List¬ª",
    "üé¨ ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞. –ö–æ–≥–¥–∞ –±–µ–∂–∏—à—å, –≤–µ—Å—å –º–∏—Ä –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ.¬ª ‚Äî ¬´Chariots of Fire¬ª",
    "üé¨ ¬´–ú–∞—Ä–∞—Ñ–æ–Ω ‚Äî —ç—Ç–æ –Ω–µ –∑–∞–±–µ–≥. –≠—Ç–æ –∏—Å—Ç–æ—Ä–∏—è –æ —Ç–æ–º, –∫–∞–∫ —Ç—ã –Ω–µ —Å–¥–∞—ë—à—å—Å—è.¬ª ‚Äî ¬´Without Limits¬ª",
    "üé¨ ¬´–ö–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —Ü–µ–ª–∏. –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è.¬ª ‚Äî ¬´Rocky¬ª",
    "üé¨ ¬´–¢—ã –º–æ–∂–µ—à—å –±–µ–∂–∞—Ç—å –±—ã—Å—Ç—Ä–æ –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –±–µ–≥–∏.¬ª ‚Äî ¬´Forrest Gump¬ª",
    "üé¨ ¬´–ñ–∏–∑–Ω—å –∫–∞–∫ –ø—Ä–æ–±–µ–∂–∫–∞. –ù–µ–≤–∞–∂–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ —Ç—ã –∏–ª–∏ –±—ã—Å—Ç—Ä–æ ‚Äî —Ç—ã –¥–≤–∏–∂–µ—à—å—Å—è.¬ª ‚Äî ¬´Creed¬ª",
    "üé¨ ¬´–ü–æ–±–µ–¥—ã –¥–æ—Å—Ç–∏–≥–∞—é—Ç —Ç–µ, –∫—Ç–æ –≥–æ—Ç–æ–≤ –±–µ–∂–∞—Ç—å, –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –∏–¥—É—Ç.¬ª ‚Äî ¬´Remember the Titans¬ª",
    "üé¨ ¬´–ù–∞ —Ñ–∏–Ω–∏—à–µ —Ç–µ–±—è –∂–¥—ë—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –º–µ–¥–∞–ª—å, –Ω–æ –∏ —Ç—ã —Å–∞–º.¬ª ‚Äî ¬´Race¬ª",
    "üé¨ ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å —Å–æ —Å–≤–æ–µ–π –¥—É—à–æ–π.¬ª ‚Äî ¬´Soul¬ª",
    "üé¨ ¬´–ö–∏–ª–æ–º–µ—Ç—Ä—ã –ª–æ–∂–∞—Ç—Å—è –≤ –∫–æ–ø–∏–ª–∫—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞.¬ª ‚Äî ¬´Unbroken¬ª",
    "üé¨ ¬´–¢–≤–æ–π —Ç–µ–º–ø –Ω–µ –≤–∞–∂–µ–Ω. –í–∞–∂–Ω–æ ‚Äî —á—Ç–æ —Ç—ã –±–µ–∂–∏—à—å.¬ª ‚Äî ¬´Run Fatboy Run¬ª",
    "üé¨ ¬´–ë–µ–≥ ‚Äî —ç—Ç–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –Ω—É–∂–Ω–æ —Ä–µ—Ü–µ–ø—Ç–∞.¬ª ‚Äî ¬´Eddie the Eagle¬ª",
    
    # ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü¬ª (The Lord of the Rings)
    "üé¨ ¬´–°–º–µ–ª–æ—Å—Ç—å ‚Äî —ç—Ç–æ –Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä–∞—Ö–∞, –∞ —Ä–µ—à–µ–Ω–∏–µ, —á—Ç–æ –µ—Å—Ç—å –Ω–µ—á—Ç–æ –±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–µ, —á–µ–º —Å—Ç—Ä–∞—Ö.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –ë—Ä–∞—Ç—Å—Ç–≤–æ –∫–æ–ª—å—Ü–∞¬ª",
    "üé¨ ¬´–î–∞–∂–µ —Å–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ö–æ–¥ –∏—Å—Ç–æ—Ä–∏–∏.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –ë—Ä–∞—Ç—Å—Ç–≤–æ –∫–æ–ª—å—Ü–∞¬ª",
    "üé¨ ¬´–ù—É–∂–Ω–æ –∏–¥—Ç–∏ –≤–ø–µ—Ä—ë–¥, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –¥–æ—Ä–æ–≥–∞ –∫–∞–∂–µ—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –î–≤–µ –∫—Ä–µ–ø–æ—Å—Ç–∏¬ª",
    "üé¨ ¬´–°–∏–ª–∞ –Ω–µ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã–∏–≥—Ä–∞—Ç—å –±–∏—Ç–≤—É, –∞ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä–æ–ª—è¬ª",
    "üé¨ ¬´–ú–Ω–æ–≥–∏–µ, –∫—Ç–æ —Å–±–∏–ª—Å—è —Å –ø—É—Ç–∏, –±—ã–ª–∏ —Å–ø–∞—Å–µ–Ω—ã —Ç–µ–º–∏, –∫—Ç–æ –Ω–µ —Å–¥–∞–≤–∞–ª—Å—è.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –î–≤–µ –∫—Ä–µ–ø–æ—Å—Ç–∏¬ª",
    "üé¨ ¬´–ü—É—Ç—å –±—É–¥–µ—Ç —Ç—Ä—É–¥–µ–Ω, –Ω–æ –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –µ–≥–æ –¥–æ –∫–æ–Ω—Ü–∞.¬ª ‚Äî ¬´–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –ë—Ä–∞—Ç—Å—Ç–≤–æ –∫–æ–ª—å—Ü–∞¬ª",
    
    # ¬´–•–æ–±–±–∏—Ç¬ª (The Hobbit)
    "üé¨ ¬´–í–ø–µ—Ä–µ–¥–∏ –¥–æ—Ä–æ–≥–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–ª—å–∑—è –ø—Ä–æ–π—Ç–∏, –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–≤—à–∏—Å—å –≤ –ø—É—Ç—å.¬ª ‚Äî ¬´–•–æ–±–±–∏—Ç: –ù–µ–∂–¥–∞–Ω–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ¬ª",
    "üé¨ ¬´–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∑–¥–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –µ—Å–ª–∏ –µ—Å—Ç—å —Ü–µ–ª—å –∏ —Ä–µ—à–∏–º–æ—Å—Ç—å.¬ª ‚Äî ¬´–•–æ–±–±–∏—Ç: –ü—É—Å—Ç–æ—à—å –°–º–∞—É–≥–∞¬ª",
    "üé¨ ¬´–°–∏–ª–∞ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –≥–µ—Ä–æ—è ‚Äî –≤ –≤—ã–±–æ—Ä–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–Ω —Ç—Ä—É–¥–µ–Ω.¬ª ‚Äî ¬´–•–æ–±–±–∏—Ç: –ë–∏—Ç–≤–∞ –ø—è—Ç–∏ –≤–æ–∏–Ω—Å—Ç–≤¬ª",
    "üé¨ ¬´–î–æ—Ä–æ–≥–∞ –ø—Ä–∏–≤–µ–¥—ë—Ç —Ç–µ–±—è —Ç—É–¥–∞, –∫—É–¥–∞ —Ç—ã –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞—Å—Ç—å.¬ª ‚Äî ¬´–•–æ–±–±–∏—Ç: –ù–µ–∂–¥–∞–Ω–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ¬ª",
    "üé¨ ¬´–ù–µ—Ç —Ç–∞–∫–æ–≥–æ –ø–æ–Ω—è—Ç–∏—è, –∫–∞–∫ ¬´–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ¬ª ‚Äî —Ç–æ–ª—å–∫–æ ¬´–µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–æ¬ª.¬ª ‚Äî ¬´–•–æ–±–±–∏—Ç: –ü—É—Å—Ç–æ—à—å –°–º–∞—É–≥–∞¬ª",
    
    # ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã¬ª (Star Wars)
    "üé¨ ¬´–°–¥–µ–ª–∞–π –∏–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–π. –ù–µ –ø—ã—Ç–∞–π—Å—è.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ò–º–ø–µ—Ä–∏—è –Ω–∞–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä¬ª",
    "üé¨ ¬´–°–∏–ª–∞ —Å —Ç–æ–±–æ–π, –Ω–æ —Ç—ã –¥–æ–ª–∂–µ–Ω –Ω–∞—É—á–∏—Ç—å—Å—è –µ—é –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ù–æ–≤–∞—è –Ω–∞–¥–µ–∂–¥–∞¬ª",
    "üé¨ ¬´–°–º–µ–ª–æ—Å—Ç—å –Ω–µ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–µ –±–æ—è—Ç—å—Å—è, –∞ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å—Ç—Ä–∞—Ö.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ —Å–∏–ª—ã¬ª",
    "üé¨ ¬´–¢—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–∑–Ω–∞–µ—à—å, –Ω–∞ —á—Ç–æ —Å–ø–æ—Å–æ–±–µ–Ω, –ø–æ–∫–∞ –Ω–µ –ø–æ–ø—Ä–æ–±—É–µ—à—å.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ù–æ–≤–∞—è –Ω–∞–¥–µ–∂–¥–∞¬ª",
    "üé¨ ¬´–ü—É—Ç—å –¥–∂–µ–¥–∞—è –ø–æ–ª–æ–Ω –∏—Å–ø—ã—Ç–∞–Ω–∏–π, –Ω–æ –∫–æ–Ω–µ—á–Ω–∞—è —Ü–µ–ª—å —Å—Ç–æ–∏—Ç –ª—é–±—ã—Ö —É—Å–∏–ª–∏–π.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ê—Ç–∞–∫–∞ –∫–ª–æ–Ω–æ–≤¬ª",
    "üé¨ ¬´–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–µ–º –º–æ–º–µ–Ω—Ç–µ ‚Äî –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å.¬ª ‚Äî ¬´–ó–≤—ë–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ò–º–ø–µ—Ä–∏—è –Ω–∞–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä¬ª",
    
    # ¬´–ú–∞—Ç—Ä–∏—Ü–∞¬ª (The Matrix)
    "üé¨ ¬´–°–ª–µ–¥—É–π –∑–∞ –±–µ–ª—ã–º –∫—Ä–æ–ª–∏–∫–æ–º.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞¬ª",
    "üé¨ ¬´–¢—ã –≤–∏–¥–∏—à—å –¥–≤–µ—Ä—å? –ü–æ—Ç–æ–º—É —á—Ç–æ —è –µ—ë –≤–∏–∂—É. –ò —Ä–∞–∑ —è –µ—ë –≤–∏–∂—É ‚Äî —Ç—ã —Ç–æ–∂–µ –º–æ–∂–µ—à—å –µ—ë —É–≤–∏–¥–µ—Ç—å.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞: –†–µ–≤–æ–ª—é—Ü–∏—è¬ª",
    "üé¨ ¬´–î–µ–ª–æ –Ω–µ –≤ —Ç–æ–º, –º–æ–∂–µ—à—å —Ç—ã –∏–ª–∏ –Ω–µ—Ç ‚Äî –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Ç—ã –¥–æ–ª–∂–µ–Ω.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞¬ª",
    "üé¨ ¬´–†–µ–∞–ª—å–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∏–ª–ª—é–∑–∏—è, –Ω–æ —Ç—ã –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫–æ–π –æ–Ω–∞ –±—É–¥–µ—Ç.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞¬ª",
    "üé¨ ¬´–ù–µ—Ç –Ω–∏–∫–∞–∫–æ–π –≤–∏–ª–∫–∏. –¢–æ–ª—å–∫–æ –ø—É—Ç—å –≤–ø–µ—Ä—ë–¥.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞: –†–µ–≤–æ–ª—é—Ü–∏—è¬ª",
    "üé¨ ¬´–ü—Ä–æ—Å–Ω–∏—Å—å –∏ –±–µ–≥–∏. –ú–∏—Ä –∂–¥—ë—Ç —Ç–µ–±—è –∑–∞ –¥–≤–µ—Ä—å—é.¬ª ‚Äî ¬´–ú–∞—Ç—Ä–∏—Ü–∞¬ª",
    
    # ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ¬ª (Back to the Future)
    "üé¨ ¬´–ö—É–¥–∞ –±—ã —Ç—ã –Ω–∏ –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è, —Ç—ã –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å—Å—è –¥–æ–º–æ–π.¬ª ‚Äî ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ¬ª",
    "üé¨ ¬´–ë—É–¥—É—â–µ–µ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ —Ç—ã —Å–æ–∑–¥–∞—ë—à—å —Å–≤–æ–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å–µ–≥–æ–¥–Ω—è.¬ª ‚Äî ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ 2¬ª",
    "üé¨ ¬´–ï—Å–ª–∏ —Ç—ã –Ω–µ –≤–µ—Ä–∏—à—å –≤ —Å–µ–±—è ‚Äî –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–≤–µ—Ä–∏—Ç.¬ª ‚Äî ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ¬ª",
    "üé¨ ¬´–í—Ä–µ–º—è ‚Äî —ç—Ç–æ –Ω–µ –≤—Ä–∞–≥, –∞ —Å–æ—é–∑–Ω–∏–∫, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.¬ª ‚Äî ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ 3¬ª",
    "üé¨ ¬´–ö–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç —Ö–æ–¥ –∏—Å—Ç–æ—Ä–∏–∏. –î–µ–π—Å—Ç–≤—É–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ.¬ª ‚Äî ¬´–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ¬ª",
    
    # ¬´–®—Ä–µ–∫¬ª (Shrek)
    "üé¨ ¬´–õ—É—á—à–µ –±—ã—Ç—å –≥—Ä—è–∑–Ω—ã–º, —á–∏—Å—Ç—ã–º —Å–Ω–∞—Ä—É–∂–∏, —á–µ–º —á–∏—Å—Ç—ã–º —Å–Ω–∞—Ä—É–∂–∏ –∏ –≥—Ä—è–∑–Ω—ã–º –≤–Ω—É—Ç—Ä–∏.¬ª ‚Äî ¬´–®—Ä–µ–∫¬ª",
    "üé¨ ¬´–ù–µ—Ç –ª—É—á—à–µ —Å–ø–æ—Å–æ–±–∞ –Ω–∞—á–∞—Ç—å –¥–µ–Ω—å, —á–µ–º —Å —Ö–æ—Ä–æ—à–µ–π –ø—Ä–æ–±–µ–∂–∫–∏ –∫ –∑–∞–∫–∞—Ç—É.¬ª ‚Äî ¬´–®—Ä–µ–∫ 2¬ª",
    "üé¨ ¬´–ö–∞–∂–¥—ã–π –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –º–µ—á—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –æ—Å–µ–ª.¬ª ‚Äî ¬´–®—Ä–µ–∫¬ª",
    "üé¨ ¬´–ü—É—Ç—å –∫ —Ü–µ–ª–∏ —á–∞—Å—Ç–æ –ª–µ–∂–∏—Ç —á–µ—Ä–µ–∑ –±–æ–ª–æ—Ç–æ, –Ω–æ —ç—Ç–æ —Ç–æ–≥–æ —Å—Ç–æ–∏—Ç.¬ª ‚Äî ¬´–®—Ä–µ–∫¬ª",
    "üé¨ ¬´–ù–µ —Å—É–¥–∏ –æ –¥—Ä–∞–∫–æ–Ω–µ –ø–æ –µ–≥–æ –ø–µ—â–µ—Ä–µ ‚Äî —Å—É–¥–∏ –ø–æ –µ–≥–æ –ø–æ–ª—ë—Ç—É.¬ª ‚Äî ¬´–®—Ä–µ–∫ 3¬ª",
    "üé¨ ¬´–ò–Ω–æ–≥–¥–∞ —Ç–æ, —á—Ç–æ –∏—â–µ—à—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä—è–º–æ –∑–∞ —É–≥–ª–æ–º, –µ—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—à—å –∏–¥—Ç–∏.¬ª ‚Äî ¬´–®—Ä–µ–∫ –Ω–∞–≤—Å–µ–≥–¥–∞¬ª",
    
    # ¬´–¢–∞–∫—Å–∏¬ª (Taxi)
    "üé¨ ¬´–ö–æ–≥–¥–∞ –µ–¥–µ—à—å –±—ã—Å—Ç—Ä–æ, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –≤–æ–≤—Ä–µ–º—è –∑–∞—Ç–æ—Ä–º–æ–∑–∏—Ç—å, –Ω–æ –µ—â—ë –≤–∞–∂–Ω–µ–µ ‚Äî –≤–æ–≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏¬ª",
    "üé¨ ¬´–ü–∞—Ä–∏–∂ –Ω–µ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å, –Ω–æ —Ç—ã –º–æ–∂–µ—à—å –æ–±—ä–µ—Ö–∞—Ç—å –µ–≥–æ –∑–∞ 20 –º–∏–Ω—É—Ç.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏ 2¬ª",
    "üé¨ ¬´–ì–æ–Ω–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ —Ü–µ–ª—å, –∞ —Å–ø–æ—Å–æ–± –¥–æ–∫–∞–∑–∞—Ç—å —Å–µ–±–µ, —á—Ç–æ —Ç—ã —Å–ø–æ—Å–æ–±–µ–Ω –Ω–∞ –±–æ–ª—å—à–µ–µ.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏ 4¬ª",
    "üé¨ ¬´–ú–∞—à–∏–Ω–∞ ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –í–æ–¥–∏—Ç–µ–ª—å ‚Äî –≤–æ—Ç –∫—Ç–æ —Ä–µ—à–∞–µ—Ç, –∫—É–¥–∞ –µ—Ö–∞—Ç—å.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏¬ª",
    "üé¨ ¬´–ö–∞–∂–¥—ã–π –ø–æ–≤–æ—Ä–æ—Ç ‚Äî —ç—Ç–æ —à–∞–Ω—Å –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏ 3¬ª",
    "üé¨ ¬´–°–∫–æ—Ä–æ—Å—Ç—å –±–µ–∑ —Ü–µ–ª–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ —à—É–º. –¶–µ–ª—å –±–µ–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –º–µ—á—Ç–∞.¬ª ‚Äî ¬´–¢–∞–∫—Å–∏¬ª",
]

# –ö—ç—à –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —á–∞—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (—á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å)
# {user_id: timestamp_last_flirt}
girl_flirt_cache = {}
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Ñ–ª–∏—Ä—Ç–∞–º–∏ –æ—Ç –±–æ—Ç–∞ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
FLIRT_COOLDOWN = 1800  # 30 –º–∏–Ω—É—Ç


def get_random_flirt() -> str:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –∏–≥—Ä–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /flirt"""
    return random.choice(PLAYFUL_FLIRT)


user_anon_state = {}

# ============== –ù–û–ß–ù–´–ï –°–û–û–ë–©–ï–ù–ò–Ø ==============
NIGHT_WARNINGS = [
    "üåô –•–≤–∞—Ç–∏—Ç –ø–∏—Å–∞—Ç—å, —Å–ø–∞—Ç—å –ø–æ—Ä–∞! –¢–µ–ª–µ–ø—É–∑–∏–∫–∏ —É–∂–µ —É—Å–Ω—É–ª–∏!",
    "üò¥ –ù–∞—Ä–æ–¥, 22:00! –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ ‚Äî –≤—Ä–∞–≥ —Å–Ω–∞!",
    "üõèÔ∏è –≠–π, –≤—ã —Ç–∞–º! –ó–∞–≤—Ç—Ä–∞ –±–µ–≥–∞—Ç—å, –∞ –≤—ã –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ!",
    "üí§ –ö—Ç–æ –Ω–µ —Å–ø–∏—Ç ‚Äî —Ç–æ—Ç –Ω–µ –±–µ–≥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ!",
    "üåÉ –ù–æ—á—å –Ω–∞ –¥–≤–æ—Ä–µ, –∞ –≤—ã –≤—Å—ë —á–∞—Ç–∏—Ç–µ—Å—å!",
    "üò± –í—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤—Ç—Ä–∞ –±–µ–≥–∞—Ç—å –∫–∞–∫ –∑–æ–º–±–∏?",
    "üé≠ –•–≤–∞—Ç–∏—Ç –∏–≥—Ä–∞—Ç—å –≤ –Ω–æ—á–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤, –∏–¥–∏—Ç–µ —Å–ø–∞—Ç—å!",
    "üîÆ –í–æ–ª—à–µ–±—Å—Ç–≤–æ –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –±–µ–≥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Å–Ω–∞!",
    "ü¶• –£—Ç—Ä–µ–Ω–Ω–∏–π –±–µ–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≤–µ—á–Ω–æ–≥–æ —Å–Ω–∞!",
    "üåü –ó–≤—ë–∑–¥—ã —É–∂–µ –≤—ã—à–ª–∏, –∞ –≤—ã –µ—â—ë –≤ —á–∞—Ç–µ!",
]

# ============== –ü–†–ò–í–ï–¢–°–¢–í–ò–Ø –í–û–ó–í–†–ê–©–ï–ù–¶–ï–í ==============
RETURN_GREETINGS = [
    "–û–æ–æ–æ, –∫–∞–∫–∏–µ –ª—é–¥–∏ –∏ –±–µ–∑ –æ—Ö—Ä–∞–Ω—ã! üï¥Ô∏è –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –±–æ—Å—Å!",
    "üéâ –û–≥–æ, –∫—Ç–æ —ç—Ç–æ –≤–µ—Ä–Ω—É–ª—Å—è! –ú—ã —É–∂–µ –∑–∞–±—ã–ª–∏, –∫–∞–∫ —Ç—ã –≤—ã–≥–ª—è–¥–∏—à—å!",
    "üòÆ –£—Ö —Ç—ã! –õ–µ–≥–µ–Ω–¥–∞ –æ–±—ä—è–≤–∏–ª–∞—Å—å! –ì–¥–µ —Ç—ã –±—ã–ª —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏?",
    "üôå –°–º–æ—Ç—Ä–∏—Ç–µ-–∫–∞, –Ω–∞—à –≥–µ—Ä–æ–π —Å–Ω–æ–≤–∞ –≤ —Å—Ç—Ä–æ—é! –ü—Ä–æ–ø–∞–¥–∞–ª ‚Äî –Ω–µ–±–æ—Å—å, –º–∞—Ä–∞—Ñ–æ–Ω –±–µ–≥–∞–ª!",
    "üëÄ –ö—Ç–æ —ç—Ç–æ –ø–∏—à–µ—Ç? –ü—Ä–∏–∑—Ä–∞–∫ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ! –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º –≤ –º–∏—Ä –∂–∏–≤—ã—Ö!",
    "üöÄ –û–ø–∞-–Ω–∞! –ù–∞—à –∫–æ—Å–º–æ–Ω–∞–≤—Ç –ø—Ä–∏–∑–µ–º–ª–∏–ª—Å—è! –ö–∞–∫ —Ç–∞–º –≤ –æ—Ç–ø—É—Å–∫–µ –æ—Ç —á–∞—Ç–∞?",
    "üé© –ë–∞! –ë–∞! –ë–∞! –ö–∞–∫–∏–µ –≥–æ—Å—Ç–∏! –î–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏—Å—å, –∞ —Ç—ã –≤—Å—ë –µ—â—ë –±–µ–≥–∞–µ—à—å?",
    "üòé –õ–µ–≥–µ–Ω–¥–∞ –≤ —á–∞—Ç–µ! –ú—ã —É–∂–µ —Ö–æ—Ç–µ–ª–∏ –≤–µ—à–∞—Ç—å —Ç–≤–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç –Ω–∞ —Å—Ç–µ–Ω—É!",
    "üèÜ –û, –≤–µ–ª–∏–∫–∏–π –≤–µ—Ä–Ω—É–ª—Å—è! –ë–µ–∑ —Ç–µ–±—è —á–∞—Ç —Å–æ–≤—Å–µ–º —Å–∫—É—á–∞–ª (–Ω–µ—Ç)!",
    "üåü –°–≤–µ—Ç –º–æ–π, –≤–µ—Ä–Ω—É–ª—Å—è! –ó–∞–∂–¥–∞–ª–∏—Å—å –º—ã —Ç–µ–±—è, –∞–∂ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ!",
    "üé™ –¶–∏—Ä–∫ –≤ –≥–æ—Ä–æ–¥–µ! –ó–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç—å –ø–æ—á—Ç–∏–ª–∞ –Ω–∞—Å —Å–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º!",
    "ü§¥ –ü—Ä–∏–Ω—Ü –≤–µ—Ä–Ω—É–ª—Å—è –≤ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ! –¢—Ä–æ–Ω –∂–¥—ë—Ç, –≤–∞—à–µ –≤–µ–ª–∏—á–µ—Å—Ç–≤–æ!",
    "ü¶Å –¶–∞—Ä—å –ª–µ—Å–æ–≤ –æ–±—ä—è–≤–∏–ª—Å—è! –ü—Ä–æ–ø–∞–¥–∞–ª ‚Äî –æ—Ö–æ—Ç–∏–ª—Å—è –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω—ã?",
    "üé∏ –†–æ–∫-–∑–≤–µ–∑–¥–∞ –≤ —á–∞—Ç–µ! –ì–¥–µ –±—ã–ª –Ω–∞ –≥–∞—Å—Ç—Ä–æ–ª—è—Ö, –≤ –±–µ–≥–µ –ø–æ –±–∞—Ä—Ö–∞–Ω–∞–º?",
    "üëë –ö–æ—Ä–æ–Ω–∞ —É–ø–∞–ª–∞! –ö–æ—Ä–æ–ª—å –≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ —Ç—Ä–æ–Ω! –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º!",
    "üßô –ú–∞–≥ –≤–µ—Ä–Ω—É–ª—Å—è –∏–∑ –∑–∞—Ç–æ—á–µ–Ω–∏—è! –ß–∞—Ä—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç?",
    "ü¶∏ –°—É–ø–µ—Ä–≥–µ—Ä–æ–π —Å–ø–∞—Å –º–∏—Ä –∏ –≤–µ—Ä–Ω—É–ª—Å—è! –ö–∞–∫ —Ç–∞–º, –º–Ω–æ–≥–æ –∑–ª–∞ –ø–æ–±–µ–¥–∏–ª?",
    "üé≠ –ê–∫—Ç—ë—Ä –≤—ã—à–µ–ª –Ω–∞ —Å—Ü–µ–Ω—É! –î–∞–≤–Ω–æ –Ω–µ –±—ã–ª–∏ –≤ –≥–ª–∞–≤–Ω–æ–π —Ä–æ–ª–∏!",
    "üê≤ –î—Ä–∞–∫–æ–Ω –∏–∑ –ø–µ—â–µ—Ä—ã –≤—ã–ø–æ–ª–∑! –ì–¥–µ –ø—Ä—è—Ç–∞–ª—Å—è –æ—Ç –±–µ–≥–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫?",
    "ü¶Ö –û—Ä—ë–ª –ø—Ä–∏–ª–µ—Ç–µ–ª! –í—ã—Å–æ–∫–æ –ø–∞—Ä–∏–ª –Ω–∞–¥ –Ω–∞–º–∏ –≤—Å–µ —ç—Ç–∏ –¥–Ω–∏?",
]


# ============== –ü–û–ì–û–î–ê ==============
async def get_weather() -> str:
    try:
        async with httpx.AsyncClient() as client:
            async def fetch_city_weather(city_label: str, lat: float, lon: float) -> str:
                """–í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –¥–∞–∂–µ –µ—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"""
                try:
                    resp = await client.get(
                        "https://api.open-meteo.com/v1/forecast",
                        params={
                            "latitude": lat,
                            "longitude": lon,
                            "current_weather": "true",
                        },
                        timeout=10.0,
                    )
                    data = resp.json()
                    current = data.get("current_weather") or {}
                    temp = current.get("temperature")
                    wind = current.get("windspeed")
                    if temp is None or wind is None:
                        return f"{city_label}: *–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã*"
                    return f"{city_label}: **{temp}¬∞C**, –≤–µ—Ç–µ—Ä {wind} –∫–º/—á"
                except Exception as e:
                    logger.warning(f"[WEATHER] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è {city_label}: {e}")
                    return f"{city_label}: *–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã*"

            # –ú–æ—Å–∫–≤–∞, –°–ü–±, –ò–∂–µ–≤—Å–∫ - –í–°–ï–ì–î–ê –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ç—Ä–∏ –≥–æ—Ä–æ–¥–∞
            lines = []
            lines.append(await fetch_city_weather("üèô –ú–æ—Å–∫–≤–∞", 55.7558, 37.6173))
            lines.append(await fetch_city_weather("üåÜ –°–ü–±", 59.9343, 30.3351))
            lines.append(await fetch_city_weather("üåá –ò–∂–µ–≤—Å–∫", 56.8498, 53.2045))

            # –¢–µ–ø–µ—Ä—å lines –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 3 —ç–ª–µ–º–µ–Ω—Ç–∞ (–¥–∞–∂–µ –µ—Å–ª–∏ "–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")
            return "üå§ **–ü–æ–≥–æ–¥–∞ —É—Ç—Ä–æ–º:**\n" + "\n".join(lines)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã: {e}")
        # –í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –≥–æ—Ä–æ–¥–∞
        return "üå§ **–ü–æ–≥–æ–¥–∞ —É—Ç—Ä–æ–º:**\nüèô –ú–æ—Å–∫–≤–∞: *–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã*\nüåÜ –°–ü–±: *–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã*\nüåá –ò–∂–µ–≤—Å–∫: *–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã*"


# ============== –£–¢–†–ï–ù–ù–ï–ï –ü–†–ò–í–ï–¢–°–¢–í–ò–ï ==============
def get_day_theme() -> str:
    now = datetime.now(MOSCOW_TZ)
    day_name_en = now.strftime("%A")
    return DAY_THEMES.get(day_name_en, "üåü –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ–±–µ–∂–∫–∏!")


def get_random_welcome() -> str:
    return random.choice(WELCOME_MESSAGES)


def get_random_motivation() -> str:
    return random.choice(MOTIVATION_QUOTES)


def get_marathon_training_plan() -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–ª–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –º–∞—Ä–∞—Ñ–æ–Ω—É 03.05.2026.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –ø–ª–∞–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.
    """
    try:
        now = datetime.now(MOSCOW_TZ)
        marathon_date = datetime(2026, 5, 3, tzinfo=MOSCOW_TZ)
        days_left = (marathon_date - now).days
        
        if days_left < 0:
            return ""  # –ú–∞—Ä–∞—Ñ–æ–Ω —É–∂–µ –ø—Ä–æ—à—ë–ª
        
        if days_left > 120:
            phase = "–±–∞–∑–æ–≤–∞—è"
        elif days_left > 60:
            phase = "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è"
        elif days_left > 14:
            phase = "–ø–∏–∫–æ–≤–∞—è"
        else:
            phase = "—Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏"
        
        day_of_week = now.weekday()  # 0=–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 6=–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
        
        # –ü–ª–∞–Ω –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
        if day_of_week == 0:  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
            plan = "üéØ **–ë–∞–∑–æ–≤—ã–π –±–µ–≥**\n   ‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è: 8-10 –∫–º\n   ‚Ä¢ –¢–µ–º–ø: –ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π\n   ‚Ä¢ –í—Ä–µ–º—è: 45-55 –º–∏–Ω"
        elif day_of_week == 1:  # –í—Ç–æ—Ä–Ω–∏–∫
            plan = "üéØ **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã**\n   ‚Ä¢ –†–∞–∑–º–∏–Ω–∫–∞: 2 –∫–º\n   ‚Ä¢ –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã: 5√ó800–º (–±—ã—Å—Ç—Ä–æ) + 400–º (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)\n   ‚Ä¢ –ó–∞–º–∏–Ω–∫–∞: 2 –∫–º\n   ‚Ä¢ –í—Å–µ–≥–æ: ~8 –∫–º"
        elif day_of_week == 2:  # –°—Ä–µ–¥–∞
            plan = "üéØ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–≥**\n   ‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è: 5-7 –∫–º\n   ‚Ä¢ –¢–µ–º–ø: –†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π (–ª–µ–≥–∫–æ)\n   ‚Ä¢ –í—Ä–µ–º—è: 30-40 –º–∏–Ω\n   ‚Ä¢ –¶–µ–ª—å: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
        elif day_of_week == 3:  # –ß–µ—Ç–≤–µ—Ä–≥
            plan = "üéØ **–¢–µ–º–ø–æ–≤–æ–π –±–µ–≥**\n   ‚Ä¢ –†–∞–∑–º–∏–Ω–∫–∞: 2 –∫–º\n   ‚Ä¢ –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å: 6 –∫–º –≤ —Ç–µ–º–ø–µ –º–∞—Ä–∞—Ñ–æ–Ω–∞\n   ‚Ä¢ –ó–∞–º–∏–Ω–∫–∞: 2 –∫–º\n   ‚Ä¢ –í—Å–µ–≥–æ: ~10 –∫–º"
        elif day_of_week == 4:  # –ü—è—Ç–Ω–∏—Ü–∞
            plan = "üéØ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–≥**\n   ‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è: 5-6 –∫–º\n   ‚Ä¢ –¢–µ–º–ø: –û—á–µ–Ω—å –ª–µ–≥–∫–æ\n   ‚Ä¢ –í—Ä–µ–º—è: 30-35 –º–∏–Ω"
        elif day_of_week == 5:  # –°—É–±–±–æ—Ç–∞
            if days_left > 14:
                long_distance = min(18 + (120 - days_left) // 7, 32)  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ 32 –∫–º
                plan = f"üéØ **–î–ª–∏–Ω–Ω—ã–π –±–µ–≥**\n   ‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è: {long_distance}-{min(long_distance+2, 32)} –∫–º\n   ‚Ä¢ –¢–µ–º–ø: –ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π (–Ω–∞ 30-60 —Å–µ–∫/–∫–º –º–µ–¥–ª–µ–Ω–Ω–µ–µ –º–∞—Ä–∞—Ñ–æ–Ω—Å–∫–æ–≥–æ)\n   ‚Ä¢ –í—Ä–µ–º—è: {long_distance//6}-{long_distance//5} –º–∏–Ω\n   ‚Ä¢ –¶–µ–ª—å: –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å"
            else:
                plan = "üéØ **–õ–µ–≥–∫–∏–π –¥–ª–∏–Ω–Ω—ã–π –±–µ–≥**\n   ‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏—è: 12-15 –∫–º\n   ‚Ä¢ –¢–µ–º–ø: –û—á–µ–Ω—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π\n   ‚Ä¢ –í—Ä–µ–º—è: 1:15-1:30"
        else:  # –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
            plan = "üéØ **–û—Ç–¥—ã—Ö –∏–ª–∏ –ª–µ–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**\n   ‚Ä¢ –ü—Ä–æ–≥—É–ª–∫–∞: 30-40 –º–∏–Ω\n   ‚Ä¢ –ò–ª–∏: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–≥ 3-5 –∫–º\n   ‚Ä¢ –¶–µ–ª—å: –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
        
        return f"üèÉ‚Äç‚ôÇÔ∏è **–ü–ª–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∫ –º–∞—Ä–∞—Ñ–æ–Ω—É 03.05.2026**\nüìÖ –î–æ —Å—Ç–∞—Ä—Ç–∞: {days_left} –¥–Ω–µ–π ({phase})\n{plan}"
    
    except Exception as e:
        logger.error(f"[TRAINING] –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞: {e}")
        return ""


def get_random_insult() -> str:
    return random.choice(FUNNY_INSULTS)


def get_random_compliment() -> str:
    return random.choice(FUNNY_COMPLIMENTS)


def get_random_roast() -> str:
    return random.choice(PLAYFUL_ROASTS)


# –®–∞–±–ª–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π daily_stats (–∑–∞—â–∏—Ç–∞ –æ—Ç KeyError –ø—Ä–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–∞–Ω–∞–ª–∞)
_DAILY_STATS_DEFAULTS = {
    "total_messages": 0,
    "user_messages": {},
    "photos": [],
    "first_photo_user_id": None,
    "first_photo_user_name": None,
}


# ============== –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –°–¢–ê–¢–ò–°–¢–ò–ö–ò ==============
def update_daily_stats(user_id: int, user_name: str, message_type: str, photo_info: dict = None):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    global daily_stats
    
    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    
    # –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π (–Ω–∞ —Å–ª—É—á–∞–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–µ–∑ —á–∞—Å—Ç–∏ –ø–æ–ª–µ–π)
    for key, default in _DAILY_STATS_DEFAULTS.items():
        if key not in daily_stats:
            daily_stats[key] = None if default is None else type(default)()
    
    daily_stats["total_messages"] += 1
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user_id not in daily_stats["user_messages"]:
        # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown –≤ –∏–º–µ–Ω–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
        safe_name = user_name.replace('(', '\\(').replace(')', '\\)') if user_name else "Unknown"
        daily_stats["user_messages"][user_id] = {
            "name": safe_name,
            "count": 0,
        }
    daily_stats["user_messages"][user_id]["count"] += 1
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É + —Ç—Ä–µ–∫ –ø–µ—Ä–≤–æ–≥–æ —Ñ–æ—Ç–æ
    if message_type == "photo" and photo_info:
        if "photos" not in daily_stats:
            daily_stats["photos"] = []
        daily_stats["photos"].append(photo_info)
        # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ —Ñ–æ—Ç–æ (–¥–ª—è –¥–≤–æ–π–Ω—ã—Ö –±–∞–ª–ª–æ–≤)
        if daily_stats.get("first_photo_user_id") is None:
            daily_stats["first_photo_user_id"] = user_id
            # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –∏–º—è –¥–ª—è Markdown
            safe_name = user_name.replace('(', '\\(').replace(')', '\\)') if user_name else "Unknown"
            daily_stats["first_photo_user_name"] = safe_name


# ============== –†–ê–°–ß–Å–¢ –†–ï–ô–¢–ò–ù–ì–ê ==============
def calculate_user_rating(user_id: int) -> int:
    """–†–∞—Å—á—ë—Ç –æ–±—â–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if user_id not in user_rating_stats:
        return 0
    
    stats = user_rating_stats[user_id]
    
    messages_points = stats["messages"] // POINTS_PER_MESSAGES
    photos_points = stats["photos"] // POINTS_PER_PHOTOS
    likes_points = stats["likes"] // POINTS_PER_LIKES
    replies_points = stats["replies"]  # –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç = 1 –±–∞–ª–ª
    bonus_points = stats.get("bonus_points", 0)  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–ª–ª—ã –∑–∞ –ø–æ–±–µ–¥—ã
    
    return messages_points + photos_points + likes_points + replies_points + bonus_points


def get_user_level(user_id: int) -> str:
    """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —É—á–∞—Å—Ç–Ω–∏–∫–∞"""
    total_points = calculate_user_rating(user_id)
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ –æ—á–∫–∞–º (–æ—Ç –≤—ã—Å–æ–∫–æ–≥–æ –∫ –Ω–∏–∑–∫–æ–º—É)
    if total_points >= USER_LEVELS["–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞"]:
        return "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞"
    elif total_points >= USER_LEVELS["–õ–∏–¥–µ—Ä"]:
        return "–õ–∏–¥–µ—Ä"
    elif total_points >= USER_LEVELS["–ê–∫—Ç–∏–≤–Ω—ã–π"]:
        return "–ê–∫—Ç–∏–≤–Ω—ã–π"
    else:
        return "–ù–æ–≤–∏—á–æ–∫"


def get_rating_details(user_id: int) -> dict:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞"""
    if user_id not in user_rating_stats:
        return {
            "name": "Unknown",
            "messages": 0,
            "photos": 0,
            "likes": 0,
            "replies": 0,
            "total_points": 0,
            "level": "–ù–æ–≤–∏—á–æ–∫"
        }
    
    stats = user_rating_stats[user_id]
    level = get_user_level(user_id)
    
    return {
        "name": stats["name"],
        "messages": stats["messages"],
        "photos": stats["photos"],
        "likes": stats["likes"],
        "replies": stats["replies"],
        "total_points": calculate_user_rating(user_id),
        "level": level
    }


# ============== –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ë–ï–ì–ê ==============
async def update_running_stats(user_id: int, user_name: str, distance: float, duration: int, calories: int):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–Ω–∞–∫–æ–ø–ª—å–Ω–∞—è)"""
    global user_running_stats

    if user_id not in user_running_stats:
        user_running_stats[user_id] = {
            "name": user_name,
            "activities": 0,
            "distance": 0.0,
            "duration": 0,
            "calories": 0
        }

    user_running_stats[user_id]["activities"] += 1
    user_running_stats[user_id]["distance"] += distance
    user_running_stats[user_id]["duration"] = duration
    user_running_stats[user_id]["calories"] = calories

    # –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    update_daily_running_stats(user_id, user_name, distance, duration, calories)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–±–µ–∂–µ–∫ –≤ –∫–∞–Ω–∞–ª
    await save_user_running_stats()


def update_daily_running_stats(user_id: int, user_name: str, distance: float, duration: int, calories: int):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞"""
    global daily_running_stats

    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")

    if user_id not in daily_running_stats:
        daily_running_stats[user_id] = {
            "name": user_name,
            "activities": 0,
            "distance": 0.0,
            "duration": 0,
            "calories": 0,
            "date": today
        }

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–æ–≤—ã–π –ª–∏ –¥–µ–Ω—å
    if daily_running_stats[user_id]["date"] != today:
        # –ù–æ–≤—ã–π –¥–µ–Ω—å - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
        daily_running_stats[user_id] = {
            "name": user_name,
            "activities": 0,
            "distance": 0.0,
            "duration": 0,
            "calories": 0,
            "date": today
        }

    daily_running_stats[user_id]["activities"] += 1
    daily_running_stats[user_id]["distance"] += distance
    daily_running_stats[user_id]["duration"] = duration
    daily_running_stats[user_id]["calories"] = calories


def save_daily_running_to_weekly():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –Ω–µ–¥–µ–ª—å–Ω—É—é (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—á—å)"""
    global daily_running_stats, weekly_running_stats

    today = datetime.now(MOSCOW_TZ)
    week_start = today - timedelta(days=today.weekday())
    week_start_str = week_start.strftime("%Y-%m-%d")

    for user_id, data in daily_running_stats.items():
        user_name = data["name"]

        if user_id not in weekly_running_stats:
            weekly_running_stats[user_id] = {
                "name": user_name,
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0,
                "week_start": week_start_str
            }

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–æ–≤—ã–π –ª–∏ –ø–µ—Ä–∏–æ–¥ –Ω–µ–¥–µ–ª–∏
        if weekly_running_stats[user_id]["week_start"] != week_start_str:
            # –ù–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥ –Ω–µ–¥–µ–ª–∏ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
            weekly_running_stats[user_id] = {
                "name": user_name,
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0,
                "week_start": week_start_str
            }

        weekly_running_stats[user_id]["activities"] += data["activities"]
        weekly_running_stats[user_id]["distance"] += data["distance"]
        weekly_running_stats[user_id]["duration"] += data["duration"]
        weekly_running_stats[user_id]["calories"] += data["calories"]

    logger.info(f"[RUNNING] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –Ω–µ–¥–µ–ª—å–Ω—É—é ({len(daily_running_stats)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)")


def save_daily_running_to_monthly():
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –º–µ—Å—è—á–Ω—É—é (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—á—å)"""
    global daily_running_stats, monthly_running_stats

    today = datetime.now(MOSCOW_TZ)
    month_str = today.strftime("%Y-%m")

    for user_id, data in daily_running_stats.items():
        user_name = data["name"]

        if user_id not in monthly_running_stats:
            monthly_running_stats[user_id] = {
                "name": user_name,
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0,
                "month": month_str
            }

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–æ–≤—ã–π –ª–∏ –º–µ—Å—è—Ü
        if monthly_running_stats[user_id]["month"] != month_str:
            # –ù–æ–≤—ã–π –º–µ—Å—è—Ü - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
            monthly_running_stats[user_id] = {
                "name": user_name,
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0,
                "month": month_str
            }

        monthly_running_stats[user_id]["activities"] += data["activities"]
        monthly_running_stats[user_id]["distance"] += data["distance"]
        monthly_running_stats[user_id]["duration"] += data["duration"]
        monthly_running_stats[user_id]["calories"] += data["calories"]

    logger.info(f"[RUNNING] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –º–µ—Å—è—á–Ω—É—é ({len(daily_running_stats)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)")


def reset_daily_running_stats():
    """–°–±—Ä–æ—Å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—á—å)"""
    global daily_running_stats
    daily_running_stats = {}
    logger.info("[RUNNING] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ —Å–±—Ä–æ—à–µ–Ω–∞")


def get_top_weekly_runners() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-10 –±–µ–≥—É–Ω–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é"""
    global weekly_running_stats

    if not weekly_running_stats:
        return []

    runners = []
    for user_id, stats in weekly_running_stats.items():
        runners.append({
            "user_id": user_id,
            "name": stats["name"],
            "activities": stats["activities"],
            "distance": stats["distance"],
            "duration": stats["duration"],
            "calories": stats["calories"]
        })

    runners.sort(key=lambda x: x["distance"], reverse=True)
    return runners[:10]


def get_top_monthly_runners() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-10 –±–µ–≥—É–Ω–æ–≤ –∑–∞ –º–µ—Å—è—Ü"""
    global monthly_running_stats

    if not monthly_running_stats:
        return []

    runners = []
    for user_id, stats in monthly_running_stats.items():
        runners.append({
            "user_id": user_id,
            "name": stats["name"],
            "activities": stats["activities"],
            "distance": stats["distance"],
            "duration": stats["duration"],
            "calories": stats["calories"]
        })

    runners.sort(key=lambda x: x["distance"], reverse=True)
    return runners[:10]


def get_top_runners() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-10 –±–µ–≥—É–Ω–æ–≤ –ø–æ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–º –∑–∞ –º–µ—Å—è—Ü"""
    global user_running_stats
    
    if not user_running_stats:
        return []
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
    runners = []
    for user_id, stats in user_running_stats.items():
        runners.append({
            "user_id": user_id,
            "name": stats["name"],
            "activities": stats["activities"],
            "distance": stats["distance"],
            "duration": stats["duration"],
            "calories": stats["calories"]
        })
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–º (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
    runners.sort(key=lambda x: x["distance"], reverse=True)
    
    return runners[:10]


async def send_weekly_running_summary():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ –±–µ–≥—É (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 23:00)"""
    global application, weekly_running_stats

    try:
        if not weekly_running_stats:
            logger.info("[RUNNING] –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏ (weekly_running_stats –ø—É—Å—Ç)")
            return

        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        week_num = now.isocalendar()[1]
        year = now.year

        # –°—á–∏—Ç–∞–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –ù–ï–î–ï–õ–Æ
        total_activities = sum(stats["activities"] for stats in weekly_running_stats.values())
        total_distance = sum(stats["distance"] for stats in weekly_running_stats.values()) / 1000  # –≤ –∫–º
        total_calories = sum(stats["calories"] for stats in weekly_running_stats.values())

        # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ø –±–µ–≥—É–Ω–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é
        top_runners = get_top_weekly_runners()

        weekly_text = f"üèÉ‚Äç‚ôÇÔ∏è **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –±–µ–≥—É (–ù–µ–¥–µ–ª—è #{week_num}, {year})**\n\n"

        # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–¥–µ–ª–∏
        weekly_text += f"üìä **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é:**\n"
        weekly_text += f"üèÉ‚Äç‚ôÇÔ∏è –í—Å–µ–≥–æ –ø—Ä–æ–±–µ–∂–µ–∫: {total_activities}\n"
        weekly_text += f"üìç –û–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è: {total_distance:.1f} –∫–º\n"
        weekly_text += f"üî• –°–æ–∂–∂–µ–Ω–æ –∫–∞–ª–æ—Ä–∏–π: {total_calories}\n"
        weekly_text += f"üë• –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–µ–≥–∞: {len(weekly_running_stats)}\n\n"

        # –¢–æ–ø-3 –±–µ–≥—É–Ω–æ–≤
        if top_runners:
            medals = ["ü•á", "ü•à", "ü•â"]
            weekly_text += f"üèÜ **–¢–æ–ø –±–µ–≥—É–Ω–æ–≤ –Ω–µ–¥–µ–ª–∏:**\n"
            for i, runner in enumerate(top_runners[:3]):
                distance_km = runner["distance"] / 1000
                safe_name = escape_markdown(runner['name'])
                weekly_text += f"{medals[i]} {safe_name} ‚Äî {distance_km:.1f} –∫–º \\({runner['activities']} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\\)\n"
            weekly_text += "\n"

        # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö
        weekly_text += "üìù **–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏:**\n"
        for runner in top_runners:
            distance_km = runner["distance"] / 1000
            safe_name = escape_markdown(runner['name'])
            weekly_text += f"‚Ä¢ {safe_name}: {distance_km:.1f} –∫–º \\({runner['activities']} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\\)\n"

        # –ú–æ—Ç–∏–≤–∞—Ü–∏—è - —Ü–∏—Ç–∞—Ç–∞ –≤–µ–ª–∏–∫–æ–≥–æ –±–µ–≥—É–Ω–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞
        quote = random.choice(GREAT_RUNNER_QUOTES)
        weekly_text += "\n" + "="*40 + "\n"
        weekly_text += f"üí¨ **–°–ª–æ–≤–∞ –≤–µ–ª–∏–∫–∏—Ö –±–µ–≥—É–Ω–æ–≤:**\n"
        weekly_text += f"{quote}\n"
        weekly_text += "="*40 + "\n"

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                message_thread_id=NEWS_TOPIC_ID,
                text=weekly_text,
                parse_mode="Markdown"
            )

        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–µ–¥–µ–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
        weekly_running_stats.clear()
        logger.info("[RUNNING] –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –±–µ–≥—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞")

    except Exception as e:
        logger.error(f"[RUNNING] –û—à–∏–±–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}", exc_info=True)


async def send_monthly_running_summary():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ –±–µ–≥—É (–ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞)"""
    global application, monthly_running_stats

    try:
        if not monthly_running_stats:
            logger.info("[RUNNING] –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏ (monthly_running_stats –ø—É—Å—Ç)")
            return

        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        month_name = now.strftime("%B %Y")

        # –°—á–∏—Ç–∞–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –ú–ï–°–Ø–¶
        total_activities = sum(stats["activities"] for stats in monthly_running_stats.values())
        total_distance = sum(stats["distance"] for stats in monthly_running_stats.values()) / 1000  # –≤ –∫–º
        total_calories = sum(stats["calories"] for stats in monthly_running_stats.values())
        total_duration = sum(stats["duration"] for stats in monthly_running_stats.values())

        # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ø –±–µ–≥—É–Ω–æ–≤ –∑–∞ –º–µ—Å—è—Ü
        top_runners = get_top_monthly_runners()

        monthly_text = f"üèÜ **–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –±–µ–≥—É ({month_name})**\n\n"

        # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ—Å—è—Ü–∞
        monthly_text += f"üìä **–ò—Ç–æ–≥–∏ –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü:**\n"
        monthly_text += f"üèÉ‚Äç‚ôÇÔ∏è –í—Å–µ–≥–æ –ø—Ä–æ–±–µ–∂–µ–∫: {total_activities}\n"
        monthly_text += f"üìç –û–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è: {total_distance:.1f} –∫–º\n"
        monthly_text += f"‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è: {total_duration // 3600}—á {(total_duration % 3600) // 60}–º\n"
        monthly_text += f"üî• –°–æ–∂–∂–µ–Ω–æ –∫–∞–ª–æ—Ä–∏–π: {total_calories}\n"
        monthly_text += f"üë• –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–µ–≥–∞: {len(monthly_running_stats)}\n\n"

        # –¢–æ–ø-3 –±–µ–≥—É–Ω–æ–≤ —Å –º–µ–¥–∞–ª—è–º–∏
        if top_runners:
            medals = ["ü•á", "ü•à", "ü•â"]
            monthly_text += f"üèÖ **–õ—É—á—à–∏–µ –±–µ–≥—É–Ω—ã –º–µ—Å—è—Ü–∞:**\n"
            for i, runner in enumerate(top_runners[:3]):
                distance_km = runner["distance"] / 1000
                hours = runner["duration"] // 3600
                minutes = (runner["duration"] % 3600) // 60
                safe_name = escape_markdown(runner['name'])
                monthly_text += f"{medals[i]} **{safe_name}**\n"
                monthly_text += f"   üìç {distance_km:.1f} –∫–º | ‚è±Ô∏è {hours}—á {minutes}–º | üî• {runner['calories']} –∫–∫–∞–ª\n\n"

        monthly_text += "üí™ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –≤—Å–µ—Ö —Å –æ—Ç–ª–∏—á–Ω—ã–º –º–µ—Å—è—Ü–µ–º! Keep running!**\n"

        # –ú–æ—Ç–∏–≤–∞—Ü–∏—è - —Ü–∏—Ç–∞—Ç–∞ –≤–µ–ª–∏–∫–æ–≥–æ –±–µ–≥—É–Ω–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞
        quote = random.choice(GREAT_RUNNER_QUOTES)
        monthly_text += "\n" + "="*40 + "\n"
        monthly_text += f"üí¨ **–°–ª–æ–≤–∞ –≤–µ–ª–∏–∫–∏—Ö –±–µ–≥—É–Ω–æ–≤:**\n"
        monthly_text += f"{quote}\n"
        monthly_text += "="*40 + "\n"

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                message_thread_id=NEWS_TOPIC_ID,
                text=monthly_text,
                parse_mode="Markdown"
            )

        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–µ—Å—è—á–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
        monthly_running_stats.clear()
        logger.info("[RUNNING] –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –±–µ–≥—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞")

    except Exception as e:
        logger.error(f"[RUNNING] –û—à–∏–±–∫–∞ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}", exc_info=True)


def reset_monthly_running_stats():
    """–°–±—Ä–æ—Å –≤—Å–µ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞ –≤ –Ω–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥"""
    global user_running_stats, daily_running_stats, weekly_running_stats, monthly_running_stats

    logger.info("[RUNNING] –°–±—Ä–æ—Å –≤—Å–µ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞")

    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    daily_running_stats.clear()
    weekly_running_stats.clear()
    monthly_running_stats.clear()

    logger.info("[RUNNING] –í—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ —Å–±—Ä–æ—à–µ–Ω–∞")


async def send_point_notification(user_name: str, points: int, reason: str, total_points: int):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–ª–æ–≤"""
    global application
    
    logger.info(f"[NOTIFY] –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: user={user_name}, points={points}, reason={reason}")
    logger.info(f"[NOTIFY] application={application}")
    
    if application is None:
        logger.error(f"[NOTIFY] ‚ùå application —Ä–∞–≤–µ–Ω None! –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è {user_name}")
        return
    
    try:
        # –≠–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∏—á–∏–Ω—ã –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–ª–æ–≤
        reason_emojis = {
            "—Å–æ–æ–±—â–µ–Ω–∏—è": "üí¨",
            "—Ñ–æ—Ç–æ": "üì∑",
            "–ª–∞–π–∫–∏": "‚ù§Ô∏è",
            "–æ—Ç–≤–µ—Ç—ã": "üí¨"
        }
        
        emoji = reason_emojis.get(reason, "‚≠ê")
        
        # –ü–†–û–°–¢–û–ô —Ç–µ–∫—Å—Ç –ë–ï–ó —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Markdown
        notification_text = f"{emoji} {user_name} –ø–æ–ª—É—á–∏–ª(–∞) +{points} –±–∞–ª–ª(–æ–≤) –∑–∞ {reason}!\nüìä –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤: {total_points}"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=notification_text,
        )
        
        logger.info(f"[NOTIFY] ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è {user_name}")
        
        logger.info(f"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±–∞–ª–ª–∞—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {user_name} +{points}")
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±–∞–ª–ª–∞—Ö: {e}")


async def send_level_up_notification(user_name: str, new_level: str):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è"""
    if application is None:
        return
    
    try:
        level_emoji = LEVEL_EMOJIS.get(new_level, "‚≠ê")
        
        # –ü–†–û–°–¢–û–ô —Ç–µ–∫—Å—Ç –ë–ï–ó —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Markdown
        level_messages = {
            "–ê–∫—Ç–∏–≤–Ω—ã–π": f"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! {user_name} –ø–µ—Ä–µ—à—ë–ª –≤ —Ä—è–¥—ã –ê–∫—Ç–∏–≤–Ω—ã—Ö –±–µ–≥—É–Ω–æ–≤!",
            "–õ–∏–¥–µ—Ä": f"üëë –£—Ä–∞! {user_name} —Å—Ç–∞–ª –õ–∏–¥–µ—Ä–æ–º –±–µ–≥–æ–≤–æ–≥–æ —á–∞—Ç–∞!",
            "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞": f"üèÜ –û–ì–û! {user_name} –¥–æ—Å—Ç–∏–≥ –∑–≤–∞–Ω–∏—è –õ–µ–≥–µ–Ω–¥—ã —á–∞—Ç–∞! –≠—Ç–æ –≤–µ—Ä—à–∏–Ω–∞!"
        }
        
        notification_text = level_messages.get(new_level, f"üéä {user_name} –ø–æ–≤—ã—Å–∏–ª(–∞) —É—Ä–æ–≤–µ–Ω—å –¥–æ {new_level}!")
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=notification_text,
        )
        
        logger.info(f"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è: {user_name} -> {new_level}")
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —É—Ä–æ–≤–Ω–µ: {e}")


def update_rating_stats(user_id: int, user_name: str, category: str, amount: int = 1) -> tuple:
    """
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫
    
    Returns: (success: bool, points_earned: int, message: str)
    """
    global user_rating_stats, user_current_level, user_message_times
    
    now = datetime.now(MOSCOW_TZ)
    today = now.strftime("%Y-%m-%d")
    current_time = now.timestamp()
    
    # –ó–ê–©–ò–¢–ê 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–ª—É–¥ —Å–æ–æ–±—â–µ–Ω–∏–π
    if category == "messages":
        if user_id not in user_message_times:
            user_message_times[user_id] = []
        
        # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ (—Å—Ç–∞—Ä—à–µ 1 –º–∏–Ω—É—Ç—ã)
        user_message_times[user_id] = [
            t for t in user_message_times[user_id] 
            if current_time - t < 60
        ]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
        if len(user_message_times[user_id]) >= MAX_MESSAGES_PER_MINUTE:
            logger.info(f"–ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞: {user_name} –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π")
            return False, 0, "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π!"
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        user_message_times[user_id].append(current_time)
    
    # –ó–ê–©–ò–¢–ê 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –≤ —á–∞—Å
    if user_id in user_rating_stats:
        # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –±–∞–ª–ª—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
        # (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - —Å—á–∏—Ç–∞–µ–º –ø–æ –æ–±—â–∏–º –¥–∞–Ω–Ω—ã–º)
        recent_points = (
            user_rating_stats[user_id]["messages"] // POINTS_PER_MESSAGES +
            user_rating_stats[user_id]["photos"] // POINTS_PER_PHOTOS +
            user_rating_stats[user_id]["likes"] // POINTS_PER_LIKES +
            user_rating_stats[user_id]["replies"]
        )
        
        # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –º–Ω–æ–≥–æ –±–∞–ª–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º (—ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
        # –î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫ –¥–æ–±–∞–≤–∏–º –∑–∞–¥–µ—Ä–∂–∫—É –≤ –ª–æ–≥–∏–∫—É –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user_id not in user_rating_stats:
        user_rating_stats[user_id] = {
            "name": user_name,
            "messages": 0,
            "photos": 0,
            "likes": 0,
            "replies": 0,
            "last_update": today
        }
        user_current_level[user_id] = "–ù–æ–≤–∏—á–æ–∫"
    
    # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Å—Ç–∞—Ä—ã–π —É—Ä–æ–≤–µ–Ω—å
    old_level = user_current_level.get(user_id, "–ù–æ–≤–∏—á–æ–∫")
    
    # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –ø—Ä–∏—Ä–æ—Å—Ç–∞
    old_messages = user_rating_stats[user_id]["messages"]
    old_photos = user_rating_stats[user_id]["photos"]
    old_likes = user_rating_stats[user_id]["likes"]
    old_replies = user_rating_stats[user_id]["replies"]
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    user_rating_stats[user_id][category] += amount
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫–æ–ª—å–∫–æ –±–∞–ª–ª–æ–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–æ –∑–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ (–ø—Ä–∏—Ä–æ—Å—Ç)
    points_earned = 0
    if category == "messages":
        new_messages = user_rating_stats[user_id]["messages"]
        points_earned = (new_messages // POINTS_PER_MESSAGES) - (old_messages // POINTS_PER_MESSAGES)
    elif category == "photos":
        new_photos = user_rating_stats[user_id]["photos"]
        points_earned = (new_photos // POINTS_PER_PHOTOS) - (old_photos // POINTS_PER_PHOTOS)
    elif category == "likes":
        new_likes = user_rating_stats[user_id]["likes"]
        points_earned = (new_likes // POINTS_PER_LIKES) - (old_likes // POINTS_PER_LIKES)
    elif category == "replies":
        new_replies = user_rating_stats[user_id]["replies"]
        points_earned = new_replies - old_replies  # –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç = 1 –±–∞–ª–ª
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
    new_level = get_user_level(user_id)
    user_current_level[user_id] = new_level
    
    return True, points_earned, "OK"


async def send_morning_greeting():
    global morning_message_id

    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return

    try:
        weather = await get_weather()
        theme = get_day_theme()
        motivation = get_random_motivation()
        training_plan = get_marathon_training_plan()

        greeting_text = (
            f"üåÖ **–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –±–µ–≥—É–Ω—ã!** üèÉ‚Äç‚ôÇÔ∏è\n\n"
            f"{weather}\n\n"
            f"{theme}\n\n"
        )
        
        if training_plan:
            greeting_text += f"{training_plan}\n\n"
        
        greeting_text += f"{motivation}\n\nüí≠ *–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –ø–ª–∞–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è!*"

        message = await application.bot.send_message(
            chat_id=CHAT_ID,
            text=f"_{greeting_text}_",
            parse_mode="Markdown",
        )

        morning_message_id = message.message_id
        logger.info(f"–£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {morning_message_id}")

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")


async def morning_scheduler_task():
    global morning_scheduled_date

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        if current_hour == 6 and current_minute == 0:
            if morning_scheduled_date != today_date:
                logger.info("–í—Ä–µ–º—è 6:00 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
                try:
                    await send_morning_greeting()
                    morning_scheduled_date = today_date
                    logger.info("–£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: {e}")

        await asyncio.sleep(60)


async def send_good_night_message():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∂–µ–ª–∞–Ω–∏—è —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏ –≤ 22:00."""
    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return

    try:
        text = get_good_night_message()
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=f"**{text}**",
            parse_mode="Markdown",
        )
        logger.info("[NIGHT] –°–æ–æ–±—â–µ–Ω–∏–µ —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
    except Exception as e:
        logger.error(f"[NIGHT] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏: {e}")


async def good_night_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏ (22:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)."""
    global good_night_sent_date

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        # –û–∫–Ω–æ 21:59-22:01 ‚Äî —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏ sleep 60 —Å–µ–∫
        if (current_hour == 22 and current_minute <= 1) or (current_hour == 21 and current_minute == 59):
            if good_night_sent_date != today_date:
                logger.info(f"–í—Ä–µ–º—è {current_hour}:{current_minute} - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏")
                try:
                    await send_good_night_message()
                    good_night_sent_date = today_date
                except Exception as e:
                    logger.error(f"[NIGHT] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: {e}")

        # –° 21:55 –¥–æ 22:05 –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫
        if (current_hour == 21 and current_minute >= 55) or (current_hour == 22 and current_minute <= 5):
            await asyncio.sleep(15)
        else:
            await asyncio.sleep(60)


async def music_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º—É–∑—ã–∫–∏ –¥–Ω—è (14:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)."""
    global music_sent_date

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        if current_hour == 14 and current_minute == 0:
            if music_sent_date != today_date:
                try:
                    music = get_music_of_day()
                    await application.bot.send_message(
                        chat_id=CHAT_ID,
                        text=f"üéµ –ú—É–∑—ã–∫–∞ –¥–Ω—è:\n{format_music_message(music)}",
                        parse_mode="HTML",
                        disable_web_page_preview=True,
                    )
                    music_sent_date = today_date
                    logger.info("[MUSIC] –ú—É–∑—ã–∫–∞ –¥–Ω—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
                except Exception as e:
                    logger.error(f"[MUSIC] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º—É–∑—ã–∫–∏ –¥–Ω—è: {e}")

        await asyncio.sleep(60)


async def horoscope_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ (07:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)."""
    global horoscope_sent_date

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        if current_hour == 7 and current_minute == 0:
            if horoscope_sent_date != today_date:
                try:
                    horoscope_text = await get_horoscope_text_for_today()
                    text = f"üîÆ *–ì–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è:*\n{horoscope_text}"
                    message_kwargs = {
                        "chat_id": CHAT_ID,
                        "text": text,
                        "parse_mode": "Markdown",
                    }
                    if NEWS_TOPIC_ID:
                        message_kwargs["message_thread_id"] = NEWS_TOPIC_ID
                    await application.bot.send_message(**message_kwargs)
                    horoscope_sent_date = today_date
                    logger.info("[HOROSCOPE] –ì–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω")
                except Exception as e:
                    logger.error(f"[HOROSCOPE] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–∞: {e}")

        await asyncio.sleep(60)


async def deals_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–∫–∏–¥–æ–∫ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 12:00)."""
    global deals_sent_week

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        week_key = f"{now.isocalendar().year}-W{now.isocalendar().week}"
        if now.weekday() == 0 and now.hour == 12 and now.minute == 0:
            if deals_sent_week != week_key:
                try:
                    text = await build_deals_message()
                    message_kwargs = {
                        "chat_id": CHAT_ID,
                        "text": text,
                        "parse_mode": "HTML",
                        "disable_web_page_preview": True,
                    }
                    if NEWS_TOPIC_ID:
                        message_kwargs["message_thread_id"] = NEWS_TOPIC_ID
                    await application.bot.send_message(**message_kwargs)
                    deals_sent_week = week_key
                    logger.info("[DEALS] –ü–æ–¥–±–æ—Ä–∫–∞ —Å–∫–∏–¥–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
                except Exception as e:
                    logger.error(f"[DEALS] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∫–∏–¥–æ–∫: {e}")

        await asyncio.sleep(60)


# ============== –ö–û–§–ï–ô–ù–´–ô –ü–õ–ê–ù–û–í–©–ò–ö (10:30 –ë–£–î–ù–ò) ==============
COFFEE_MESSAGES = [
    "‚òï **–ê –Ω–µ –ø–æ—Ä–∞ –ª–∏ –ø–æ –∫–æ—Ñ–µ–π–∫—É?",
    "‚òï –ö—Ç–æ —Å–µ–≥–æ–¥–Ω—è –µ—â—ë –Ω–µ –ø–∏–ª –∫–æ—Ñ–µ? –ü–æ–¥–Ω–∏–º–∏—Ç–µ —Ä—É–∫—É!",
    "‚òï –ö–æ—Ñ–µ ‚Äî —ç—Ç–æ –Ω–µ –Ω–∞–ø–∏—Ç–æ–∫, —ç—Ç–æ —Ä–∏—Ç—É–∞–ª!",
    "‚òï –≠—Å–ø—Ä–µ—Å—Å–æ, –∫–∞–ø—É—á–∏–Ω–æ, –ª–∞—Ç—Ç–µ ‚Äî –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å–≤–æ–π!",
    "‚òï –ë–µ–∑ –∫–æ—Ñ–µ –Ω–µ —Ç—É–¥–∞, –Ω–µ —Å—é–¥–∞ ‚Äî –Ω—É–∂–µ–Ω –∫–æ—Ñ–µ!",
    "‚òï –ö–æ—Ñ–µ –º–∞—Å—Ç–µ—Ä, –≥–¥–µ —Ç—ã? –ß–∞—à–∫–∞ –∂–¥—ë—Ç!",
    "‚òï –ö–æ—Ñ–µ–π–Ω–∞—è –ø–∞—É–∑–∞ ‚Äî —Å–≤—è—â–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è!",
    "‚òï –ö—Ç–æ —Å –Ω–∞–º–∏? –ö–æ—Ñ–µ –∂–¥—ë—Ç!",
    "‚òï –£—Ç—Ä–æ –±–µ–∑ –∫–æ—Ñ–µ ‚Äî –∫–∞–∫ –¥–µ–Ω—å –±–µ–∑ —Å–æ–ª–Ω—Ü–∞!",
    "‚òï –ü–æ–≥–Ω–∞–ª–∏ –Ω–∞ –∫–æ—Ñ–µ! ‚òï",
]

COFFEE_IMAGES = [
    "https://cdn-icons-png.flaticon.com/512/3028/3028993.png",  # –ß–∞—à–∫–∞ –∫–æ—Ñ–µ
    "https://cdn-icons-png.flaticon.com/512/2935/2935413.png",  # –ö–æ—Ñ–µ
    "https://cdn-icons-png.flaticon.com/512/3127/3127421.png",  # –°—Ç–∞–∫–∞–Ω –∫–æ—Ñ–µ
    "https://cdn-icons-png.flaticon.com/512/2246/2246910.png",  # –ö—Ä—É–∂–∫–∞
    "https://cdn-icons-png.flaticon.com/512/2966/2966327.png",  # –ö–æ—Ñ–µ
]


async def send_coffee_reminder():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∫–æ—Ñ–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π"""
    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return

    try:
        import random
        
        coffee_text = random.choice(COFFEE_MESSAGES)
        coffee_image = random.choice(COFFEE_IMAGES)
        
        full_text = f"{coffee_text}\n\nü•§ –í—Ä–µ–º—è –≤–∑–±–æ–¥—Ä–∏—Ç—å—Å—è!"
        
        await application.bot.send_photo(
            chat_id=CHAT_ID,
            photo=coffee_image,
            caption=full_text,
            parse_mode="Markdown"
        )
        
        logger.info("[COFFEE] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∫–æ—Ñ–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
        
    except Exception as e:
        logger.error(f"[COFFEE] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {e}")


async def coffee_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∫–æ—Ñ–µ –≤ 10:30 –ø–æ –±—É–¥–Ω—è–º"""
    
    while bot_running:
        try:
            await asyncio.sleep(30)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            
            now = datetime.now(MOSCOW_TZ)
            current_hour = now.hour
            current_minute = now.minute
            current_weekday = now.weekday()  # 0 = –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 6 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º: 10:30 –∏ –±—É–¥–Ω–∏–π –¥–µ–Ω—å (–ø–Ω-–ø—Ç)
            if current_hour == 10 and current_minute == 30 and current_weekday < 5:
                logger.info("[COFFEE] –í—Ä–µ–º—è 10:30 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∫–æ—Ñ–µ")
                try:
                    await send_coffee_reminder()
                    # –ñ–¥—ë–º –º–∏–Ω—É—Ç—É, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∞–∂–¥—ã
                    await asyncio.sleep(60)
                except Exception as e:
                    logger.error(f"[COFFEE] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: {e}")
        
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[COFFEE] –û—à–∏–±–∫–∞ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ: {e}")


# ============== –û–ë–ï–î–ï–ù–ù–´–ô –ü–õ–ê–ù–û–í–©–ò–ö (13:00 –ë–£–î–ù–ò) ==============
LUNCH_SENT_TODAY = False

LUNCH_MESSAGES = [
    "üçΩÔ∏è **–•–≤–∞—Ç–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å! –í—Ä–µ–º—è –æ–±–µ–¥–∞!**",
    "üçΩÔ∏è –≠–π, –≤—ã —Ç–∞–º! –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –æ—Ç–ª–æ–∂–∏–ª–∏? –û–±–µ–¥!",
    "üçΩÔ∏è 13:00 ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ! –í—Å–µ –Ω–∞ –æ–±–µ–¥!",
    "üçΩÔ∏è –†–∞–±–æ—Ç–∞ –ø–æ–¥–æ–∂–¥—ë—Ç, –∞ –æ–±–µ–¥ ‚Äî –Ω–µ—Ç!",
    "üçΩÔ∏è –ö—Ç–æ –µ—â—ë –Ω–µ –æ–±–µ–¥–∞–ª? –°—Ç–æ–ø, —Ä–∞–±–æ—Ç–∞!",
    "üçΩÔ∏è –î–æ –≤—Å—Ç—Ä–µ—á–∏ —á–µ—Ä–µ–∑ —á–∞—Å ‚Äî —è –Ω–∞ –æ–±–µ–¥!",
    "üçΩÔ∏è –•–≤–∞—Ç–∏—Ç —Ç—ã–∫–∞—Ç—å –≤ –∫–Ω–æ–ø–∫–∏! –ñ–∏–≤–æ—Ç —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è!",
    "üçΩÔ∏è –û–±–µ–¥ ‚Äî —ç—Ç–æ –Ω–µ –ø–µ—Ä–µ—Ä—ã–≤, —ç—Ç–æ —Å–º—ã—Å–ª –∂–∏–∑–Ω–∏!",
    "üçΩÔ∏è –ó–Ω–∞–µ—Ç–µ, —á—Ç–æ –ª—É—á—à–µ, —á–µ–º —Ä–∞–±–æ—Ç–∞ –≤ 13:00? –û–±–µ–¥!",
    "üçΩÔ∏è –°—Ç–æ–ø! –û–±–µ–¥! –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–≥–æ–≤–æ—Ä–æ–∫!",
]

async def send_lunch_reminder():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –æ–±–µ–¥–µ"""
    global LUNCH_SENT_TODAY
    
    if application is None:
        logger.error("[LUNCH] Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return
    
    try:
        lunch_text = random.choice(LUNCH_MESSAGES)
        
        full_text = f"{lunch_text}\n\nüòã –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞, –±–µ–≥—É–Ω—ã!"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=full_text,
            parse_mode="Markdown"
        )
        
        LUNCH_SENT_TODAY = True
        logger.info("[LUNCH] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–±–µ–¥–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
        
    except Exception as e:
        logger.error(f"[LUNCH] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {e}")


async def lunch_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–± –æ–±–µ–¥–µ –≤ 13:00 –ø–æ –±—É–¥–Ω—è–º"""
    global LUNCH_SENT_TODAY
    
    while bot_running:
        try:
            await asyncio.sleep(30)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            
            now = datetime.now(MOSCOW_TZ)
            current_hour = now.hour
            current_minute = now.minute
            current_weekday = now.weekday()  # 0 = –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 6 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
            today_date = now.strftime("%Y-%m-%d")
            
            # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –≤ –ø–æ–ª–Ω–æ—á—å
            if current_hour == 0 and current_minute == 0:
                LUNCH_SENT_TODAY = False
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º: 13:00 –∏ –±—É–¥–Ω–∏–π –¥–µ–Ω—å (–ø–Ω-–ø—Ç)
            if current_hour == 13 and current_minute == 0 and current_weekday < 5:
                if not LUNCH_SENT_TODAY:
                    logger.info("[LUNCH] –í—Ä–µ–º—è 13:00 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–±–µ–¥–µ")
                    try:
                        await send_lunch_reminder()
                    except Exception as e:
                        logger.error(f"[LUNCH] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: {e}")
        
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[LUNCH] –û—à–∏–±–∫–∞ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ: {e}")


# ============== –ú–û–¢–ò–í–ê–¶–ò–û–ù–ù–´–ï –°–û–û–ë–©–ï–ù–ò–Ø ==============
async def send_motivation():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    if application is None:
        return

    try:
        motivation = get_random_motivation()
        message = await application.bot.send_message(
            chat_id=CHAT_ID,
            text=f"üí™ {motivation}",
            parse_mode="Markdown",
        )
        logger.info(f"–ú–æ—Ç–∏–≤–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: {message.message_id}")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏: {e}")


async def motivation_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ 11:00, 16:00, 21:00"""
    global motivation_sent_times
    
    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–æ–ª–Ω–æ—á—å
        if now.hour == 0 and current_minute == 0:
            motivation_sent_times = []
        
        # –í—Ä–µ–º—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏
        motivation_hours = [11, 16, 21]  # 11:00, 16:00, 21:00
        
        for hour in motivation_hours:
            if current_hour == hour and current_minute == 0:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –ª–∏ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è –≤ —ç—Ç–æ –≤—Ä–µ–º—è
                key = f"{today_date}_{hour}"
                if key not in motivation_sent_times:
                    logger.info(f"–í—Ä–µ–º—è {hour}:00 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–æ—Ç–∏–≤–∞—Ü–∏—é")
                    try:
                        await send_motivation()
                        motivation_sent_times.append(key)
                        logger.info("–ú–æ—Ç–∏–≤–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
                    except Exception as e:
                        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–æ—Ç–∏–≤–∞—Ü–∏–∏: {e}")
        
        await asyncio.sleep(60)


# ============== –ï–ñ–ï–î–ù–ï–í–ù–ê–Ø –°–í–û–î–ö–ê ==============
async def get_top_liked_photos() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø —Ñ–æ—Ç–æ –ø–æ –ª–∞–π–∫–∞–º —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏"""
    global daily_stats, user_rating_stats, user_current_level
    
    photos = daily_stats.get("photos", [])
    if not photos:
        return []
    
    try:
        # –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ç–æ.
        # –í–ê–ñ–ù–û: –∑–¥–µ—Å—å –ù–ï —Ç—Ä–æ–≥–∞–µ–º user_rating_stats["likes"], —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —Å—á—ë—Ç—á–∏–∫.
        # –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤/–ª–∞–π–∫–æ–≤ –¥–µ–ª–∞–µ–º –≤ handle_reactions() –ø–æ –¥–µ–ª—å—Ç–µ.
        updated_photos = []
        for photo in photos:
            try:
                reactions = await application.bot.get_message_reactions(
                    chat_id=CHAT_ID,
                    message_id=photo["message_id"],
                )
                # –°—á–∏—Ç–∞–µ–º –í–°–ï —Ä–µ–∞–∫—Ü–∏–∏ (–ª—é–±—ã–µ —ç–º–æ–¥–∑–∏)
                like_count = 0
                for reaction in reactions:
                    for choice in reaction.choices:
                        like_count += int(getattr(choice, "count", 0) or 0)

                # –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ –ø–æ –¥–µ–ª—å—Ç–µ
                try:
                    prev_likes = int(photo.get("likes", 0) or 0)
                except Exception:
                    prev_likes = 0
                delta = max(like_count - prev_likes, 0)
                if delta > 0:
                    user_id = photo.get("user_id")
                    user_name = photo.get("user_name", "Unknown")
                    if user_id is not None:
                        if user_id not in user_rating_stats:
                            user_rating_stats[user_id] = {
                                "name": user_name,
                                "messages": 0,
                                "photos": 0,
                                "likes": 0,
                                "replies": 0,
                                "bonus_points": 0,
                                "days_active": set(),
                            }
                        user_rating_stats[user_id]["likes"] += delta

                # –û–±–Ω–æ–≤–ª—è–µ–º –ª–∞–π–∫–∏ –≤–Ω—É—Ç—Ä–∏ daily_stats, —á—Ç–æ–±—ã —Å–≤–æ–¥–∫–∞ –≤–∏–¥–µ–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                try:
                    photo["likes"] = like_count
                except Exception:
                    pass
                
                updated_photos.append({
                    "file_id": photo["file_id"],
                    "user_id": photo["user_id"],
                    "likes": like_count,
                    "message_id": photo["message_id"],
                })
            except Exception:
                # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ª–∞–π–∫–∏, —Å—á–∏—Ç–∞–µ–º –∫–∞–∫ 0
                updated_photos.append({
                    "file_id": photo["file_id"],
                    "user_id": photo["user_id"],
                    "likes": 0,
                    "message_id": photo["message_id"],
                })
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ª–∞–π–∫–∞–º –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º (–º–∏–Ω–∏–º—É–º 4)
        updated_photos.sort(key=lambda x: x["likes"], reverse=True)
        top_photos = [p for p in updated_photos if p["likes"] >= 4]
        
        return top_photos[:2]  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞–∫—Å–∏–º—É–º 2 —Ñ–æ—Ç–æ
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ø —Ñ–æ—Ç–æ: {e}")
        return []


async def get_top_users() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º"""
    global daily_stats
    
    user_messages = daily_stats.get("user_messages", {})
    if not user_messages:
        return []
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–æ–±—â–µ–Ω–∏–π
    sorted_users = sorted(
        user_messages.items(),
        key=lambda x: x[1]["count"],
        reverse=True
    )
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ø 5
    return [(user_id, data["name"], data["count"]) for user_id, data in sorted_users[:5]]


async def get_top_rated_users() -> list:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"""
    global user_rating_stats
    
    if not user_rating_stats:
        return []
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ–±—â–µ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É
    rated_users = []
    for user_id, stats in user_rating_stats.items():
        total_points = calculate_user_rating(user_id)
        level = get_user_level(user_id)
        rated_users.append({
            "user_id": user_id,
            "name": stats["name"],
            "points": total_points,
            "messages": stats["messages"],
            "photos": stats["photos"],
            "likes": stats["likes"],
            "replies": stats["replies"],
            "level": level
        })
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ—á–∫–∞–º (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
    rated_users.sort(key=lambda x: x["points"], reverse=True)
    
    return rated_users[:10]


async def send_daily_summary(force: bool = False):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å–≤–æ–¥–∫–∏ –≤ —á–∞—Ç + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    
    Args:
        force: –ï—Å–ª–∏ True - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–¥–∫—É –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–µ–≥–æ–¥–Ω—è
    """
    global daily_summary_sent
    
    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return
    
    if daily_summary_sent and not force:
        logger.info("–°–≤–æ–¥–∫–∞ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–∏—Å–ø–æ–ª—å–∑—É–π force=True –∏–ª–∏ /summary)")
        return
    
    try:
        today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")


        # –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º daily_stats –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ –∫–∞–Ω–∞–ª–∞
        # saved_date = daily_stats.get("date", "") if isinstance(daily_stats, dict) else ""
        # if saved_date != today:
        #     logger.warning(f"[SUMMARY] –î–∞—Ç–∞ –≤ daily_stats ({saved_date}) –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ–≥–æ–¥–Ω—è ({today}) - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É")
        #     daily_stats = {
        #         "date": today,
        #         "total_messages": 0,
        #         "user_messages": {},
        #         "photos": [],
        #         "first_photo_user_id": None,
        #         "first_photo_user_name": None,
        #     }

        # –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –î–õ–Ø –û–¢–õ–ê–î–ö–ò - —á—Ç–æ —É –Ω–∞—Å –≤ daily_stats
        # –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –î–õ–Ø –û–¢–õ–ê–î–ö–ò - —á—Ç–æ —É –Ω–∞—Å –≤ daily_stats
        msg_count = daily_stats.get("total_messages", 0)
        photo_count = len(daily_stats.get("photos", []))
        user_count = len(daily_stats.get("user_messages", {}))
        logger.info(f"[SUMMARY] –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –∑–∞ {today}")
        logger.info(f"[SUMMARY] daily_stats: {msg_count} —Å–æ–æ–±—â–µ–Ω–∏–π, {photo_count} —Ñ–æ—Ç–æ, {user_count} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        logger.info(f"[SUMMARY] user_messages: {daily_stats.get('user_messages', {})}")
        logger.info(f"[SUMMARY] photos: {daily_stats.get('photos', [])[:3]}")  # –ø–µ—Ä–≤—ã–µ 3 —Ñ–æ—Ç–æ
        
        # === –î–í–û–ô–ù–´–ï –ë–ê–õ–õ–´ ===
        # –ù–∞—Ö–æ–¥–∏–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –¥–ª—è –¥–≤–æ–π–Ω—ã—Ö –±–∞–ª–ª–æ–≤
        double_points_users = []  # –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –¥–≤–æ–π–Ω—ã—Ö –±–∞–ª–ª–æ–≤
        
        # 1. –°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π)
        most_active_user_id = None
        most_active_user_name = None
        most_messages_count = 0
        
        for user_id, data in daily_stats.get("user_messages", {}).items():
            if data["count"] > most_messages_count:
                most_messages_count = data["count"]
                most_active_user_id = user_id
                most_active_user_name = data["name"]
        
        if most_active_user_id:
            double_points_users.append(most_active_user_id)
        
        # 2. –ü–µ—Ä–≤—ã–π –∞–≤—Ç–æ—Ä —Ñ–æ—Ç–æ
        first_photo_user_id = daily_stats.get("first_photo_user_id")
        if first_photo_user_id and first_photo_user_id != most_active_user_id:
            double_points_users.append(first_photo_user_id)
        
        # –ù–∞—á–∏—Å–ª—è–µ–º –¥–≤–æ–π–Ω—ã–µ –±–∞–ª–ª—ã –ø–æ–±–µ–¥–∏—Ç–µ–ª—è–º
        for user_id in double_points_users:
            if user_id in user_rating_stats:
                old_points = calculate_user_rating(user_id)
                # –î–æ–±–∞–≤–ª—è–µ–º 2 –æ—á–∫–∞ –∑–∞ –ø–æ–±–µ–¥—É
                if "bonus_points" not in user_rating_stats[user_id]:
                    user_rating_stats[user_id]["bonus_points"] = 0
                user_rating_stats[user_id]["bonus_points"] += 2
                new_points = calculate_user_rating(user_id)
                user_name = user_rating_stats[user_id]["name"]
                logger.info(f"[POINTS] –î–≤–æ–π–Ω—ã–µ –±–∞–ª–ª—ã: {user_name} –ø–æ–ª—É—á–∞–µ—Ç +2 (–≤—Å–µ–≥–æ {new_points})")
        
        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Markdown-—Å–∏–º–≤–æ–ª–æ–≤ –≤ –∏–º–µ–Ω–∞—Ö (MarkdownV2)
        def escape_markdown(text: str) -> str:
            """–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã MarkdownV2"""
            if not text:
                return text
            # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã MarkdownV2: _ * [ ] ( ) ~ ` > # + - . ! |
            return text.replace('_', '\\_').replace('*', '\\*').replace('[', '\\[').replace(']', '\\]').replace('(', '\\(').replace(')', '\\)').replace('~', '\\~').replace('`', '\\`').replace('>', '\\>').replace('#', '\\#').replace('+', '\\+').replace('-', '\\-').replace('.', '\\.').replace('!', '\\!').replace('|', '\\|')

        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–≤–æ–¥–∫–∏ (–¥–∞—Ç–∞ —É–∂–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∞, –Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ–º –¥–ª—è MarkdownV2)
        escaped_today = escape_markdown(today)
        summary_text = f"üìä *–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∑–∞ {escaped_today}*\n\n"

        # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
        summary_text += f"üí¨ *–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π:* {daily_stats['total_messages']}\n\n"

        # === –ü–û–ë–ï–î–ò–¢–ï–õ–ò –î–ù–Ø ===
        summary_text += "üèÜ *–ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ –¥–Ω—è \\(–¥–≤–æ–π–Ω—ã–µ –±–∞–ª–ª—ã\\):*\n"

        if most_active_user_name:
            escaped_name = escape_markdown(most_active_user_name)
            summary_text += f"   ü•á {escaped_name} ‚Äî –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å \\({most_messages_count} —Å–æ–æ–±—â–µ–Ω–∏–π\\)\n"

        first_photo_name = daily_stats.get("first_photo_user_name")
        if first_photo_name:
            escaped_name = escape_markdown(first_photo_name)
            summary_text += f"   üì∏ {escaped_name} ‚Äî –∑–∞ –ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ –¥–Ω—è\n"

        if not most_active_user_name and not first_photo_name:
            summary_text += "   –ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π...\n"

        summary_text += "\n"

        # –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        top_users = await get_top_users()
        if top_users:
            summary_text += "üèÉ *–¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–µ–≥—É–Ω–æ–≤:*\n"
            medals = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£"]
            for i, (user_id, name, count) in enumerate(top_users):
                escaped_name = escape_markdown(name)
                summary_text += f"{medals[i]} {escaped_name} ‚Äî {count} —Å–æ–æ–±—â–µ–Ω–∏–π\n"
            summary_text += "\n"
        else:
            summary_text += "üèÉ *–¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–µ–≥—É–Ω–æ–≤:* –ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç\n\n"

        # –†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
        top_rated = await get_top_rated_users()
        if top_rated:
            summary_text += "‚≠ê *–†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ \\(—Ç–æ–ø-10\\):*\n"
            medals_rating = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü"]
            for i, user in enumerate(top_rated):
                level_emoji = LEVEL_EMOJIS.get(user["level"], "")
                bonus_tag = " \\‚≠ê" if user.get("user_id") in double_points_users else ""
                escaped_name = escape_markdown(user['name'])
                summary_text += f"{medals_rating[i]} {level_emoji} {escaped_name} ‚Äî {user['points']} –æ—á–∫–æ–≤{bonus_tag}"
                # –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏
                details = []
                if user['messages'] > 0:
                    msg_pts = user['messages'] // POINTS_PER_MESSAGES
                    details.append(f"üìù{msg_pts}")
                if user['photos'] > 0:
                    photo_pts = user['photos'] // POINTS_PER_PHOTOS
                    details.append(f"üì∑{photo_pts}")
                if user['likes'] > 0:
                    like_pts = user['likes'] // POINTS_PER_LIKES
                    details.append(f"‚ù§Ô∏è{like_pts}")
                if user['replies'] > 0:
                    details.append(f"üí¨{user['replies']}")
                if details:
                    summary_text += f" \\({', '.join(details)}\\)"
                summary_text += "\n"
        else:
            summary_text += "‚≠ê *–†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:* –ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç\n\n"

        # === –õ–∞–π–∫–∏ –∑–∞ —Ñ–æ—Ç–æ ===
        photos_with_likes = [p for p in daily_stats.get("photos", []) if p.get("likes", 0) > 0]
        total_likes = sum(p.get("likes", 0) for p in daily_stats.get("photos", []))

        if photos_with_likes:
            summary_text += f"‚ù§Ô∏è *–í—Å–µ–≥–æ –ª–∞–π–∫–æ–≤ –∑–∞ —Ñ–æ—Ç–æ:* {total_likes}\n\n"
            summary_text += "‚ù§Ô∏è *–§–æ—Ç–æ —Å –ª–∞–π–∫–∞–º–∏:*\n"
            # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ª–∞–π–∫–∞–º
            sorted_photos = sorted(photos_with_likes, key=lambda x: x.get("likes", 0), reverse=True)
            for photo in sorted_photos:
                user_name = photo.get("user_name", "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π")
                escaped_name = escape_markdown(user_name)
                likes = photo.get("likes", 0)
                summary_text += f"   ‚ù§Ô∏è {likes} ‚Äî {escaped_name}\n"
            summary_text += "\n"
        else:
            summary_text += "‚ù§Ô∏è *–í—Å–µ–≥–æ –ª–∞–π–∫–æ–≤ –∑–∞ —Ñ–æ—Ç–æ:* 0\n"
            summary_text += "‚ù§Ô∏è *–§–æ—Ç–æ —Å –ª–∞–π–∫–∞–º–∏:* –§–æ—Ç–æ —á–∞—Ç –Ω–µ –≤—ã–±—Ä–∞–ª ü§∑\n\n"

        # === –ï–ñ–ï–î–ù–ï–í–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ë–ï–ì–ê ===
        if daily_running_stats:
            total_run_activities = sum(stats["activities"] for stats in daily_running_stats.values())
            total_run_distance = sum(stats["distance"] for stats in daily_running_stats.values()) / 1000  # –≤ –∫–º
            total_run_calories = sum(stats["calories"] for stats in daily_running_stats.values())

            if total_run_activities > 0:
                summary_text += "üèÉ‚Äç‚ôÇÔ∏è *–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞:*\n"
                summary_text += f"üèÉ‚Äç‚ôÇÔ∏è –ü—Ä–æ–±–µ–∂–µ–∫: {total_run_activities}\n"
                summary_text += f"üìç –î–∏—Å—Ç–∞–Ω—Ü–∏—è: {total_run_distance:.1f} –∫–º\n"
                summary_text += f"üî• –ö–∞–ª–æ—Ä–∏–π: {total_run_calories}\n\n"

                # –¢–æ–ø –±–µ–≥—É–Ω–æ–≤ –¥–Ω—è
                summary_text += "üèÜ *–õ—É—á—à–∏–µ –±–µ–≥—É–Ω—ã –¥–Ω—è:*\n"
                daily_runners = []
                for user_id, stats in daily_running_stats.items():
                    daily_runners.append({
                        "name": stats["name"],
                        "distance": stats["distance"],
                        "activities": stats["activities"]
                    })
                daily_runners.sort(key=lambda x: x["distance"], reverse=True)

                medals = ["ü•á", "ü•à", "ü•â"]
                for i, runner in enumerate(daily_runners[:3]):
                    escaped_name = escape_markdown(runner["name"])
                    distance_km = runner["distance"] / 1000
                    summary_text += f"{medals[i]} {escaped_name} ‚Äî {distance_km:.1f} –∫–º \\({runner['activities']} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\\)\n"
                summary_text += "\n"
        else:
            summary_text += "üèÉ‚Äç‚ôÇÔ∏è *–°–µ–≥–æ–¥–Ω—è –±–µ–≥–æ–º –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∏—Å—å ü§∑*\n\n"

        # === –û–¢–õ–ê–î–ö–ê: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π ===
        logger.info(f"[SUMMARY] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–≤–æ–¥–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (–¥–ª–∏–Ω–∞: {len(summary_text)})")
        
        # DEBUG: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ summary_text
        logger.info(f"[SUMMARY DEBUG] summary_text (first 500 chars): {summary_text[:500]}")
        logger.info(f"[SUMMARY DEBUG] daily_stats['total_messages'] = {daily_stats.get('total_messages', 'NOT_FOUND')}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏
        unescaped_parens = []
        for i, char in enumerate(summary_text):
            if char == '(' or char == ')':
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –ª–∏ —Å–∫–æ–±–∫–∞
                if i > 0 and summary_text[i-1] == '\\':
                    continue  # –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞
                unescaped_parens.append((i, char, summary_text[max(0,i-10):i+10]))

        if unescaped_parens:
            logger.error(f"[SUMMARY] –ù–∞–π–¥–µ–Ω—ã –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏: {unescaped_parens[:3]}")

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º Markdown (–Ω–µ MarkdownV2) –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        await application.bot.send_message(
            chat_id=CHAT_ID,
            message_thread_id=NEWS_TOPIC_ID,
            text=summary_text,
            parse_mode="Markdown",
        )
        
        # –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ø —Ñ–æ—Ç–æ —Å 4+ –ª–∞–π–∫–∞–º–∏ (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        try:
            top_photos = await get_top_liked_photos()
            if top_photos:
                for photo in top_photos:
                    try:
                        await application.bot.send_photo(
                            chat_id=CHAT_ID,
                            message_thread_id=NEWS_TOPIC_ID,
                            photo=photo["file_id"],
                            caption=f"‚ù§Ô∏è {photo['likes']} –ª–∞–π–∫–æ–≤",
                        )
                    except Exception:
                        pass
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ: {e}")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∏—Å—Ç–æ—Ä–∏—é (–°–ö–†–´–¢–û, –≤ —á–∞—Ç –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è)
        await save_daily_stats()
        await save_user_rating_stats()
        await save_chat_history()
        await save_user_active_stats()
        
        daily_summary_sent = True
        logger.info("–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç + –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}", exc_info=True)

        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞ —Å–≤–æ–¥–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        try:
            debug_text = summary_text[:200] if 'summary_text' in dir() else "summary_text –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω"
            logger.error(f"[SUMMARY DEBUG] –¢–µ–∫—Å—Ç —Å–≤–æ–¥–∫–∏ (–ø–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤): {debug_text}")
        except Exception:
            pass

        # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
        logger.error(f"[SUMMARY DEBUG] daily_stats date: {daily_stats.get('date', 'EMPTY')}")
        logger.error(f"[SUMMARY DEBUG] daily_stats total_messages: {daily_stats.get('total_messages', 0)}")
        logger.error(f"[SUMMARY DEBUG] daily_stats user_messages: {daily_stats.get('user_messages', {})}")
        logger.error(f"[SUMMARY DEBUG] daily_stats photos: {daily_stats.get('photos', [])}")

        # –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–≤–æ–¥–∫–∏ –±–µ–∑ Markdown
        try:
            simple_text = f"üìä –°–≤–æ–¥–∫–∞ –∑–∞ {today}\n"
            simple_text += f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π: {daily_stats.get('total_messages', 0)}\n"
            simple_text += "‚ö†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"
            
            await application.bot.send_message(
                chat_id=CHAT_ID,
                message_thread_id=NEWS_TOPIC_ID,
                text=simple_text,
            )
            logger.info("–£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
        except Exception as e2:
            logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e2}")


# ============== –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê ==============
async def send_weekly_summary():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º"""
    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return
    
    try:
        now = datetime.now(MOSCOW_TZ)
        week_num = now.isocalendar()[1]
        year = now.year
        
        weekly_text = f"üåü **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ (–ù–µ–¥–µ–ª—è #{week_num}, {year})**\n\n"
        
        # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º
        levels_summary = {
            "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞": [],
            "–õ–∏–¥–µ—Ä": [],
            "–ê–∫—Ç–∏–≤–Ω—ã–π": [],
            "–ù–æ–≤–∏—á–æ–∫": []
        }
        
        for user_id, stats in user_rating_stats.items():
            level = get_user_level(user_id)
            total_points = calculate_user_rating(user_id)
            levels_summary[level].append({
                "name": stats["name"],
                "points": total_points,
                "level": level
            })
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ –æ—á–∫–∞–º
        for level in levels_summary:
            levels_summary[level].sort(key=lambda x: x["points"], reverse=True)
        
        # –í—ã–≤–æ–¥–∏–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º (–æ—Ç –≤—ã—Å–æ–∫–æ–≥–æ –∫ –Ω–∏–∑–∫–æ–º—É)
        level_order = ["–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞", "–õ–∏–¥–µ—Ä", "–ê–∫—Ç–∏–≤–Ω—ã–π", "–ù–æ–≤–∏—á–æ–∫"]
        
        for level in level_order:
            users = levels_summary[level]
            if users:
                level_emoji = LEVEL_EMOJIS.get(level, "")
                escaped_level = escape_markdown(level)
                escaped_users = [escape_markdown(u['name']) for u in users]
                weekly_text += f"{level_emoji} **{escaped_level}** \\({len(users)} —á–µ–ª.\\):\n"
                
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-3 –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
                top_users = users[:3]
                medals = ["ü•á", "ü•à", "ü•â"]
                for i, user in enumerate(top_users):
                    escaped_name = escape_markdown(user['name'])
                    weekly_text += f"   {medals[i]} {escaped_name} ‚Äî {user['points']} –æ—á–∫–æ–≤\n"
                
                if len(users) > 3:
                    weekly_text += f"   ... –∏ –µ—â—ë {len(users) - 3} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤\n"
                
                weekly_text += "\n"
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        total_messages = sum(stats["messages"] for stats in user_rating_stats.values())
        total_photos = sum(stats["photos"] for stats in user_rating_stats.values())
        total_likes = sum(stats["likes"] for stats in user_rating_stats.values())
        total_replies = sum(stats["replies"] for stats in user_rating_stats.values())
        
        weekly_text += "üìä **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–¥–µ–ª–∏:**\n"
        weekly_text += f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π: {total_messages}\n"
        weekly_text += f"üì∑ –§–æ—Ç–æ: {total_photos}\n"
        weekly_text += f"‚ù§Ô∏è –õ–∞–π–∫–æ–≤: {total_likes}\n"
        weekly_text += f"üí¨ –û—Ç–≤–µ—Ç–æ–≤: {total_replies}\n\n"
        
        # –ö–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
        weekly_text += "üìà **–ö–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å:**\n"
        weekly_text += f"üå± ‚Üí ‚≠ê (–ù–æ–≤–∏—á–æ–∫ ‚Üí –ê–∫—Ç–∏–≤–Ω—ã–π): **{USER_LEVELS['–ê–∫—Ç–∏–≤–Ω—ã–π']}** –æ—á–∫–æ–≤\n"
        weekly_text += f"‚≠ê ‚Üí üëë (–ê–∫—Ç–∏–≤–Ω—ã–π ‚Üí –õ–∏–¥–µ—Ä): **{USER_LEVELS['–õ–∏–¥–µ—Ä']}** –æ—á–∫–æ–≤\n"
        weekly_text += f"üëë ‚Üí üèÜ (–õ–∏–¥–µ—Ä ‚Üí –õ–µ–≥–µ–Ω–¥–∞): **{USER_LEVELS['–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞']}** –æ—á–∫–æ–≤\n"
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        await application.bot.send_message(
            chat_id=CHAT_ID,
            message_thread_id=NEWS_TOPIC_ID,
            text=weekly_text,
            parse_mode="Markdown",
        )
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∏—Å—Ç–æ—Ä–∏—é (–°–ö–†–´–¢–û)
        await save_daily_stats()
        await save_user_rating_stats()
        await save_chat_history()
        await save_user_active_stats()
        
        logger.info("–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç + –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}")


# ============== –ï–ñ–ï–ú–ï–°–Ø–ß–ù–ê–Ø –°–í–û–î–ö–ê ==============
async def send_monthly_summary():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏ —Å –∏—Ç–æ–≥–∞–º–∏ –º–µ—Å—è—Ü–∞"""
    global user_rating_stats, user_running_stats, monthly_running_stats

    if application is None:
        logger.error("Application –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        return

    try:
        now = datetime.now(MOSCOW_TZ)
        month_name = now.strftime("%B %Y")

        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Markdown-—Å–∏–º–≤–æ–ª–æ–≤ (MarkdownV2)
        def escape_markdown(text: str) -> str:
            """–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã MarkdownV2"""
            if not text:
                return text
            # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã MarkdownV2: _ * [ ] ( ) ~ ` > # + - . ! |
            return text.replace('_', '\\_').replace('*', '\\*').replace('[', '\\[').replace(']', '\\]').replace('(', '\\(').replace(')', '\\)').replace('~', '\\~').replace('`', '\\`').replace('>', '\\>').replace('#', '\\#').replace('+', '\\+').replace('-', '\\-').replace('.', '\\.').replace('!', '\\!').replace('|', '\\|')

        monthly_text = f"üèÜ **–ò—Ç–æ–≥–∏ –º–µ—Å—è—Ü–∞: {month_name}** üèÜ\n\n"
        
        # –û–±—â–∏–π —Ç–æ–ø-10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞ –º–µ—Å—è—Ü
        top_rated = await get_top_rated_users()
        
        if top_rated:
            monthly_text += "üåü **–¢–æ–ø-10 –ª–µ–≥–µ–Ω–¥ –º–µ—Å—è—Ü–∞:**\n"
            medals_rating = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü"]
            
            for i, user in enumerate(top_rated):
                level_emoji = LEVEL_EMOJIS.get(user["level"], "")
                escaped_name = escape_markdown(user['name'])
                monthly_text += f"{medals_rating[i]} {level_emoji} **{escaped_name}**\n"
                monthly_text += f"   ‚îî‚îÄ üèÖ {user['points']} –æ—á–∫–æ–≤ | üìù{user['messages']} | üì∑{user['photos']} | ‚ù§Ô∏è{user['likes']} | üí¨{user['replies']}\n"
            monthly_text += "\n"
        else:
            monthly_text += "üåü **–¢–æ–ø-10 –ª–µ–≥–µ–Ω–¥ –º–µ—Å—è—Ü–∞:** –ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç\n\n"
        
        # –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ –ø–æ –Ω–æ–º–∏–Ω–∞—Ü–∏—è–º
        monthly_text += "üéñÔ∏è **–ù–æ–º–∏–Ω–∞—Ü–∏–∏ –º–µ—Å—è—Ü–∞:**\n"
        
        # –°–∞–º–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
        if top_rated:
            escaped_name = escape_markdown(top_rated[0]['name'])
            monthly_text += f"ü•á **{escaped_name}** ‚Äî –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ª–∏–¥–µ—Ä –º–µ—Å—è—Ü–∞!\n"
        
        # –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π
        if user_rating_stats:
            max_messages_user = max(user_rating_stats.items(), key=lambda x: x[1]["messages"])
            escaped_name = escape_markdown(max_messages_user[1]["name"])
            monthly_text += f"üí¨ **{escaped_name}** ‚Äî –ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π \\({max_messages_user[1]['messages']}\\)\n"
        
        # –ú–∞–∫—Å–∏–º—É–º —Ñ–æ—Ç–æ
        if user_rating_stats:
            max_photos_user = max(user_rating_stats.items(), key=lambda x: x[1]["photos"])
            if max_photos_user[1]["photos"] > 0:
                escaped_name = escape_markdown(max_photos_user[1]["name"])
                monthly_text += f"üì∑ **{escaped_name}** ‚Äî –§–æ—Ç–æ–≥–µ–Ω–∏–π –º–µ—Å—è—Ü–∞ \\({max_photos_user[1]['photos']} —Ñ–æ—Ç–æ\\)\n"
        
        # –ú–∞–∫—Å–∏–º—É–º –ª–∞–π–∫–æ–≤
        if user_rating_stats:
            max_likes_user = max(user_rating_stats.items(), key=lambda x: x[1]["likes"])
            if max_likes_user[1]["likes"] > 0:
                escaped_name = escape_markdown(max_likes_user[1]["name"])
                monthly_text += f"‚ù§Ô∏è **{escaped_name}** ‚Äî –°–∞–º—ã–π –ª—é–±–∏–º—ã–π –∞–≤—Ç–æ—Ä \\({max_likes_user[1]['likes']} –ª–∞–π–∫–æ–≤\\)\n"
        
        # –ú–∞–∫—Å–∏–º—É–º –æ—Ç–≤–µ—Ç–æ–≤
        if user_rating_stats:
            max_replies_user = max(user_rating_stats.items(), key=lambda x: x[1]["replies"])
            if max_replies_user[1]["replies"] > 0:
                escaped_name = escape_markdown(max_replies_user[1]["name"])
                monthly_text += f"üí¨ **{escaped_name}** ‚Äî –°–∞–º—ã–π –æ—Ç–∑—ã–≤—á–∏–≤—ã–π \\({max_replies_user[1]['replies']} –æ—Ç–≤–µ—Ç–æ–≤\\)\n"
        
        monthly_text += "\n"
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ—Å—è—Ü–∞
        total_messages = sum(stats["messages"] for stats in user_rating_stats.values())
        total_photos = sum(stats["photos"] for stats in user_rating_stats.values())
        total_likes = sum(stats["likes"] for stats in user_rating_stats.values())
        total_replies = sum(stats["replies"] for stats in user_rating_stats.values())
        
        monthly_text += "üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ—Å—è—Ü–∞:**\n"
        monthly_text += f"üí¨ –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {total_messages}\n"
        monthly_text += f"üì∑ –í—Å–µ–≥–æ —Ñ–æ—Ç–æ: {total_photos}\n"
        monthly_text += f"‚ù§Ô∏è –í—Å–µ–≥–æ –ª–∞–π–∫–æ–≤: {total_likes}\n"
        monthly_text += f"üí¨ –í—Å–µ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤: {total_replies}\n"
        monthly_text += f"üë• –ê–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {len(user_rating_stats)}\n\n"
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ –∑–∞ –ú–ï–°–Ø–¶
        if monthly_running_stats:
            running_distance = sum(stats["distance"] for stats in monthly_running_stats.values()) / 1000
            running_activities = sum(stats["activities"] for stats in monthly_running_stats.values())
            running_calories = sum(stats["calories"] for stats in monthly_running_stats.values())
            running_duration = sum(stats["duration"] for stats in monthly_running_stats.values())

            monthly_text += "üèÉ‚Äç‚ôÇÔ∏è **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞ –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü:**\n"
            monthly_text += f"üìç –í—Å–µ–≥–æ –ø—Ä–æ–±–µ–∂–∞–ª–∏: {running_distance:.1f} –∫–º\n"
            monthly_text += f"üèÉ‚Äç‚ôÇÔ∏è –í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {running_activities}\n"
            monthly_text += f"‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è: {running_duration // 3600}—á {(running_duration % 3600) // 60}–º\n"
            monthly_text += f"üî• –°–æ–∂–≥–ª–∏ –∫–∞–ª–æ—Ä–∏–π: {running_calories} –∫–∫–∞–ª\n"
            monthly_text += f"üë• –ë–µ–≥—É–Ω–æ–≤ –≤ —á–∞—Ç–µ: {len(monthly_running_stats)}\n\n"

            # –¢–æ–ø –±–µ–≥—É–Ω–æ–≤ –º–µ—Å—è—Ü–∞
            monthly_text += "üèÜ **–õ—É—á—à–∏–µ –±–µ–≥—É–Ω—ã –º–µ—Å—è—Ü–∞:**\n"
            top_monthly_runners = get_top_monthly_runners()
            medals = ["ü•á", "ü•à", "ü•â"]
            for i, runner in enumerate(top_monthly_runners[:3]):
                escaped_name = escape_markdown(runner["name"])
                distance_km = runner["distance"] / 1000
                monthly_text += f"{medals[i]} {escaped_name} ‚Äî {distance_km:.1f} –∫–º \\({runner['activities']} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\\)\n"
            monthly_text += "\n"
        elif user_running_stats:
            # Fallback –Ω–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –µ—Å–ª–∏ monthly_running_stats –ø—É—Å—Ç
            running_distance = sum(stats["distance"] for stats in user_running_stats.values()) / 1000
            running_activities = sum(stats["activities"] for stats in user_running_stats.values())
            running_calories = sum(stats["calories"] for stats in user_running_stats.values())

            monthly_text += "üèÉ‚Äç‚ôÇÔ∏è **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–≥–∞:**\n"
            monthly_text += f"üìç –í—Å–µ–≥–æ –ø—Ä–æ–±–µ–∂–∞–ª–∏: {running_distance:.1f} –∫–º\n"
            monthly_text += f"üèÉ‚Äç‚ôÇÔ∏è –í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {running_activities}\n"
            monthly_text += f"üî• –°–æ–∂–≥–ª–∏ –∫–∞–ª–æ—Ä–∏–π: {running_calories} –∫–∫–∞–ª\n"
            monthly_text += f"üë• –ë–µ–≥—É–Ω–æ–≤ –≤ —á–∞—Ç–µ: {len(user_running_stats)}\n\n"
        
        # –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤—ã—Ö –ª–µ–≥–µ–Ω–¥
        legends = [uid for uid in user_rating_stats.keys() if get_user_level(uid) == "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞"]
        if legends:
            monthly_text += "üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤—ã—Ö –ª–µ–≥–µ–Ω–¥ —á–∞—Ç–∞!**\n"
            for uid in legends:
                monthly_text += f"   üèÜ {user_rating_stats[uid]['name']}\n"
        
        # –ù–æ–≤—ã–µ –ª–∏–¥–µ—Ä—ã
        leaders = [uid for uid in user_rating_stats.keys() if get_user_level(uid) == "–õ–∏–¥–µ—Ä"]
        if leaders:
            monthly_text += "üåü **–ù–æ–≤—ã–µ –ª–∏–¥–µ—Ä—ã:**\n"
            for uid in leaders:
                monthly_text += f"   üëë {user_rating_stats[uid]['name']}\n"
        
        monthly_text += "\nüèÉ‚Äç‚ôÇÔ∏è –î–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ —Å–ª–µ–¥—É—é—â–µ–º –º–µ—Å—è—Ü–µ!\n"
        monthly_text += "üí™ –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –±–µ–≥–∞—Ç—å –∏ –Ω–∞–±–∏—Ä–∞—Ç—å –æ—á–∫–∏!"
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç (–≤ —Ç–æ–ø–∏–∫ "–ù–æ–≤–æ—Å—Ç–∏")
        await application.bot.send_message(
            chat_id=CHAT_ID,
            message_thread_id=NEWS_TOPIC_ID,
            text=monthly_text,
            parse_mode="Markdown",
        )
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∏—Å—Ç–æ—Ä–∏—é (–°–ö–†–´–¢–û)
        await save_daily_stats()
        await save_user_rating_stats()
        await save_chat_history()
        await save_user_active_stats()
        await save_user_running_stats()
        
        logger.info("–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç + –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
        
        # –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–¥–µ—Å—å - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}")


async def daily_summary_scheduler_task():
    """–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π –∏ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–æ–∫ + —Ç—Ä–µ–∫–∏–Ω–≥ –±–µ–≥–∞"""
    global daily_summary_sent, current_week, user_running_stats

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        # –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ø–æ–ª–Ω–æ—á—å
        if now.hour == 0 and current_minute == 0:
            daily_summary_sent = False

        # === –ü–ï–†–ï–•–û–î –ù–ê –ù–û–í–´–ô –î–ï–ù–¨ (–ø–æ–ª–Ω–æ—á—å) ===
        if now.hour == 0 and current_minute == 0:
            logger.info("[RUNNING] –ù–æ–≤—ã–π –¥–µ–Ω—å - –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞ –≤ –Ω–µ–¥–µ–ª—å–Ω—É—é/–º–µ—Å—è—á–Ω—É—é")
            try:
                # –°–æ—Ö—Ä–∞–Ω—è–µ–º daily –≤ weekly –∏ monthly
                save_daily_running_to_weekly()
                save_daily_running_to_monthly()
                # –°–±—Ä–∞—Å—ã–≤–∞–µ–º daily
                reset_daily_running_stats()
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞: {e}")

        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–≤–æ–¥–∫–∏ –≤ 23:58-23:59 (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ ‚Äî –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–∏ sleep 60 —Å–µ–∫)
        if current_hour == 23 and current_minute >= 58:
            if not daily_summary_sent:
                logger.info(f"–í—Ä–µ–º—è {current_hour}:{current_minute} - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Å–≤–æ–¥–∫—É")
                try:
                    await send_daily_summary()
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–≤–æ–¥–∫–∏: {e}")

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–¥–µ–ª–∏ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 23:59 - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ + –±–µ–≥)
        if now.weekday() == 6 and current_hour == 23 and current_minute == 59:
            week_num = now.isocalendar()[1]
            if week_num != current_week:
                logger.info(f"–í—Ä–µ–º—è –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 23:59 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é —Å–≤–æ–¥–∫—É")
                try:
                    await send_weekly_summary()
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}")

                # –¢–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–≤–æ–¥–∫—É –ø–æ –±–µ–≥—É
                try:
                    await send_weekly_running_summary()
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ –±–µ–≥—É: {e}")

                current_week = week_num

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ –≤ 23:59)
        last_day_of_month = (now.replace(day=28) + timedelta(days=4)).day - (now.replace(day=28) + timedelta(days=4)).day % 28
        if now.day == last_day_of_month and current_hour == 23 and current_minute == 59:
            logger.info(f"–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–∂–µ–º–µ—Å—è—á–Ω—É—é —Å–≤–æ–¥–∫—É")
            try:
                await send_monthly_summary()
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏: {e}")

            # –¢–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–≤–æ–¥–∫—É –ø–æ –±–µ–≥—É –∑–∞ –º–µ—Å—è—Ü
            try:
                await send_monthly_running_summary()
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ –±–µ–≥—É: {e}")

            # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞ –ü–û–°–õ–ï –æ—Ç–ø—Ä–∞–≤–∫–∏
            try:
                global user_rating_stats
                user_rating_stats = {}
                logger.info("[SUMMARY] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞")
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: {e}")

            # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–≥–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞
            try:
                reset_monthly_running_stats()
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–µ–≥–∞: {e}")

        # –° 23:55 –¥–æ 00:05 –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫ ‚Äî —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ–¥–∫—É
        if (current_hour == 23 and current_minute >= 55) or (current_hour == 0 and current_minute <= 5):
            await asyncio.sleep(15)
        else:
            await asyncio.sleep(60)


# ============== –ê–ù–û–ù–ò–ú–ù–ê–Ø –û–¢–ü–†–ê–í–ö–ê ==============
async def anon(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if context.args:
        text = " ".join(context.args)
        await context.bot.send_message(chat_id=CHAT_ID, text=f"üïµÔ∏è –ê–Ω–æ–Ω–∏–º–Ω–æ:\n{text}")
        try:
            await update.message.delete()
        except Exception:
            pass
        return
    user_anon_state[user_id] = "waiting_for_text"

    try:
        await update.message.delete()
    except Exception:
        pass


async def anonphoto(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    user_anon_state[user_id] = "waiting_for_photo"

    try:
        await update.message.delete()
    except Exception:
        pass


# ============== –ö–û–ú–ê–ù–î–ê –î–õ–Ø –î–ù–Ø –†–û–ñ–î–ï–ù–ò–Ø ==============
async def birthday(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /birthday DD.MM ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è"""
    global user_birthdays
    
    try:
        user_id = update.message.from_user.id
        user_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
        if not context.args or len(context.args) != 1:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üéÇ **–ö–æ–º–∞–Ω–¥–∞ /birthday**\n\n"
                     "üìù –ò—Å–ø–æ–ª—å–∑—É–π: `/birthday DD.MM`\n"
                     "üì± *–ü—Ä–∏–º–µ—Ä:* `/birthday 15.06`\n\n"
                     "–ë–æ—Ç –±—É–¥–µ—Ç –ø–æ–∑–¥—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±—è —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è –∫–∞–∂–¥—ã–π –≥–æ–¥! üéâ",
                parse_mode="Markdown"
            )
            return
        
        # –ü–∞—Ä—Å–∏–º –¥–∞—Ç—É
        birthday_str = context.args[0]
        try:
            datetime.strptime(birthday_str, "%d.%m")
        except ValueError:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã!\n\n"
                     "–ò—Å–ø–æ–ª—å–∑—É–π: `/birthday DD.MM`\n"
                     "üì± *–ü—Ä–∏–º–µ—Ä:* `/birthday 15.06`",
                parse_mode="Markdown"
            )
            return
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
        user_birthdays[user_id] = {
            "name": user_name,
            "birthday": birthday_str
        }
        save_birthdays()
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"‚úÖ *–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω!* üéÇ\n\n"
                 f"üë§ {user_name}\n"
                 f"üìÖ –î–∞—Ç–∞: {birthday_str}\n\n"
                 f"–ë–æ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç –∏ –ø–æ–∑–¥—Ä–∞–≤–∏—Ç —Ç–µ–±—è –≤ —Å–ª–µ–¥—É—é—â–∏–π –î–†! üéâ",
            parse_mode="Markdown"
        )
        logger.info(f"[BIRTHDAY] –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {user_name} ‚Äî {birthday_str}")
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –∫–æ–º–∞–Ω–¥—ã: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è"
        )


async def is_user_admin(user_id: int, chat_id: int, bot) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º —á–∞—Ç–∞"""
    try:
        admins = await bot.get_chat_administrators(chat_id)
        admin_ids = [admin.user.id for admin in admins]
        return user_id in admin_ids
    except Exception:
        return False


async def add_birthday(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /add_birthday @–Ω–∏–∫ DD.MM ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)"""
    global user_birthdays
    
    try:
        user_id = update.message.from_user.id
        chat_id = update.effective_chat.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –∞–¥–º–∏–Ω
        if not await is_user_admin(user_id, chat_id, context.bot):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!",
            )
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∫ –∏ –¥–∞—Ç–∞
        if not context.args or len(context.args) != 2:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üéÇ **–î–æ–±–∞–≤–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è**\n\n"
                     "üìù –ò—Å–ø–æ–ª—å–∑—É–π: `/add_birthday @–Ω–∏–∫ DD.MM`\n"
                     "üì± *–ü—Ä–∏–º–µ—Ä:* `/add_birthday @runner 15.06`\n\n"
                     "–ë–æ—Ç –±—É–¥–µ—Ç –ø–æ–∑–¥—Ä–∞–≤–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! üéâ",
                parse_mode="Markdown"
            )
            return
        
        # –ü–∞—Ä—Å–∏–º –Ω–∏–∫ –∏ –¥–∞—Ç—É
        nickname = context.args[0]
        birthday_str = context.args[1]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã
        try:
            datetime.strptime(birthday_str, "%d.%m")
        except ValueError:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã!\n\n"
                     "–ò—Å–ø–æ–ª—å–∑—É–π: `/add_birthday @–Ω–∏–∫ DD.MM`\n"
                     "üì± *–ü—Ä–∏–º–µ—Ä:* `/add_birthday @runner 15.06`",
                parse_mode="Markdown"
            )
            return
        
        # –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å
        target_user_id = None
        for uid, data in user_rating_stats.items():
            if data.get("name", "").lower() == nickname.lower().replace("@", ""):
                target_user_id = uid
                break
        
        # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ö–µ—à –Ω–∏–∫–∞ –∫–∞–∫ ID
        if target_user_id is None:
            import hashlib
            target_user_id = int(hashlib.md5(nickname.encode()).hexdigest()[:8], 16)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
        user_birthdays[target_user_id] = {
            "name": nickname,
            "birthday": birthday_str
        }
        save_birthdays()
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"‚úÖ *–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω!* üéÇ\n\n"
                 f"üë§ {nickname}\n"
                 f"üìÖ –î–∞—Ç–∞: {birthday_str}\n\n"
                 f"–ë–æ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç –∏ –ø–æ–∑–¥—Ä–∞–≤–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞! üéâ",
            parse_mode="Markdown"
        )
        logger.info(f"[BIRTHDAY] –î–æ–±–∞–≤–ª–µ–Ω –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è: {nickname} ‚Äî {birthday_str}")
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è"
        )


async def del_birthday(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /del_birthday @–Ω–∏–∫ ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)"""
    global user_birthdays
    
    try:
        user_id = update.message.from_user.id
        chat_id = update.effective_chat.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –∞–¥–º–∏–Ω
        if not await is_user_admin(user_id, chat_id, context.bot):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!",
            )
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
        if not context.args or len(context.args) != 1:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üéÇ **–£–¥–∞–ª–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è**\n\n"
                     "üìù –ò—Å–ø–æ–ª—å–∑—É–π: `/del_birthday @–Ω–∏–∫`\n"
                     "üì± *–ü—Ä–∏–º–µ—Ä:* `/del_birthday @runner`",
                parse_mode="Markdown"
            )
            return
        
        nickname = context.args[0].replace("@", "").lower()
        
        # –ò—â–µ–º –∏ —É–¥–∞–ª—è–µ–º
        deleted = False
        for uid, data in list(user_birthdays.items()):
            stored_name = data.get("name", "").replace("@", "").lower()
            if stored_name == nickname:
                del user_birthdays[uid]
                deleted = True
                break
        
        if deleted:
            save_birthdays()
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"‚úÖ *–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É–¥–∞–ª—ë–Ω!* üóëÔ∏è\n\n"
                     f"üë§ @{nickname}\n\n"
                     f"–£—á–∞—Å—Ç–Ω–∏–∫ —É–¥–∞–ª—ë–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è.",
                parse_mode="Markdown"
            )
            logger.info(f"[BIRTHDAY] –£–¥–∞–ª—ë–Ω –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è: @{nickname}")
        else:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"‚ùå –£—á–∞—Å—Ç–Ω–∏–∫ @{nickname} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è!",
            )
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è"
        )


async def list_birthdays(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /list_birthdays ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è"""
    global user_birthdays
    
    try:
        if not user_birthdays:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üéÇ **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è**\n\n"
                     "–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –¥–æ–±–∞–≤–∏–ª –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è! üéÇ\n\n"
                     "–ò—Å–ø–æ–ª—å–∑—É–π `/birthday DD.MM` —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π!",
                parse_mode="Markdown"
            )
            return
        
        # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –º–µ—Å—è—Ü–∞–º
        months = {
            "01": "–Ø–Ω–≤–∞—Ä—å", "02": "–§–µ–≤—Ä–∞–ª—å", "03": "–ú–∞—Ä—Ç",
            "04": "–ê–ø—Ä–µ–ª—å", "05": "–ú–∞–π", "06": "–ò—é–Ω—å",
            "07": "–ò—é–ª—å", "08": "–ê–≤–≥—É—Å—Ç", "09": "–°–µ–Ω—Ç—è–±—Ä—å",
            "10": "–û–∫—Ç—è–±—Ä—å", "11": "–ù–æ—è–±—Ä—å", "12": "–î–µ–∫–∞–±—Ä—å"
        }
        
        birthdays_by_month = {}
        for uid, data in user_birthdays.items():
            birthday = data.get("birthday", "")
            name = data.get("name", "")
            month = birthday.split(".")[1] if "." in birthday else ""
            
            if month not in birthdays_by_month:
                birthdays_by_month[month] = []
            birthdays_by_month[month].append((name, birthday))
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫
        text = "üéÇ **–í—Å–µ –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è**\n\n"
        
        for month_num in ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"]:
            if month_num in birthdays_by_month:
                month_name = months.get(month_num, month_num)
                text += f"üìÖ *{month_name}:*\n"
                for name, birthday in sorted(birthdays_by_month[month_num], key=lambda x: x[1]):
                    text += f"   üéâ {birthday} ‚Äî {name}\n"
                text += "\n"
        
        text += f"üìä –í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {len(user_birthdays)}"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=text,
            parse_mode="Markdown"
        )
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] –û—à–∏–±–∫–∞ —Å–ø–∏—Å–∫–∞: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è"
        )


# ============== –ß–ï–õ–õ–ï–ù–î–ñ–ò ==============

async def handle_challenge_poll(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —á–µ–ª–ª–µ–Ω–¥–∂.
    –ö–æ–≥–¥–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —á–µ–ª–ª–µ–Ω–¥–∂.
    """
    global challenge_voting, current_challenge
    
    try:
        poll = update.poll
        if not poll:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–∞—à–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
        if not challenge_voting.get("active", False):
            logger.info(f"[CHALLENGE_VOTE] –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º")
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
        if poll.is_closed:
            # –ù–∞—Ö–æ–¥–∏–º –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤
            max_votes = 0
            winner_option_text = None
            winner_challenge = None
            
            for option in poll.options:
                option_votes = option.voter_count
                if option_votes > max_votes:
                    max_votes = option_votes
                    
                    # –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —á–µ–ª–ª–µ–Ω–¥–∂ –ø–æ —Ç–µ–∫—Å—Ç—É –≤–∞—Ä–∏–∞–Ω—Ç–∞
                    for challenge in VOTING_CHALLENGES:
                        # –§–æ—Ä–º–∏—Ä—É–µ–º –æ–∂–∏–¥–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞
                        expected_text = f"{challenge['emoji']} {challenge['name']}: {challenge['desc']}"
                        if option.text == expected_text or option.text == challenge['name']:
                            winner_challenge = challenge
                            winner_option_text = option.text
                            break
            
            if winner_challenge:
                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ–ª–ª–µ–Ω–¥–∂–∞
                challenge_type = "weekly"
                goal_index = 0
                
                # –ü–∞—Ä—Å–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞
                challenge_name = winner_challenge['name'].lower()
                
                if "10 –∫–º" in challenge_name:
                    goal_index = 0
                elif "20 –∫–º" in challenge_name:
                    goal_index = 0
                elif "3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏" in challenge_name:
                    goal_index = 1
                elif "5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫" in challenge_name:
                    goal_index = 1
                elif "–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥" in challenge_name:
                    goal_index = 2
                elif "—Ñ–æ—Ç–æ" in challenge_name:
                    goal_index = 2
                else:
                    goal_index = 0
                
                goal_config = CHALLENGE_TYPES["weekly"]["goals"][goal_index]
                
                # –ó–∞–ø—É—Å–∫–∞–µ–º —á–µ–ª–ª–µ–Ω–¥–∂
                current_challenge["type"] = challenge_type
                current_challenge["goal_index"] = goal_index
                current_challenge["start_date"] = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
                
                # –í—ã—á–∏—Å–ª—è–µ–º –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è
                now = datetime.now(MOSCOW_TZ)
                end_date = now + timedelta(days=7 - now.weekday())
                current_challenge["end_date"] = end_date.strftime("%Y-%m-%d")
                current_challenge["participants"] = {}
                current_challenge["active"] = True
                
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ
                await context.bot.send_message(
                    chat_id=CHAT_ID,
                    text=f"üèÜ **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!**\n\n"
                         f"–ü–æ–±–µ–¥–∏–ª –≤–∞—Ä–∏–∞–Ω—Ç: **{winner_challenge['emoji']} {winner_challenge['name']}**\n"
                         f"üìù {winner_challenge['desc']}\n\n"
                         f"üí™ –ß–µ–ª–ª–µ–Ω–¥–∂ –∑–∞–ø—É—â–µ–Ω! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π /challenge join",
                    parse_mode="Markdown"
                )
                
                logger.info(f"[CHALLENGE_VOTE] –ó–∞–ø—É—â–µ–Ω —á–µ–ª–ª–µ–Ω–¥–∂: {winner_challenge['name']} ({winner_challenge['desc']})")
            else:
                await context.bot.send_message(
                    chat_id=CHAT_ID,
                    text="‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å–Ω–æ–≤–∞."
                )
                
            # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
            challenge_voting["active"] = False
            challenge_voting["options"] = []
            challenge_voting["voters"] = {}
        
        logger.info(f"[CHALLENGE_VOTE] –ü–æ–ª—É—á–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, –≥–æ–ª–æ—Å–æ–≤: {sum(o.voter_count for o in poll.options)}")
        
    except Exception as e:
        logger.error(f"[CHALLENGE_VOTE] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è: {e}", exc_info=True)


async def start_challenge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /challenge weekly|monthly ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)"""
    global current_challenge
    
    try:
        user_id = update.message.from_user.id
        chat_id = update.effective_chat.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –∞–¥–º–∏–Ω
        if not await is_user_admin(user_id, chat_id, context.bot):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!",
            )
            return
        
        challenge_type = context.args[0].lower() if context.args else "weekly"
        
        if challenge_type not in CHALLENGE_TYPES:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üèÜ **–ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂**\n\n"
                     "üìù –ò—Å–ø–æ–ª—å–∑—É–π: `/challenge weekly` –∏–ª–∏ `/challenge monthly`\n\n"
                     "üìå *–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø–ø—ã:*\n"
                     "   ‚Ä¢ `weekly` ‚Äî –Ω–µ–¥–µ–ª—å–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂\n"
                     "   ‚Ä¢ `monthly` ‚Äî –º–µ—Å—è—á–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂",
                parse_mode="Markdown"
            )
            return
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —á–µ–ª–ª–µ–Ω–¥–∂
        now = datetime.now(MOSCOW_TZ)
        
        if challenge_type == "weekly":
            end_date = now + timedelta(days=7)
            challenge_name = "–ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ üèÉ"
        else:
            end_date = now + timedelta(days=30)
            challenge_name = "–ú–µ—Å—è—á–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ üèÉ‚Äç‚ôÇÔ∏è"
        
        current_challenge = {
            "type": challenge_type,
            "goal_index": 0,
            "start_date": now.strftime("%Y-%m-%d"),
            "end_date": end_date.strftime("%Y-%m-%d"),
            "participants": {},
            "active": True
        }
        
        goal = CHALLENGE_TYPES[challenge_type]["goals"][0]
        
        text = f"üöÄ *{challenge_name} –ó–ê–ü–£–©–ï–ù!* üöÄ\n\n"
        text += f"üéØ *–¶–µ–ª—å:* {goal['name']}\n"
        text += f"üìÖ –ü–µ—Ä–∏–æ–¥: {now.strftime('%d.%m')} ‚Äî {end_date.strftime('%d.%m')}\n\n"
        text += "üìù *–ö–∞–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å:*\n"
        text += "   –ü–∏—à–∏ `/challenge join` —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è!\n"
        text += "   –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–∏—à–∏ `/challenge done`\n\n"
        text += "üèÜ –ü–æ–±–µ–¥–∏—Ç —Ç–æ—Ç, –∫—Ç–æ –ø–µ—Ä–≤—ã–º –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç —Ü–µ–ª–∏!"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=text,
            parse_mode="Markdown"
        )
        logger.info(f"[CHALLENGE] –ó–∞–ø—É—â–µ–Ω {challenge_type} —á–µ–ª–ª–µ–Ω–¥–∂")
        
    except Exception as e:
        logger.error(f"[CHALLENGE] –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞"
        )


async def join_challenge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /challenge join ‚Äî –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–µ–ª–ª–µ–Ω–¥–∂—É"""
    global current_challenge
    
    try:
        if not current_challenge.get("active"):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üèÜ –°–µ–π—á–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞!\n\n"
                     "–û–∂–∏–¥–∞–π, –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω –∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π —á–µ–ª–ª–µ–Ω–¥–∂.",
            )
            return
        
        user_id = update.message.from_user.id
        user_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
        
        if user_id in current_challenge["participants"]:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"@{update.message.from_user.username} –¢—ã —É–∂–µ —É—á–∞—Å—Ç–≤—É–µ—à—å –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ!",
            )
            return
        
        # –î–æ–±–∞–≤–ª—è–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞
        current_challenge["participants"][user_id] = {
            "name": user_name,
            "progress": 0,
            "completed": False
        }
        
        goal = CHALLENGE_TYPES[current_challenge["type"]]["goals"][current_challenge["goal_index"]]
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"‚úÖ @{update.message.from_user.username} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ —á–µ–ª–ª–µ–Ω–¥–∂—É!\n\n"
                 f"üéØ –¶–µ–ª—å: {goal['name']}\n"
                 f"üìä –¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 0 / {goal['value']} {goal['unit']}\n\n"
                 f"–£–¥–∞—á–∏! üí™",
        )
        logger.info(f"[CHALLENGE] {user_name} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è")
        
    except Exception as e:
        logger.error(f"[CHALLENGE] –û—à–∏–±–∫–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è: {e}")


async def done_challenge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /challenge done ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å"""
    global current_challenge
    
    try:
        if not current_challenge.get("active"):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üèÜ –°–µ–π—á–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞!",
            )
            return
        
        user_id = update.message.from_user.id
        
        if user_id not in current_challenge["participants"]:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"@{update.message.from_user.username} –¢—ã –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—à—å –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ!\n\n"
                     f"–ù–∞–ø–∏—à–∏ `/challenge join` —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è.",
            )
            return
        
        goal = CHALLENGE_TYPES[current_challenge["type"]]["goals"][current_challenge["goal_index"]]
        participant = current_challenge["participants"][user_id]
        
        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        if goal["type"] == "distance":
            # –°–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ –∫–º
            km = float(context.args[0]) if context.args else 1
            participant["progress"] += km
        elif goal["type"] == "runs":
            participant["progress"] += 1
        elif goal["type"] == "photos":
            participant["progress"] += 1
        elif goal["type"] == "consistency":
            participant["progress"] += 1
        
        progress = participant["progress"]
        target = goal["value"]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–±–µ–¥—É
        if progress >= target and not participant["completed"]:
            participant["completed"] = True
            
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"üéâ @{update.message.from_user.username} –ü–û–ë–ï–î–ò–õ –í –ß–ï–õ–õ–ï–ù–î–ñ–ï! üéâ\n\n"
                     f"üèÜ {participant['name']} –ø–µ—Ä–≤—ã–º –¥–æ—Å—Ç–∏–≥ —Ü–µ–ª–∏!\n\n"
                     f"üéØ {goal['name']}\n"
                     f"üìä –ò—Ç–æ–≥: {progress} / {target} {goal['unit']}\n\n"
                     f"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! ü•≥",
                parse_mode="Markdown"
            )
            
            # –ó–∞–≤–µ—Ä—à–∞–µ–º —á–µ–ª–ª–µ–Ω–¥–∂
            current_challenge["active"] = False
            logger.info(f"[CHALLENGE] –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {participant['name']}")
        else:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"@{update.message.from_user.username} ‚úÖ –£—á—Ç–µ–Ω–æ!\n\n"
                     f"üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: {progress} / {target} {goal['unit']}\n"
                     f"üìà –û—Å—Ç–∞–ª–æ—Å—å: {target - progress} {goal['unit']}",
            )
            logger.info(f"[CHALLENGE] –ü—Ä—Ä–µ—Å—Å {participant['name']}: {progress}/{target}")
        
    except Exception as e:
        logger.error(f"[CHALLENGE] –û—à–∏–±–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: {e}")


async def challenge_status(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /challenge ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ–ª–ª–µ–Ω–¥–∂–∞"""
    global current_challenge
    
    try:
        if not current_challenge.get("active"):
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π
            goal = CHALLENGE_TYPES.get("weekly", {}).get("goals", [{}])[0]
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üèÜ *–°—Ç–∞—Ç—É—Å —á–µ–ª–ª–µ–Ω–¥–∂–µ–π*\n\n"
                     "üìå –°–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞ –Ω–µ—Ç.\n\n"
                     "–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π:\n"
                     "   `/challenge weekly` ‚Äî –Ω–µ–¥–µ–ª—å–Ω—ã–π\n"
                     "   `/challenge monthly` ‚Äî –º–µ—Å—è—á–Ω—ã–π",
                parse_mode="Markdown"
            )
            return
        
        goal = CHALLENGE_TYPES[current_challenge["type"]]["goals"][current_challenge["goal_index"]]
        participants = current_challenge.get("participants", {})
        
        text = f"üèÜ *–¢–µ–∫—É—â–∏–π —á–µ–ª–ª–µ–Ω–¥–∂*\n\n"
        text += f"üéØ *{goal['name']}*\n"
        text += f"üìÖ –î–æ –∫–æ–Ω—Ü–∞: {current_challenge['end_date']}\n\n"
        text += f"üìä *–£—á–∞—Å—Ç–Ω–∏–∫–∏ \\({len(participants)}\\):*\n"
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É
        sorted_parts = sorted(participants.items(), key=lambda x: x[1]["progress"], reverse=True)
        
        for uid, data in sorted_parts:
            emoji = "‚úÖ" if data["completed"] else "üîÑ"
            escaped_name = escape_markdown(data['name'])
            text += f"   {emoji} {escaped_name}: {data['progress']} / {goal['value']} {goal['unit']}\n"
        
        text += "\nüìù –ü–∏—à–∏ `/challenge join` —á—Ç–æ–±—ã —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å!"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=text,
            parse_mode="Markdown"
        )
        
    except Exception as e:
        logger.error(f"[CHALLENGE] –û—à–∏–±–∫–∞ —Å—Ç–∞—Ç—É—Å–∞: {e}")


# ============== –û–ë–†–ê–ë–û–¢–ß–ò–ö –õ–ò–ß–ù–´–• –û–ë–†–ê–©–ï–ù–ò–ô ==============
async def handle_mentions(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–≥–¥–∞ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –±–æ—Ç—É —á–µ—Ä–µ–∑ @mention"""
    try:
        if not update.message or not update.message.text:
            return
        
        user_name = update.message.from_user.full_name or update.message.from_user.username or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        user_id = update.message.from_user.id
        message_text = update.message.text
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
        is_female = await check_is_female_by_ai(user_name)
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
        bot_info = await context.bot.get_me()
        bot_username = bot_info.username.lower()
        
        logger.info(f"[MENTION] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç {user_name}: '{message_text[:50]}...' (–∏—â–µ–º @{bot_username})")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç @mention –±–æ—Ç–∞
        mention_patterns = [
            f"@{bot_username}",
            f"@{bot_username}:",
            f"@{bot_username}.",
        ]
        
        message_lower = message_text.lower()
        is_mention = any(pattern in message_lower for pattern in mention_patterns)
        
        logger.info(f"[MENTION] is_mention={is_mention}, –ø–∞—Ç—Ç–µ—Ä–Ω—ã={mention_patterns}")
        
        if not is_mention:
            return
        
        # –£–±–∏—Ä–∞–µ–º @mention –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        clean_text = message_text
        for pattern in mention_patterns:
            clean_text = clean_text.replace(pattern, "").strip()
            clean_text = clean_text.replace(pattern.capitalize(), "").strip()
        
        # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –≤ –Ω–∞—á–∞–ª–µ
        clean_text = clean_text.strip(" ,:!-\n")
        
        logger.info(f"[MENTION] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_name} –æ–±—Ä–∞—Ç–∏–ª—Å—è –∫ –±–æ—Ç—É: '{clean_text}'")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º "–ø–µ—á–∞—Ç–∞–µ—Ç" —Å—Ç–∞—Ç—É—Å
        await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
        
        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç —Å –º–µ–¥–∏–∞
        response_data = await generate_toxic_response_with_media(clean_text, user_name, is_female, include_media=True)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç —Å –º–µ–¥–∏–∞
        await send_toxic_response(
            context=context,
            chat_id=update.effective_chat.id,
            text=response_data['text'],
            sticker=response_data['sticker'],
            gif=response_data['gif']
        )
        
        logger.info(f"[MENTION] –û—Ç–≤–µ—Ç —Å –º–µ–¥–∏–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_name}")
        
    except Exception as e:
        logger.error(f"[MENTION] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è: {e}")


async def handle_replies_to_bot(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞"""
    try:
        if not update.message or not update.message.text:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ reply (–æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)
        if not update.message.reply_to_message:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞
        replied_from = update.message.reply_to_message.from_user
        if not replied_from or not replied_from.is_bot:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–∞—à –±–æ—Ç (–∞ –Ω–µ –¥—Ä—É–≥–æ–π –±–æ—Ç)
        bot_info = await context.bot.get_me()
        if replied_from.id != bot_info.id:
            return
        
        user_name = update.message.from_user.full_name or update.message.from_user.username or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        user_id = update.message.from_user.id
        message_text = update.message.text
        
        logger.info(f"[REPLY] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_name} –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞: '{message_text[:50]}...'")
        
        # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        if not message_text or len(message_text.strip()) < 2:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª –¥–ª—è –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
        is_female = await check_is_female_by_ai(user_name)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º "–ø–µ—á–∞—Ç–∞–µ—Ç" —Å—Ç–∞—Ç—É—Å
        await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
        
        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç —Å –º–µ–¥–∏–∞
        response_data = await generate_toxic_response_with_media(message_text, user_name, is_female, include_media=True)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç —Å –º–µ–¥–∏–∞
        await send_toxic_response(
            context=context,
            chat_id=update.effective_chat.id,
            text=response_data['text'],
            sticker=response_data['sticker'],
            gif=response_data['gif']
        )
        
        logger.info(f"[REPLY] –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_name}")
        
    except Exception as e:
        logger.error(f"[REPLY] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞: {e}")


# ============== –û–ë–†–ê–ë–û–¢–ö–ê –ì–ò–§–û–ö –ò –°–¢–ò–ö–ï–†–û–í ==============
async def handle_gifs_and_stickers(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–∏—Ñ–æ–∫ –∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ –∫–æ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞"""
    try:
        if not update.message:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ reply (–æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)
        if not update.message.reply_to_message:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞
        replied_from = update.message.reply_to_message.from_user
        if not replied_from or not replied_from.is_bot:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–∞—à –±–æ—Ç
        bot_info = await context.bot.get_me()
        if replied_from.id != bot_info.id:
            return
        
        user_name = update.message.from_user.full_name or update.message.from_user.username or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        user_id = update.message.from_user.id
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –º–µ–¥–∏–∞
        is_gif = False
        is_sticker = False
        
        if update.message.sticker:
            is_sticker = True
            media_type = "—Å—Ç–∏–∫–µ—Ä"
        elif update.message.document and update.message.document.mime_type == 'video/mp4':
            # Telegram GIFs usually have mime_type video/mp4
            is_gif = True
            media_type = "–≥–∏—Ñ–∫—É"
        elif update.message.document and update.message.document.mime_type == 'image/gif':
            is_gif = True
            media_type = "–≥–∏—Ñ–∫—É"
        else:
            return
        
        logger.info(f"[MEDIA] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_name} –æ—Ç–ø—Ä–∞–≤–∏–ª {media_type} –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª –¥–ª—è –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
        is_female = await check_is_female_by_ai(user_name)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º "–ø–µ—á–∞—Ç–∞–µ—Ç" —Å—Ç–∞—Ç—É—Å
        await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç
        import random
        
        responses_for_gift_sticker = [
            "–û–≥–æ, –∫—Ä—É—Ç–∞—è {media}! üéâ",
            "–ù–µ–ø–ª–æ—Ö–æ! {media} –ø—Ä–∏–Ω—è—Ç–∞! üëç",
            "–í–∞—É! {media} –≤ —Ç–µ–º—É! üî•",
            "–ö–ª–∞—Å—Å! {media} –∑–∞—Ü–µ–Ω–∏–ª! üòé",
            "–û—Ç–ª–∏—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç! {media} ‚Äî –æ–≥–æ–Ω—å! üíØ",
            "{media} ‚Äî –ø—Ä—è–º–æ –≤ —è–±–ª–æ—á–∫–æ! üçé",
            "–ë—Ä–æ, {media} ‚Äî —ç—Ç–æ –≤—ã—Å—à–∏–π –ø–∏–ª–æ—Ç–∞–∂! ‚ú®",
            "{media} –ø–æ–¥–Ω—è–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! üòä",
        ]
        
        compliment_responses = [
            "–û–π, –∫–∞–∫–∞—è –º–∏–ª–∞—è {media}! üíï –¢—ã —Ç–∞–∫–∞—è –∫–ª–∞—Å—Å–Ω–∞—è! ‚ú®",
            "–£—Ö —Ç—ã, {media}! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è –∑–≤–µ–∑–¥–∞! üåü",
            "–í–∞—É, {media} ‚Äî –ø—Ä–æ—Å—Ç–æ –±–æ–º–±–∞! üíñ –¢—ã –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤—ã—Å–æ—Ç–µ!",
            "–û, {media}! –° —Ç–æ–±–æ–π —Ç–∞–∫ –≤–µ—Å–µ–ª–æ! üéÄ –¢—ã –ª—É—á—à–∞—è!",
            "–°—É–ø–µ—Ä—Å–∫–∞—è {media}! üíù –¢—ã –¥–µ–ª–∞–µ—à—å —ç—Ç–æ—Ç —á–∞—Ç —è—Ä—á–µ!",
        ]
        
        if is_female:
            response_template = random.choice(compliment_responses)
        else:
            response_template = random.choice(responses_for_gift_sticker)
        
        response_text = response_template.format(media=media_type)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=response_text,
            reply_to_message_id=update.message.message_id
        )
        
        logger.info(f"[MEDIA] –û—Ç–≤–µ—Ç –Ω–∞ {media_type} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_name}")
        
    except Exception as e:
        logger.error(f"[MEDIA] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–∏—Ñ–∫–∏/—Å—Ç–∏–∫–µ—Ä–∞: {e}")


# ============== –ì–û–õ–û–°–û–í–ê–ù–ò–ï –ó–ê –ß–ï–õ–õ–ï–ù–î–ñ–ò ==============
async def start_vote(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /votechallenges ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ —á–µ–ª–ª–µ–Ω–¥–∂ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)"""
    global challenge_voting
    
    try:
        user_id = update.message.from_user.id
        chat_id = update.effective_chat.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –∞–¥–º–∏–Ω
        if not await is_user_admin(user_id, chat_id, context.bot):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!",
            )
            return
        
        if challenge_voting.get("active"):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —É–∂–µ –∏–¥—ë—Ç!\n\n"
                     "–ò—Å–ø–æ–ª—å–∑—É–π `/vote` —á—Ç–æ–±—ã –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å.",
            )
            return
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
        now = datetime.now(MOSCOW_TZ)
        challenge_voting = {
            "active": True,
            "options": [{"id": c["id"], "votes": 0, "emoji": c["emoji"], "name": c["name"], "desc": c["desc"]} for c in VOTING_CHALLENGES],
            "voters": {},
            "start_time": now.isoformat(),
            "duration_hours": 24
        }
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
        text = "üó≥Ô∏è *–ì–û–õ–û–°–û–í–ê–ù–ò–ï –ó–ê –ß–ï–õ–õ–ï–ù–î–ñ!* üó≥Ô∏è\n\n"
        text += "üìå *–ü—Ä–æ–≥–æ–ª–æ—Å—É–π –∑–∞ —á–µ–ª–ª–µ–Ω–¥–∂, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–Ω—ë—Ç—Å—è –∑–∞–≤—Ç—Ä–∞!*\n\n"
        text += "*–í–∞—Ä–∏–∞–Ω—Ç—ã:*\n"
        
        for i, option in enumerate(challenge_voting["options"]):
            text += f"{i+1}. {option['emoji']} *{option['name']}* ‚Äî {option['desc']}\n"
        
        text += "\nüìù *–ö–∞–∫ –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å:*\n"
        text += "   –ù–∞–ø–∏—à–∏ `/vote 1` (–∏–ª–∏ 2, 3...)\n\n"
        text += "‚è∞ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –¥–ª–∏—Ç—Å—è 24 —á–∞—Å–∞\n"
        text += "üèÜ –ü–æ–±–µ–¥–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤!"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=text,
            parse_mode="Markdown"
        )
        logger.info(f"[VOTE] –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ")
        
    except Exception as e:
        logger.error(f"[VOTE] –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")


async def vote_challenge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /vote N ‚Äî –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –≤–∞—Ä–∏–∞–Ω—Ç"""
    global challenge_voting
    
    try:
        if not challenge_voting.get("active"):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üó≥Ô∏è –°–µ–π—á–∞—Å –Ω–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è!\n\n"
                     "–û–∂–∏–¥–∞–π, –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω –∑–∞–ø—É—Å—Ç–∏—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ `/votechallenges`.",
            )
            return
        
        if not context.args or len(context.args) != 1:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üó≥Ô∏è *–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å*\n\n"
                     "üìù –ò—Å–ø–æ–ª—å–∑—É–π: `/vote 1` (–Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞)\n\n"
                     "*–¢–µ–∫—É—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:*\n",
                parse_mode="Markdown"
            )
            for i, option in enumerate(challenge_voting["options"]):
                await context.bot.send_message(
                    chat_id=update.effective_chat.id,
                    text=f"{i+1}. {option['emoji']} {option['name']} ‚Äî {option['desc']}\n   ({option['votes']} –≥–æ–ª–æ—Å–æ–≤)"
                )
            return
        
        try:
            choice = int(context.args[0]) - 1
            if choice < 0 or choice >= len(challenge_voting["options"]):
                raise ValueError()
        except ValueError:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞!\n\n"
                     "–ù–∞–ø–∏—à–∏ `/vote` —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫.",
            )
            return
        
        user_id = update.message.from_user.id
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª –ª–∏ —É–∂–µ
        if user_id in challenge_voting["voters"]:
            old_choice = challenge_voting["voters"][user_id]
            # –£–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–π –≥–æ–ª–æ—Å
            for option in challenge_voting["options"]:
                if option["id"] == old_choice:
                    option["votes"] -= 1
                    break
        
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –≥–æ–ª–æ—Å
        chosen_option = challenge_voting["options"][choice]
        chosen_option["votes"] += 1
        challenge_voting["voters"][user_id] = chosen_option["id"]
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"‚úÖ @{update.message.from_user.username} –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª!\n\n"
                 f"–¢–≤–æ–π –≤—ã–±–æ—Ä: {chosen_option['emoji']} {chosen_option['name']}\n\n"
                 f"üìä –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n",
            parse_mode="Markdown"
        )
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-3
        sorted_options = sorted(challenge_voting["options"], key=lambda x: x["votes"], reverse=True)
        for option in sorted_options[:3]:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"{option['emoji']} {option['name']}: {option['votes']} –≥–æ–ª–æ—Å–æ–≤"
            )
        
        logger.info(f"[VOTE] {update.message.from_user.username} –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª –∑–∞ {chosen_option['name']}")
        
    except Exception as e:
        logger.error(f"[VOTE] –û—à–∏–±–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è: {e}")


async def vote_status(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /vote ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è"""
    global challenge_voting
    
    try:
        if not challenge_voting.get("active"):
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="üó≥Ô∏è –°–µ–π—á–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è.\n\n"
                     "–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å: `/votechallenges`",
            )
            return
        
        text = "üó≥Ô∏è *–¢–µ–∫—É—â–µ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ*\n\n"
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≥–æ–ª–æ—Å–∞–º
        sorted_options = sorted(challenge_voting["options"], key=lambda x: x["votes"], reverse=True)
        
        for option in sorted_options:
            bar = "‚ñà" * min(option["votes"], 20)
            text += f"{option['emoji']} {option['name']}: {option['votes']} {bar}\n"
        
        text += f"\nüìä –í—Å–µ–≥–æ –≥–æ–ª–æ—Å–æ–≤: {len(challenge_voting['voters'])}"
        text += f"\n‚è∞ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —á–µ—Ä–µ–∑ {challenge_voting.get('duration_hours', 24)} —á–∞—Å–æ–≤"
        text += "\n\nüìù –ù–∞–ø–∏—à–∏ `/vote 1` —á—Ç–æ–±—ã –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å!"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=text,
            parse_mode="Markdown"
        )
        
    except Exception as e:
        logger.error(f"[VOTE] –û—à–∏–±–∫–∞ —Å—Ç–∞—Ç—É—Å–∞: {e}")


async def end_vote_and_start_challenge(bot, chat_id: int):
    """–ó–∞–≤–µ—Ä—à–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–±–µ–¥–∏–≤—à–∏–π —á–µ–ª–ª–µ–Ω–¥–∂"""
    global challenge_voting, current_challenge
    
    if not challenge_voting.get("active"):
        return
    
    # –ù–∞—Ö–æ–¥–∏–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    sorted_options = sorted(challenge_voting["options"], key=lambda x: x["votes"], reverse=True)
    winner = sorted_options[0]
    
    # –°–æ–∑–¥–∞—ë–º —á–µ–ª–ª–µ–Ω–¥–∂ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    now = datetime.now(MOSCOW_TZ)
    end_date = now + timedelta(days=7)
    
    current_challenge = {
        "type": "weekly",
        "goal_index": 0,
        "start_date": now.strftime("%Y-%m-%d"),
        "end_date": end_date.strftime("%Y-%m-%d"),
        "participants": {},
        "active": True
    }
    
    challenge_voting["active"] = False
    
    # –û–±—ä—è–≤–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    text = f"üó≥Ô∏è *–ì–û–õ–û–°–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!* üó≥Ô∏è\n\n"
    text += f"üèÜ *–ü–û–ë–ï–î–ò–¢–ï–õ–¨:* {winner['emoji']} {winner['name']}!\n\n"
    text += f"üìä *–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:*\n"
    
    for i, option in enumerate(sorted_options):
        medal = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£"][i]
        text += f"   {medal} {option['emoji']} {option['name']}: {option['votes']} –≥–æ–ª–æ—Å–æ–≤\n"
    
    text += f"\nüöÄ *–ß–ï–õ–õ–ï–ù–î–ñ –ó–ê–ü–£–©–ï–ù!* üöÄ\n\n"
    text += f"üéØ –¶–µ–ª—å: {winner['name']}\n"
    text += f"üìÖ –ü–µ—Ä–∏–æ–¥: {now.strftime('%d.%m')} ‚Äî {end_date.strftime('%d.%m')}\n\n"
    text += "üìù –ü–∏—à–∏ `/challenge join` —á—Ç–æ–±—ã —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å!"
    
    await bot.send_message(
        chat_id=chat_id,
        text=text,
        parse_mode="Markdown"
    )
    
    logger.info(f"[VOTE] –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {winner['name']}")


# ============== –ï–î–ò–ù–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö –°–û–û–ë–©–ï–ù–ò–ô ==============
async def handle_all_messages(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π - –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏ —Ä–µ–∞–∫—Ü–∏–∏"""
    global daily_stats, user_rating_stats, user_current_level, user_night_messages, user_night_warning_sent, mam_message_id, user_last_active

    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ callback, –Ω–µ reaction –∏ —Ç.–¥.)
        if not update.message:
            return

        message = update.message
        user_id = message.from_user.id if message.from_user else None
        user_name = message.from_user.full_name or message.from_user.username or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" if message.from_user else "Unknown"

        if not user_id:
            return

        # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤
        if message.from_user and message.from_user.is_bot:
            return

        # –ï—Å–ª–∏ —ç—Ç–æ reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ ‚Äî –æ—Ç–≤–µ—á–∞–µ–º (—Ç–µ–∫—Å—Ç –∏–ª–∏ –º–µ–¥–∏–∞)
        if message.reply_to_message and message.reply_to_message.from_user and message.reply_to_message.from_user.is_bot:
            if message.sticker or (message.document and message.document.mime_type in ["video/mp4", "image/gif"]):
                await handle_gifs_and_stickers(update, context)
            else:
                await handle_replies_to_bot(update, context)
            return

        # –ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        if user_id in user_anon_state:
            state = user_anon_state.get(user_id)
            if state == "waiting_for_text" and message.text:
                await context.bot.send_message(
                    chat_id=CHAT_ID,
                    text=f"üïµÔ∏è –ê–Ω–æ–Ω–∏–º–Ω–æ:\n{message.text}",
                )
                user_anon_state.pop(user_id, None)
                try:
                    await message.delete()
                except Exception:
                    pass
                return
            if state == "waiting_for_photo" and message.photo:
                await context.bot.send_photo(
                    chat_id=CHAT_ID,
                    photo=message.photo[-1].file_id,
                    caption="üïµÔ∏è –ê–Ω–æ–Ω–∏–º–Ω–æ–µ —Ñ–æ—Ç–æ",
                )
                user_anon_state.pop(user_id, None)
                try:
                    await message.delete()
                except Exception:
                    pass
                return

        # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        user_last_active[user_id] = datetime.now(MOSCOW_TZ)

        # –û—Ç–≤–µ—Ç –Ω–∞ "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ" –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —á–∞—Ç–µ (–±–µ–∑ @mention –∏ reply)
        if message.text and str(update.effective_chat.id) == str(CHAT_ID):
            text_lower = message.text.lower().strip()
            morning_phrases = ("–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä")
            if any(p in text_lower for p in morning_phrases) and len(text_lower) <= 80:
                try:
                    is_female = await check_is_female_by_ai(user_name)
                    reply_text = get_random_good_morning_flirt() if is_female else get_random_good_morning()
                    await message.reply_text(reply_text)
                    logger.info(f"[MORNING] –û—Ç–≤–µ—Ç –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç {user_name}")
                    return
                except Exception as e:
                    logger.error(f"[MORNING] –û—à–∏–±–∫–∞: {e}")

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
        message_type = "text"
        photo_info = None

        if message.photo:
            message_type = "photo"
            photo_info = {
                "user_id": user_id,
                "user_name": user_name,
                "message_id": message.message_id,
                "file_id": message.photo[-1].file_id if message.photo else None,
                "timestamp": datetime.now(MOSCOW_TZ).isoformat()
            }

        # –û–±–Ω–æ–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        update_daily_stats(user_id, user_name, message_type, photo_info)

        # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–æ–±—â–µ–Ω–∏—è)
        if user_id not in user_rating_stats:
            user_rating_stats[user_id] = {
                "name": user_name,
                "messages": 0,
                "photos": 0,
                "likes": 0,
                "replies": 0,
                "bonus_points": 0,
                "days_active": set()
            }

        user_rating_stats[user_id]["messages"] += 1
        today_str = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
        user_rating_stats[user_id]["days_active"].add(today_str)

        if message_type == "photo":
            user_rating_stats[user_id]["photos"] += 1

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (22:00 - 06:00)
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour

        if current_hour >= 22 or current_hour < 6:
            # –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω
            if user_id not in user_night_messages:
                user_night_messages[user_id] = 0

            user_night_messages[user_id] += 1

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
            if user_night_messages[user_id] == 10 and user_id not in user_night_warning_sent:
                warning = random.choice(NIGHT_WARNINGS)
                try:
                    await message.reply_text(warning)
                    user_night_warning_sent[user_id] = True
                    logger.info(f"[NIGHT] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_name} (ID: {user_id})")
                except Exception as e:
                    logger.error(f"[NIGHT] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: {e}")
        else:
            # –î–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –Ω–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
            if user_id in user_night_messages:
                del user_night_messages[user_id]
            if user_id in user_night_warning_sent:
                del user_night_warning_sent[user_id]

    except Exception as e:
        logger.error(f"[HANDLE_ALL] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}", exc_info=True)


async def slots_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /slots ‚Äî —Å–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –æ—Ç–∫—Ä—ã—Ç–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π."""
    try:
        target_thread_id = EVENTS_TOPIC_ID if EVENTS_TOPIC_ID else getattr(update.message, "message_thread_id", None)
        action_kwargs = {"chat_id": update.effective_chat.id, "action": "typing"}
        if target_thread_id:
            action_kwargs["message_thread_id"] = target_thread_id
        await context.bot.send_chat_action(**action_kwargs)

        status_kwargs = {"chat_id": update.effective_chat.id, "text": "üîé –ò—â—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ —Å–ª–æ—Ç—ã..."}
        if target_thread_id:
            status_kwargs["message_thread_id"] = target_thread_id
        status_message = await context.bot.send_message(**status_kwargs)

        events = await get_all_events()
        if not events:
            await context.bot.edit_message_text(
                chat_id=update.effective_chat.id,
                message_id=status_message.message_id,
                text="–°–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.",
            )
            return

        lines = ["üèÉ <b>–û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –∑–∞–±–µ–≥–∏:</b>\n"]
        for idx, event in enumerate(events, start=1):
            title = html_escape(event.get("title", "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"))
            date = html_escape(event.get("date", "–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞"))
            city = html_escape(event.get("city", "–ì–æ—Ä–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω"))
            distances = html_escape(event.get("distances", ""))
            url = event.get("url") or event.get("link") or ""
            url = html_escape(url) if url else ""

            lines.append(f"{idx}. <b>{title}</b>")
            lines.append(f"üìÖ {date} | üìç {city}")
            if distances:
                lines.append(f"üèÅ –î–∏—Å—Ç–∞–Ω—Ü–∏–∏: {distances}")
            if url:
                lines.append(f'üîó <a href="{url}">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</a>')
            lines.append("")

        # Telegram –ª–∏–º–∏—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–∞—Å—Ç—è–º–∏
        full_text = "\n".join(lines).strip()
        max_len = 3800
        chunks = []
        while full_text:
            if len(full_text) <= max_len:
                chunks.append(full_text)
                break
            split_at = full_text.rfind("\n", 0, max_len)
            if split_at == -1:
                split_at = max_len
            chunks.append(full_text[:split_at].strip())
            full_text = full_text[split_at:].strip()

        # –ü–µ—Ä–≤—É—é —á–∞—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –≤ —Å—Ç–∞—Ç—É—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏
        await context.bot.edit_message_text(
            chat_id=update.effective_chat.id,
            message_id=status_message.message_id,
            text=chunks[0],
            parse_mode="HTML",
            disable_web_page_preview=True,
        )
        for chunk in chunks[1:]:
            extra_kwargs = {"chat_id": update.effective_chat.id, "text": chunk, "parse_mode": "HTML", "disable_web_page_preview": True}
            if target_thread_id:
                extra_kwargs["message_thread_id"] = target_thread_id
            await context.bot.send_message(**extra_kwargs)

    except Exception as e:
        logger.error(f"[SLOTS] –û—à–∏–±–∫–∞ –∫–æ–º–∞–Ω–¥—ã slots: {e}", exc_info=True)
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
        )


BOT_HELP_TEXT = (
    "**–ë–æ—Ç –¥–ª—è –±–µ–≥–æ–≤–æ–≥–æ —á–∞—Ç–∞**\n\n"
    "**üìå –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**\n"
    "‚Ä¢ /start ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥\n"
    "‚Ä¢ /getid ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å ID —á–∞—Ç–∞\n"
    "‚Ä¢ /stop ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)\n\n"
    "**üåÖ –£—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:**\n"
    "‚Ä¢ /morning ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–µ–π—á–∞—Å\n"
    "‚Ä¢ /stopmorning ‚Äî —É–¥–∞–ª–∏—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n\n"
    "**üòÑ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è:**\n"
    "‚Ä¢ /remen ‚Äî –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∂–∏–∑–Ω—å\n"
    "‚Ä¢ /antiremen ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã\n"
    "‚Ä¢ /roast ‚Äî –ø–æ–¥–∫–æ–ª–æ—Ç—å –∫–æ–≥–æ-—Ç–æ –≤ —á–∞—Ç–µ\n"
    "‚Ä¢ /flirt ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –¥–µ–≤—É—à–∫–∞–º\n"
    "‚Ä¢ /mam ‚Äî \"–ù–µ –∑–ª–∏ –º–∞–º—É...\"\n"
    "‚Ä¢ /joke ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π –∞–Ω–µ–∫–¥–æ—Ç –ø—Ä–æ –±–µ–≥\n"
    "‚Ä¢ /facts ‚Äî –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ –±–µ–≥–µ\n"
    "‚Ä¢ /motivation ‚Äî –º–æ—Ç–∏–≤–∞—Ü–∏—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\n\n"
    "**üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥:**\n"
    "‚Ä¢ /summary ‚Äî —Å–≤–æ–¥–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è (–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑!)\n"
    "‚Ä¢ /rating ‚Äî —Ç–æ–ø-10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É\n"
    "‚Ä¢ /likes ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ –ª–∞–π–∫–∞–º\n"
    "‚Ä¢ /levels ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º\n"
    "‚Ä¢ /running ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ –±–µ–≥—É–Ω–æ–≤ –∑–∞ –º–µ—Å—è—Ü\n"
    "‚Ä¢ /weekly ‚Äî –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ (–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑!)\n"
    "‚Ä¢ /monthly ‚Äî –∏—Ç–æ–≥–∏ –º–µ—Å—è—Ü–∞ (–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑!)\n\n"
    "**üèÜ –ß–µ–ª–ª–µ–Ω–¥–∂–∏:**\n"
    "‚Ä¢ /challenge ‚Äî —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞\n"
    "‚Ä¢ /challenge_start weekly|monthly ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π —á–µ–ª–ª–µ–Ω–¥–∂\n"
    "‚Ä¢ /challenge join ‚Äî –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–µ–ª–ª–µ–Ω–¥–∂—É\n"
    "‚Ä¢ /challenge done ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏\n\n"
    "**üéÇ –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è:**\n"
    "‚Ä¢ /birthday DD.MM ‚Äî —É–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è\n"
    "‚Ä¢ /add_birthday @–Ω–∏–∫–Ω–µ–π–º DD.MM ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è\n"
    "‚Ä¢ /del_birthday @–Ω–∏–∫–Ω–µ–π–º ‚Äî —É–¥–∞–ª–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è\n"
    "‚Ä¢ /list_birthdays ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è\n\n"
    "**üîî –ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**\n"
    "‚Ä¢ /anon —Ç–µ–∫—Å—Ç ‚Äî –∞–Ω–æ–Ω–∏–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
    "‚Ä¢ /anonphoto ‚Äî –∞–Ω–æ–Ω–∏–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ\n\n"
    "**üì± Garmin –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**\n"
    "‚Ä¢ /garmin email –ø–∞—Ä–æ–ª—å ‚Äî –ø—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Garmin Connect\n"
    "‚Ä¢ /garmin_stop ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç Garmin\n"
    "‚Ä¢ /garmin_list ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Garmin\n\n"
    "**üèÉ –°–ª–æ—Ç—ã –Ω–∞ –∑–∞–±–µ–≥–∏:**\n"
    "‚Ä¢ /slots ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –±–µ–≥–æ–≤—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è\n\n"
    "**üí° –ü–æ–ª–µ–∑–Ω–æ–µ:**\n"
    "‚Ä¢ /advice ‚Äî —Å–æ–≤–µ—Ç –ø–æ –±–µ–≥—É –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞\n"
    "‚Ä¢ /music ‚Äî –º—É–∑—ã–∫–∞ –¥–Ω—è\n"
    "‚Ä¢ /horoscope ‚Äî –≥–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è\n"
    "‚Ä¢ /deals ‚Äî —Å–∫–∏–¥–∫–∏ –Ω–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É\n"
)


def get_target_name(update: Update, context: ContextTypes.DEFAULT_TYPE) -> str:
    """–ü–æ–ª—É—á–∞–µ—Ç –∏–º—è —Ü–µ–ª–∏ –∏–∑ reply –∏–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤."""
    if update.message and update.message.reply_to_message and update.message.reply_to_message.from_user:
        target_user = update.message.reply_to_message.from_user
        return target_user.full_name or target_user.username or "–¥—Ä—É–≥"
    if context.args:
        return " ".join(context.args)
    return update.message.from_user.full_name if update.message and update.message.from_user else "–¥—Ä—É–≥"


async def start_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /start ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –±–æ—Ç –∂–∏–≤."""
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=BOT_HELP_TEXT,
        parse_mode="Markdown",
    )


async def unknown_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û—Ç–≤–µ—Ç –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–æ–º–∞–Ω–¥—É."""
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="–ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞. –ù–∞–ø–∏—à–∏—Ç–µ /start –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.",
    )


async def error_handler(update: object, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫."""
    logger.error("Unhandled exception", exc_info=context.error)


async def stop_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /stop ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)."""
    global bot_running
    chat_id = update.effective_chat.id
    user_id = update.message.from_user.id if update.message else None
    if user_id and not await is_user_admin(user_id, chat_id, context.bot):
        await context.bot.send_message(chat_id=chat_id, text="‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!")
        return
    bot_running = False
    await context.bot.send_message(chat_id=chat_id, text="‚õî –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ –∫–æ–º–∞–Ω–¥–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.")


async def getid_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /getid ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å ID —á–∞—Ç–∞ –∏ —Ç–æ–ø–∏–∫–∞."""
    thread_id = getattr(update.message, "message_thread_id", None) if update.message else None
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"ID —á–∞—Ç–∞: `{update.effective_chat.id}`\nID —Ç–æ–ø–∏–∫–∞: `{thread_id}`",
        parse_mode="Markdown",
    )


async def morning_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /morning ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ."""
    await send_morning_greeting()


async def stopmorning_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /stopmorning ‚Äî —É–¥–∞–ª–∏—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."""
    global morning_message_id
    if not morning_message_id:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–£—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ—Ç.")
        return
    try:
        await context.bot.delete_message(chat_id=CHAT_ID, message_id=morning_message_id)
        morning_message_id = None
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ.")
    except Exception as e:
        logger.error(f"[MORNING] –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.")


async def remen_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /remen ‚Äî –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∂–∏–∑–Ω—å."""
    user_name = update.message.from_user.full_name if update.message else "–¥—Ä—É–≥"
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=random.choice(TIRED_RESPONSES).format(user_name=user_name),
    )


async def antiremen_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /antiremen ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç."""
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=get_random_compliment(),
    )


async def roast_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /roast ‚Äî –ø–æ–¥–∫–æ–ª–æ—Ç—å –∫–æ–≥–æ-—Ç–æ."""
    target = get_target_name(update, context)
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"üéØ {target}, {get_random_roast()}",
    )


async def flirt_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /flirt ‚Äî –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –¥–µ–≤—É—à–∫–∞–º."""
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=get_random_flirt(),
    )


async def mam_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /mam ‚Äî '–ù–µ –∑–ª–∏ –º–∞–º—É...'"""
    if os.path.exists(MAM_PHOTO_PATH):
        with open(MAM_PHOTO_PATH, "rb") as photo:
            await context.bot.send_photo(
                chat_id=update.effective_chat.id,
                photo=photo,
                caption="–ù–µ –∑–ª–∏ –º–∞–º—É... üòÖ",
            )
    else:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="–ù–µ –∑–ª–∏ –º–∞–º—É... üòÖ",
        )


async def joke_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /joke ‚Äî —à—É—Ç–∫–∞."""
    user_name = update.message.from_user.full_name if update.message else "–¥—Ä—É–≥"
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=random.choice(JOKE_RESPONSES).format(user_name=user_name),
    )


async def motivation_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /motivation ‚Äî –º–æ—Ç–∏–≤–∞—Ü–∏—è."""
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"üí™ {get_random_motivation()}",
    )


async def summary_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /summary ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞."""
    await send_daily_summary(force=True)


async def rating_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /rating ‚Äî —Ç–æ–ø-10 –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É."""
    top_rated = await get_top_rated_users()
    if not top_rated:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–†–µ–π—Ç–∏–Ω–≥ –ø–æ–∫–∞ –ø—É—Å—Ç.")
        return
    medals = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü"]
    lines = ["‚≠ê *–¢–æ–ø-10 —Ä–µ–π—Ç–∏–Ω–≥–∞:*"]
    for i, user in enumerate(top_rated):
        name = escape_markdown(user["name"])
        lines.append(f"{medals[i]} {name} ‚Äî {user['points']} –æ—á–∫–æ–≤")
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="\n".join(lines),
        parse_mode="Markdown",
    )


async def likes_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /likes ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ –ª–∞–π–∫–∞–º."""
    if not user_rating_stats:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–õ–∞–π–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.")
        return
    sorted_users = sorted(user_rating_stats.items(), key=lambda x: x[1].get("likes", 0), reverse=True)[:10]
    lines = ["‚ù§Ô∏è *–¢–æ–ø-10 –ø–æ –ª–∞–π–∫–∞–º:*"]
    medals = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü"]
    for i, (user_id, stats) in enumerate(sorted_users):
        name = escape_markdown(stats.get("name", "Unknown"))
        likes = stats.get("likes", 0)
        lines.append(f"{medals[i]} {name} ‚Äî {likes}")
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="\n".join(lines),
        parse_mode="Markdown",
    )


async def levels_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /levels ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º."""
    if not user_rating_stats:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–î–∞–Ω–Ω—ã—Ö –ø–æ —É—Ä–æ–≤–Ω—è–º –ø–æ–∫–∞ –Ω–µ—Ç.")
        return
    levels_summary = {"–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞": [], "–õ–∏–¥–µ—Ä": [], "–ê–∫—Ç–∏–≤–Ω—ã–π": [], "–ù–æ–≤–∏—á–æ–∫": []}
    for user_id, stats in user_rating_stats.items():
        level = get_user_level(user_id)
        points = calculate_user_rating(user_id)
        levels_summary[level].append((stats.get("name", "Unknown"), points))
    lines = ["üèÖ *–£—Ä–æ–≤–Ω–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:*"]
    for level in ["–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞", "–õ–∏–¥–µ—Ä", "–ê–∫—Ç–∏–≤–Ω—ã–π", "–ù–æ–≤–∏—á–æ–∫"]:
        users = sorted(levels_summary[level], key=lambda x: x[1], reverse=True)
        if not users:
            continue
        level_emoji = LEVEL_EMOJIS.get(level, "")
        lines.append(f"{level_emoji} *{escape_markdown(level)}* ({len(users)}):")
        for name, points in users[:5]:
            lines.append(f"   ‚Ä¢ {escape_markdown(name)} ‚Äî {points} –æ—á–∫–æ–≤")
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="\n".join(lines),
        parse_mode="Markdown",
    )


async def running_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /running ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ –±–µ–≥—É–Ω–æ–≤ –∑–∞ –º–µ—Å—è—Ü."""
    runners = get_top_monthly_runners() or get_top_runners()
    if not runners:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–î–∞–Ω–Ω—ã—Ö –ø–æ –±–µ–≥—É –ø–æ–∫–∞ –Ω–µ—Ç.")
        return
    medals = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü"]
    lines = ["üèÉ *–¢–æ–ø-10 –±–µ–≥—É–Ω–æ–≤ –∑–∞ –º–µ—Å—è—Ü:*"]
    for i, user in enumerate(runners):
        name = escape_markdown(user["name"])
        km = user["distance"] / 1000
        lines.append(f"{medals[i]} {name} ‚Äî {km:.1f} –∫–º")
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="\n".join(lines),
        parse_mode="Markdown",
    )


async def weekly_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /weekly ‚Äî –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏."""
    await send_weekly_summary()
    await send_weekly_running_summary()


async def monthly_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /monthly ‚Äî –∏—Ç–æ–≥–∏ –º–µ—Å—è—Ü–∞."""
    await send_monthly_summary()
    await send_monthly_running_summary()


async def advice_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /advice ‚Äî —Å–æ–≤–µ—Ç –ø–æ –±–µ–≥—É."""
    await update_tips_cache()
    category = context.args[0] if context.args else None
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=get_random_tip(category),
        parse_mode="Markdown",
    )


async def music_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /music ‚Äî –º—É–∑—ã–∫–∞ –¥–Ω—è."""
    music = get_music_of_day()
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"üéµ –ú—É–∑—ã–∫–∞ –¥–Ω—è:\n{format_music_message(music)}",
        parse_mode="HTML",
        disable_web_page_preview=True,
    )


async def horoscope_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /horoscope ‚Äî –≥–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è –ø–æ –≤—Å–µ–º –∑–Ω–∞–∫–∞–º."""
    horoscope_text = await get_horoscope_text_for_today()
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"üîÆ *–ì–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è:*\n{horoscope_text}",
        parse_mode="Markdown",
    )


async def deals_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /deals ‚Äî —Å–∫–∏–¥–∫–∏ –Ω–∞ –±–µ–≥–æ–≤—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É."""
    from telegram import InlineKeyboardButton, InlineKeyboardMarkup

    keyboard = [
        [
            InlineKeyboardButton("–ú—É–∂—Å–∫–æ–µ", callback_data="deals_gender_male"),
            InlineKeyboardButton("–ñ–µ–Ω—Å–∫–æ–µ", callback_data="deals_gender_female"),
        ],
        [InlineKeyboardButton("–í—Å–µ", callback_data="deals_gender_all")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å–∫–∏–¥–æ–∫:",
        reply_markup=reply_markup,
    )


async def handle_deals_gender_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    gender = query.data.replace("deals_gender_", "")
    from telegram import InlineKeyboardButton, InlineKeyboardMarkup

    keyboard = [
        [
            InlineKeyboardButton("–ö—Ä–æ—Å—Å–æ–≤–∫–∏", callback_data=f"deals_cat_{gender}_shoes"),
            InlineKeyboardButton("–®–æ—Ä—Ç—ã", callback_data=f"deals_cat_{gender}_shorts"),
            InlineKeyboardButton("–ù–æ—Å–∫–∏", callback_data=f"deals_cat_{gender}_socks"),
        ],
        [
            InlineKeyboardButton("–õ–æ–Ω–≥–∏", callback_data=f"deals_cat_{gender}_longsleeve"),
            InlineKeyboardButton("–¢–∞–π—Ç—Å—ã", callback_data=f"deals_cat_{gender}_tights"),
            InlineKeyboardButton("–ö—É—Ä—Ç–∫–∏", callback_data=f"deals_cat_{gender}_jackets"),
        ],
        [
            InlineKeyboardButton("–®—Ç–∞–Ω—ã", callback_data=f"deals_cat_{gender}_pants"),
            InlineKeyboardButton("–§—É—Ç–±–æ–ª–∫–∏", callback_data=f"deals_cat_{gender}_shirts"),
            InlineKeyboardButton("–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", callback_data=f"deals_cat_{gender}_accessories"),
        ],
        [InlineKeyboardButton("–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏", callback_data=f"deals_cat_{gender}_all")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await query.edit_message_text(
        text="–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ–¥–µ–∂–¥—ã:",
        reply_markup=reply_markup,
    )


async def handle_deals_category_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    parts = query.data.split("_", 3)  # deals cat gender category
    gender = parts[2] if len(parts) > 2 else "all"
    category = parts[3] if len(parts) > 3 else "all"
    if gender == "all":
        gender = None
    if category == "all":
        category = None
    text = await build_deals_message(gender, category)
    await query.edit_message_text(
        text=text,
        parse_mode="HTML",
        disable_web_page_preview=True,
    )


async def garmin_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /garmin ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ Garmin."""
    if not GARMIN_AVAILABLE:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="Garmin –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.")
        return
    if not context.args or len(context.args) < 2:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="–ò—Å–ø–æ–ª—å–∑—É–π: /garmin email –ø–∞—Ä–æ–ª—å",
        )
        return
    user_id = update.message.from_user.id
    user_name = update.message.from_user.full_name or "Unknown"
    email = context.args[0]
    password = " ".join(context.args[1:])
    encrypted_password = encrypt_garmin_password(password)
    garmin_users[user_id] = {
        "name": user_name,
        "email": email,
        "encrypted_password": encrypted_password,
        "last_activity_id": "",
        "monthly_distance": 0.0,
        "monthly_activities": 0,
        "last_activity_date": "",
    }
    save_garmin_users()
    await context.bot.send_message(chat_id=update.effective_chat.id, text="‚úÖ Garmin –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏–≤—è–∑–∞–Ω.")


async def garmin_stop_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /garmin_stop ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å Garmin."""
    user_id = update.message.from_user.id
    if user_id in garmin_users:
        del garmin_users[user_id]
        save_garmin_users()
        await context.bot.send_message(chat_id=update.effective_chat.id, text="‚úÖ Garmin –æ—Ç–∫–ª—é—á—ë–Ω.")
    else:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="Garmin –∞–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω.")


async def garmin_list_cmd(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /garmin_list ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Garmin."""
    if not garmin_users:
        await context.bot.send_message(chat_id=update.effective_chat.id, text="–°–ø–∏—Å–æ–∫ Garmin –ø—É—Å—Ç.")
        return
    lines = ["üì± *Garmin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:*"]
    for user_id, data in garmin_users.items():
        email = data.get("email", "")
        masked_email = email
        if "@" in email:
            name_part, domain = email.split("@", 1)
            masked_email = f"{name_part[:2]}***@{domain}"
        lines.append(f"‚Ä¢ {escape_markdown(data.get('name', 'Unknown'))} ‚Äî {masked_email}")
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="\n".join(lines),
        parse_mode="Markdown",
    )


async def challenge_router(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã /challenge –¥–ª—è –ø–æ–¥–∫–æ–º–∞–Ω–¥."""
    if not context.args:
        await challenge_status(update, context)
        return

    action = context.args[0].lower()
    if action in ("weekly", "monthly"):
        await start_challenge(update, context)
        return
    if action == "join":
        await join_challenge(update, context)
        return
    if action == "done":
        await done_challenge(update, context)
        return
    if action in ("status", "info"):
        await challenge_status(update, context)
        return

    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="üèÜ *–ö–æ–º–∞–Ω–¥–∞ /challenge*\n\n"
             "–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:\n"
             "   `/challenge weekly` ‚Äî –Ω–µ–¥–µ–ª—å–Ω—ã–π\n"
             "   `/challenge monthly` ‚Äî –º–µ—Å—è—á–Ω—ã–π\n"
             "   `/challenge join` ‚Äî –≤—Å—Ç—É–ø–∏—Ç—å\n"
             "   `/challenge done` ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å\n"
             "   `/challenge status` ‚Äî —Å—Ç–∞—Ç—É—Å\n",
        parse_mode="Markdown"
    )


def register_handlers(app):
    """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π."""
    app.add_handler(CommandHandler("start", start_cmd))
    app.add_handler(CommandHandler("getid", getid_cmd))
    app.add_handler(CommandHandler("stop", stop_cmd))
    app.add_handler(CommandHandler("morning", morning_cmd))
    app.add_handler(CommandHandler("stopmorning", stopmorning_cmd))
    app.add_handler(CommandHandler("facts", facts_cmd))
    app.add_handler(CallbackQueryHandler(handle_facts_ai_callback, pattern=r"^fact_ai_more_"))
    app.add_handler(CallbackQueryHandler(handle_facts_callback, pattern=r"^fact_more_"))

    app.add_handler(CommandHandler("remen", remen_cmd))
    app.add_handler(CommandHandler("antiremen", antiremen_cmd))
    app.add_handler(CommandHandler("roast", roast_cmd))
    app.add_handler(CommandHandler("flirt", flirt_cmd))
    app.add_handler(CommandHandler("mam", mam_cmd))
    app.add_handler(CommandHandler("joke", joke_cmd))
    app.add_handler(CommandHandler("motivation", motivation_cmd))

    app.add_handler(CommandHandler("summary", summary_cmd))
    app.add_handler(CommandHandler("rating", rating_cmd))
    app.add_handler(CommandHandler("likes", likes_cmd))
    app.add_handler(CommandHandler("levels", levels_cmd))
    app.add_handler(CommandHandler("running", running_cmd))
    app.add_handler(CommandHandler("weekly", weekly_cmd))
    app.add_handler(CommandHandler("monthly", monthly_cmd))

    app.add_handler(CommandHandler("garmin", garmin_cmd))
    app.add_handler(CommandHandler("garmin_stop", garmin_stop_cmd))
    app.add_handler(CommandHandler("garmin_list", garmin_list_cmd))

    app.add_handler(CommandHandler("advice", advice_cmd))
    app.add_handler(CommandHandler("music", music_cmd))
    app.add_handler(CommandHandler("horoscope", horoscope_cmd))
    app.add_handler(CommandHandler("deals", deals_cmd))
    app.add_handler(CallbackQueryHandler(handle_deals_gender_callback, pattern=r"^deals_gender_"))
    app.add_handler(CallbackQueryHandler(handle_deals_category_callback, pattern=r"^deals_cat_"))
    app.add_handler(CommandHandler("slots", slots_cmd))
    app.add_handler(CommandHandler("anon", anon))
    app.add_handler(CommandHandler("anonphoto", anonphoto))
    app.add_handler(CommandHandler("birthday", birthday))
    app.add_handler(CommandHandler("add_birthday", add_birthday))
    app.add_handler(CommandHandler("del_birthday", del_birthday))
    app.add_handler(CommandHandler("list_birthdays", list_birthdays))

    app.add_handler(CommandHandler("challenge", challenge_router))
    app.add_handler(CommandHandler("challenge_start", start_challenge))
    app.add_handler(PollHandler(handle_challenge_poll))

    app.add_handler(CommandHandler("votechallenges", start_vote))
    app.add_handler(CommandHandler("vote", vote_challenge))
    app.add_handler(CommandHandler("votestatus", vote_status))

    # Events tracker handlers
    for handler in get_handlers():
        app.add_handler(handler)

    # Message handlers
    app.add_handler(
        MessageHandler(filters.TEXT & ~filters.COMMAND, handle_mentions, block=False)
    )
    app.add_handler(
        MessageHandler(filters.TEXT & ~filters.COMMAND, handle_replies_to_bot, block=False)
    )
    app.add_handler(
        MessageHandler(
            filters.Sticker.ALL | filters.Document.ALL | filters.ANIMATION,
            handle_gifs_and_stickers,
            block=False,
        )
    )
    app.add_handler(MessageHandler(filters.ALL, handle_all_messages), group=1)
    app.add_handler(MessageHandler(filters.COMMAND, unknown_cmd))
    app.add_error_handler(error_handler)


def start_background_threads():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ (Flask, events scheduler, keep-alive –ø–∏–Ω–≥)."""
    flask_thread = threading.Thread(
        target=run_flask,
        name="flask-server",
        daemon=True,
    )
    flask_thread.start()

    keepalive_thread = threading.Thread(
        target=keepalive_ping_loop,
        name="keepalive-ping",
        daemon=True,
    )
    keepalive_thread.start()

    events_thread = threading.Thread(
        target=events_scheduler_task,
        name="events-scheduler",
        daemon=True,
    )
    events_thread.start()


def add_background_task(app, coro):
    """–°–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è."""
    task = app.create_task(coro)
    background_tasks.append(task)
    return task


async def post_init(app):
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –∑–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á."""
    global application
    application = app

    try:
        # –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –æ—Ç–∫–ª—é—á–∞–µ–º webhook, —á—Ç–æ–±—ã polling –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª
        await app.bot.delete_webhook(drop_pending_updates=True)
        logger.info("[STARTUP] Webhook –æ—Ç–∫–ª—é—á—ë–Ω (polling mode)")
    except Exception as e:
        logger.error(f"[STARTUP] –û—à–∏–±–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è webhook: {e}")

    init_garmin_on_startup()
    init_birthdays_on_startup()
    try:
        load_user_rating_stats()
    except Exception as e:
        logger.warning(f"[STARTUP] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞: {e}")

    set_config(GENERAL_CHAT_ID, app, asyncio.get_running_loop(), EVENTS_TOPIC_ID, NEWS_TOPIC_ID)
    start_background_threads()

    add_background_task(app, facts_scheduler_task())
    add_background_task(app, birthday_scheduler_task())
    add_background_task(app, morning_scheduler_task())
    add_background_task(app, good_night_scheduler_task())
    add_background_task(app, music_scheduler_task())
    add_background_task(app, horoscope_scheduler_task())
    add_background_task(app, deals_scheduler_task())
    add_background_task(app, coffee_scheduler_task())
    add_background_task(app, lunch_scheduler_task())
    add_background_task(app, motivation_scheduler_task())
    add_background_task(app, daily_summary_scheduler_task())
    add_background_task(app, garmin_scheduler_task())


async def post_shutdown(app):
    """–ê–∫–∫—É—Ä–∞—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á."""
    global background_tasks
    logger.warning(
        "[SHUTDOWN] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±—ã—á–Ω–æ —ç—Ç–æ SIGTERM –æ—Ç Render (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫/–¥–µ–ø–ª–æ–π/–ª–∏–º–∏—Ç—ã) "
        "–∏–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –¥–≤—É—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞. –ö–æ–º–∞–Ω–¥–∞ /stop –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å ‚Äî —Ç–æ–ª—å–∫–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ñ–ª–∞–≥."
    )
    for task in background_tasks:
        if not task.done():
            task.cancel()
    if background_tasks:
        await asyncio.gather(*background_tasks, return_exceptions=True)
    background_tasks = []


def main():
    app = ApplicationBuilder().token(BOT_TOKEN).post_init(post_init).post_shutdown(post_shutdown).build()
    register_handlers(app)
    logger.info("[STARTUP] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω, —Å—Ç–∞—Ä—Ç—É–µ–º polling")
    app.run_polling()


if __name__ == "__main__":
    main()
