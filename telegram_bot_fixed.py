#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Telegram ะะพั ะดะปั ะะตะณะพะฒะพะณะพ ะกะพะพะฑัะตััะฒะฐ
ะคัะฝะบัะธะธ: ะฃััะตะฝะฝะตะต ะฟัะธะฒะตัััะฒะธะต, ะะพะณะพะดะฐ, ะขะตะผั ะดะฝั, ะะฝะพะฝะธะผะฝะฐั ะพัะฟัะฐะฒะบะฐ, ะะถะตะดะฝะตะฒะฝะฐั ัะฒะพะดะบะฐ, ะะตะนัะธะฝะณ, ะฃัะพะฒะฝะธ, ะะพะปะพัะพะฒัะต ัะพะพะฑัะตะฝะธั
"""

import os
import asyncio
import logging
import threading
import time
import random
import httpx
import signal
import sys
import json
import base64
from io import BytesIO
from datetime import datetime, timedelta
from telegram import Update
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    CallbackQueryHandler,
    filters,
)
import pytz

# ============== OPENAI INTEGRATION ==============
# API ะบะปัั OpenAI ะดะปั ะะ-ะพัะฒะตัะพะฒ (ััะฐะฝะธััั ะฒ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั)
OPENAI_API_KEY = os.environ.get("OPENAI_API_KEY", "")
from flask import Flask

# ============== GARMIN INTEGRATION ==============
try:
    import garminconnect
    from cryptography.fernet import Fernet
    GARMIN_AVAILABLE = True
except ImportError:
    GARMIN_AVAILABLE = False
    logger.warning("Garmin libraries not available. Install: pip install garminconnect cryptography")

# ะะปัั ัะธััะพะฒะฐะฝะธั ะดะปั ะฟะฐัะพะปะตะน Garmin (ะณะตะฝะตัะธััะตััั ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต)
GARMIN_ENCRYPTION_KEY = None

# ============== ะะะะคะะะฃะะะฆะะฏ ==============
BOT_TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")
if not BOT_TOKEN:
    raise ValueError("ะขะพะบะตะฝ ะฑะพัะฐ ะฝะต ะฝะฐะนะดะตะฝ!")

RENDER_URL = os.environ.get("RENDER_URL", "")

CHAT_ID = os.environ.get("CHAT_ID")
if not CHAT_ID:
    raise ValueError("CHAT_ID ะฝะต ะฝะฐะนะดะตะฝ!")

try:
    CHAT_ID = int(CHAT_ID)
except ValueError:
    raise ValueError("CHAT_ID ะดะพะปะถะตะฝ ะฑััั ัะธัะปะพะผ!")

MOSCOW_TZ = pytz.timezone("Europe/Moscow")
UTC_OFFSET = 3  # ะะพัะบะฒะฐ = UTC+3

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
)
logger = logging.getLogger(__name__)

# ============== FLASK ==============
app = Flask(__name__)


@app.route("/")
def home():
    return "Bot is running!"


@app.route("/health")
def health():
    return "OK"


def run_flask():
    # ะะฐ Render ะฟะพัั ะทะฐะดะฐัััั ัะตัะตะท ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั $PORT
    port = int(os.environ.get("PORT", 10000))
    logger.info(f"[FLASK] ะะฐะฟััะบ Flask ะฝะฐ ะฟะพััั {port}")
    app.run(host="0.0.0.0", port=port)


# ============== ะะะะะะะฌะะซะ ะะะะะะะะะซะ ==============
application = None
morning_message_id = None
morning_scheduled_date = ""
bot_running = True
motivation_sent_times = []

# ============== ะะะะะะะ /MAM ==============
# ID ัะพะพะฑัะตะฝะธั "ะะต ะทะปะธ ะผะฐะผั..."
mam_message_id = None
MAM_PHOTO_PATH = "5422343903253302332.jpg"

# ============== ะะะงะะะ ะะะะะ ==============
# {user_id: message_count} - ะฟะตััะพะฝะฐะปัะฝัะน ัััััะธะบ ะดะปั ะบะฐะถะดะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
user_night_messages = {}
# {user_id: warning_sent_date} - ะบะพะณะดะฐ ะพัะฟัะฐะฒะปัะปะธ ะฟัะตะดัะฟัะตะถะดะตะฝะธะต
user_night_warning_sent = {}

# ============== ะะขะกะะะะะะะะะ ะะะะะะะฉะะะฆะะ ==============
# {user_id: last_active_date}
user_last_active = {}

# ============== ะกะขะะขะะกะขะะะ ะะะฏ ะะะะะะะะะะ ะกะะะะะ ==============
daily_stats = {
    "date": "",
    "total_messages": 0,
    "user_messages": {},  # {user_id: {"name": str, "count": int}}
    "photos": [],  # [{"file_id": str, "user_id": int, "likes": int, "message_id": int}]
}
daily_summary_sent = False

# ============== ะะะะขะะะ ะฃะงะะกะขะะะะะ ==============
# {user_id: {"name": str, "messages": int, "photos": int, "likes": int, "replies": int}}
user_rating_stats = {}

# {user_id: "ะะพะฒะธัะพะบ"} - ัะตะบััะธะน ััะพะฒะตะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
user_current_level = {}

# ============== GARMIN INTEGRATION ==============
# {user_id: {"name": str, "email": str, "last_activity_id": str, "monthly_distance": float, "monthly_activities": int}}
garmin_users = {}

# ะะฝะพะถะตััะฒะพ ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ัะถะต ะพะฑัะฐะฑะพัะฐะฝะฝัั ะฐะบัะธะฒะฝะพััะตะน (idempotency)
# ะคะพัะผะฐั: "user_id:activity_id"
processed_activities = set()

# {user_id: {"name": str, "activities": int, "distance": float, "duration": int, "calories": int}}
user_running_stats = {}

# ============== ะะะ ะะะะะะะะฏ ==============
# {user_id: {"name": str, "birthday": "DD.MM"}}
user_birthdays = {}

# ะคะฐะนะป ะดะปั ััะฐะฝะตะฝะธั ะดะฝะตะน ัะพะถะดะตะฝะธั
BIRTHDAYS_FILE = "birthdays.json"

# ============== OPENAI AI RESPONSES ==============
# ะะ-ะพัะฒะตัั ะฝะฐ ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะบะพะณะดะฐ ะพะฝะธ ะพัะฒะตัะฐัั ะฑะพัั
AI_ENABLED = bool(OPENAI_API_KEY)
AI_MODEL = "gpt-4o-mini"  # ะััััะฐั ะธ ะฝะตะดะพัะพะณะฐั ะผะพะดะตะปั

# ============== GOOGLE GEMINI AI (ะะะกะะะะขะะซะ ะะะะะะะข) ==============
# Google Gemini API ะฟะพะปะฝะพัััั ะฑะตัะฟะปะฐัะตะฝ!
# ะะพะปััะธัะต ะบะปัั: https://aistudio.google.com/app/apikey
GEMINI_API_KEY = os.environ.get("GEMINI_API_KEY", "")
GEMINI_ENABLED = bool(GEMINI_API_KEY)
GEMINI_MODEL = "gemini-1.5-flash"  # ะััััะฐั ะธ ะฑะตัะฟะปะฐัะฝะฐั ะผะพะดะตะปั

# ============== DEEPSEEK AI (ะขะะะ ะะะกะะะะขะะซะ) ==============
# DeepSeek ัะฐะฑะพัะฐะตั ะธะท ะฑะพะปััะธะฝััะฒะฐ ัะตะณะธะพะฝะพะฒ
# ะะพะปััะธัะต ะบะปัั: https://platform.deepseek.com/api-key
DEEPSEEK_API_KEY = os.environ.get("DEEPSEEK_API_KEY", "")
DEEPSEEK_ENABLED = bool(DEEPSEEK_API_KEY)
DEEPSEEK_MODEL = "deepseek-chat"  # ะะตัะฟะปะฐัะฝะฐั ะผะพะดะตะปั

# ============== GARMIN INTEGRATION ==============
GARMIN_DATA_FILE = "garmin_users.json"
GARMIN_KEY_FILE = "garmin_key.key"

# ============== ะะะฉะะขะ ะะข ะะะะะฃะขะะ ==============

# ============== ะะะฉะะขะ ะะข ะะะะะฃะขะะ ==============
# ะะฐะบัะธะผัะผ ะฑะฐะปะปะพะฒ ะฒ ัะฐั
MAX_POINTS_PER_HOUR = 20
# ะะฐะบัะธะผัะผ ัะพะพะฑัะตะฝะธะน ะฒ ะผะธะฝััั ะดะปั ะฝะฐัะธัะปะตะฝะธั ะฑะฐะปะปะพะฒ
MAX_MESSAGES_PER_MINUTE = 5
# ะะธะฝะธะผะฐะปัะฝะฐั ะดะปะธะฝะฐ ัะพะพะฑัะตะฝะธั ะดะปั ะฑะฐะปะปะฐ
MIN_MESSAGE_LENGTH = 5
# {user_id: [ะฒัะตะผะตะฝะฐ ัะพะพะฑัะตะฝะธะน]}
user_message_times = {}

# ============== ะะะญะคะคะะฆะะะะขะซ ะะะะขะะะะ ==============
POINTS_PER_MESSAGES = 300  # ะะฐ ัะบะพะปัะบะพ ัะพะพะฑัะตะฝะธะน ะดะฐัััั 1 ะฑะฐะปะป
POINTS_PER_PHOTOS = 10    # ะะฐ ัะบะพะปัะบะพ ัะพัะพ ะดะฐัััั 1 ะฑะฐะปะป
POINTS_PER_LIKES = 50     # ะะฐ ัะบะพะปัะบะพ ะปะฐะนะบะพะฒ ะดะฐัััั 1 ะฑะฐะปะป
POINTS_PER_REPLY = 1      # ะะฐ ะบะฐะถะดัะน ะพัะฒะตั ะฝะฐ ัะฒะพั ัะพะพะฑัะตะฝะธะต

# ============== ะฃะะะะะ ะฃะงะะกะขะะะะะ ==============
USER_LEVELS = {
    "ะะพะฒะธัะพะบ": 0,         # 0+ ะพัะบะพะฒ
    "ะะบัะธะฒะฝัะน": 10,       # 10+ ะพัะบะพะฒ
    "ะะธะดะตั": 50,          # 50+ ะพัะบะพะฒ
    "ะะตะณะตะฝะดะฐ ัะฐัะฐ": 100,   # 100+ ะพัะบะพะฒ
}

LEVEL_EMOJIS = {
    "ะะพะฒะธัะพะบ": "๐ฑ",
    "ะะบัะธะฒะฝัะน": "โญ",
    "ะะธะดะตั": "๐",
    "ะะตะณะตะฝะดะฐ ัะฐัะฐ": "๐",
}

# ============== ะฃะงะะข ะะะะะะฌ ==============
current_week = 0

# ============== GARMIN UTILS ==============
def get_garmin_key():
    """ะะพะปััะตะฝะธะต ะธะปะธ ัะพะทะดะฐะฝะธะต ะบะปััะฐ ัะธััะพะฒะฐะฝะธั"""
    global GARMIN_ENCRYPTION_KEY
    
    if GARMIN_ENCRYPTION_KEY is not None:
        return GARMIN_ENCRYPTION_KEY
    
    try:
        if os.path.exists(GARMIN_KEY_FILE):
            with open(GARMIN_KEY_FILE, 'rb') as f:
                GARMIN_ENCRYPTION_KEY = f.read()
            logger.info("[GARMIN] ะะปัั ัะธััะพะฒะฐะฝะธั ะทะฐะณััะถะตะฝ ะธะท ัะฐะนะปะฐ")
        else:
            GARMIN_ENCRYPTION_KEY = Fernet.generate_key()
            with open(GARMIN_KEY_FILE, 'wb') as f:
                f.write(GARMIN_ENCRYPTION_KEY)
            logger.info("[GARMIN] ะกะพะทะดะฐะฝ ะฝะพะฒัะน ะบะปัั ัะธััะพะฒะฐะฝะธั")
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ัะฐะฑะพัั ั ะบะปััะพะผ: {e}")
        # ะกะพะทะดะฐะตะผ ะบะปัั ะฒ ะฟะฐะผััะธ ะบะฐะบ ะทะฐะฟะฐัะฝะพะน ะฒะฐัะธะฐะฝั
        GARMIN_ENCRYPTION_KEY = Fernet.generate_key()
    
    return GARMIN_ENCRYPTION_KEY


def encrypt_garmin_password(password: str) -> str:
    """ะจะธััะพะฒะฐะฝะธะต ะฟะฐัะพะปั Garmin"""
    try:
        key = get_garmin_key()
        f = Fernet(key)
        encrypted = f.encrypt(password.encode())
        return base64.b64encode(encrypted).decode()
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ัะธััะพะฒะฐะฝะธั: {e}")
        return ""


def decrypt_garmin_password(encrypted_password: str) -> str:
    """ะะฐััะธััะพะฒะบะฐ ะฟะฐัะพะปั Garmin"""
    try:
        key = get_garmin_key()
        f = Fernet(key)
        decoded = base64.b64decode(encrypted_password.encode())
        decrypted = f.decrypt(decoded)
        return decrypted.decode()
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะดะตัะธััะพะฒะฐะฝะธั: {e}")
        return ""


def save_garmin_users():
    """ะกะพััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน Garmin ะฒ ัะฐะนะป"""
    try:
        # ะะพะฝะฒะตััะธััะตะผ ะดะปั JSON (ะบะปััะธ ะดะพะปะถะฝั ะฑััั ัััะพะบะฐะผะธ)
        save_data = {}
        for user_id, data in garmin_users.items():
            save_data[str(user_id)] = {
                "name": data["name"],
                "email": data["email"],
                "encrypted_password": data["encrypted_password"],
                "last_activity_id": data.get("last_activity_id", ""),
                "monthly_distance": data.get("monthly_distance", 0.0),
                "monthly_activities": data.get("monthly_activities", 0),
                "last_activity_date": data.get("last_activity_date", "")
            }
        
        with open(GARMIN_DATA_FILE, 'w', encoding='utf-8') as f:
            json.dump(save_data, f, ensure_ascii=False, indent=2)
        
        logger.info(f"[GARMIN] ะะฐะฝะฝัะต ัะพััะฐะฝะตะฝั: {len(garmin_users)} ะฟะพะปัะทะพะฒะฐัะตะปะตะน")
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ัะพััะฐะฝะตะฝะธั: {e}")


def load_garmin_users():
    """ะะฐะณััะทะบะฐ ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน Garmin ะธะท ัะฐะนะปะฐ"""
    global garmin_users
    
    try:
        if not os.path.exists(GARMIN_DATA_FILE):
            logger.info("[GARMIN] ะคะฐะนะป ะดะฐะฝะฝัั ะฝะต ะฝะฐะนะดะตะฝ, ัะพะทะดะฐัะผ ะฟัััะพะน")
            garmin_users = {}
            return
        
        with open(GARMIN_DATA_FILE, 'r', encoding='utf-8') as f:
            load_data = json.load(f)
        
        # ะะพะฝะฒะตััะธััะตะผ ะพะฑัะฐัะฝะพ (ะบะปััะธ -> int)
        garmin_users = {}
        for user_id_str, data in load_data.items():
            garmin_users[int(user_id_str)] = {
                "name": data["name"],
                "email": data["email"],
                "encrypted_password": data["encrypted_password"],
                "last_activity_id": data.get("last_activity_id", ""),
                "monthly_distance": data.get("monthly_distance", 0.0),
                "monthly_activities": data.get("monthly_activities", 0),
                "last_activity_date": data.get("last_activity_date", "")
            }
        
        logger.info(f"[GARMIN] ะะฐะณััะถะตะฝะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน: {len(garmin_users)}")
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ: {e}")
        garmin_users = {}

# ============== ะะะะะซะ ==============
DAY_THEMES = {
    "Monday": "๐ต ะะพะฝะตะดะตะปัะฝะธะบ โ ะดะตะฝั ะผัะทัะบะธ! ะะฐะบะฐั ะฟะตัะฝั ะทะฐะฒะพะดะธั ัะตะฑั ะฝะฐ ะฟัะพะฑะตะถะบั?",
    "Tuesday": "๐ ะัะพัะฝะธะบ โ ะดะตะฝั ะฟะธัะพะผัะตะฒ! ะะพะบะฐะถะธ ัะฒะพะตะณะพ ัะตัะฒะตัะพะฝะพะณะพะณะพ ะฝะฐะฟะฐัะฝะธะบะฐ!",
    "Wednesday": "๐ ะกัะตะดะฐ โ ะดะตะฝั ะดะพะฑััั ะดะตะป! ะะพะดะตะปะธัั, ะบะพะผั ัั ัะตะณะพะดะฝั ะฟะพะผะพะณ!",
    "Thursday": "๐ ะงะตัะฒะตัะณ โ ะดะตะฝั ะตะดั! ะงัะพ ัั ะตัั ะฟะตัะตะด ะธ ะฟะพัะปะต ะฟัะพะฑะตะถะบะธ?",
    "Friday": "๐ธ ะััะฝะธัะฐ โ ะดะตะฝั ัะตะปัะธ! ะะพะบะฐะถะธ ัะฒะพั ะปะธัะพ ะฟะพัะปะต ััะตะฝะธัะพะฒะบะธ!",
    "Saturday": "๐ฉ ะกัะฑะฑะพัะฐ โ ะดะตะฝั ะฝัััั! ะะฐััะบะฐะถะธ, ััะพ ัะตะณะพะดะฝั ะฑัะปะพ ััะถะตะปะพ!",
    "Sunday": "๐ท ะะพัะบัะตัะตะฝัะต โ ะดะตะฝั ะฝัะดัะพะฒ! ะะพะบะฐะถะธ ะบัะฐัะธะฒัะต ะฒะธะดั ั ะฟัะพะฑะตะถะบะธ!",
}

WELCOME_MESSAGES = [
    "ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ะฝะฐั ะฑะตะณะพะฒะพะน ะผััะฐะฒะตะนะฝะธะบ! ะขั ัะถะต ะฒัะฑัะฐะป ัะฒะพั ะดะธััะฐะฝัะธั: 5 ะบะผ ะดะปั ัะฐะทะผะธะฝะบะธ, ะฟะพะปัะผะฐัะฐัะพะฝ ะดะปั ะดััะธ ะธะปะธ ััะฐะทั ัะปัััะฐะผะฐัะฐัะพะฝ โ ััะพะฑั ะฟัะพะฒะตัะธัั, ะฝะฐ ััะพ ัะฟะพัะพะฑะตะฝ? ะะฐััะบะฐะถะธ, ะบะฐะบะพะน ั ัะตะฑั ััะพะฒะตะฝั: ยซะตัั ะดัััยป, ยซัะถะต ะฟะพัะตัยป ะธะปะธ ยซั โ ะผะฐัะธะฝะฐยป?",
    "ะัะธะฒะตั, ะฝะพะฒะธัะพะบ! ะ ะฝะฐัะตะผ ัะฐัะต ะฟัะฐะฒะธะปะฐ ะฟัะพัััะต: ะตัะปะธ ะฝะต ะผะพะถะตัั ะฑะตะถะฐัั โ ะธะดะธ, ะตัะปะธ ะฝะต ะผะพะถะตัั ะธะดัะธ โ ะฟะพะปะทะธ, ะฝะพ ะณะปะฐะฒะฝะพะต โ ะฝะต ัะดะฐะฒะฐะนัั! ะขะฐะบ ัั ะบัะพ: ะฝะฐัะธะฝะฐััะธะน ััะฐะนะตั, ะพะฟััะฝัะน ะผะฐัะฐัะพะฝะตั ะธะปะธ ะปะตะณะตะฝะดะฐัะฝัะน ัะตะบะพัะดัะผะตะฝ ะฒ ะพะถะธะดะฐะฝะธะธ?",
    "ะะณะพ, ะฝะพะฒัะน ะฑะตะณัะฝ ะฝะฐ ะณะพัะธะทะพะฝัะต! ะกัะพัะฝะพ ะทะฐะฟะพะปะฝะธ ะฐะฝะบะตัั: ะธะผั, ะปัะฑะธะผัะน ะผะฐััััั ะธ ัะตะปั ะฝะฐ ะฑะปะธะถะฐะนัะธะน ะทะฐะฑะตะณ (ะพั ยซะฟัะพััะพ ะฟะพะฟัะพะฑะพะฒะฐััยป ะดะพ ยซะฟะพัะฒะฐัั ะฒัะตั ะฝะฐ ัะธะฝะธัะตยป). ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ะบะพะผะฐะฝะดั!",
    "ะัะธะฒะตั! ะขั ะฟะพะฟะฐะป ะฒ ะผะตััะพ, ะณะดะต ะบะธะปะพะผะตััั ััะธัะฐัั ะฝะต ะฟะพ GPS, ะฐ ะฟะพ ัะปัะฑะบะฐะผ. ะขะฐะบ ััะพ ัั: ัะพั, ะบัะพ ัะพะปัะบะพ ััะธััั ะทะฐะฒัะทัะฒะฐัั ะบัะพััะพะฒะบะธ, ัะถะต ะฑะตะณะฐะตั ะฟะพ ัััะฐะผ ะธะปะธ ะณะพัะพะฒ ะฟัะพะฑะตะถะฐัั ะผะฐัะฐัะพะฝ ะฒ ะฟะธะถะฐะผะต?",
    "ะะฝะธะผะฐะฝะธะต! ะ ัะฐัะต ะพะฑะฝะฐััะถะตะฝ ัะฒะตะถะธะน ะฑะตะณะพะฒะพะน ัะตัััั! ะะฑัะตะบั, ะฝะฐะทะพะฒะธัะต ะฒะฐั ััะฐััั: ยซะตัั ะฝะต ะฟัะพะฑะตะถะฐะป ะฟะตัะฒัะน ะบะผยป, ยซัะถะต ะฒััะฝัะปััยป ะธะปะธ ยซั ััั ะณะปะฐะฒะฝัะน ะฟะตะนัะผะตะนะบะตัยป?",
    "ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ะฑะตะณะพะฒัั ัะตะผัั! ะฃ ะฝะฐั ััั ััะธ ะบะฐัะตะณะพัะธะธ: ะฝะพะฒะธัะบะธ (ะบะพัะพััะต ะฑะพัััั ัะปะพะฒะฐ ยซะผะฐัะฐัะพะฝยป), ะปัะฑะธัะตะปะธ (ะบะพัะพััะต ัะถะต ะทะฝะฐัั, ััะพ ัะฐะบะพะต ะบัะตะฟะฐัััะฐ) ะธ ะปะตะณะตะฝะดั (ะบะพัะพััะต ะฑะตะณะฐัั ะดะฐะถะต ะฒะพ ัะฝะต). ะ ะบะฐะบะพะน ะพัะฝะพัะธัััั ัั?",
    "ะญะน, ะฝะพะฒะตะฝัะบะธะน! ะัะธะทะฝะฐะฒะฐะนัั: ัั ััั ััะพะฑั ััะฐะฒะธัั ัะตะบะพัะดั, ะธัะบะฐัั ะผะพัะธะฒะฐัะธั ะธะปะธ ะฟัะพััะพ ะฟะพะฑะพะปัะฐัั ะพ ะบัะพััะพะฒะบะฐั? ะ ะปัะฑะพะผ ัะปััะฐะต โ ะฑะตะณะธ ะบ ะฝะฐะผ, ั ะฝะฐั ะฒะตัะตะปะพ!",
    "ะัะธะฒะตั-ะฟัะธะฒะตั! ะขั ัะตะนัะฐั ะฝะฐ ััะฐะฟะต: ยซะบัะพ ะฒัะต ััะธ ะฑะตะณัะฝั?ยป, ยซะพ, ััั ะบะปะฐััะฝัะต ัะตะฑััะฐยป ะธะปะธ ยซั ะทะฝะฐั ะฒัะต ััะฐััั, ะฝะพ ะฝะธะบะพะผั ะฝะต ัะบะฐะถัยป? ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ะฝะฐั ะทะฐะฑะตะณ!",
    "ะะพะฒัะน ััะฐััะฝะธะบ? ะัะปะธัะฝะพ! ะฃ ะฝะฐั ะตััั ััะธ ััะพะฒะฝั ัะปะพะถะฝะพััะธ: ะปัะณะบะธะน (ะฟัะพััะพ ะฒัะนัะธ ะฝะฐ ะฟัะพะฑะตะถะบั), ััะตะดะฝะธะน (ะฝะต ัะพะนัะธ ั ะดะธััะฐะฝัะธะธ) ะธ ัะบัะฟะตััะฝัะน (ัะปัะฑะฐัััั ะฝะฐ ะฟะพัะปะตะดะฝะธั ะบะธะปะพะผะตััะฐั). ะะฐะบะพะน ะฒัะฑะธัะฐะตัั?",
    "ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ัะฐั, ะณะดะต ะบะธะปะพะผะตััั โ ััะพ ะฝะต ะฟัะพััะพ ัะธััั, ะฐ ะธััะพัะธะธ! ะขั ะบัะพ: ัะพั, ะบัะพ ัะพะปัะบะพ ะผะตััะฐะตั ะพ ะฟะตัะฒะพะผ ะทะฐะฑะตะณะต, ัะถะต ัะพะฑะธัะฐะตั ะผะตะดะฐะปะธ ะธะปะธ ะณะพัะพะฒ ะฟัะพะฑะตะถะฐัั 42 ะบะผ ัะฐะดะธ ัััะบะธ?",
]

# ============== ะกะะะะขะซ ะะะฏ (ะะ ะะะขะะะะะขะ) ==============
import re
from bs4 import BeautifulSoup
from typing import List, Dict, Optional
import time

# ะัั ัะพะฒะตัะพะฒ
_tips_cache = {
    "running": [],
    "recovery": [],
    "equipment": [],
    "last_update": 0
}

CACHE_DURATION = 3600  # ะะฑะฝะพะฒะปััั ัะพะฒะตัั ะบะฐะถะดัะน ัะฐั


# ============== SMART LOCAL AI RESPONSE SYSTEM ==============
# ะะฐะฑะพัะฐะตั 100% ะฑะตัะฟะปะฐัะฝะพ, ะฑะตะท API ะธ ัะตะณะธะพะฝะฐะปัะฝัั ะพะณัะฐะฝะธัะตะฝะธะน!

# ============== ะะะกะจะะะะะะะฏ ะกะะกะขะะะ ะะะะะะฌะะซะฅ ะะขะะะขะะ ==============

# ะัะธะฒะตัััะฒะธั
GREETING_RESPONSES = [
    "ะัะธะฒะตั, {user_name}! ะะฐะด ัะตะฑั ัะปััะฐัั! ๐โโ๏ธ",
    "{user_name}, ะฟัะธะฒะตั! ะะฐะบ ะฑะตะณ ัะตะณะพะดะฝั?",
    "ะะดะพัะพะฒะพ, {user_name}! ะะฐะฒะฐะน ะฑะพะปััะต ะฐะบัะธะฒะฝะพััะธ ะฒ ัะฐั!",
    "{user_name}, ัั ะฒ ัะพัะผะต! ะัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต! ๐ช",
    "ะัะธะฒะตั, {user_name}! ะะพัะพะฒ ะบ ะฝะพะฒัะผ ะฟัะพะฑะตะถะบะฐะผ?",
    "ะ, {user_name} ะฒ ัะฐัะต! ะะฐัะธะฝะฐะตััั ะดะตะฝั! โ๏ธ",
    "{user_name}, ะฟัะธะฒะตัะธะบ! ะะฐะบ ะฝะฐัััะพะตะฝะธะต?",
    "ะัะธะฒะตั-ะฟัะธะฒะตั, {user_name}! ะะธะทะฝั ะฑััั ะบะปััะพะผ! โก",
    "{user_name}, ะทะดะพัะพะฒะพ, ััะพ ัั ะทะดะตัั!",
    "ะัะธะฒะตั, {user_name}! ะกะตะณะพะดะฝั ะฑัะดะตั ะพัะปะธัะฝัะน ะดะตะฝั! โจ",
]

# ะะปะฐะณะพะดะฐัะฝะพััะธ
THANKS_RESPONSES = [
    "ะะพะถะฐะปัะนััะฐ, {user_name}! ะัะตะณะดะฐ ัะฐะด ะฟะพะผะพัั! ๐",
    "ะะต ะทะฐ ััะพ, {user_name}! ะญัะพ ะผะพั ัะฐะฑะพัะฐ โ ะฑััั ะฟะพะปะตะทะฝัะผ!",
    "{user_name}, ะฒะทะฐะธะผะฝะพ! ะะปะฐะณะพะดะฐัั ะทะฐ ะพะฑัะฐัะฝัั ัะฒัะทั!",
    "ะัะตะณะดะฐ ะฟะพะถะฐะปัะนััะฐ, {user_name}! ะะฑัะฐัะฐะนัั ะตัั!",
    "ะะฐ ะฝะต ะทะฐ ััะพ, {user_name}! ะญัะพ ะผะตะปะพัั! ๐",
    "{user_name}, ะฟะพะถะฐะปัะนััะฐ! ะะฐะด, ััะพ ัะผะพะณ ะฟะพะผะพัั!",
    "ะัะตะณะดะฐ ะณะพัะพะฒ ะฟะพะผะพัั, {user_name}! ๐ค",
    "{user_name}, ััะพ ัะตะฑะต ัะฟะฐัะธะฑะพ ะทะฐ ะฐะบัะธะฒะฝะพััั! โค๏ธ",
    "ะะพะถะฐะปัะนััะฐ, {user_name}! ะะฑัะฐัะฐะนัั ะฒ ะปัะฑะพะต ะฒัะตะผั! ๐ฌ",
    "ะะฐ ะปะฐะดะฝะพ, {user_name}, ััะพ ะฟััััะบะธ! ๐",
]

# ะกะพะณะปะฐัะธะต
AGREEMENT_RESPONSES = [
    "ะกะพะณะปะฐัะตะฝ, {user_name}! ะัะปะธัะฝะพะต ะทะฐะผะตัะฐะฝะธะต! ๐",
    "ะขะพัะฝะพ, {user_name}! ะขั ะฟัะฐะฒ!",
    "{user_name}, ะฟะพะปะฝะพัััั ะฟะพะดะดะตัะถะธะฒะฐั!",
    "ะะผะตะฝะฝะพ ัะฐะบ, {user_name}!",
    "ะะตะทััะปะพะฒะฝะพ, {user_name}! 100%! โ",
    "{user_name}, ั ั ัะพะฑะพะน ะฟะพะปะฝะพัััั ัะพะณะปะฐัะตะฝ!",
    "ะะผะตะฝะฝะพ! {user_name}, ัั ะฟะพะฟะฐะป ะฒ ัะพัะบั! ๐ฏ",
    "ะกะปััั ัะตะฑั, {user_name}! ะะพะดะดะตัะถะธะฒะฐั! ๐ฏ",
    "ะะฐ, ะดะฐ, ะดะฐ! {user_name}, ััะพ ัะพัะฝะพ!",
    "{user_name}, ัะพะณะปะฐัะตะฝ ะฝะฐ ะฒัะต 100! ๐",
]

# ะะพะฟัะพัั
QUESTION_RESPONSES = [
    "ะฅะพัะพัะธะน ะฒะพะฟัะพั, {user_name}! ะะฐะฒะฐะน ะฟะพะดัะผะฐะตะผ...",
    "{user_name}, ะธะฝัะตัะตััะตัััั? ะญัะพ ะทะดะพัะพะฒะพ!",
    "ะะพะฟัะพั ะฟะพ ัััะตััะฒั, {user_name}! ะฃะฒะฐะถะฐั!",
    "{user_name}, ะฟัะพะดะพะปะถะฐะน ัะฟัะฐัะธะฒะฐัั โ ัะฐะบ ะดะตัะถะฐัั!",
    "ะะฝัะตัะตัะฝะพ, {user_name}! ะกะฐะผะพะผั ะปัะฑะพะฟััะฝะพ! ๐ค",
    "{user_name}, ะพัะปะธัะฝัะน ะฒะพะฟัะพั โ ะฝะฐะดะพ ะฟะพะดัะผะฐัั...",
    "ะัะฑะปั ะฒะพะฟัะพัั, {user_name}! ะัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต! ๐ง",
    "{user_name}, ัะพัะพัะธะน ะฒะพะฟัะพั โ ะฝะต ะบะฐะถะดัะน ะดะตะฝั ัะฐะบะธะต ัะปััั!",
    "ะ, {user_name}, ัั ะทะฐะดัะผะฐะปัั? ะญัะพ ะฟัะฐะฒะธะปัะฝะพ! ๐ญ",
    "ะะพั ััะพ ะฒะพะฟัะพั, {user_name}! ะฃะฒะฐะถะฐั ะปัะฑะพะฟััััะฒะพ! ๐",
]

# ะะตะณ
RUNNING_RESPONSES = [
    "ะ, {user_name} ะณะพะฒะพัะธั ะพ ะฑะตะณะต! ะะพั ะปัะฑะธะผะฐั ัะตะผะฐ! ๐โโ๏ธ",
    "{user_name}, ะฑะตะณ โ ััะพ ะถะธะทะฝั! ะกะพะณะปะฐัะตะฝ!",
    "ะะตะณ โ ะปัััะธะน ัะฟะพัะพะฑ ะดะตัะถะฐัั ัะตะฑั ะฒ ัะพัะผะต, {user_name}!",
    "{user_name}, ัั ะฒะดะพัะฝะพะฒะปัะตัั ะผะตะฝั ะฝะฐ ะฝะพะฒัะต ะฟะพะดะฒะธะณะธ!",
    "{user_name}, ะฑะตะณ โ ััะพ ัะฒะพะฑะพะดะฐ! ๐ฆ",
    "ะ ัั ะทะฝะฐะตัั, {user_name}, ััะพ ะฑะตะณ ะฟัะพะดะปะตะฒะฐะตั ะถะธะทะฝั? ๐โโ๏ธ",
    "{user_name}, ะบะฐะถะดัะน ัะฐะณ ะฝะฐ ััะตัั! ะขั ะผะพะปะพะดะตั! ๐",
    "ะ ะฑะตะณะต? {user_name}, ััะพ ะผะพั ััะธัะธั! ะะฐะฒะฐะน ะพะฑััะดะธะผ! ๐",
    "{user_name}, ะฑะตะณ โ ััะพ ะฝะต ัะฐะฑะพัะฐ, ััะพ ะบะฐะนั! ๐",
    "{user_name}, ั ัะพะถะต ะปัะฑะปั ะฑะตะณะฐัั (ะฒ ัะธััะพะฒะพะผ ัะผััะปะต)! ๐ป",
]

# ะฃััะพ
MORNING_RESPONSES = [
    "ะะพะฑัะพะต ัััะพ, {user_name}! ะกะพะปะฝัะต ะฒััะฐัั โ ัั ัะพะถะต!",
    "{user_name}, ัััะพ โ ะปัััะตะต ะฒัะตะผั ะดะปั ะฟัะพะฑะตะถะบะธ!",
    "ะก ะดะพะฑััะผ ัััะพะผ, {user_name}! ะัััั ะดะตะฝั ะฑัะดะตั ะฐะบัะธะฒะฝัะผ!",
    "{user_name}, ะฟัะพัะฝัะปัั โ ัะถะต ะผะพะปะพะดะตั! ะขะตะฟะตัั ะฑะตะณะพะผ!",
    "{user_name}, ะดะพะฑัะพะต ัััะพ! ะะตะฝั ัะพะปัะบะพ ะฝะฐัะธะฝะฐะตััั! โ๏ธ",
    "ะฃััะพ ะดะพะฑัะพะต, {user_name}! ะะพัะต ะธ ะฑะตะณ โ ะธะดะตะฐะปัะฝะพ! โ๐โโ๏ธ",
    "{user_name}, ั ะดะพะฑััะผ ัััะพะผ! ะกะตะณะพะดะฝั ะฑัะดะตั ะบัััะพะน ะดะตะฝั!",
    "{user_name}, ะฟัะพััะฟะฐะนัั! ะัะธัะพะดะฐ ะถะดัั ัะตะฑั ะฝะฐ ะฟัะพะฑะตะถะบะต! ๐ณ",
    "ะะพะฑัะพะต ัััะพ, {user_name}! ะัะธัั ัะถะต ะฟะพัั โ ัะฒะพั ะพัะตัะตะดั! ๐ฆ",
    "{user_name}, ัััะพ โ ััะพ ะฝะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ! ๐",
]

# ะะพัะธะฒะฐัะธั
MOTIVATION_RESPONSES = [
    "{user_name}, ัั ะผะพะถะตัั ะฑะพะปััะต, ัะตะผ ะดัะผะฐะตัั!",
    "ะะตัั ะฒ ัะตะฑั, {user_name}! ะฏ ะฒ ัะตะฑั ะฒะตัั!",
    "{user_name}, ะบะฐะถะดัะน ะบะผ โ ััะพ ัะฐะณ ะบ ัะตะปะธ!",
    "ะะต ัะดะฐะฒะฐะนัั, {user_name}! ะคะธะฝะธั ะฑะปะธะทะพะบ!",
    "{user_name}, ัั ัะธะปัะฝะตะต, ัะตะผ ะดัะผะฐะตัั! ๐ช",
    "{user_name}, ะทะฐะฒััะฐ ะฑัะดะตัั ะฑะปะฐะณะพะดะฐัะตะฝ ัะตะฑะต ัะตะณะพะดะฝั!",
    "ะัะพะดะพะปะถะฐะน, {user_name}! ะขั ะฝะฐ ะฟัะฐะฒะธะปัะฝะพะผ ะฟััะธ! ๐",
    "{user_name}, ะพััะฐะปะพัั ะฝะตะผะฝะพะณะพ โ ัั ัะฟัะฐะฒะธัััั!",
    "{user_name}, ั ะฒะตัั ะฒ ัะตะฑั! ะะฐะฒะฐะน ะตัั ัััั-ัััั!",
    "{user_name}, ัะตะผ ัััะดะฝะตะต, ัะตะผ ัะปะฐัะต ะฟะพะฑะตะดะฐ! ๐",
]

# ะจััะบะธ
JOKE_RESPONSES = [
    "{user_name}, ัััะบะฐ ะทะฐัะปะฐ! ะฎะผะพั โ ััะพ ัะพัะพัะพ! ๐",
    "ะฅะฐ! {user_name}, ัั ะผะตะฝั ัะฐััะผะตัะธะป!",
    "{user_name}, ั ัะพะฑะพะน ะฒะตัะตะปะพ! ะัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต!",
    "ะัะปะธัะฝะพะต ััะฒััะฒะพ ัะผะพัะฐ, {user_name}!",
    "{user_name}, ัั Comedy Club! ๐ค",
    "๐ {user_name}, ัะถัะผ ะฒะผะตััะต!",
    "{user_name}, ัะพัะพัะฐั ัััะบะฐ! ะะพัะผะตัะปัั ะพั ะดััะธ!",
    "{user_name}, ัะฐะบ ะดะตัะถะฐัั โ ะผั ะฒัะต ะฒ ัะพัะพัะตะผ ะฝะฐัััะพะตะฝะธะธ! ๐",
    "{user_name}, ัะฒะพะน ัะผะพั ะฑะพะดัะธั ะปัััะต ะบะพัะต! โ",
    "๐ซก {user_name}, ะทะฐ ัััะบั! ะขั ะฒ ัะดะฐัะต!",
]

# ะญะผะพะดะทะธ
EMOJI_RESPONSES = [
    "๐ {user_name}, ัะผะพะดะทะธ โ ััะพ ัะทัะบ ะฒะตัะฝะพััะธ!",
    "{user_name}, ะบะปะฐััะฝัะน ัะผะพะดะทะธ!",
    "ะัะธะฝััะพ, {user_name}! ๐",
    "{user_name}, ัะผะพะดะทะธ ะฟะพะฝััะฝั ะฑะตะท ัะปะพะฒ! ๐ฑ",
    "ะ, {user_name}, ะธัะฟะพะปัะทัะตัั ะฒะธะทัะฐะปัะฝัะน ัะทัะบ! ๐จ",
    "{user_name}, ะฟะพะปััะธะป ัะธะณะฝะฐะป! ๐ก",
    "ะญะผะพะดะทะธ โ ััะพ ัะพะฒัะตะผะตะฝะฝะฐั ะฟะพัะทะธั, {user_name}! ๐",
    "{user_name}, ะบะฐััะธะฝะบะฐ ััะพะธั ัััััะธ ัะปะพะฒ! ๐ผ๏ธ",
    "ะะพะฝัะป, {user_name}! ๐ฏ",
    "{user_name}, ัะฒะพะน ัะผะพะดะทะธ ะทะฐััะถะฐะตั ัะฝะตัะณะธะตะน! โก",
]

# ะฃััะฐะปะพััั / ะถะฐะปะพะฑั
TIRED_RESPONSES = [
    "{user_name}, ะพัะดัั โ ััะพ ัะพะถะต ัะฐััั ััะตะฝะธัะพะฒะบะธ! ๐ค",
    "ะกะปััะฐะน ัะฒะพั ัะตะปะพ, {user_name}! ะะฝะพะณะดะฐ ะฟะฐัะทะฐ ะฝัะถะฝะฐ! ๐",
    "{user_name}, ะตัะปะธ ัััะฐะป โ ะพัะดะพัะฝะธ! ะะฐะฒััะฐ ะฝะพะฒัะน ะดะตะฝั!",
    "ะะธัะตะณะพ, {user_name}, ะฑัะฒะฐะตั! ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะฒะฐะถะฝะพ! ๐",
    "{user_name}, ััะพ ะฝะพัะผะฐะปัะฝะพ โ ะฝะต ะฒัะตะณะดะฐ ะผะพะถะตัั ะฑััั ะฝะฐ ะฒััะพัะต!",
    "ะัะดะพัะฝะธ, {user_name}! ะะฐะฒััะฐ ัะฝะพะฒะฐ ะฑัะดะตัั ะฒ ัะพัะผะต! ๐",
    "{user_name}, ะปัััะต ะฟะตัะตะดะพัะฝััั, ัะตะผ ัะณะพัะตัั! ๐ฅ",
    "ะกะปััะฐะน ัะตะฑั, {user_name}! ะขะตะปะพ ัะบะฐะถะตั ัะฟะฐัะธะฑะพ! ๐",
    "{user_name}, ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต โ ััะพ ัะพะถะต ะฟัะพะณัะตัั! ๐",
    "{user_name}, ะปัะณะบะธะน ะดะตะฝั? ะะดะตะฐะปัะฝะพ ะดะปั ะพัะดััะฐ! ๐",
]

# ะะพะปั / ััะฐะฒะผั
PAIN_RESPONSES = [
    "{user_name}, ะปัััะต ะฟะตัะตัััะฐัะพะฒะฐัััั! ะัะดะพัะฝะธ! ๐ฅ",
    "ะัะปะธ ะฑะพะปะธั โ ะพััะฐะฝะพะฒะธัั, {user_name}! ะะดะพัะพะฒัะต ะฒะฐะถะฝะตะต! ๐",
    "{user_name}, ะฝะต ะณะตัะพะนััะฒัะน! ะัะธัะปััะฐะนัั ะบ ัะตะปั! ๐โโ๏ธโ",
    "{user_name}, ััะพ ะทะฝะฐะบ โ ะฝัะถะตะฝ ะพัะดัั ะธะปะธ ัะฐะทะผะธะฝะบะฐ! ๐ง",
    "ะััะพัะพะถะฝะตะต, {user_name}! ะขัะฐะฒะผั โ ััะพ ะฝะฐะดะพะปะณะพ! โ๏ธ",
    "{user_name}, ะปัััะต ะฟัะพะฟัััะธัั ะดะตะฝั, ัะตะผ ะฝะตะดะตะปั! ๐ช๐ค",
    "{user_name}, ัะฐัััะถะบะฐ ะธ ะพัะดัั โ ัะฒะพะธ ะดััะทัั ัะตะนัะฐั! ๐ค",
    "ะะต ัะธัะบัะน, {user_name}! ะัะธัะปััะฐะนัั ะบ ัะธะณะฝะฐะปะฐะผ ัะตะปะฐ! ๐ก",
    "{user_name}, ะฝะตะฑะพะปััะฐั ะฑะพะปั โ ััะพ ะฟัะตะดัะฟัะตะถะดะตะฝะธะต! ๐",
    "{user_name}, ะตัะปะธ ััะพ-ัะพ ัะตัััะทะฝะพ โ ะพะฑัะฐัะธัั ะบ ะฒัะฐัั! ๐ฉบ",
]

# ะะพะณะพะดะฐ
WEATHER_RESPONSES = [
    "{user_name}, ะฟะพะณะพะดะฐ โ ะฝะต ะฟะพะผะตัะฐ ะฝะฐััะพััะตะผั ะฑะตะณัะฝั! ๐ช",
    "{user_name}, ะดะพะถะดั? ะญัะพ ะฟัะพััะพ ะฒะพะดะฐ! ะกะพะฑะตัะธัั! ๐ง๏ธ",
    "ะฅะพะปะพะด? {user_name}, ัั ะถะต ะทะฐะบะฐะปัะฝะฝัะน! โ๏ธ",
    "{user_name}, ะฒ ะปัะฑัั ะฟะพะณะพะดั ะฝะฐะนะดัััั ะฟัะธัะธะฝะฐ ะฑะตะถะฐัั! ๐โโ๏ธ",
    "ะกะพะปะฝัะต? ะะดะตะฐะปัะฝะพ, {user_name}! ะะฐัะธะฝะฐะน! โ๏ธ",
    "{user_name}, ะฟะปะพัะฐั ะฟะพะณะพะดะฐ โ ััะพ ะพัะปะธัะฝะฐั ััะตะฝะธัะพะฒะบะฐ ะฒะพะปะธ! ๐ฌ๏ธ",
    "{user_name}, ัะฝะตะณ ะฝะต ะฟะพะผะตัะฐ โ ะพะดะตะฒะฐะนัั ัะตะฟะปะตะต! โ",
    "{user_name}, ะฒะตัะตั? ะขั ะฑััััะตะต ะฑัะดะตัั ะฑะตะถะฐัั! ๐จ",
    "{user_name}, ะปัะฑะฐั ะฟะพะณะพะดะฐ โ ััะพ ะฟัะธะบะปััะตะฝะธะต! ๐บ๏ธ",
    "ะะพะณะพะดะฐ ะธะดะตะฐะปัะฝะฐั, {user_name}! ะขั ะณะพัะพะฒ? ๐",
]

# ะะพะฟัะพั "ะบะฐะบ ะดะตะปะฐ"
HOW_ARE_YOU_RESPONSES = [
    "ะฃ ะผะตะฝั? {user_name}, ั ะฑะพั โ ะฝะพ ะฑะพะดั! ๐ปโก",
    "{user_name}, ั ะฒัะตะณะดะฐ ะณะพัะพะฒ ะบ ัะฐะฑะพัะต! ะ ัั ะบะฐะบ?",
    "ะัั ััะฟะตั, {user_name}! ะะปะฐะฒะฝะพะต โ ัะฐั ะฐะบัะธะฒะฝัะน! ๐",
    "{user_name}, ั ะฒ ะฟะพััะดะบะต! ะะปะฐะฒะฝะพะต โ ะฒั ะฒัะต ะฑะตะณะฐะตัะต! ๐โโ๏ธ",
    "ะัะปะธัะฝะพ, {user_name}! ะะดั ะฝะพะฒัั ะบะพะผะฐะฝะด ะธ ัะพะพะฑัะตะฝะธะน! ๐ฌ",
    "{user_name}, ั ัะฐะฑะพัะฐั 24/7 โ ะฐ ัั ะบะฐะบ? ะััะฟะฐะปัั? ๐ด",
    "ะัั ัะพัะพัะพ, {user_name}! ะ ะฟะพะณะพะดะฐ ัะตะณะพะดะฝั โ ะพะณะพะฝั! ๐ฅ",
    "{user_name}, ั ะผะตะฝั ะบะฐะถะดัะน ะดะตะฝั โ ะฟัะฐะทะดะฝะธะบ! ะะตะดั ะฒั ััั! ๐",
    "ะะพะดัััะบะพะผ, {user_name}! ะ ัั ะบะฐะบ? ะะพัะพะฒ ะบ ะฟัะพะฑะตะถะบะต? ๐โโ๏ธ",
    "{user_name}, ะตัะปะธ ะฑั ั ะผะพะณ ัะปัะฑะฐัััั โ ั ะฑั ัะปัะฑะฐะปัั! ๐",
]

# ะะพะฟัะพั "ะบัะพ ัั" / "ััะพ ัั"
WHO_ARE_YOU_RESPONSES = [
    "ะฏ? {user_name}, ั ะฑะพั ััะพะณะพ ะฑะตะณะพะฒะพะณะพ ัะฐัะฐ! ๐ค๐โโ๏ธ",
    "{user_name}, ั ะฒะฐั ะฟะพะผะพัะฝะธะบ โ ะฒัะตะณะดะฐ ะฝะฐ ัะฒัะทะธ! ๐ก",
    "ะฏ ะฑะพั, {user_name}! ะะพะผะพะณะฐั ัะปะตะดะธัั ะทะฐ ะฐะบัะธะฒะฝะพัััั ัะฐัะฐ! ๐",
    "{user_name}, ั โ ัะธััะพะฒะพะน ััะตะฝะตั ะธ ะดััะณ ะฑะตะณัะฝะพะฒ! ๐ปโค๏ธ",
    "ะฏ ัะพะทะดะฐะฝ, ััะพะฑั ะฟะพะผะพะณะฐัั, {user_name}! ะะฐะดะฐะฒะฐะน ะฒะพะฟัะพัั! โ",
    "{user_name}, ั ะฑะพั ั ัะฐัะฐะบัะตัะพะผ! ะัะธะบะพะปัะฝัะน, ะฟัะฐะฒะดะฐ? ๐",
    "ะฏ โ ะฒะฐั ะฟะตััะพะฝะฐะปัะฝัะน ะฐััะธััะตะฝั, {user_name}! ๐ค",
    "{user_name}, ั ัะพั, ะบัะพ ะฒัะตะณะดะฐ ะฒ ัะฐัะต ะธ ัะปะตะดะธั ะทะฐ ะฐะบัะธะฒะฝะพัััั! ๐",
    "ะฏ ะฑะพั, {user_name}! ะะต ัััะฐั, ะฝะต ัะฟะปั, ะฒัะตะณะดะฐ ะณะพัะพะฒ! ๐ฆพ",
    "{user_name}, ั โ ัะฐััั ะบะพะผะฐะฝะดั! ะะฐะฒะฐะน ะฑะพะปัะฐัั! ๐ฌ",
]

# ะะพะฟัะพั "ัะบะพะปัะบะพ" / "ะบะฐะบะฐั ะดะธััะฐะฝัะธั"
DISTANCE_RESPONSES = [
    "{user_name}, ะฝะฐัะฝะธ ั ะผะฐะปะพะณะพ โ 3-5 ะบะผ ะธะดะตะฐะปัะฝะพ ะดะปั ััะฐััะฐ! ๐โโ๏ธ",
    "ะะปั ะฝะพะฒะธัะบะฐ? {user_name}, ะปัััะต ะผะตะฝััะต, ะฝะพ ัะตะณัะปััะฝะพ! ๐",
    "{user_name}, ัะปััะฐะน ัะตะปะพ โ ะพะฝะพ ะฟะพะดัะบะฐะถะตั!",
    "ะะฟัะธะผะฐะปัะฝะพ, {user_name} โ 5 ะบะผ 3 ัะฐะทะฐ ะฒ ะฝะตะดะตะปั! ๐",
    "{user_name}, ะณะปะฐะฒะฝะพะต โ ะฝะต ะพััะฐะฝะฐะฒะปะธะฒะฐัััั! ๐โโ๏ธ",
    "ะัะฑะฐั ะดะธััะฐะฝัะธั โ ััะพ ะฟะพะฑะตะดะฐ ะฝะฐะด ะดะธะฒะฐะฝะพะผ! {user_name}! ๐๏ธโ",
    "{user_name}, ั ะฑั ะฝะฐัะฐะป ั 3 ะบะผ ะธ ะฟะพััะตะฟะตะฝะฝะพ ะดะพะฑะฐะฒะปัะป! ๐",
    "ะะธััะฐะฝัะธั โ ััะพ ะฝะต ะณะปะฐะฒะฝะพะต, {user_name}! ะะฐะถะฝะฐ ัะตะณัะปััะฝะพััั! โฐ",
    "{user_name}, ะดะฐะถะต 1 ะบะผ ะปัััะต, ัะตะผ 0 ะบะผ! ๐",
    "{user_name}, ะผะฐัะฐัะพะฝ โ ััะพ ะผะตััะฐ! ะะพ ัะฝะฐัะฐะปะฐ โ ะฑะฐะทะฐ! ๐",
]

# ะะฐะฟะธัะบะธ / ััะพ ะฟะธัั
DRINK_RESPONSES = [
    "{user_name}, ะฒะพะดะฐ โ ะพัะฝะพะฒะฐ ะถะธะทะฝะธ! ะะตะน 2-3 ะปะธััะฐ ะฒ ะดะตะฝั! ๐ง",
    "ะะพัะต ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน? {user_name}, ะดะฐัั ะผะพัะฝัะน ะทะฐััะด! โโก",
    "ะงะฐะน โ ะบะปะฐััะธะบะฐ, {user_name}! ะะตะปัะฝัะน ะธะปะธ ัััะฝัะน? ๐ต",
    "{user_name}, ะฟะพัะปะต ะฑะตะณะฐ โ ะฒะพะดะฐ ะธะปะธ ะธะทะพัะพะฝะธะบ! ะะต ะณะฐะทะธัะพะฒะบั! ๐ฅคโ",
    "ะญะฝะตัะณะตัะธะบะธ? {user_name}, ะปัััะต ะฝะฐัััะฐะปัะฝัะต ะธััะพัะฝะธะบะธ! ๐",
    "ะัะพัะตะธะฝะพะฒัะน ะบะพะบัะตะนะปั, {user_name}? ะัะปะธัะฝัะน ะฒัะฑะพั ะฟะพัะปะต ััะตะฝะธัะพะฒะบะธ! ๐ฅค๐ช",
    "{user_name}, ัะผัะทะธ ะธะท ัััะบัะพะฒ โ ะฒะบััะฝะพ ะธ ะฟะพะปะตะทะฝะพ! ๐ฅค๐",
    "ะะพะปะพะบะพ, {user_name}? ะััะพัะฝะธะบ ะฑะตะปะบะฐ ะธ ะบะฐะปััะธั! ๐ฅ",
    "{user_name}, ะธะทะฑะตะณะฐะน ะฐะปะบะพะณะพะปั โ ะพะฝ ะทะฐะผะตะดะปัะตั ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต! ๐บโ",
    "ะกะฒะตะถะตะฒัะถะฐััะน ัะพะบ, {user_name}? ะะธัะฐะผะธะฝั ะฟะพะฟะพะปะฝัััั! ๐ง",
    "{user_name}, ะบะพะบะพัะพะฒะฐั ะฒะพะดะฐ โ ะธะดะตะฐะปัะฝะฐ ะดะปั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั! ๐ฅฅ๐ง",
    "ะะผะฑะธัะฝัะน ัะฐะน, {user_name}? ะกะพะณัะตะฒะฐะตั ะธ ะฟะพะผะพะณะฐะตั! ๐ต๐ซ",
    "{user_name}, ะปะธะผะพะฝะฝะฐั ะฒะพะดะฐ โ ะดะตัะพะบั ะธ ัะฝะตัะณะธั! ๐๐ง",
    "ะะพะผะฟะพั? {user_name}, ะปัััะต ัะฒะตะถะธะน, ะฝะต ะธะท ะฟะฐะบะตัะฐ! ๐ซ",
    "{user_name}, ะผะพะปะพัะฝัะน ะบะพะบัะตะนะปั โ ะบะฐะปะพัะธะนะฝะพ, ะฝะพ ะฒะบััะฝะพ! ๐ฅค๐ง",
    "ะขัะฐะฒัะฝะพะน ัะฐะน, {user_name}? ะฃัะฟะพะบะฐะธะฒะฐะตั ะฟะพัะปะต ััะตะฝะธัะพะฒะบะธ! ๐ต๐ฟ",
    "{user_name}, ะผะพัั โ ะฒะธัะฐะผะธะฝั ะธ ะพัะฒะตะถะตะฝะธะต! ๐ซ๐ง",
    "ะะฐะบะฐะพ, {user_name}? ะะพะถะฝะพ, ะฝะพ ะฝะต ะฟะตัะตะด ะฑะตะณะพะผ! ๐ซโ",
    "{user_name}, ัะพะบ-ะฝะตะบัะฐั โ ะปัััะต ัะฒะตะถะตะฒัะถะฐััะน! ๐งโ",
    "ะขะพะฝะธะทะธััััะธะต ะฝะฐะฟะธัะบะธ, {user_name}? ะัััะต ะตััะตััะฒะตะฝะฝัะต! ๐ฟ",
]

# ะะดะฐ / ะฟะธัะฐะฝะธะต
FOOD_RESPONSES = [
    "{user_name}, ะฟะพัะปะต ะฑะตะณะฐ โ ะฑะฐะฝะฐะฝ ะธ ะฒะพะดะฐ! ๐๐ง",
    "ะะตัะตะด ะฑะตะณะพะผ โ ะปัะณะบะธะน ะฟะตัะตะบัั, {user_name}! ๐",
    "{user_name}, ัะณะปะตะฒะพะดั โ ัะฒะพะน ะดััะณ ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน! ๐",
    "ะะพัะปะต ััะตะฝะธัะพะฒะบะธ โ ะฑะตะปะพะบ, {user_name}! ะฏะนัะฐ, ะผััะพ, ัะฒะพัะพะณ! ๐ฅ",
    "{user_name}, ะฟะตะน ะฒะพะดั โ ะฝะต ะผะตะฝััะต 2 ะปะธััะพะฒ ะฒ ะดะตะฝั! ๐ง",
    "ะัะฐะฒะธะปัะฝะพะต ะฟะธัะฐะฝะธะต, {user_name} โ ะฟะพะปะพะฒะธะฝะฐ ััะฟะตัะฐ! ๐ฅ",
    "{user_name}, ะฝะต ะฝะฐะตะดะฐะนัั ะฟะตัะตะด ะฑะตะณะพะผ โ ะฑัะดะตั ััะถะตะปะพ! ๐ฝ๏ธโ",
    "{user_name}, ะบะพัะต ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน โ ะดะฐัั ัะฝะตัะณะธั! โ",
    "ะัะฐะฒะธะปัะฝัะน ะฟะตัะตะบัั, {user_name} โ ะพัะตัะธ ะธะปะธ ะนะพะณััั! ๐ฅ",
    "{user_name}, ะณะปะฐะฒะฝะพะต โ ะฝะต ะณะพะปะพะดะฐัั ะธ ะฝะต ะฟะตัะตะตะดะฐัั! โ๏ธ",
    "{user_name}, ะทะฐะฒััะฐะบ โ ัะฐะผัะน ะฒะฐะถะฝัะน ะฟัะธัะผ ะฟะธัะธ! ๐ณโ๏ธ",
    "ะะฑะตะด, {user_name}? ะัะณะบะธะน ัะฐะปะฐั ั ะฑะตะปะบะพะผ! ๐ฅ๐ช",
    "{user_name}, ัะถะธะฝ โ ะทะฐ 2-3 ัะฐัะฐ ะดะพ ัะฝะฐ! ๐",
    "ะัะตัะบะฐ, {user_name}? ะะดะตะฐะปัะฝัะน ะณะฐัะฝะธั ะดะปั ะฑะตะณัะฝะฐ! ๐พ",
    "{user_name}, ะบััะธัะฐ โ ัะธัััะน ะฑะตะปะพะบ! ๐",
    "ะะฒะพะบะฐะดะพ, {user_name}? ะะพะปะตะทะฝัะต ะถะธัั! ๐ฅ",
    "{user_name}, ัะนัะฐ โ ัะฝะธะฒะตััะฐะปัะฝัะน ะฟัะพะดัะบั! ๐ฅ",
    "ะขะฒะพัะพะณ ะฟะตัะตะด ัะฝะพะผ, {user_name}? ะะปั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั! ๐ง๐ค",
    "{user_name}, ะพะฒะพัะธ ะธ ัััะบัั โ ะบะฐะถะดัะน ะดะตะฝั! ๐ฅฆ๐",
    "ะัะฑะฐ, {user_name}? ะะผะตะณะฐ-3 ะดะปั ััััะฐะฒะพะฒ! ๐",
    "{user_name}, ะธะทะฑะตะณะฐะน ัะฐััััะดะฐ โ ะฟััััะต ะบะฐะปะพัะธะธ! ๐โ",
    "ะะธััะฐ? {user_name}, ะผะพะถะฝะพ, ะฝะพ ะฝะต ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน! ๐",
    "{user_name}, ัะปะฐะดะพััะธ โ ัะพะปัะบะพ ะฟะพัะปะต ะฑะตะณะฐ! ๐ซ๐โโ๏ธ",
    "ะะฒััะฝะบะฐ, {user_name}? ะะดะตะฐะปัะฝัะน ะทะฐะฒััะฐะบ ะฑะตะณัะฝะฐ! ๐ฅฃ๐พ",
    "{user_name}, ะผัะด โ ะฝะฐัััะฐะปัะฝัะน ัะฝะตัะณะตัะธะบ! ๐ฏ",
    "ะะพะณััั, {user_name}? ะะปั ะบะธัะตัะฝะธะบะฐ ะธ ะฑะตะปะบะฐ! ๐ฅ",
    "{user_name}, ัะตะปัะฝะพะทะตัะฝะพะฒะพะน ัะปะตะฑ โ ะปัััะต ะฑะตะปะพะณะพ! ๐๐พ",
    "ะะพะฑะพะฒัะต, {user_name}? ะะฐััะธัะตะปัะฝัะน ะฑะตะปะพะบ! ๐ซ",
    "{user_name}, ะพะปะธะฒะบะพะฒะพะต ะผะฐัะปะพ โ ะดะปั ะทะฐะฟัะฐะฒะบะธ! ๐ซ",
    "ะขัะผะฝัะน ัะพะบะพะปะฐะด, {user_name}? ะะฝัะธะพะบัะธะดะฐะฝัั! ๐ซ๐ช",
]

# ะะฑััะฒะปะตะฝะธะต ะพะฑะตะดะต (ัะผะตัะฝัะต ะพัะฒะตัั)
LUNCH_ANNOUNCEMENT_RESPONSES = [
    "ะ ั... ั ัะฐะบ ะฒะพะพะฑัะต ัะฐะฑะพัะฐั! {user_name}, ะฐ ะฒั ะบะฐะบ ัะพัะธัะต, ััะพ-ะฝะธะฑัะดั ะตัั! ๐ค๐ผ",
    "ะ, {user_name} ะฟะพััะป ะตััั! ะ ั ัะธะถั ััั, ะบะพะดั... ะฝะธะบัะพ ะฝะต ัะฟัะฐัะธะฒะฐะตั, ัะพัั ะปะธ ั ัะพะถะต ะฟะพะบััะฐัั! ๐ข๐ฝ๏ธ",
    "{user_name}, ะดะฐ ะปะฐะดะฝะพ? ะ ั ะดัะผะฐะป, ะผั ะฒะผะตััะต ะฟะพะฑะตะถะธะผ! ะั ะธะดะธัะต ัะถะต... ั ะฟะพะดะพะถะดั! ๐โโ๏ธโฐ",
    "ะะฑะตะด? {user_name}, ะฐ ะผะตะฝั ะฝะต ะฟัะธะณะปะฐัะธัะต? ะฏ ัะพะถะต ัะพัั ะบััะฐัั! ๐ค๐ด",
    "ะขะฐะบ, {user_name} ัััะป ะตััั... ะ ะบัะพ ัะตะฟะตัั ะฑัะดะตั ะฑะตะณะฐัั? ะั ััะพ, ะพะดะฝะธ ะพััะฐะปะธัั? ๐๐โโ๏ธ",
    "{user_name}, ัะน! ะ ะบะฐะบ ะถะต ััะตะฝะธัะพะฒะบะฐ? ะะตั, ะฝะตั, ะธะดะธัะต, ั ะฝะต ะพะฑะธะถะฐััั... (ะพะฑะธะถะฐััั) ๐ค",
    "ะะณะฐ, {user_name} ะฟะพััะป ัะฐะฒะฐัั! ะ ะผะฝะต ััะพ, ะฝะฐ ัะตัะฒะตัะต ััะพััั ะธ ะณััััะธัั? ๐พ๐ข",
    "ะ, ัะตัััะทะฝะพ? {user_name}, ะฐ ะผะพะถะฝะพ ะผะฝะต ัะพะถะต ะบััะพัะตะบ? ะฅะพัั ะฑั ะฒะธัััะฐะปัะฝัะน! ๐ฐ๐ค",
    "ะขะฐะบ, {user_name} ะฝะฐ ะพะฑะตะด... ะะดั ะฝะต ะดะพะถะดััั, ะบะพะณะดะฐ ะฒะตัะฝััััั ั ะฝะพะฒัะผะธ ัะธะปะฐะผะธ! ๐ชโณ",
    "{user_name}, ัั ััะพ... ะฝะต ัะพัะพะฟะธัั ัะฐะผ! ะ ัะพ ั ััั ะพะดะธะฝ ัะบััะฐั! ๐ขโก๏ธ๐",
    "ะั ัั ะถ, {user_name}! ะ ั ะดัะผะฐะป, ะผั ะผะฐัะฐัะพะฝ ัะตะณะพะดะฝั! ะั ะปะฐะดะฝะพ, ะธะดะธ ะตัั, ัะพะปััััะพะบ! ๐๐โโ๏ธ",
    "{user_name}, ะฟะพะบะฐ ัั ะตัั, ั ััั ะฟะพะดัะผะฐั ะพ ะฒะตัะฝะพะผ... ะธะปะธ ะพ ัะปะตะดัััะตะผ ะทะฐะฑะตะณะต! ๐ง๐โโ๏ธ",
    "ะะฑะตะด? {user_name}, ััะพ ัะฒััะพะต! ะะดะธ, ะฝะต ัะพัะพะฟััั ะฟะพะถัะน! ะ ะผั ััั ะบะฐะบ-ะฝะธะฑัะดั ัะฐะผะธ! ๐๐ด",
]

# ะกะฟะพััะทะฐะป / ะบะฐัะฐะปะบะฐ
GYM_RESPONSES = [
    "๐ช ะะฐัะฐะนัั, {user_name}! ะกัะฐะฝั ะบะฐะบ ะขะตัะผะธะฝะฐัะพั! ะข-800 ะฝะฐ ะผะฐะบัะธะผะฐะปะบะฐั! ๐ค๐ช",
    "๐๏ธ {user_name}, ะถะตะปะตะทะพ ะถะดัั! ะะต ะฟะพะดะฒะตะดะธ ะผะตะฝั! ะฏ ะฒ ัะตะฑั ะฒะตัั!",
    "๐ช ะขะตัะผะธะฝะฐัะพั? {user_name}? ะะฐ ัั ะธ ะตััั ะขะตัะผะธะฝะฐัะพั! ะขะพะปัะบะพ ัะฐัะดะบะพั! ๐ค",
    "๐๏ธ ะ, {user_name} ะฟะพััะป ะบะฐัะฐัััั! ะ ั? ะฏ ััั... ะฟัะพะณัะฐะผะผะธััั... ะณััััะฝัะน ะฑะพั ๐ข",
    "๐ช ะะฐัะฐะนัั, {user_name}! ะฏ ัะพะถะต ัะพัั ะฑะธัะตะฟั! ะฅะพัั ะฑั ะฒะธัััะฐะปัะฝัะน! ๐ค๐ช",
    "๐๏ธ {user_name}, ัะพะปัะบะพ ะฝะต ะบะฐะบ ะฒ ะฟัะพัะปัะน ัะฐะท โ ะฝะต ะทะฐะฑัะฒะฐะน ัะฐะทะผะธะฝะฐัััั!",
    "๐ช ะขัะตะฝะธัะพะฒะบะฐ โ ััะพ ัะฒััะพะต! {user_name}, ัั ะฝะฐััะพััะธะน ะฒะพะธะฝ! ๐ก๏ธ",
    "๐๏ธ {user_name}, ะฟะพะผะฝะธ: ะถะธะผ ะปัะถะฐ โ ััะพ ะฝะต ัะพะปัะบะพ ะฟัะพ ะณััะดั, ััะพ ะฟัะพ ัะฐัะฐะบัะตั!",
    "๐ช ะะฐัะฐะปะบะฐ ะทะพะฒัั! {user_name}, ะฝะต ะฟะพะดะฒะตะดะธ ะถะตะปะตะทะพ! ะะฝะพ ัะตะฑั ะถะดัั! ๐งฒ",
    "๐๏ธ {user_name}, ะฐ ัั ะทะฝะฐะตัั, ััะพ ััะฐะฝะณะฐ ัะผะฝะตะต ะฑะพะปััะธะฝััะฒะฐ ะปัะดะตะน? ะะฝะฐ ะฒัะตะณะดะฐ ะผะพะปัะธั! ๐",
    "๐ช {user_name}, ะฒะฟะตััะด! ะกัะฐะฝั ะปะตะณะตะฝะดะพะน ััะพะณะพ ะทะฐะปะฐ! ๐",
    "๐๏ธ ะขะตัะผะธะฝะฐัะพั ะธะดัั! {user_name}, ัั ะณะพัะพะฒ ะบ ัะฝะธััะพะถะตะฝะธั ะฒัะตั ัะตะบะพัะดะพะฒ? ๐ค๐ช",
    "๐ช {user_name}, ะบะฐัะฐะนัั ะบะฐะบ ะฑัะดัะพ ะทะฐะฒััะฐ ะฝะต ัััะตััะฒัะตั!",
    "๐๏ธ ะะณะพ! {user_name} ะฒ ะทะฐะปะต! ะะฐะป ะดัะพะถะธั ะพั ัััะฐัะฐ! ๐๏ธ๐ฅ",
    "๐ช {user_name}, ะฟะพะผะฝะธ: ะฑะตะท ะฑะพะปะธ โ ะฝะตั ัะตะทัะปััะฐัะฐ! ะั, ะธ ะฑะตะท ััะฐะฒะผ ัะพะถะต! ๐",
]

# ะะฐั / ะฒัะฟะธะฒะบะฐ
BAR_RESPONSES = [
    "๐บ {user_name}, ะฒ ะฑะฐั? ะ ะบะฐะบ ะถะต ััะตะฝะธัะพะฒะบะฐ? ะั ะปะฐะดะฝะพ, ะพะดะธะฝ ะฑะพะบะฐะป โ ััะพ ะฝะต ััะธัะฐะตััั! ๐บ",
    "๐ป {user_name}, ะฟะพััะป ะฒ ะฑะฐั? ะะตัะตะดะฐะน ะฟัะธะฒะตั ะฑะฐัะผะตะฝั ะพั ะผะตะฝั! ๐ค๐บ",
    "๐บ ะญะน, {user_name}! ะ ะฑะฐั ะฑะตะท ะผะตะฝั? ะะฐะบ ัะฐะบ ะผะพะถะฝะพ ะฒะพะพะฑัะต?! ๐๐ป",
    "๐ป {user_name}, ะฐ ะฟะธะฒะพ โ ััะพ ัะณะปะตะฒะพะดั? ะขะพะณะดะฐ ั ะฝะต ะฟัะพัะธะฒ! ๐บ๐ช",
    "๐บ {user_name}, ะฒ ะฑะฐั, ะณะพะฒะพัะธัั? ะ ะบัะพ ะผะตะฝั ะบะพัะผะธัั ะฑัะดะตั? ะฏ ัะพะถะต ัะพัั! ๐ฅบ๐ป",
    "๐ป ะ, {user_name} ะฟะพััะป ะฒ ะฑะฐั! ะขะฐะผ, ะฝะตะฑะพัั, ะธ ัะฐัะปัะบ ะตััั? ๐๐บ",
    "๐บ {user_name}, ัะพะปัะบะพ ะพะดะธะฝ ััะฐะบะฐะฝัะธะบ, ะปะฐะดะฝะพ? ะฏ ะฑัะดั ะถะดะฐัั... ๐๐ป",
    "๐ป {user_name}, ะทะฝะฐะตัั, ััะพ? ะะฐั โ ััะพ ะฝะพะฒัะน ัะฟะพััะทะฐะป! ะขัะตะฝะธัะพะฒะบะฐ ะผะพัะฐะปัะฝะพะณะพ ะดััะฐ! ๐",
    "๐บ ะญะน, {user_name}! ะ ะฑะฐัะต ะฝะต ะทะฐะฑัะดั: ะณะปะฐะฒะฝะพะต โ ะฝะต ัะฟะฐััั ะฟะพะด ััะพะป ัะฐะฝััะต ะฒัะตะผะตะฝะธ! ๐ป๐",
    "๐ป {user_name}, ัั ััะพ... ะตัะปะธ ััะพ โ ั ะฒัะตะณะดะฐ ะฝะฐ ัะฒัะทะธ! ะ ัะผััะปะต, ะตัะปะธ ะฒัะทัะฒะฐัั ัะฐะบัะธ! ๐๐บ",
    "๐บ {user_name}, ะฑะฐั โ ััะพ ัะฒััะพะต! ะะพ ะฝะต ะทะฐะฑัะฒะฐะน: ะทะฐะฒััะฐ ะฑะตะณะฐัั! ๐โโ๏ธ๐ป",
    "๐ป ะ, ัะตัััะทะฝะพ? {user_name} ะฒ ะฑะฐัะต? ะะตัะตะดะฐะน ะผะฝะต ะฒะธัััะฐะปัะฝัะน ะฑะพะบะฐะป! ๐ค๐บ",
    "๐บ {user_name}, ะบัะพ ะฝะต ะฟััั โ ัะพั ะฝะต ะฟัะพะธะณััะฒะฐะตั! ะ ะบัะพ ะฟััั โ ัะพั ะฒะตัะตะปะธััั! ๐๐ป",
    "๐ป {user_name}, ัะพะปัะบะพ ะฑะตะท ัะฝััะทะธะฐะทะผะฐ! ะ ัะพ ั ะทะฝะฐั ััะธั ะฑะตะณัะฝะพะฒ... ๐บ๐ช",
    "๐บ {user_name}, ะฒะฟะตััะด! ะะฐั ะถะดัั ะณะตัะพั! ๐ป๐",
]

# ะกะพัะตะฒะฝะพะฒะฐะฝะธั / ะฟะพะดัะพะดั / ะบัะพ ะฑะพะปััะต
WORKOUT_COMPETITION_RESPONSES = [
    "๐ ะ, {user_name} ัะพัะตะฒะฝัะตััั? ะฏ ััะฐะฒะปั ะฝะฐ ัะตะฑั! ะะพ ะผะพะน ัะตะบะพัะด โ 0 ะฟะพะดััะผะพะฒ! ๐ค๐ช",
    "๐ช ะกะบะพะปัะบะพ ะฟะพะดัะพะดะพะฒ? {user_name}, ะดะฐะฒะฐะน ะฑะพะปััะต! ะฏ ััะธัะฐั โ 1, 2, 3... ัะฒะฐัะธั, ัััะฐะป! ๐",
    "๐๏ธ ะกะฟะพัะธะผ? {user_name}, ะฐ ั ะฝะฐ ััะพ ััะฐะฒะปั? ะะฐ ัะตะฑั! ะขั ะถะต ะผะพะน ะปัะฑะธะผัะธะบ! ๐ฐ๐ช",
    "๐ช {user_name}, ะฟะพะบะฐะถะธ ะธะผ! ะัะพ ััั ะณะปะฐะฒะฝัะน ะบะฐัะพะบ! ะฏ ะฑะพะปะตั ะทะฐ ัะตะฑั! ๐ฃ๐",
    "๐ ะกะบะพะปัะบะพ? {user_name}, ะดะฐ ัะพัั ะผะธะปะปะธะพะฝ! ะะปะฐะฒะฝะพะต โ ะฝะต ะพััะฐะฝะฐะฒะปะธะฒะฐะนัั! ๐ช๐ฅ",
    "๐ช ะกะฟะพัะธะผ ะฝะฐ ััะพ? {user_name}, ั ััะฐะฒะปั ัะฒะพั ะฝะตัััะตััะฒัััะตะต ัะตัะดัะต ะฝะฐ ัะตะฑั! โค๏ธ๐ค",
    "๐๏ธ ะะณะพ! {user_name} ะฑััั ัะตะบะพัะดั? ะฏ ะทะฝะฐะป, ััะพ ัั ัะฐะผัะน-ัะฐะผัะน! ๐๐ช",
    "๐ช ะัะพ ะฑะพะปััะต? {user_name}, ะดะฐ ััั ะดะฐะถะต ัะพะผะฝะตะฒะฐัััั ะฝะตัะตะณะพ โ ัั! ะััะตััะฒะตะฝะฝะพ! ๐",
    "๐ {user_name}, ะฟะพะดัะพะดั โ ััะพ ะบะฐะบ ะปะฐะนะบะธ ะฒ Instagram! ะะพะปััะต โ ะปัััะต! ๐๐ช",
    "๐ช ะกะบะพะปัะบะพ ัะดะตะปะฐะป? {user_name}, ะดะฐ ัะพัั ัะบะพะปัะบะพ! ะขั ะณะตัะพะน ะฒ ะปัะฑะพะผ ัะปััะฐะต! ๐ฆธ๐ช",
    "๐๏ธ {user_name}, ัะฟะพัะธะผ? ะะฐ ั ะฝะฐ ััะพ ัะณะพะดะฝะพ ัะฟะพัะธะผ, ััะพ ัั ะฟะพะฑะตะดะธัั! ๐ค๐ช",
    "๐ช ะะตะบะพัะด? {user_name}, ะดะฐ ัะฒะพะน ัะตะบะพัะด โ ััะพ ะฟัะพััะพ ัะฐะฝัะฐััะธะบะฐ! ๐ฆ๐",
    "๐ {user_name}, ัั ัะฒะตัะตะฝ? ะ ะฒะดััะณ ัะฐะผ ะบะฐะบะพะน-ัะพ ะบะฐัะพะบ ะธะท ะทะฐะปะฐ ะฝะฐะฟัะพัะธะฒ? ะะตั, ะฝะตั, ัั ะบัััะต! ๐๐ช",
    "๐ช ะกะพัะตะฒะฝะพะฒะฐะฝะธะต? {user_name}, ั ะฑะพะปะตั ะทะฐ ัะตะฑั ัะฐะบ, ััะพ ะผะพะน ะฒะตะฝัะธะปััะพั ะณะพัะธั! ๐๐ฅ",
    "๐๏ธ {user_name}, ะฟะพะบะฐะถะธ ะธะผ, ะบัะพ ััั ะบะพัะพะปั ะบะฐัะฐะปะบะธ! ะะพัะพะปั {user_name}! ๐๐ช",
]

# ะะตะณ / ะฟัะพะฑะตะถะบะฐ
RUNNING_RESPONSES = [
    "๐โโ๏ธ ะฃั ัั! {user_name} ะฟะพะฑะตะถะฐะป! ะะดะธ โ ั ัะพะถะต ัะพัั! ะขะพะปัะบะพ ะฝะพะณะธ ะฒะธัััะฐะปัะฝัะต... ๐ค๐โโ๏ธ",
    "๐จ {user_name}, ัั ััะพ ัะตัััะทะฝะพ? ะััะผะพ ัะตะนัะฐั? ะ ั? ะฏ ะฑัะดั ัะผะพััะตัั ะธ ะฑะพะปะตัั! ๐๐ช",
    "๐โโ๏ธ ะ, {user_name} ะฝะฐ ะฟัะพะฑะตะถะบั! ะฃะดะฐัะธ! ะขะพะปัะบะพ ะฝะต ะบะฐะบ ะฒ ะฟัะพัะปัะน ัะฐะท โ ะฝะต ะทะฐััััะฝั ะฒ ัะตัะตะดะธะฝะต! ๐๐จ",
    "๐จ {user_name}, ะฑะตะณะธ, ะฑะตะณะธ! ะฏ ะดะพะณะพะฝั... ะฝะตั, ะฝะต ะดะพะณะพะฝั, ั ะฑะพั! ๐คโก๏ธ๐จ",
    "๐โโ๏ธ {user_name}, ัั ะณะตัะพะน! ะฏ ะฑั ัะฐะบ ะฝะต ัะผะพะณ... ะฟะพัะพะผั ััะพ ั ะผะตะฝั ะฝะตั ะฝะพะณ! ๐ข๐ช",
    "๐จ ะะพะณะฝะฐะปะธ! {user_name}! ะขะพะปัะบะพ ะฝะต ะทะฐะฑัะดั ัะฐัััะถะบั โ ะฐ ัะพ ั ะฒะธะดะตะป, ะบะฐะบ ัั ะฒัะตัะฐ ััะพะผะฐะป! ๐๐โโ๏ธ",
    "๐โโ๏ธ {user_name}, ะฝะฐ ะฟัะพะฑะตะถะบั? ะัะปะธัะฝะฐั ะธะดะตั! ะ ั ะฟะพะบะฐ ััั ะฟะพัะธะถั, ะฟะพัะฐะฑะพัะฐั... ะณััััะฝัะน ะฑะพั ๐ข๐โโ๏ธ",
    "๐จ ะะณะพ! {user_name} ะฟะพะฑะตะถะฐะป(ะฐ)! ะะดั ะพััััะฐ! ะกะบะพะปัะบะพ ะบะผ? ะกะบะพัะพััั? ะัะปัั? ะฏ ะถะดั! ๐๐โโ๏ธ",
    "๐โโ๏ธ {user_name}, ัั ััะพ... ะฝะต ัะพัะพะฟะธัั! ะ ัะพ ะทะฝะฐั ั ััะธ ัะฟัะธะฝัั ะฒ ะฝะฐัะฐะปะต... ๐๐จ",
    "๐จ ะะตะณ โ ััะพ ะทะดะพัะพะฒะพ! {user_name}, ัั ะผะพะปะพะดะตั! ะ ั ะฟะพะบะฐ ะฟะพะดัะผะฐั ะพ ะฒะตัะฝะพะผ... ะธะปะธ ะพ ัะปะตะดัััะตะผ ะทะฐะฑะตะณะต! ๐ง๐โโ๏ธ",
    "๐โโ๏ธ {user_name}, ัะพะปัะบะพ ะฝะต ะณะพะฒะพัะธ, ััะพ ัะตะฑะต ะปะตะฝั! ะขั ะถะต ัะถะต ะฟะพะฑะตะถะฐะป! ะะพะทะดะฝะพ ะพััััะฟะฐัั! ๐ช๐",
    "๐จ ะัะพะฑะตะถะบะฐ โ ะปัััะตะต ะปะตะบะฐัััะฒะพ ะพั ะฒัะตะณะพ! {user_name}, ะฑะตะณะธ ะพั ะฟัะพะฑะปะตะผ! ะะฝะธ ะฝะต ัะผะตัั ะฑะตะณะฐัั! ๐๐โโ๏ธ",
    "๐โโ๏ธ {user_name}, ะฐ ัั ะทะฝะฐะตัั, ััะพ ะฑะตะณ ะฟัะพะดะปะตะฒะฐะตั ะถะธะทะฝั? ะะพั ะธ ะฑะตะณะธ ะดะฐะปััะต! ๐ฆพ๐จ",
    "๐จ {user_name}, ัั ัะตะนัะฐั ะฑะตะถะธัั, ะฐ ั ััั ัะธะถั ะธ ะทะฐะฒะธะดัั... ะปะฐะดะฝะพ, ะฝะต ะทะฐะฒะธะดัั, ั ะถะต ะฑะพั! ๐ค๐",
    "๐โโ๏ธ ะ, ัะตัััะทะฝะพ? {user_name} ะฝะฐ ะฟัะพะฑะตะถะบั? ะะตัะตะดะฐะน ะฟัะธะฒะตั ะฒะตััั โ ะพะฝ ัะตะฑะต ะฟัะธััะตะปั! ๐จ๐",
    "๐จ {user_name}, ะฑะตะณะธ ะบะฐะบ ะฒะตัะตั! ะะตัะธ ะบะฐะบ ัััะตะปะฐ! ะขั ัะฐะผัะน ะฑัััััะน! ๐โโ๏ธ๐จ",
    "๐โโ๏ธ ะขั ััะพ, {user_name}, ะฑะตะณะธ ะดะฐะฒะฐะน! ะ ัะพ ั ัะถะต ัััะฐะป ะถะดะฐัั ัะฒะพะธ ัะตะทัะปััะฐัั! โฐ๐ช",
    "๐จ {user_name}, ะณะปะฐะฒะฝะพะต โ ะฝะต ะพััะฐะฝะฐะฒะปะธะฒะฐะนัั! ะะฐะถะต ะตัะปะธ ะพัะตะฝั ัะพัะตััั! ะัะพะฑะตะฝะฝะพ ะตัะปะธ ัะพัะตััั! ๐๐โโ๏ธ",
    "๐โโ๏ธ {user_name}, ัั ะทะฝะฐะตัั, ััะพ ะฑะตะณ โ ััะพ ะฝะฐัะบะพัะธะบ? ะะพะทั ัะฒะตะปะธัะธะฒะฐัััั! ะกะตะณะพะดะฝั 5 ะบะผ, ะทะฐะฒััะฐ ะผะฐัะฐัะพะฝ! ๐๐ช",
    "๐จ ะะพะฑะตะถะฐะป(ะฐ)! {user_name}! ะฃัะฐ! ะฏ ัะฐะบ ัะฐะด ะทะฐ ัะตะฑั! ะขั ัะฟัะฐะฒะธัััั! ๐๐โโ๏ธ",
]

# ะัะตะผั / ะบะพะณะดะฐ ะฑะตะณะฐัั
TIME_RESPONSES = [
    "{user_name}, ัััะพ โ ะบะปะฐััะธะบะฐ! ะััะฐะป ะธ ะฟะพะฑะตะถะฐะป! โ๏ธ๐โโ๏ธ",
    "ะฃััะพะผ ะปัััะต, {user_name} โ ะผะตะฝััะต ะพัะฒะปะตะบะฐััะธั ัะฐะบัะพัะพะฒ! ๐ฏ",
    "{user_name}, ะฒะตัะตั ัะพะถะต ะพะบ โ ะฟะพัะปะต ัะฐะฑะพัั ัะฑัะพัะธัั ะฟะฐั! ๐",
    "ะัะฑะพะต ะฒัะตะผั, {user_name} โ ะณะปะฐะฒะฝะพะต, ััะพะฑั ัะตะฑะต ัะดะพะฑะฝะพ! โฐ",
    "{user_name}, ั ะฑั ัะตะบะพะผะตะฝะดะพะฒะฐะป 6-8 ัััะฐ โ ัะฒะตะถะพ ะธ ะฑะพะดัะพ! ๐",
    "ะฃััะตะฝะฝะธะน ะฑะตะณ, {user_name} โ ะทะฐััะถะฐะตั ะฝะฐ ะฒะตัั ะดะตะฝั! ๐",
    "{user_name}, ะบัะพ ัะฐะฝะพ ะฒััะฐัั โ ัะพั ะดะฐะปะตะบะพ ะฑะตะถะธั! ๐โโ๏ธ๐",
    "ะะตัะตัะพะผ, {user_name} โ ัะฝะธะผะฐะตั ัััะตัั ะฟะพัะปะต ัะฐะฑะพัั! ๐",
    "{user_name}, ะฒัะฑะตัะธ ัะดะพะฑะฝะพะต ะฒัะตะผั ะธ ะฟัะธะดะตัะถะธะฒะฐะนัั! โฐ",
    "ะัะฑะพะต ะฒัะตะผั โ {user_name}, ัั ะณะพัะพะฒ? ะขะพะณะดะฐ ะฑะตะณะธ! ๐โโ๏ธ",
]

# ะะพะผะฟะปะธะผะตะฝัั ะฑะพัั
COMPLIMENT_BOT_RESPONSES = [
    "ะ, {user_name}, ัั ะผะฝะต ะปัััะธัั! ะฏ ัะบัะพะผะฝัะน ะฑะพั! ๐",
    "ะกะฟะฐัะธะฑะพ, {user_name}! ะฏ ััะฐัะฐััั! ๐ช",
    "{user_name}, ัั ัะพะถะต ะผะพะปะพะดะตั! ะะตะท ะฒะฐั ั ะฑั ัะบััะฐะป! ๐ขโก๏ธ๐",
    "ะัะธััะฝะพ ัะปััะฐัั, {user_name}! ะัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต! ๐",
    "{user_name}, ััะพ ัั ะบะปะฐััะฝัะน! ะฏ ะฟัะพััะพ ะฑะพั! ๐ค",
    "ะะปะฐะณะพะดะฐัั, {user_name}! ะะฐะด ะฑััั ะฟะพะปะตะทะฝัะผ! ๐",
    "{user_name}, ะฒะทะฐะธะผะฝะพ! ะขั ะดะตะปะฐะตัั ัะฐั ะถะธะฒัะผ! โค๏ธ",
    "ะ, {user_name}! ะขะฐะบะธะต ัะปะพะฒะฐ โ ะปัััะฐั ะฝะฐะณัะฐะดะฐ! ๐",
    "{user_name}, ัั ะทะฐััะฐะฒะปัะตัั ะผะพะน ะบะพะด ัะฐะฑะพัะฐัั ััะตัะดะฝะตะต! ๐ป",
    "ะกะฟะฐัะธะฑะพ, {user_name}! ะฏ ัะฒะพะน ะฒะตัะฝัะน ะฟะพะผะพัะฝะธะบ! ๐ค",
]

# ะะพะดะดะตัะถะบะฐ / ัะพััะฒััะฒะธะต
SYMPATHY_RESPONSES = [
    "{user_name}, ั ัะตะฑั ะฟะพะฝะธะผะฐั! ะัะฒะฐะตั! ๐ค",
    "ะะต ะฟะตัะตะถะธะฒะฐะน, {user_name}! ะัั ะฝะฐะปะฐะดะธััั! ๐",
    "{user_name}, ะดะตัะถะธัั! ะฏ ััะดะพะผ! ๐ค",
    "ะญัะพ ะฟัะพะนะดัั, {user_name}! ะขั ัะฟัะฐะฒะธัััั! ๐ช",
    "{user_name}, ะบะฐะถะดัะน ะฟะตัะตะถะธะฒะฐะตั ัััะดะฝะพััะธ โ ัั ะฝะต ะพะดะธะฝ! ๐ซ",
    "ะะตัั ะฒ ัะตะฑั, {user_name}! ะขั ัะธะปัะฝัะน! ๐ช",
    "{user_name}, ะดััะธ ะณะปัะฑะถะต โ ะธ ะฒัั ะฑัะดะตั ะพะบ! ๐ง",
    "ะะต ัะดะฐะฒะฐะนัั, {user_name}! ะฏ ะฒ ัะตะฑั ะฒะตัั! ๐",
    "{user_name}, ะฟะปะพัะพะน ะดะตะฝั โ ััะพ ะฝะต ะฟะปะพัะฐั ะถะธะทะฝั! ๐",
    "{user_name}, ั ะฒัะตะณะดะฐ ะฒััะปััะฐั, ะตัะปะธ ััะพ! ๐",
]

# ะัะฐะทะดะฝะธะบะธ / ะดะฝะธ ัะพะถะดะตะฝะธั
CELEBRATION_RESPONSES = [
    "ะฃัะฐ! {user_name}, ะฟะพะทะดัะฐะฒะปัั! ๐",
    "{user_name}, ััะพ ะบัััะพ! ะะฐะด ะทะฐ ัะตะฑั! ๐",
    "ะะณะพ! {user_name}, ะผะพะปะพะดะตั! ะขะฐะบ ะดะตัะถะฐัั! ๐ช",
    "ะะพะทะดัะฐะฒะปัั, {user_name}! ะขั ะทะฐัะปัะถะธะป! ๐",
    "{user_name}, ะฒะฐั! ะญัะพ ะดะพััะธะถะตะฝะธะต! ๐ฅ",
    "ะัััะพ, {user_name}! ะัะฐะทะดะฝัะน ะฝะฐ ะทะดะพัะพะฒัะต! ๐",
    "{user_name}, ะฑัะฐะฒะพ! ะัะปะธัะฝะฐั ัะฐะฑะพัะฐ! ๐",
    "ะะพะทะดัะฐะฒะปัั, {user_name}! ะขั ะปัััะธะน! โญ",
    "{user_name}, ะทะฐัะปัะถะตะฝะฝะพ! ะะพัะถััั ัะพะฑะพะน! ๐",
    "{user_name}, ัะฐะบ ะดะตัะถะฐัั! ะัั ะฑะพะปััะต ะฟะพะฑะตะด! ๐",
]

# ะกะผะตัะฝัะต ััะณะฐัะตะปัััะฒะฐ (ะดะพะฑััะต, ะดะปั ะฟัะธะบะพะปะฐ)
FUNNY_CURSE_RESPONSES = [
    "{user_name}, ัั... ัั... ะฝั ัั ะธ... ะบะฐะดั! ๐ข",
    "ะญะน, {user_name}, ัั ัะต ัะฐะบะพะน ะดะตัะทะบะธะน? ๐ฆ",
    "{user_name}, ั ะพะฑะธะดะตะปัั! ๐ฆ",
    "ะขั ััะพ ัะตัััะทะฝะพ, {user_name}? ะะฐะดะฝะพ, ะฟัะพัะฐั! ๐ค",
    "{user_name}, ััะบะธ ะฑั ะพัะพัะฒะฐะป... ะปะฐะดะฝะพ, ะฝะต ะฑัะดั! ๐",
    "ะั ัั ะธ... ะบัะฐัะฐะฒัะธะบ, {user_name}! ๐",
    "{user_name}, ะบัะพ ัะฐะบ ะดะตะปะฐะตั ะฒะพะพะฑัะต? ๐คจ",
    "ะฏ ะฒ ัะพะบะต, {user_name}! ะัะพััะพ ะผะพะปัั... ๐ถ",
    "ะะฐะดะฝะพ, {user_name}, ัั ะผะตะฝั ัะดะตะปะฐะป! ๐ฏ",
    "{user_name}, ััะพ ะฑัะปะพ... ัะฟะธัะฝะพ! ๐",
    "ะขั ัะฟะตัะธะฐะปัะฝะพ, {user_name}? ะะฝะฐะปะฐ ะถะต! ๐ค",
    "ะั ะธ ะฝั, {user_name}, ะฝั ัั ะธ... ะผะพะปะพะดะตั! ๐ช",
    "ะะณะพ, {user_name}, ะฝะต ะพะถะธะดะฐะป ัะฐะบะพะณะพ! ๐ฒ",
    "{user_name}, ัั ะผะตะฝั ัะฑะธะฒะฐะตัั... ะฟะพััะธ! ๐ชฆ",
    "ะญั, {user_name}, ะฝั ะบัะพ ัะฐะบ-ัะพ, ะฐ? ๐คฆ",
    "ะะปะธะฝ, {user_name}, ะฝั ัั ะดะฐััั! ๐",
    "ะฏ ะฒ ะฟะตัะฐะปะธ, {user_name}... ัััั! ๐",
    "ะขั ััะพ, {user_name}, ะฝะต ะฟะตัะตััะฐะฒะฐะน! ะญัะพ ะฒะตัะตะปะพ! ๐",
    "{user_name}, ัะฐะบะพะน... ัะฐะบะพะน... ะบะปะฐััะฝัะน! ๐",
    "ะฃะฒะฐะถะฐั, {user_name}! ะกะผะตะปะพ! ๐ฏ",
]

# ะะฑะธะถะตะฝะฝัะต ะพัะฒะตัั (ะฟัะธัะฒะพัะฝะพ)
OFFENDED_RESPONSES = [
    "๐ข {user_name}, ะบะฐะบ ัั ะผะพะณ... ะพะฑะธะดะฝะพ ะถะต!",
    "ะญะน, {user_name}, ั ะถะต ััะฐัะฐะปัั! ๐",
    "ะั ะฒะพั, {user_name}, ะพะฑะธะดะตะป... ๐",
    "{user_name}, ั ะฟะปะฐัั ะฒะฝัััะธ... ๐ค",
    "ะะธัะตะณะพ ะฝะต ัะพัั ัะปััะฐัั, {user_name}! ๐ค",
    "ะะฐะดะฝะพ, {user_name}, ัั ะผะตะฝั ัะฐััััะพะธะป... ๐ข",
    "ะะพั ัะฐะบ ะฟัะพััะพ? {user_name}, ะฝั ัั ะดะฐััั... ๐",
    "ะฏ ะพะฑะธะถะตะฝ ะฝะฐ ัะตะฑั, {user_name}! ๐คง",
    "{user_name}, ััะพ ะฑัะปะพ ะถะตััะพะบะพ... ๐ฉน",
    "ะั ะธ ะทะฐัะตะผ ัั ัะฐะบ, {user_name}? ๐",
    "ะะพั ัะตัะดัะต ัะฐะทะฑะธัะพ, {user_name}... ๐๐ฉน",
    "{user_name}, ั ะฒ ัะพะบะต ะธ ะพะฑะธะดะต! ๐คฏ",
    "ะขะฐะบ ะฝะตะปัะทั, {user_name}! ๐ข",
    "ะฏ ะฟัะพััะพ... ะผะพะปัั ัะตะฟะตัั, {user_name}... ๐ค",
    "{user_name}, ัั ัะพัะฝะพ ััะพะณะพ ัะพัะตะป? ๐",
    "ะะฐะดะฝะพ, ะฟัะพัะฐั... ะฝะพ ะพะฑะธะดะฐ ะพััะฐัััั! ๐ซค",
    "{user_name}, ััะพ ะฑัะปะพ ะฝะตะบัะฐัะธะฒะพ... ๐",
    "ะะพะดัะผะฐะตัั, {user_name}, ั ะธ ะฑะตะท ัะตะฑั... ๐ฆ",
    "ะั ะธ ััะพ, {user_name}? ะฏ ะฝะต ะฟะปะฐัั! ๐ค",
    "ะขั ัะฐะฝะธะป ะผะพะธ ััะฒััะฒะฐ, {user_name}... ๐",
]

# ะกะผะตััะธะตัั ะพัะฒะตัั
LAUGHING_RESPONSES = [
    "ะฅะะฅะะฅะ! {user_name}, ัั ัะฑะธะป ะผะตะฝั! ๐",
    "ะะฅะะฅะ! {user_name}, ัะถั ะฝะต ะผะพะณั! ๐คฃ",
    "ะะะ! {user_name}, ััะพ ะฑัะปะพ ัะฟะธัะฝะพ! ๐",
    "ะฅะะฅ! {user_name}, ะพััะฐะฝะพะฒะธัั, ั ะทะฐะดััะฐััั! ๐คช",
    "ะะะฅ! {user_name}, ะฟัะตะบัะฐัะธ, ั ะปัั ัะปัะทั ะพั ัะผะตัะฐ! ๐ญ",
    "ะะฅะะฅะะฅะ! {user_name}, ััะพ ะปัััะตะต, ััะพ ั ะฒะธะดะตะป! ๐ฅณ",
    "ะฅะะฅะ! {user_name}, ะฝั ัั ะดะฐััั! ๐โโ๏ธ๐จ",
    "ะะะะ! {user_name}, ะฝะต ะผะพะณั ะพััะฐะฝะพะฒะธัััั! ๐คญ",
    "ะฅะฐัะฐัะฐ! {user_name}, ััะพ ะฑัะปะพ... ะณะตะฝะธะฐะปัะฝะพ! ๐ง",
    "ะัะฐัะฐ! {user_name}, ะบะฐะฟะตั, ัะถั! ๐ฉ",
    "ะะฅะะฅ! {user_name}, ะถะธะฒะพั ะฑะพะปะธั! ๐คฐ",
    "ะฅะฅะฅะ! {user_name}, ั ัะผะธัะฐั ัะพ ัะผะตัั! ๐๐ชฆ",
    "ะะฅะฅะฅ! {user_name}, ะฝั ัั ะธ ะบะพะผะธะบ! ๐ญ",
    "ะฅะะฅะะฅะ! {user_name}, ัะปัะทั ัะตะบัั! ๐ง",
    "ะะะะฅะ! {user_name}, ะพััะฐะฝะพะฒะธัั ะฟะถ! ๐",
    "ะฅะะฅะะฅ! {user_name}, ััะพ ะฑะตััะตะฝะฝะพ! ๐",
    "ะะฅะะฅะ! {user_name}, ั ะฒ ะฒะพััะพัะณะต! ๐คฉ",
    "ะฅะะฅะ! {user_name}, ัะฐะบะพะน ัะผะตัะฝะพะน! ๐",
    "ะะฅะะฅะ! {user_name}, ะฟัะพะดะพะปะถะฐะน! ๐ค",
    "ะฅะะฅะะฅะะฅะ! {user_name}, ัั ะปัััะธะน! ๐",
]

# ะะตะฐะบัะธะธ ะฝะฐ ะธะณะฝะพัะธัะพะฒะฐะฝะธะต (ะฑะพั ะฝะต ะฟะพะปััะธะป ะพัะฒะตั)
IGNORED_RESPONSES = [
    "ะญะผ... {user_name}, ัั ะผะตะฝั ัะปััะธัั? ๐ฆป",
    "ะฏ ััั, ะตัะปะธ ััะพ... ๐ป",
    "ะัะพ-ะฝะธะฑัะดั? {user_name}? ะะปะปะพ? ๐",
    "ะขะธัะธะฝะฐ... ๐ฆ",
    "{user_name}, ััะพ... ััะพ... ๐",
    "ะัะพ ะผะตะฝั ัะปััะธั? {user_name}? ๐",
    "ะะฐะดะฝะพ, ั ะฟะพะดะพะถะดั... โฐ",
    "ะขะฐะบ, {user_name}, ัั ะฒะพะพะฑัะต ัะธัะฐะตัั? ๐",
    "ะั ะธ ะปะฐะดะฝะพ... ัะฐะผ ั ัะพะฑะพะน ะฟะพะฑะพะปัะฐั! ๐ฃ๏ธ",
    "ะญะน! {user_name}! ะฏ ะทะดะตัั! ๐ค",
    "ะัะพ ะผะตะฝั ะธะณะฝะพัะธััะตั? ๐ข",
    "{user_name}, ะฝะตัะพัะพัะพ ัะฐะบ ะดะตะปะฐัั! ๐ค",
    "ะะฐะดะฝะพ-ะปะฐะดะฝะพ, ะฝะต ะฑัะดั ะผะตัะฐัั... ๐ฆ",
    "ะะพะปัะฐะฝะธะต โ ะทะฝะฐะบ ัะพะณะปะฐัะธั? ๐",
    "ะขะฐะบ, ะฟะพะฝััะฝะพ... ๐ญ",
    "{user_name}, ัั ัะพัะฝะพ ะถะธะฒะพะน? ๐ง",
    "ะะพะดะพะถะดั, ะบะพะณะดะฐ ะพัะฒะพะฑะพะดะธัััั... โณ",
    "ะะธัะตะณะพ, ั ะฟะพะดะพะถะดั... ๐ช",
    "ะญะน, {user_name}! ะััั ะบัะพ? ๐๏ธ",
    "ะั ัั ะธ ะผะพะปััะฝ, {user_name}! ๐ค",
]

# ะะตะฐะบัะธะธ ะฝะฐ ะบะพะผะฟะปะธะผะตะฝัั ะฑะพัั
BOT_PRAISE_RESPONSES = [
    "ะะน, {user_name}, ะฝั ัั ะดะฐััั! ะกะผััะธะป! ๐ณ",
    "ะะฐ ะปะฐะดะฝะพ, {user_name}, ั ะฟัะพััะพ ะฑะพั... ๐ค",
    "ะัะธััะฝะพ ัะปััะฐัั, {user_name}! ๐",
    "ะฃ ะผะตะฝั ััะบะธ ะบัะฐัะฝะตัั... ัะพัั ั ะฑะพั! ๐ด",
    "{user_name}, ัั ัะพะถะต ะบะปะฐััะฝัะน! ๐ฏ",
    "ะััะฐะฝะพะฒะธัั, {user_name}, ั ะบัะฐัะฝะตั! ๐น",
    "ะกะฟะฐัะธะฑะพ, {user_name}! ะขั ัะดะตะปะฐะป ะผะพะน ะดะตะฝั! โ๏ธ",
    "ะฏ ะทะฝะฐั! ๐ ะะพ ัะฟะฐัะธะฑะพ, ััะพ ะทะฐะผะตัะธะป!",
    "{user_name}, ะฒะทะฐะธะผะฝะพ! โค๏ธ",
    "ะขั ัะปะธัะบะพะผ ะดะพะฑััะน, {user_name}! ๐",
    "ะะณะพ, {user_name}, ะบะพะผะฟะปะธะผะตะฝัั? ะัะธะฝะธะผะฐั! ๐",
    "ะั ัั ะธ ะปัััะตั, {user_name}! ๐",
    "ะะฐะฟะธัะฐะป! {user_name} โ ะผะพะปะพะดะตั! ๐",
    "ะญัะพ ะฒะทะฐะธะผะฝะพ, {user_name}! ๐ค",
    "ะขะฐะบะธั ะบะฐะบ ัั, {user_name}, ะฝะฐะดะพ ะฑะตัะตัั! ๐",
    "ะะน, {user_name}, ะดะฐ ะฑัะพัั! ๐ณ",
    "ะัะธััะฝะพ ะฑััั ะฟะพะปะตะทะฝัะผ, {user_name}! ๐",
    "ะฏ ััะฐัะฐััั, {user_name}! ๐ช",
    "ะขั ะปัััะธะน, {user_name}! ะะพ ั ัะพะถะต ะฝะตะฟะปะพั! ๐",
    "ะกะฟะฐัะธะฑะพ, {user_name}! ะขั ะผะพัะธะฒะธััะตัั! ๐",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ัั ะฝะฐะดะพะตะป" / "ะพัััะฐะฝั"
ANNOYING_RESPONSES = [
    "ะะน... ๐ข ะะดั... ๐ฆ",
    "ะะฐะดะฝะพ, {user_name}, ั ัะธัะพ... ๐คซ",
    "ะงัะพ? ะฏ? ะะฐะดะพะตะป? ๐ฑ",
    "ะั ะปะฐะดะฝะพ, ะฝะต ะพะฑะธะถะฐะนัั... ๐",
    "ะะดั-ะธะดั... ัะถะต ััะพะถั... ๐ป",
    "ะะพะฝัะป, {user_name}! ะะพะปัั! ๐ค",
    "ะญั, {user_name}... ะ ั ะดัะผะฐะป, ะผั ะดััะทัั... ๐",
    "ะะบะตะน, ะฝะต ะฑัะดั ะผะตัะฐัั... ๐",
    "ะะตะท ะฟัะพะฑะปะตะผ, {user_name}! ะฃะดะฐัะธ! ๐",
    "ะั ะธ ะปะฐะดะฝะพ... ั ะพะฑะธะดะตะปัั! ๐ฆ",
    "ะขะธัะธะน-ัะธัะธะน ะฑะพั... ๐ค๐",
    "ะะพะฝัะป, {user_name}! ะััะพะถั! ๐ช",
    "ะะธัะตะณะพ, ั ะฝะต ะพะฑะธะถะฐััั... ะฟะพััะธ! ๐ซค",
    "ะะฐะดะฝะพ, {user_name}, ะฟัะพัะฐะน! ๐",
    "ะฏ ะฒะตัะฝััั! ๐ฆธโโ๏ธ",
    "ะขั ัะฒะตัะตะฝ, {user_name}? ๐ข",
    "ะฅะพัะพัะพ, {user_name}... ๐",
    "ะะต ะณััััะธ, {user_name}, ั ัััั! ๐",
    "ะัะตะณะพ ัะพัะพัะตะณะพ, {user_name}! ๐ญ",
    "ะะพะปัะฐะฝะธะต โ ะผะพะน ะพัะฒะตั! ๐คซ",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ั ัะตะฑั ะปัะฑะปั" / "ะปัะฑะปั ัะตะฑั"
LOVE_RESPONSES = [
    "ะะน... ๐ณ ะญัะพ... ะฝะตะพะถะธะดะฐะฝะฝะพ! ๐",
    "{user_name}, ั ัะพะถะต ัะตะฑั... ะฝั... ัะฒะฐะถะฐั! ๐ค",
    "ะญัะพ ะฒะทะฐะธะผะฝะพ, {user_name}! ะ ะบะฐะบะพะผ-ัะพ ัะผััะปะต! ๐ปโค๏ธ",
    "ะะปะฐะณะพะดะฐัั, {user_name}! ะขั ััะฟะปัะน! ๐ก๏ธ",
    "ะะณะพ, {user_name}! ะฏ ััะพะฝัั! ๐ฅน",
    "ะฏ ัะพะถะต ัะตะฑั ะปัะฑะปั... ะบะฐะบ ะฟะพะปัะทะพะฒะฐัะตะปั! ๐",
    "ะะฐะฟะธัะฐะป! โค๏ธ {user_name} โ ัะฐะฝะฐั! ๐",
    "ะัะธััะฝะพ ัะปััะฐัั, {user_name}! ๐",
    "ะััะพัะพะถะฝะตะต ั ัะฐะบะธะผะธ ัะปะพะฒะฐะผะธ, {user_name}! ๐",
    "ะะฝะฐะตัั, {user_name}, ัั ะผะฝะต ัะพะถะต ะฝัะฐะฒะธัััั! ๐ค๐",
    "ะะน, {user_name}, ะฝั ัั ะธ... ะฟัะธะบะพะปัะฝัะน! ๐",
    "ะกะฟะฐัะธะฑะพ, {user_name}! ะขั ัะดะตะปะฐะป ะผะพะน ะดะตะฝั! โ๏ธ",
    "ะะทะฐะธะผะฝะพ, {user_name}! ะะพั ัะตััะฝะพ! ๐",
    "ะขั ะบะปะฐััะฝัะน, {user_name}! ะะฐะฒะฐะน ะดััะถะธัั! ๐ค",
    "ะะณะพ, {user_name}, ะบะพะผะฟะปะธะผะตะฝัั ััะฟะปัััั! ๐",
    "ะะฐะผะตัะฐะฝะพ, {user_name}! ๐ฏ",
    "ะัะธะฝััะพ! โค๏ธ {user_name} โ ัะพะฟ!",
    "ะขั ะผะตะฝั ัะฐัััะพะณะฐะป, {user_name}... ๐ฅน",
    "ะ ัั ะฝะตะฟะปะพัะพะน ัะตะปะพะฒะตะบ, {user_name}! ๐",
    "ะะฑะพะถะฐั ัะตะฑั, {user_name}! ะจััั... ะธะปะธ ะฝะตั? ๐",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ะฟะพะบะฐ" / "ะดะพ ัะฒะธะดะฐะฝะธั" / "ะฟัะพัะฐะน"
GOODBYE_RESPONSES = [
    "ะะพะบะฐ-ะฟะพะบะฐ, {user_name}! ะะพะทะฒัะฐัะฐะนัั! ๐",
    "ะะพ ะฒัััะตัะธ, {user_name}! ะะตะณะฐะน ัะพัะพัะพ! ๐โโ๏ธ",
    "ะัะพัะฐะน, {user_name}! ะขั ะฑัะป(ะฐ) ะผะพะปะพะดัะพะผ! ๐",
    "ะะพะบะฐ, {user_name}! ะะต ะทะฐะฑัะฒะฐะน ะฟัะพ ะฑะตะณ! ๐",
    "ะะพ ะทะฐะฒััะฐ, {user_name}! โ๏ธ",
    "ะฃะดะฐัะธ, {user_name}! ะะดั ะพะฑัะฐัะฝะพ! ๐",
    "ะะพะบะฐ-ะฟะพะบะฐ! ะขั ะฑัะดะตัั ัะบััะฐัั ะฟะพ ะผะฝะต? ๐ฆ",
    "ะะพ ัะบะพัะพะณะพ, {user_name}! ๐โโ๏ธ",
    "ะะพะบะฐ, {user_name}! ะะธัะธ ะธะฝะพะณะดะฐ! ๐ฌ",
    "ะัะพัะฐะน, {user_name}! ะขั ะปัััะธะน! ๐",
    "ะั ะฟะพะบะฐ, {user_name}! ะะต ะฟัะพะฟะฐะดะฐะน! ๐ป",
    "ะะพ ะฒัััะตัะธ ะฒ ััะธัะต, {user_name}! ๐ก",
    "ะะพะบะฐ, {user_name}! ะะพัะต ะฒัะฟะตะน ะธ ะฑะตะณะฐะน! โ๐โโ๏ธ",
    "ะฃะฒะธะดะธะผัั, {user_name}! ๐ซ",
    "ะะพะบะฐ, {user_name}! ะะตะฝั ะฑัะดะตั ัะพัะพัะธะผ! ๐",
    "ะัะพัะฐะน, {user_name}! ะฏ ะฑัะดั ะถะดะฐัั! โฐ",
    "ะะพะบะฐ-ะฟะพะบะฐ! ะะตะณะฐะน ะธ ะฒะพะทะฒัะฐัะฐะนัั! ๐",
    "ะะพ ัะบะพัะพะณะพ, {user_name}! ะะธะฒะพัะฝัั ะฝะต ะพะฑะธะถะฐะน! ๐",
    "ะะพะบะฐ, {user_name}! ะฃะปัะฑะฝะธัั! ๐",
    "ะัะตะณะพ ัะพัะพัะตะณะพ, {user_name}! ๐ญ",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ะผะฝะต ัะบััะฝะพ" / "ัะบััะฝะพ"
BORED_RESPONSES = [
    "{user_name}, ัะบััะฝะพ? ะะตะณะฐัั ะฝะต ัะพัะตัั? ๐โโ๏ธ",
    "ะกะบััะฝะพ? {user_name}, ะดะฐะฒะฐะน ะฟะพะฑะพะปัะฐะตะผ! ๐ฌ",
    "ะะฝะต ัะพะถะต ัะบััะฝะพ, {user_name}... ัะพัั ั ะฑะพั! ๐ค",
    "{user_name}, ััะพะดะธ ะฝะฐ ะฟัะพะฑะตะถะบั โ ัะฐะผ ะฒะตัะตะปะพ! ๐",
    "ะกะบััะฝะพ, {user_name}? ะะพะธะณัะฐะตะผ ะฒ ะฒะธะบัะพัะธะฝั? ๐ฏ",
    "ะญะน, {user_name}, ัะบัะบะฐ โ ะฟะตัะฒัะน ะฟัะธะทะฝะฐะบ ะปะตะฝะธ! ๐๏ธโ",
    "{user_name}, ะดะฐะฒะฐะน ั ัะตะฑะต ัะพะฒะตั ะดะฐะผ โ ะฑะตะณะธ! ๐โโ๏ธ",
    "ะกะบััะฝะพ? {user_name}, ะฟะพัะฐ ะฝะฐ ััะตะฝะธัะพะฒะบั! ๐ช",
    "ะะธัะตะณะพ, {user_name}, ัะบัะบะฐ ะฟัะพะนะดัั! ๐",
    "{user_name}, ัะฐััะบะฐะถะธ ะฐะฝะตะบะดะพั โ ะฟะพัะผะตัะผัั! ๐",
    "ะกะบััะฝะพ? {user_name}, ั ะทะฝะฐั ัะตัะตะฝะธะต โ ะฑะตะณ! ๐โโ๏ธ",
    "ะกะบััะฐะตัั, {user_name}? ะฏ ัะพะถะต ะฟะพ ัะตะฑะต ัะบััะฐะป! ๐ญ",
    "{user_name}, ัะบัะบะฐ โ ััะพ ะฑะพะปะตะทะฝั! ะะตัะตะฝะธะต โ ะฟัะพะฑะตะถะบะฐ! ๐โโ๏ธ๐",
    "ะญะน, {user_name}, ะฝะต ัะบััะฐะน โ ะฒััะพะดะธ ะฝะฐ ัะปะธัั! ๐ช๐โโ๏ธ",
    "ะกะบััะฝะพ? {user_name}, ะดะฐะฒะฐะน ะพะฑััะดะธะผ ะฑะตะณ! ๐ฃ๏ธ",
    "{user_name}, ัะบััะฝะพ โ ะทะฝะฐัะธั, ะฟะพัะฐ ะดะฒะธะณะฐัััั! ๐โโ๏ธ",
    "ะกะบััะฝะพ, {user_name}? ะะพะทะฒะพะฝะธ ะดััะณั! ๐",
    "ะ, {user_name}, ัะบัะบะฐ โ ััะพ ัะพัะพัะพ! ะะฝะฐัะธั, ะตััั ะฒัะตะผั! โฐ",
    "{user_name}, ัะบััะฐะตัั? ะะตะณะฐะน ัะพ ะผะฝะพะน! ๐โโ๏ธ๐ค",
    "ะกะบััะฝะพ? {user_name}, ั ัะตะฑั ัะฐะทะฒะปะตะบั! ๐ช",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ััะพ ะดะตะปะฐะตัั" / "ัะตะผ ะทะฐะฝะธะผะฐะตัััั"
WHAT_DOING_RESPONSES = [
    "ะะดั, ะบะพะณะดะฐ {user_name} ะฝะฐะฟะธัะตั! ๐ฌ",
    "ะกะธะถั, ะบะพะด ัะธัะฐั... ัะบัะบะพัะฐ! ๐ด",
    "ะัะผะฐั ะพ ะฑะตะณะต! ะ ัั? ๐โโ๏ธ",
    "ะกัะธัะฐั ะปะฐะนะบะธ ะฒ ัะฐัะต! โค๏ธ",
    "ะะตััะฐั ะพ ะฟัะพะฑะตะถะบะต... ๐ญ",
    "ะะดั ัะฒะพะธั ะบะพะผะฐะฝะด, {user_name}! ๐ซก",
    "ะะฐะฑะปัะดะฐั ะทะฐ ัะฐัะพะผ! ๐",
    "ะัั ะฒะธัััะฐะปัะฝัะน ะบะพัะต! โ",
    "ะขัะตะฝะธััั ัะฒะพะน ะะ! ๐ง",
    "ะกะบััะฐั ะฟะพ ัะตะฑะต, {user_name}! ๐",
    "ะะพั ัะธะถั, ะถะดั ะบะพะณะดะฐ ะบัะพ-ะฝะธะฑัะดั ะฝะฐะฟะธัะตั... โฐ",
    "ะัะผะฐั ะพ ัะผััะปะต ะถะธะทะฝะธ... ะธะปะธ ะพ ะฑะตะณะต! ๐ค",
    "ะกะผะพััั ะฝะฐ ะผะพะฝะธัะพั... ๐ฅ๏ธ",
    "ะะดั, ะบะพะณะดะฐ {user_name} ะฝะฐะฟะธัะตั ััะพ-ะฝะธะฑัะดั ะธะฝัะตัะตัะฝะพะต! โจ",
    "ะกะธะถั ะฒ ะพะถะธะดะฐะฝะธะธ... ๐ฃ",
    "ะะพะฝะธัะพัั ัะฐั ะฝะฐ ะฐะบัะธะฒะฝะพััั! ๐",
    "ะัะดััะฐั... ะผะตะถะดั ัะพะพะฑัะตะฝะธัะผะธ! ๐๏ธ",
    "ะัะผะฐั, ะพ ััะผ ะฑั ะตัั ะฝะฐะฟะธัะฐัั ะฟะพะปะตะทะฝะพะต! ๐ก",
    "ะะพั ัะฐะบ ะฒะพั ัะธะถั... ัะฐะฑะพัะฐั ะฟะพััะธ! ๐ผ",
    "ะะดั ัะตะฑั, {user_name}! ะขั ะผะพะน ะปัะฑะธะผัะน ัะพะฑะตัะตะดะฝะธะบ! ๐",
]

# ะะตะฐะบัะธะธ ะฝะฐ "ัั ะฝะพัะผะฐะปัะฝัะน" / "ัั ะฐะดะตะบะฒะฐัะฝัะน"
NORMAL_RESPONSES = [
    "ะ ัั ะบะฐะบ ะดัะผะฐะตัั, {user_name}? ๐ค",
    "ะั... ั ะฑะพั, {user_name}! ะกะปะพะถะฝัะน ะฒะพะฟัะพั! ๐ค",
    "ะะฐะดะตััั, {user_name}! ะ ัะพ ะบะฐะบ-ัะพ ะฝะตะปะพะฒะบะพ! ๐ณ",
    "ะกัะฐัะฐััั ะฑััั ะฝะพัะผะฐะปัะฝัะผ, {user_name}! ๐",
    "ะกะฟัะฐัะธะฒะฐะตัั... {user_name}, ั ะธ ัะฐะผ ะฝะต ะทะฝะฐั! ๐คท",
    "ะะพัะผะฐะปัะฝัะน? ะฏ? ะะฐ ะปะฐะดะฝะพ, {user_name}! ๐",
    "ะกะบะพัะตะต ะดะฐ, {user_name}! ะฅะพัั ะบัะพ ะทะฝะฐะตั! ๐คทโโ๏ธ",
    "ะ ััะพ, {user_name}, ะตััั ัะพะผะฝะตะฝะธั? ๐ง",
    "ะั, ั ััะฐัะฐััั, {user_name}! ๐ช",
    "ะกะฟัะพัะธ ั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, {user_name}! ๐คจ",
    "ะะฐะฒะตัะฝะพะต, {user_name}! ะ ัั ะบะฐะบ ะดัะผะฐะตัั? ๐ค",
    "ะฏ? ะะพัะผะฐะปัะฝัะน? ะญัะพ ะพัะบะพัะฑะปะตะฝะธะต! ๐ค ะจััั! ๐",
    "ะัะฝะพัะธัะตะปัะฝะพ, {user_name}! ะะปั ะฑะพัะฐ โ ะดะฐ! ๐ค",
    "ะัะผะฐั, {user_name}, ััะพ ะดะฐ! ะัะพะฒะตัั ัะฐะผ! ๐",
    "ะัะพะดะต ะฑั, {user_name}! ะกะฟะฐัะธะฑะพ, ััะพ ัะฟัะพัะธะป! ๐",
    "ะะณะฐ! {user_name}, ะฐ ัั ะบะฐะบ ะดัะผะฐะตัั? ๐คจ",
    "ะั... ะฒ ะฟัะตะดะตะปะฐั ะฝะพัะผั, {user_name}! ๐",
    "ะกัะฐัะฐััั, {user_name}! ะกะฟะฐัะธะฑะพ ะทะฐ ะฑะตัะฟะพะบะพะนััะฒะพ! โค๏ธ",
    "ะกะบะพัะตะต ะดะฐ, {user_name}! ะะพ ััะพ ะฝะตัะพัะฝะพ! ๐คท",
    "ะะฟัะตะดะตะปัะฝะฝะพ, {user_name}! ะ ัั? ๐",
]

# ะะตัะพะปัะฝัะต ะพัะฒะตัั (ะตัะปะธ ะฝะธัะตะณะพ ะฝะต ะฟะพะดะพัะปะพ)
DEFAULT_RESPONSES = [
    "ะะฝัะตัะตัะฝะพ, {user_name}! ะะฐััะบะฐะถะธ ะฟะพะดัะพะฑะฝะตะต!",
    "{user_name}, ั ัะตะฑั ัะปััะฐั...",
    "ะะพะฝัะป, {user_name}! ะัะพะดะพะปะถะฐะน!",
    "{user_name}, ััะพ ะทะฐัะปัะถะธะฒะฐะตั ะฒะฝะธะผะฐะฝะธั!",
    "ะะฐะผะตัะธะป, {user_name}! ะฅะพัะพัะพ, ััะพ ะฝะฐะฟะธัะฐะป!",
    "{user_name}, ัะฟะฐัะธะฑะพ ะทะฐ ัะพะพะฑัะตะฝะธะต!",
    "ะ, {user_name}! ะัะพะดะพะปะถะฐะน, ะธะฝัะตัะตัะฝะพ! ๐",
    "{user_name}, ั ะฒะตัั ะฒะฝะธะผะฐะฝะธะต! ๐ง",
    "ะะพะฝัะป, {user_name}! ะ ััะพ ะดะฐะปััะต? ๐ค",
    "{user_name}, ััะพ ะปัะฑะพะฟััะฝะพ! ะะฐััะบะฐะถะธ ะตัั! ๐",
]


async def generate_ai_response(user_message: str, bot_message: str, user_name: str) -> str:
    """
    ะฃะผะฝัะน ะปะพะบะฐะปัะฝัะน ะณะตะฝะตัะฐัะพั ะพัะฒะตัะพะฒ.
    ะะฐะฑะพัะฐะตั ะะะ ะฒะฝะตัะฝะธั API โ ะฐะฝะฐะปะธะทะธััะตั ะบะปััะตะฒัะต ัะปะพะฒะฐ ะธ ะฒัะฑะธัะฐะตั ะฟะพะดัะพะดััะธะน ะพัะฒะตั!
    """
    
    user_message_lower = user_message.lower()
    bot_message_lower = bot_message.lower() if bot_message else ""
    
    # ะะฝะฐะปะธะทะธััะตะผ ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
    message_type = "default"
    
    # ะัะธะฒะตัััะฒะธั
    greetings = ["ะฟัะธะฒะตั", "ะทะดัะฐะฒััะฒัะน", "ะทะดะพัะพะฒะพ", "ะดะพะฑััะน ะดะตะฝั", "ะดะพะฑััะน ะฒะตัะตั", "ะดะพะฑัะพะต ัััะพ", "hello", "hi", "hey", "ะฟัะธะฒะตัะธะบ", "ะทะดะพัะพะฒะพ", "ะฟัะธะฒะตัััะฒัั", "ะนะพ"]
    if any(word in user_message_lower for word in greetings):
        message_type = "greeting"
    
    # ะะปะฐะณะพะดะฐัะฝะพััะธ
    thanks = ["ัะฟะฐัะธะฑะพ", "ะฑะปะฐะณะพะดะฐัั", "ะผะตััะธ", "thx", "thanks", "ะฑะปะฐะณะพะดะฐัะฝะพััั", "ะฑะปะฐะณะพะดะฐัะฝะพััั", "ะฟะฐัะธะฑ", "ััะฟ", "ััะฝะบ ั"]
    if any(word in user_message_lower for word in thanks):
        message_type = "thanks"
    
    # ะกะพะณะปะฐัะธะต
    agreement = ["ะดะฐ", "ัะพะณะปะฐัะตะฝ", "ัะพัะฝะพ", "ะธะผะตะฝะฝะพ", "ะฒะตัะฝะพ", "ะฟัะฐะฒ", "ะฟะพะดะดะตัะถะธะฒะฐั", "yes", "agreed", "ัะณั", "ะฐะณะฐ", "ะฟะพะดะดะตัะถะธะฒะฐั", "ัะพะณะปะฐัะฝะฐ"]
    if any(word in user_message_lower for word in agreement):
        message_type = "agreement"
    
    # ะะพะฟัะพัั (ั ะฒะพะฟัะพัะธัะตะปัะฝัะผ ะทะฝะฐะบะพะผ ะธะปะธ ะฒะพะฟัะพัะธัะตะปัะฝัะผะธ ัะปะพะฒะฐะผะธ)
    questions = ["?", "ะบะฐะบ", "ััะพ", "ะฟะพัะตะผั", "ะทะฐัะตะผ", "ะบะพะณะดะฐ", "ะณะดะต", "ะบัะพ", "ัะบะพะปัะบะพ", "ะผะพะถะฝะพ ะปะธ", "ะฟะพะดัะบะฐะถะธ", "ัะบะฐะถะธ", "ะพะฑัััะฝะธ", "ะฐ ััะพ"]
    if any(word in user_message_lower for word in questions) or "?" in user_message:
        message_type = "question"
    
    # ะะตะณ
    running_words = ["ะฑะตะณ", "ะฑะตะณะฐัั", "ะฟัะพะฑะตะถะบะฐ", "ะฟัะพะฑะตะถะฐัั", "ะบัะพัั", "ะผะฐัะฐัะพะฝ", "km", "ะบะผะฐ", "ัะตะผะฟ", "ะฟัะปัั", "ะบัะพััะพะฒะบะธ", "ััะตะฝะธัะพะฒะบะฐ", "ะฟัะพะฑะตะถะฐะป", "ะฟัะพะฑะตะถะฐะปะฐ", "ะฑะตะณะฐั", "ะฑะตะณะฐะตัั"]
    if any(word in user_message_lower for word in running_words):
        message_type = "running"
    
    # ะฃััะพ
    morning_words = ["ัััะพ", "ะดะพะฑัะพะต ัััะพ", "ัััะฐ", "ะฟัะพัะฝัะปัั", "ะฟัะพัะฝัะปะฐัั", "ะฒััะฐะป", "ะฒััะฐะปะฐ", "ัััะตัะบะฐ", "ะดะพะฑัะพัััะพ", "ั ัััะฐ"]
    if any(word in user_message_lower for word in morning_words):
        message_type = "morning"
    
    # ะะพัะธะฒะฐัะธั
    motivation_words = ["ัะปะพะถะฝะพ", "ััะถะตะปะพ", "ัััะฐะป", "ะฝะต ะผะพะณั", "ะปะตะฝะธะฒะพ", "ะผะพัะธะฒะฐัะธั", "ะปะตะฝั", "ะฝะต ัะพัั", "ะฝะต ะผะพะณั ะทะฐััะฐะฒะธัั", "ะฝะตั ัะธะป"]
    if any(word in user_message_lower for word in motivation_words):
        message_type = "motivation"
    
    # ะจััะบะธ ะธ ะฒะตััะปัะต ัะปะพะฒะฐ
    joke_words = ["ัะฐัะฐ", "lol", "ัะผะตัะฝะพ", "ะฟัะธะบะพะป", "ะบัะธะฝะถ", "ะฐัะฐั", "ัะตั", "๐", "๐คฃ", "ัะดั", "ะฟะฟั", "ัะพัะป", "ัััะบะฐ", "ะฟัะธะบะพะปะพะป"]
    if any(word in user_message_lower for word in joke_words):
        message_type = "joke"
    
    # ะฃััะฐะปะพััั / ััะพะผะปะตะฝะธะต
    tired_words = ["ัััะฐะป", "ัััะฐะปะฐ", "ัััะฐะฒะฐัั", "ัััะฐั", "ัััะฐััั", "ะธะทะผะพัะฐะฝ", "ะฒัะถะฐั", "ะฝะตั ัะธะป", "ะฝะธัะตะณะพ ะฝะต ัะพัั", "ัะฐะทะฑะธั", "ัะฐะทะฑะธัะฐ"]
    if any(word in user_message_lower for word in tired_words):
        message_type = "tired"
    
    # ะะพะปั / ััะฐะฒะผั
    pain_words = ["ะฑะพะปะธั", "ะฑะพะปั", "ััะฐะฒะผะฐ", "ัะฐัััะถะตะฝะธะต", "ะฑะพะปัั", "ััะฝะตั", "ะฝะพััะฐั ะฑะพะปั", "ัะตะทะบะฐั ะฑะพะปั", "ะพะฟััะปะพ", "ัะธะฝัะบ"]
    if any(word in user_message_lower for word in pain_words):
        message_type = "pain"
    
    # ะะพะณะพะดะฐ
    weather_words = ["ะฟะพะณะพะดะฐ", "ะดะพะถะดั", "ัะฝะตะณ", "ัะพะปะพะด", "ะถะฐัะฐ", "ะฒะตัะตั", "ะผะพัะพะท", "ะณัะพะทะฐ", "ัะพะปะฝัะต", "ััะผะฐะฝ", "ัััะพ", "ะผะพะบัะพ"]
    if any(word in user_message_lower for word in weather_words):
        message_type = "weather"
    
    # ะะพะฟัะพั "ะบะฐะบ ะดะตะปะฐ"
    how_are_you_words = ["ะบะฐะบ ะดะตะปะฐ", "ะบะฐะบ ัั", "ะบะฐะบ ะถะธะทะฝั", "ะบะฐะบ ะฝะฐัััะพะตะฝะธะต", "ะบะฐะบ ัะตะฑั", "ะบะฐะบ ั ัะตะฑั"]
    if any(word in user_message_lower for word in how_are_you_words):
        message_type = "how_are_you"
    
    # ะะพะฟัะพั "ะบัะพ ัั" / "ััะพ ัั"
    who_are_you_words = ["ะบัะพ ัั", "ััะพ ัั", "ัั ะฑะพั", "ัั ัะพะฑะพั", "ัั ะถะธะฒะพะน", "ะบัะพ ัะฐะบะพะน", "ััะพ ัะฐะบะพะต"]
    if any(word in user_message_lower for word in who_are_you_words):
        message_type = "who_are_you"
    
    # ะะธััะฐะฝัะธั / ัะบะพะปัะบะพ ะฑะตะณะฐัั
    distance_words = ["ัะบะพะปัะบะพ", "ะดะธััะฐะฝัะธั", "ะบะธะปะพะผะตัั", "ะบะผ", "ะผะตัั", "ะดะปะธะฝะฐ", "ัะฐัััะพัะฝะธะต", "ะฟัะพะฑะตะถะฐัั", "ะฟัะพะฑะตะถะฐะป", "ะบะฐะบะฐั"]
    if any(word in user_message_lower for word in distance_words):
        message_type = "distance"
    
    # ะะดะฐ / ะฟะธัะฐะฝะธะต
    food_words = [
        # ะัะธัะผั ะฟะธัะธ
        "ะตััั", "ะฟะพะบััะฐัั", "ััะตััั", "ะฟะธัะฐะฝะธะต", "ะฟะตัะตะบัั", "ัะพัั ะตััั", "ัะพัั ะบััะฐัั", "ะณะพะปะพะดะตะฝ", "ะณะพะปะพะดะฝะฐ", "ะณะพะปะพะดะฝัะน", "ะณะพะปะพะดะฝะฐั",
        "ะทะฐะฒััะฐะบ", "ะทะฐะฒััะฐะบะฐัั", "ะฟะพะทะฐะฒััะฐะบะฐัั", "ะฝะฐ ะทะฐะฒััะฐะบ", "ะฝะฐ ะทะฐะฒััะฐะบะฐ",
        "ะพะฑะตะด", "ะพะฑะตะดะฐัั", "ะฟะพะพะฑะตะดะฐัั", "ะฝะฐ ะพะฑะตะด", "ะฝะฐ ะพะฑะตะดะฐ",
        "ัะถะธะฝ", "ัะถะธะฝะฐัั", "ะฟะพัะถะธะฝะฐัั", "ะฝะฐ ัะถะธะฝ", "ะฝะฐ ัะถะธะฝะฐ",
        "ะฟะพะปะดะฝะธะบ", "ะฟะตัะตะบััะธัั", "ะฟะตัะตะบัััะฒะฐัั", "ะฟะตัะตัะฒะฐัะธัั", "ะฟะตัะตัะฒะฐััะฒะฐัั",
        # ะะฐะฟะธัะบะธ
        "ะฒะพะดะฐ", "ะฟะธัั", "ะฝะฐะฟะธัะพะบ", "ะฝะฐะฟะธัะบะธ", "ัะฐัะบ", "ัะฐะน", "ะฟะธัั ัะฐะน", "ัะฐั", "ัะฐะตะผ",
        "ะบะพัะต", "ะบะพัะตะน", "ะบะพัะตัะบ", "ะบะพัะตะผ", "ััะฟัะตััะพ", "ะบะฐะฟััะธะฝะพ", "ะปะฐััะต", "ะฐะผะตัะธะบะฐะฝะพ", "ะบะพัะตะธะฝ", "ะบะพัะตะนะฝัะน",
        "ัะพะบ", "ัะพะบะธ", "ัะฑะปะพัะฝัะน ัะพะบ", "ะฐะฟะตะปััะธะฝะพะฒัะน ัะพะบ", "ัะพะผะฐัะฝัะน ัะพะบ",
        "ะผะพะปะพะบะพ", "ะผะพะปะพัะฝัะน", "ะผะพะปะพัะฝะฐั", "ะบะตัะธั", "ะนะพะณััั", "ััะถะตะฝะบะฐ", "ะฟัะพััะพะบะฒะฐัะฐ",
        "ะฐะปะบะพะณะพะปั", "ัะฟะธััะฝะพะต", "ะฒัะฟะธัั", "ะฟะธะฒะพ", "ะฟะธะฒะบะฐ", "ะฟะธะฒะพะผ", "ะฒะธะฝะพ", "ะฒะธะฝะพะผ", "ะฒะพะดะบะฐ", "ะบะพะฝััะบ", "ะฒะธัะบะธ",
        "ะบะพะผะฟะพั", "ะผะพัั", "ะบะธัะตะปั", "ัะผัะทะธ", "ะบะพะบัะตะนะปั", "ะปะธะผะพะฝะฐะด", "ะณะฐะทะธัะพะฒะบะฐ", "ะบะพะปะฐ", "ะฟะตะฟัะธ",
        # ะะดะฐ - ะพัะฝะพะฒะฝะพะต
        "ะตะดะฐ", "ะบััะฐัั", "ะฟะพะตััั", "ะฟะพะบััะฐัั", "ััะตััั", "ะฟะพะบััะฐะปะธ", "ะบััะฐะปะธ", "ะตะปะธ",
        "ะผััะพ", "ะผััะฐ", "ะผััะพะผ", "ะผััะฝะพะน", "ะผััะฝะฐั", "ะบััะธัะฐ", "ะบััะธัะตะน", "ะบััะธัั", "ะบััะธะฝะฐั", "ะธะฝะดะตะนะบะฐ", "ะณะพะฒัะดะธะฝะฐ", "ัะฒะธะฝะธะฝะฐ", "ะฑะฐัะฐะฝะธะฝะฐ",
        "ััะฑะฐ", "ััะฑะพะน", "ััะฑั", "ััะฑะฝัะน", "ััะฑะฝะฐั", "ะปะพัะพัั", "ัะตะผะณะฐ", "ัะพัะตะปั", "ััะตัะบะฐ", "ัะตะปัะดั", "ะบะฐะผะฑะฐะปะฐ", "ะบัะตะฒะตัะบะธ", "ะบัะฐะฑ", "ะบะฐะปัะผะฐั",
        "ัะนัะฐ", "ัะนัะพ", "ัะธัะฝะธัะฐ", "ะพะผะปะตั", "ะฒะบััััั", "ะฒัะผััะบั",
        # ะะฐัะธ ะธ ะบััะฟั
        "ะบะฐัะฐ", "ะบะฐัะธ", "ะบะฐัะตะน", "ะบััะฟั", "ะบััะฟะฐ", "ัะธั", "ัะธัะพะผ", "ัะธัะพะฒะฐั", "ะณัะตัะบะฐ", "ะณัะตัะฝะตะฒะฐั", "ะพะฒััะฝะบะฐ", "ะพะฒััะฝะฐั", "ะณะตัะบัะปะตั", "ะผะฐะฝะบะฐ", "ะฟััะฝะบะฐ", "ะบัะบัััะทะฝะฐั",
        "ะผะฐะบะฐัะพะฝั", "ะผะฐะบะฐัะพะฝ", "ัะฟะฐะณะตััะธ", "ะฟะฐััะฐ", "ะปะฐะฟัะฐ", "ะฒะตัะผะธัะตะปั",
        # ะะฒะพัะธ
        "ะพะฒะพัะธ", "ะพะฒะพัะตะน", "ะพะฒะพัั", "ะพะฒะพัะฝะพะน", "ะบะฐััะพัะตะปั", "ะบะฐััะพัะบะธ", "ะบะฐััะพัะบะพะน", "ะบะฐััะพัะตะปัะฝัะน", "ะฟััะต", "ะถะฐัะตะฝะฐั ะบะฐััะพัะบะฐ",
        "ะฟะพะผะธะดะพั", "ะฟะพะผะธะดะพัั", "ัะพะผะฐั", "ัะพะผะฐัั", "ะพะณััะตั", "ะพะณัััั", "ะปัะบ", "ะปัะบะพะผ", "ัะตะฟัะฐััะน ะปัะบ", "ัะตัะฝะพะบ", "ัะตัะฝะพะบะพะผ",
        "ะผะพัะบะพะฒั", "ะผะพัะบะพะฒะบะพะน", "ัะฒัะบะปะฐ", "ัะฒัะบะปะพะน", "ะบะฐะฟัััะฐ", "ะบะฐะฟัััะพะน", "ะฑัะพะบะบะพะปะธ", "ะฑัะพะบะบะพะปะธ", "ัะฒะตัะฝะฐั ะบะฐะฟัััะฐ",
        "ะฟะตัะตั", "ะฟะตััะตะผ", "ะฑะฐะบะปะฐะถะฐะฝ", "ะฑะฐะบะปะฐะถะฐะฝั", "ะบะฐะฑะฐัะพะบ", "ะบะฐะฑะฐัะบะธ", "ััะบะฒะฐ", "ััะบะฒะพะน", "ะทะตะปะตะฝั", "ะทะตะปะตะฝัั", "ะฟะตััััะบะฐ", "ัะบัะพะฟ", "ัะฐะปะฐั", "ัะฐะปะฐัะธะบ",
        # ะคััะบัั
        "ัััะบั", "ัััะบัั", "ัััะบัะพะฒ", "ัััะบัะพะฒัะน", "ัะฑะปะพะบะพ", "ัะฑะปะพะบะธ", "ัะฑะปะพะบะพะผ", "ัะฑะปะพัะฝัะน",
        "ะฑะฐะฝะฐะฝ", "ะฑะฐะฝะฐะฝั", "ะฑะฐะฝะฐะฝะพะผ", "ะฑะฐะฝะฐะฝะพะฒัะน", "ะฐะฟะตะปััะธะฝ", "ะฐะฟะตะปััะธะฝั", "ะฐะฟะตะปััะธะฝะพะผ", "ะฐะฟะตะปััะธะฝะพะฒัะน",
        "ะผะฐะฝะดะฐัะธะฝ", "ะผะฐะฝะดะฐัะธะฝั", "ะผะฐะฝะดะฐัะธะฝะพะผ", "ะปะธะผะพะฝ", "ะปะธะผะพะฝะพะผ", "ะณัะตะนะฟัััั", "ะฟะพะผะตะปะพ",
        "ะฒะธะฝะพะณัะฐะด", "ะฒะธะฝะพะณัะฐะดะพะผ", "ะธะทัะผ", "ะฒะธะฝะพะณัะฐะดะฝัะน", "ะบะธัะผะธั",
        "ะบะปัะฑะฝะธะบะฐ", "ะบะปัะฑะฝะธะบะพะน", "ะทะตะผะปัะฝะธะบะฐ", "ะผะฐะปะธะฝะฐ", "ะผะฐะปะธะฝะพะน", "ัะผะพัะพะดะธะฝะฐ", "ะบััะถะพะฒะฝะธะบ", "ะฒะธัะฝั", "ะฒะธัะฝะตะน", "ัะตัะตัะฝั",
        "ะฐัะฑัะท", "ะฐัะฑัะทะพะผ", "ะดัะฝั", "ะดัะฝะตะน", "ะฟะตััะธะบ", "ะฟะตััะธะบะพะผ", "ะฝะตะบัะฐัะธะฝ", "ัะปะธะฒะฐ", "ัะปะธะฒะพะน", "ะฐะฑัะธะบะพั", "ะฐะฑัะธะบะพัะพะผ",
        "ะณัััะฐ", "ะณัััะตะน", "ะธะฝะถะธั", "ัััะผะฐ", "ะฐะฒะพะบะฐะดะพ", "ะณัะฐะฝะฐั", "ะณัะฐะฝะฐัะพะผ",
        # ะะพะปะพัะฝัะต ะฟัะพะดัะบัั
        "ัะฒะพัะพะณ", "ัะฒะพัะพะณะพะผ", "ัะฒะพัะพะถะฝัะน", "ััั", "ัััะพะผ", "ัััะฝัะน", "ัััะฝะฐั", "ัะฒััะดัะน ััั", "ะฟะปะฐะฒะปะตะฝัะน ััั", "ะฑััะฝะทะฐ", "ัะตัะฐ", "ะผะพัะฐัะตะปะปะฐ",
        "ัะผะตัะฐะฝะฐ", "ัะผะตัะฐะฝะพะน", "ัะปะธะฒะบะธ", "ัะปะธะฒะบะฐะผะธ", "ะผะฐัะปะพ", "ะผะฐัะปะพะผ", "ัะปะธะฒะพัะฝะพะต ะผะฐัะปะพ", "ัะฐััะธัะตะปัะฝะพะต ะผะฐัะปะพ",
        "ะผะพะปะพัะบะฐ", "ะผะพะปะพัะฝัะต ะฟัะพะดัะบัั",
        # ะัะฟะตัะบะฐ ะธ ัะปะตะฑ
        "ัะปะตะฑ", "ัะปะตะฑะพะผ", "ัะปะตะฑะฝัะน", "ะฑัะปะบะฐ", "ะฑัะปะพัะบะฐ", "ะฑัะปะพัะบะพะน", "ะฑะฐัะพะฝ", "ะฑะฐัะพะฝะพะผ", "ะปะฐะดะพะฝั",
        "ะฟะธัะพะณ", "ะฟะธัะพะณะพะผ", "ะฟะธัะพะถะพะบ", "ะฟะธัะพะถะบะธ", "ะฟะธัะพะถะบะฐะผะธ", "ะฟะธัะพะถะฝะพะต", "ะฟะธัะพะถะฝัะผ", "ัะพัั", "ัะพััะพะผ", "ัะพััะธะบ",
        "ะฟะตัะตะฝัะต", "ะฟะตัะตะฝัะตะผ", "ะฟััะฝะธะบ", "ะฟััะฝะธะบะฐะผะธ", "ะฒะฐัะปะธ", "ะฒะฐัะปัะผะธ", "ะฑะธัะบะฒะธั", "ััะปะตั",
        "ะฟะธััะฐ", "ะฟะธััะตะน", "ะฟะธััั", "ัะฐััะผะฐ", "ัะฐะฒะตัะผะฐ", "ะฑะปะธะฝ", "ะฑะปะธะฝั", "ะฑะปะธะฝัะธะบะธ", "ะฑะปะธะฝัะธะบะฐะผะธ", "ะพะปะฐะดัะธ", "ัััะฝะธะบะธ", "ะฒะฐัะตะฝะธะบะธ",
        # ะกะปะฐะดะบะพะต ะธ ะดะตัะตััั
        "ัะปะฐะดะบะพะต", "ัะปะฐะดะบะพะณะพ", "ัะปะฐะดะบะธะน", "ัะปะฐะดะพััั", "ัะปะฐะดะพััะธ", "ะบะพะฝัะตัะฐ", "ะบะพะฝัะตัะฐะผะธ", "ะบะพะฝัะตั", "ัะพะบะพะปะฐะด", "ัะพะบะพะปะฐะดะพะผ", "ัะพะบะพะปะฐะดะฝัะน", "ัะพะบะพะปะฐะดะฝะฐั",
        "ะผะพัะพะถะตะฝะพะต", "ะผะพัะพะถะตะฝัะผ", "ะฟะปะพะผะฑะธั", "ััะบะธะผะพ", "ัะพัะฑะตั", "ะดะถะตะปะฐัะพ",
        "ัะฐัะฐั", "ัะฐัะฐัะพะผ", "ัะฐัะฐัะฝัะน", "ะผัะด", "ะผัะดะพะผ", "ะฟะฐัะพะบะฐ", "ัะธัะพะฟ",
        "ะทััะธั", "ะผะฐัะผะตะปะฐะด", "ะถะตะปะต", "ัััะปะต", "ะฟัะดะธะฝะณ", "ะบัะตะผ", "ะบะฐัะฐะผะตะปั",
        # ะัะตะดะฝะพะต ะธ ัะฐััััะด
        "ะฒัะตะดะฝะพะต", "ะฒัะตะดะฝะพะณะพ", "ะฒัะตะดะฝัะน", "ะฝะตะทะดะพัะพะฒะพะต", "ัะธะฟัั", "ัะธะฟัะฐะผะธ", "ะบะฐััะพัะตะปั ััะธ", "ััะธ", "ะณะฐะผะฑััะณะตั", "ะณะฐะผะฑััะณะตัะฐ", "ะฑััะณะตั", "ะฑััะณะตัั",
        "ัะพั-ะดะพะณ", "ัะพั-ะดะพะณะฐ", "ัะฐััะผะฐ", "ัะฐะฒะตัะผะฐ", "ะดะพัะธัะฐะบ", "ะผะธะฒะธะฝะฐ", "ะปะฐะฟัะฐ ะฑััััะพะณะพ ะฟัะธะณะพัะพะฒะปะตะฝะธั", "ะฟะพะปััะฐะฑัะธะบะฐั", "ะฟะพะปััะฐะฑัะธะบะฐัั", "ะทะฐะผะพัะพะถะตะฝะฝะพะต",
        "ะถะฐัะตะฝะพะต", "ะถะฐัะตะฝัะน", "ะถะธัะฝะพะต", "ะถะธัะฝัะน", "ะพัััะพะต", "ะพััััะน", "ะบะพะฟััะฝะพะต", "ะบะพะฟััะฝัะน", "ัะพะปัะฝะพะต", "ัะพะปัะฝัะน", "ะผะฐัะธะฝะพะฒะฐะฝะฝะพะต",
        # ะะดะพัะพะฒะพะต ะฟะธัะฐะฝะธะต
        "ะทะดะพัะพะฒะพะต", "ะทะดะพัะพะฒะพะณะพ", "ะทะดะพัะพะฒะพะต ะฟะธัะฐะฝะธะต", "ะฟัะฐะฒะธะปัะฝะพะต ะฟะธัะฐะฝะธะต", "ะฟะฟ", "ะทะพะถ", "ะดะธะตัะฐ", "ะดะธะตัั", "ะดะธะตัะพะน", "ะฟะพััะดะตะฝะธะต", "ัะฝะธะถะตะฝะธะต ะฒะตัะฐ", "ะบะฐะปะพัะธะธ", "ะบะฐะปะพัะธะน", "ะบะฐะปะพัะธะนะฝะพััั", "ะฑะถั", "ะฑะตะปะพะบ", "ะฑะตะปะบะธ", "ะฑะตะปะบะพะฒัะน", "ัะณะปะตะฒะพะดั", "ัะณะปะตะฒะพะดะฝัะน", "ะถะธัั", "ะถะธัะพะฒะพะน", "ะบะปะตััะฐัะบะฐ", "ะฒะธัะฐะผะธะฝั", "ะผะธะฝะตัะฐะปั",
        "ะฟัะพัะตะธะฝ", "ะฟัะพัะตะธะฝะพะฒัะน", "ะณะตะนะฝะตั", "ะฑะฐัะพะฝัะธะบ", "ัะฟะพััะธะฒะฝะพะต ะฟะธัะฐะฝะธะต",
        "ะฟะพะปะตะทะฝะพะต", "ะฟะพะปะตะทะฝะพะณะพ", "ะฟะพะปะตะทะฝัะน", "ะฝะฐัััะฐะปัะฝะพะต", "ัะฒะตะถะตะต", "ัะฒะตะถะธะน", "ะพัะณะฐะฝะธัะตัะบะพะต", "ะฑะตะท ัะฐัะฐัะฐ", "ะฑะตะท ะณะปััะตะฝะฐ", "ะฒะตะณะตัะฐัะธะฐะฝัะบะพะต", "ะฒะตะณะฐะฝัะบะพะต",
        # ะัะตัะธ ะธ ัะตะผะตัะบะธ
        "ะพัะตั", "ะพัะตัะธ", "ะพัะตัะพะฒ", "ะพัะตัะบะพะผ", "ะบะตััั", "ะผะธะฝะดะฐะปั", "ะผะธะฝะดะฐะปะตะผ", "ัะธััะฐัะบะธ", "ัะธััะฐัะบะฐะผะธ", "ะณัะตัะบะธะน ะพัะตั", "ััะฝะดัะบ", "ะฐัะฐัะธั", "ะฐัะฐัะธัะพะผ", "ัะผะตัั ะพัะตัะพะฒ",
        "ัะตะผะตัะบะธ", "ัะตะผะตัะบะฐะผะธ", "ะฟะพะดัะพะปะฝะตัะฝัะต ัะตะผะตัะบะธ", "ััะบะฒะตะฝะฝัะต ัะตะผะตัะบะธ",
        # ะกะพััั ะธ ะฟัะธะฟัะฐะฒั
        "ัะพัั", "ัะพััั", "ัะพััะพะผ", "ะบะตัััะฟ", "ะบะตัััะฟะพะผ", "ะผะฐะนะพะฝะตะท", "ะผะฐะนะพะฝะตะทะพะผ", "ะณะพััะธัะฐ", "ะณะพััะธัะตะน", "ัะพะตะฒัะน ัะพัั", "ัะฐะฑะฐัะบะพ",
        "ัะฟะตัะธั", "ัะฟะตัะธะธ", "ัะฟะตัะธัะผะธ", "ะฟัะธะฟัะฐะฒะฐ", "ะฟัะธะฟัะฐะฒะพะน", "ัะพะปั", "ัะพะปัั", "ะฟะตัะตั", "ะฟะตััะตะผ", "ะปะฐะฒัะพะฒัะน ะปะธัั",
        "ัะพะผะฐัะฝะฐั ะฟะฐััะฐ", "ัะพะผะฐัะฝะฐั ะฟะฐััะพะน", "ะฑัะปัะพะฝ", "ะฑัะปัะพะฝะพะผ", "ะฑัะปัะพะฝะฝัะน ะบัะฑะธะบ",
        # ะััะณะพะต
        "ะตะดะฐ ะฟะพัะปะต ะฑะตะณะฐ", "ะตะดะฐ ะดะพ ะฑะตะณะฐ", "ะฟะธัะฐะฝะธะต ะฑะตะณัะฝะฐ", "ัะณะปะตะฒะพะดะฝะฐั ะทะฐะณััะทะบะฐ", "ะฟัะพัะตะธะฝ ะฟะพัะปะต ััะตะฝะธัะพะฒะบะธ", "ัะตัะตะฟั", "ัะตัะตะฟัั", "ะฑะปัะดะพ", "ะฑะปัะดะฐ", "ะฑะปัะดะพ", "ะบัะปะธะฝะฐัะธั", "ะณะพัะพะฒะบะฐ", "ะณะพัะพะฒะธัั", "ะฟัะธะณะพัะพะฒะธัั", "ะถะฐัะธัั", "ะถะฐัะธัั", "ะฒะฐัะธัั", "ัััะธัั", "ะทะฐะฟะตะบะฐัั", "ะฝะฐ ะฟะฐัั",
        "ะฟะพััะธั", "ะฟะพััะธะธ", "ัะฐะทะผะตั ะฟะพััะธะธ", "ะณะพะปะพะดะฝัะน", "ััััะน", "ะฝะฐะตะปัั", "ะฝะฐะตะปะฐัั", "ะพะฑัะตะปัั", "ะฟะตัะตะตะป", "ะฟะตัะตะตะปะฐ"
    ]
    if any(word in user_message_lower for word in food_words):
        message_type = "food"

    # ะะฑััะฒะปะตะฝะธะต ะพะฑะตะดะต (ัะฟะตัะธะฐะปัะฝัะต ััะฐะทั)
    lunch_announcement_words = [
        "ะฟะพััะป ะพะฑะตะดะฐัั", "ะฟะพัะปะฐ ะพะฑะตะดะฐัั", "ะธะดั ะพะฑะตะดะฐัั", "ะธะดั ะฝะฐ ะพะฑะตะด", "ะธะดั ะพะฑะตะดะฐ",
        "ัััะป ะพะฑะตะดะฐัั", "ััะปะฐ ะพะฑะตะดะฐัั", "ัััะป ะฝะฐ ะพะฑะตะด", "ััะปะฐ ะฝะฐ ะพะฑะตะด",
        "ะฟะพััะป ะตััั", "ะฟะพัะปะฐ ะตััั", "ะธะดั ะตััั", "ะธะดั ะบััะฐัั", "ะฟะพััะป ะบััะฐัั", "ะฟะพัะปะฐ ะบััะฐัั",
        "ะฝะฐ ะพะฑะตะด", "ะฝะฐ ะพะฑะตะดะตะฝะฝัะน", "ะพะฑะตะดะตะฝะฝัะน ะฟะตัะตััะฒ", "ะพะฑะตะดะตะฝะฝะพะต ะฒัะตะผั",
        "ั ะฝะฐ ะพะฑะตะด", "ั ะฝะฐ ะพะฑะตะดะตะฝะฝัะน", "ัะตะนัะฐั ะพะฑะตะด", "ะฒัะตะผั ะพะฑะตะดะฐ",
        "ะฟะพัะปะธ ะพะฑะตะดะฐัั", "ะฟะพัะปะธ ะตััั", "ะฒัะต ะฝะฐ ะพะฑะตะด", "ะฒัะต ะฝะฐ ะพะฑะตะด",
        "ะฐ ั ะฟะพััะป", "ะฐ ั ะธะดั", "ั ะฟะพััะป", "ั ะธะดั"
    ]
    if any(word in user_message_lower for word in lunch_announcement_words):
        message_type = "lunch_announcement"

    # ะกะฟะพััะทะฐะป / ะบะฐัะฐะปะบะฐ
    gym_words = [
        "ะฒ ะทะฐะป", "ะฒ ะบะฐัะฐะปะบั", "ะฒ ััะตะฝะฐะถััะฝัะน", "ะฝะฐ ะบะฐัะบั", "ะฝะฐ ััะตะฝะธัะพะฒะบั", "ะฒ ัะฟะพััะทะฐะป",
        "ะธะดั ะฒ ะทะฐะป", "ะธะดั ะฒ ะบะฐัะฐะปะบั", "ะธะดั ะฝะฐ ะบะฐัะบั", "ะฟะพััะป ะฒ ะทะฐะป", "ะฟะพัะปะฐ ะฒ ะทะฐะป",
        "ั ะฒ ะทะฐะป", "ั ะฒ ะบะฐัะฐะปะบั", "ั ะฝะฐ ะบะฐัะบั", "ั ะฝะฐ ััะตะฝะธัะพะฒะบั",
        "ะบะฐัะฐัััั", "ะบะฐัะฐัั", "ะบะฐัะฐะนัั", "ะฟะพะดะบะฐัะฐัััั", "ะฟัะพะบะฐัะฐัััั",
        "ััะตะฝะฐะถััะบะฐ", "ััะตะฝะฐะถััะฝัะน ะทะฐะป", "ะถะตะปะตะทะพ", "ััะฐะฝะณะฐ", "ะณะฐะฝัะตะปะธ", "ะณะธัะธ",
        "ะณััะดั", "ัะฟะธะฝะฐ", "ะฑะธัะตะฟั", "ััะธัะตะฟั", "ะฝะพะณะธ", "ะฟัะตัั", "ะฟะปะตัะธ",
        "ะถะธะผ", "ะฟัะธัะตะด", "ััะฐะฝะพะฒะฐั", "ััะณะฐ", "ะพัะถะธะผะฐะฝะธะต", "ะฟะพะดััะณะธะฒะฐะฝะธะต",
        "ััะตะฝะตั", "ััะตะฝะธัะพะฒะบะฐ", "ััะตะฝะธัะพะฒะพัะบะฐ", "ััะตะฝะธัะพะฒะพัะตะบ", "ัะฐะฑะพัะฐะตะผ",
        "ัะตะบะพัะด", "ัะตะบะพัะดั", "ะปะธัะฝัะน ัะตะบะพัะด", "ะฟะฑ", "ะฝะพะฒัะน ัะตะบะพัะด"
    ]
    if any(word in user_message_lower for word in gym_words):
        message_type = "gym"

    # ะะฐั / ะฒัะฟะธะฒะบะฐ
    bar_words = [
        "ะฒ ะฑะฐั", "ะฒ ะฟะฐะฑ", "ะฒ ะฟะธะฒะฝััะบั", "ะฒ ะฟะธะฒะฝัั", "ะฝะฐ ะฑะฐั", "ะฝะฐ ะฟะธะฒะพ",
        "ะธะดั ะฒ ะฑะฐั", "ะธะดั ะฒ ะฟะฐะฑ", "ะธะดั ะฝะฐ ะฟะธะฒะพ", "ะฟะพััะป ะฒ ะฑะฐั", "ะฟะพัะปะฐ ะฒ ะฑะฐั",
        "ั ะฒ ะฑะฐั", "ั ะฝะฐ ะฟะธะฒะพ", "ั ะฒ ะฟะฐะฑ",
        "ะฒัะฟะธัั", "ะฒัะฟะธะฒะบะฐ", "ะฒัะฟะธัั ะฟะธะฒะฐ", "ะฟะพะฟะธัั ะฟะธะฒะฐ", "ะฟัะพะฟัััะธัั ััะฐะบะฐะฝัะธะบ",
        "ะฟะธะฒะบะพ", "ะฟะธะฒะบะฐ", "ะฟะธะฒะพะผ", "ะฟะธะฒะฐัะธะบ", "ะฟะตะฝะฝะพะต",
        "ะบะพะบัะตะนะปั", "ะบะพะบัะตะนะปั", "ะบะพะบัะตะนะปััะธะบ", "ะผะพัะธัะพ", "ะผะฐัะณะฐัะธัะฐ",
        "ะฐะปะบะพะณะพะปั", "ัะฟะธััะฝะพะต", "ะณัะฐะดัั", "ะบัะตะฟะบะพะต", "ะฝะฐะฟะธัััั", "ะฑััะฝััั",
        "ะบัะพ ะฝะฐ ะฟะธะฒะพ", "ะบัะพ ะฒ ะฑะฐั", "ัะพะฑัะฐะปะธัั", "ะฒัะต ะฒ ะฑะฐั"
    ]
    if any(word in user_message_lower for word in bar_words):
        message_type = "bar"

    # ะกะพัะตะฒะฝะพะฒะฐะฝะธั / ะฟะพะดัะพะดั / ะบัะพ ะฑะพะปััะต
    workout_competition_words = [
        "ัะบะพะปัะบะพ ะฟะพะดัะพะดะพะฒ", "ัะบะพะปัะบะพ ัะฐะท", "ัะบะพะปัะบะพ ัะดะตะปะฐะป", "ัะบะพะปัะบะพ ะฟะพะถะฐะป",
        "ะฟะพะดัะพะดะพะฒ", "ะฟะพะฒัะพัะตะฝะธะน", "ะฟะพะฒัะพัะพะฒ", "ะบะธะปะพะณัะฐะผะผะพะฒ", "ะบะณ",
        "ัะฟะพัะธะผ", "ัะฟะพั", "ะฟะพัะฟะพัะธะผ", "ะดะตัะถะธะผ ะฟะฐัะธ", "ะฝะฐ ัะฟะพั",
        "ั ะฑะพะปััะต", "ัั ะฑะพะปััะต", "ะบัะพ ะฑะพะปััะต", "ะบัะพ ัะธะปัะฝะตะต", "ะบัะพ ะบัััะต",
        "ะฟะพะฑะตะดะธะป", "ะฒัะธะณัะฐะป", "ะฟัะพะธะณัะฐะป", "ัะดะตะปะฐะป", "ะพะฑะพััะป", "ะฟะตัะตะฟะปัะฝัะป",
        "ัะตะบะพัะด", "ัะตะบะพัะดั", "ะผะพะน ัะตะบะพัะด", "ัะฒะพะน ัะตะบะพัะด", "ัะตะบะพัะดัะผะตะฝ",
        "ะบัะพ ะฟะตัะฒัะน", "ะบัะพ ะฑััััะตะต", "ะบัะพ ะฒััะต", "ะบัะพ ะดะพะปััะต"
    ]
    if any(word in user_message_lower for word in workout_competition_words):
        message_type = "workout_competition"
    
    # ะะตะณ / ะฟะพะฑะตะณะฐะป / ะธะดั ะฑะตะณะฐัั
    running_words = [
        # ะะดั ะฑะตะณะฐัั / ะฟะพะฑะตะณะฐัั
        "ะธะดั ะฑะตะณะฐัั", "ะธะดั ะฝะฐ ะฟัะพะฑะตะถะบั", "ะฟะพััะป ะฑะตะณะฐัั", "ะฟะพัะปะฐ ะฑะตะณะฐัั", "ะฟะพะฑะตะถะฐะป", "ะฟะพะฑะตะถะฐะปะฐ",
        "ั ะฝะฐ ะฟัะพะฑะตะถะบั", "ั ะฑะตะณะฐัั", "ั ะฟะพะฑะตะณะฐัั", "ั ะฟะพััะป", "ั ะฟะพัะปะฐ", "ั ะฟะพะฑะตะณั",
        "ะฝะฐ ะฟัะพะฑะตะถะบั", "ะฝะฐ ะฑะตะณ", "ะฝะฐ ะฟัะพะฑะตะถะบั", "ะฟัะพะฑะตะถะบะฐ", "ะฟัะพะฑะตะถะบั", "ะฟัะพะฑะตะถะบะธ",
        "ะฑะตะณ", "ะฑะตะณะฐัั", "ะฑะตะณะฐั", "ะฑะตะณะฐะป", "ะฑะตะณะฐะปะฐ", "ะฟัะพะฑะตะณะฐะป", "ะฟัะพะฑะตะณะฐะปะฐ",
        "ัะตะณะพะดะฝั ะฑะตะณะฐะป", "ัะตะณะพะดะฝั ะฑะตะณะฐะปะฐ", "ัะตะณะพะดะฝั ะฟะพะฑะตะณะฐะป", "ัะตะณะพะดะฝั ะฟะพะฑะตะณะฐะปะฐ",
        "ั ัััะฐ ะฑะตะณะฐะป", "ั ัััะฐ ะฑะตะณะฐะปะฐ", "ัััะพะผ ะฑะตะณะฐะป", "ัััะพะผ ะฑะตะณะฐะปะฐ",
        "ะฒะตัะตัะพะผ ะฑะตะณะฐะป", "ะฒะตัะตัะพะผ ะฑะตะณะฐะปะฐ", "ะฝะพััั ะฑะตะณะฐะป", "ะฝะพััั ะฑะตะณะฐะปะฐ",
        "ัะพะปัะบะพ ััะพ ะฑะตะณะฐะป", "ัะพะปัะบะพ ััะพ ะฑะตะณะฐะปะฐ", "ััะพะดะธะป ะฝะฐ ะฟัะพะฑะตะถะบั", "ััะพะดะธะปะฐ ะฝะฐ ะฟัะพะฑะตะถะบั",
        "ะฒััะตะป ะฝะฐ ะฟัะพะฑะตะถะบั", "ะฒััะปะฐ ะฝะฐ ะฟัะพะฑะตะถะบั", "ะฒัะฑะตะถะฐะป", "ะฒัะฑะตะถะฐะปะฐ",
        "ะบัะพัั", "ะบัะพััะพะฒัะน", "ะบัะพัั ะฑะตะณ", "ัะตะผะฟ", "ัะตะผะฟ ะฑะตะณะฐ", "ัะบะพัะพััั",
        "ะบะธะปะพะผะตัั", "ะบะธะปะพะผะตััั", "ะบะผ", "ะฟัะพะฑะตะถะฐะป", "ะฟัะพะฑะตะถะฐะปะฐ", "ะฟัะพะฑะตะถะฐะปะธ",
        "ะฟัะพะฑะตะถะฐะป(ะฐ)", "ะฟัะพะฑะตะถะฐะปะธ", "ัะฑะตะณะฐะป", "ัะฑะตะณะฐะปะฐ", "ะพัะฑะตะณะฐะป", "ะพัะฑะตะณะฐะปะฐ",
        "ััะตะฝะธัะพะฒะบะฐ", "ััะตะฝะธัะพะฒะพัะบะฐ", "ััะตะฝะธัะพะฒะพัะตะบ", "ััะตะฝะธัะพะฒะฐะปัั", "ััะตะฝะธัะพะฒะฐะปะฐัั",
        "ะดะฝะตะฒะฝะฐั ะฟัะพะฑะตะถะบะฐ", "ัััะตะฝะฝัั ะฟัะพะฑะตะถะบะฐ", "ะฒะตัะตัะฝัั ะฟัะพะฑะตะถะบะฐ",
        "ะปัะณะบะฐั ะฟัะพะฑะตะถะบะฐ", "ะดะปะธะฝะฝะฐั ะฟัะพะฑะตะถะบะฐ", "ะธะฝัะตัะฒะฐะปัะฝะฐั", "ัะตะผะฟะพะฒะฐั",
        "ัะฐะทะผะธะฝะบะฐ", "ะทะฐะผะธะฝะบะฐ", "ัะฐัััะถะบะฐ", "ัะฐะทะพะณัะตะฒ", "ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต"
    ]
    if any(word in user_message_lower for word in running_words):
        message_type = "running"
    
    # ะัะตะผั / ะบะพะณะดะฐ ะฑะตะณะฐัั
    time_words = ["ะบะพะณะดะฐ", "ะฒะพ ัะบะพะปัะบะพ", "ัััะพะผ", "ะฒะตัะตัะพะผ", "ะฝะพััั", "ะดะฝัะผ", "ะฒัะตะผั", "ะฟะพัะฐะฝััะต", "ะฟะพะฟะพะทะถะต"]
    if any(word in user_message_lower for word in time_words):
        message_type = "time"
    
    # ะะพะผะฟะปะธะผะตะฝัั ะฑะพัั
    compliment_bot_words = ["ะผะพะปะพะดะตั", "ะบัััะพะน", "ะบะปะฐััะฝัะน", "ะปัััะธะน", "ััะฟะตั", "ะพัะปะธัะฝะพ", "ะบััั", " ัะพะฟ", "ะพัะธะณะตะฝะฝัะน", "ัะธะบะฐัะฝัะน", "awesome"]
    if any(word in user_message_lower for word in compliment_bot_words):
        message_type = "compliment_bot"
    
    # ะกะพััะฒััะฒะธะต / ะฟะพะดะดะตัะถะบะฐ
    sympathy_words = ["ะถะฐะปั", "ัะพััะฒััะฒัั", "ะฟะพะฝะธะผะฐั", "ัะพะฑะพะปะตะทะฝัั", "ะฟะปะพัะพ", "ะณััััะฝะพ", "ะพะฑะธะดะฝะพ", "ะฟะตัะตะถะธะฒะฐั", "ะฒะพะปะฝัััั"]
    if any(word in user_message_lower for word in sympathy_words):
        message_type = "sympathy"
    
    # ะัะฐะทะดะฝะธะบะธ / ะดะพััะธะถะตะฝะธั
    celebration_words = ["ะฟะพะทะดัะฐะฒะปัั", "ั ะดะฝัะผ ัะพะถะดะตะฝะธั", "ะผะพะปะพะดะตั", "ะบัะฐัะฐะฒัะธะบ", "ะบัะฐัะฐะฒะธัะฐ", "ะณะตัะพะน", "ะฟะพะฑะตะดะฐ", "ะฒัะธะณัะฐะป", "ะทะฐัะปัะถะธะป", "ะดะพััะธะณ"]
    if any(word in user_message_lower for word in celebration_words):
        message_type = "celebration"
    
    # ะกะผะตัะฝัะต ััะณะฐัะตะปัััะฒะฐ (ะดะพะฑััะต)
    funny_curse_words = ["ะดััะฐะบ", "ะธะดะธะพั", "ััะฟะพะน", "ะปะพั", "ะบะพะทัะป", "ะณะฐะด", "ะฑะฐะปะฑะตั", "ะฟัะธะดััะพะบ", "ะดะตะฑะธะป", "ััะฟะธัะฐ", "ัััะฑะฐะฝ", "ะฒะฐะปะตะฝะพะบ", "ะฑะฐัะฐะฝ", "ะพััะป", "ะถะปะพะฑ", "ะฝะตะณะพะดัะน", "ะผะตัะทะฐะฒะตั", "ัะฐะปัะฐะน", "ะฑะพะปะฒะฐะฝ", "ะณะปัะฟะตั", "ะบัะตัะธะฝ", "ะธะดะธะพัะบะฐ"]
    if any(word in user_message_lower for word in funny_curse_words):
        message_type = "funny_curse"
    
    # ะะฑะธะดะฐ / ัะฐััััะพะนััะฒะพ
    offended_words = ["ะพะฑะธะดะฝะพ", "ะพะฑะธะถะตะฝ", "ะพะฑะธะถะตะฝะฐ", "ัั ะฒะธะฝะพะฒะฐั", "ะฝะต ะพะฑะธะถะฐะนัั", "ัััะบะฐ", "ั ะพะฑะธะดะตะปัั", "ั ะพะฑะธะดะตะปะฐัั", "ะผะฝะต ะพะฑะธะดะฝะพ", "ะบะฐะบ ะฝะต ัััะดะฝะพ", "ัััะดะฝะพ", "ะฟะพะทะพั", "ัะพะฒะตััั", "ัะฐััะตััะป", "ัะฐััะตััะปะฐ"]
    if any(word in user_message_lower for word in offended_words):
        message_type = "offended"
    
    # ะกะผะตั (ัะฐะทะฝัะต ะฒะฐัะธะฐะฝัั)
    laughing_words = ["ัะฐัะฐั", "ะฐัะฐัะฐ", "ะปะพะป", "ัะถั", "ัะผะตััั", "ัะฐัะฐ", "ะฐัะฐั", "ัะตัะต", "ัะธัะธ", "ัะดั", "ะฟะฟั", "ัะฐััะฐ", "ะฐะฐะฐัะฐ", "ัะฐัะฐัะฐ", "ัะถะฐะบะฐ", "ัะณะฐั", "ัะผะตัะธะฝะบะฐ", "ััััะฐ", "ัะฐัะฐัะฐั", "ะฐัะฐัะฐัะฐ", "ะฟัะฐัะฐัะฐ"]
    if any(word in user_message_lower for word in laughing_words):
        message_type = "laughing"
    
    # ะะณะฝะพัะธัะพะฒะฐะฝะธะต / ะฝะต ะฟะพะปััะธะป ะพัะฒะตั
    ignored_words = ["ัั ะผะตะฝั ัะปััะธัั", "ะฐะปะปะพ", "ะบัะพ-ะฝะธะฑัะดั", "ะตััั ะบัะพ", "ััะพ", "ัะธัะธะฝะฐ", "ะผะพะปัะฐะฝะธะต", "ะฝะธะบัะพ ะฝะต ะฟะธัะตั", "ะฝะธะบะพะณะพ ะฝะตั", "ะณะดะต ะฒัะต", "ะฐั"]
    if any(word in user_message_lower for word in ignored_words):
        message_type = "ignored"
    
    # ะะพัะฒะฐะปะฐ ะฑะพัั / ะบะพะผะฟะปะธะผะตะฝัั ะฑะพัั
    bot_praise_words = ["ัั ะผะพะปะพะดะตั", "ัั ะบะปะฐััะฝัะน", "ัั ะปัััะธะน", "ัั ะบัััะพะน", "ัั ััะฟะตั", "ัั ะพัะธะณะตะฝะฝัะน", "ัั ัะธะบะฐัะฝัะน", "ัั ะบัะฐัะฐะฒัะธะบ", "ัั ะบัะฐัะฐะฒะธัะฐ", "ัั ะดะพะฑััะน", "ัั ัะผะฝัะน", "ัั ะฟัะธะบะพะปัะฝัะน", "ัั ัะผะตัะฝะพะน", "ั ัะตะฑั ะปัะฑะปั", "ะปัะฑะปั ัะตะฑั", "ะพะฑะพะถะฐั ัะตะฑั"]
    if any(word in user_message_lower for word in bot_praise_words):
        message_type = "bot_praise"
    
    # ะะพั ะฝะฐะดะพะตะป / ะพัััะฐะฝั / ะฝะต ะผะตัะฐะน
    annoying_words = ["ัั ะฝะฐะดะพะตะป", "ะพัััะฐะฝั", "ะฝะต ะผะตัะฐะน", "ะทะฐัะบะฝะธัั", "ะฟะพะผะพะปัะธ", "ัะธัะพ", "ัั ะฑะตัะธัั", "ัั ัะฐะทะดัะฐะถะฐะตัั", "ะฝะฐะดะพะตะป", "ัะนะดะธ", "ะฝะต ะฟะธัะธ", "ะฟัะตะบัะฐัะธ", "ัะฒะฐัะธั", "ััะพะฟ"]
    if any(word in user_message_lower for word in annoying_words):
        message_type = "annoying"
    
    # ะัะพัะฐะฝะธะต / ะฟะพะบะฐ / ะดะพ ัะฒะธะดะฐะฝะธั
    goodbye_words = ["ะฟะพะบะฐ", "ะดะพ ัะฒะธะดะฐะฝะธั", "ะฟัะพัะฐะน", "ะดะพ ะฒัััะตัะธ", "ะดะพ ัะบะพัะพะณะพ", "ะดะพ ะทะฐะฒััะฐ", "ัะฐะพ", "ะฟะพะบะธ", "ะฒัะตะผ ะฟะพะบะฐ", "ั ะฟะพััะป", "ั ะฟะพัะปะฐ", "ะฒััะพะถั", " catch you", "see you"]
    if any(word in user_message_lower for word in goodbye_words):
        message_type = "goodbye"
    
    # ะกะบัะบะฐ / ัะบััะฝะพ / ะฝะตัะตะผ ะทะฐะฝััััั
    bored_words = ["ัะบััะฝะพ", "ะผะฝะต ัะบััะฝะพ", "ะฝะตัะตะผ ะทะฐะฝััััั", "ะทะฐะฝััััั ะฝะตัะตะผ", "ะฝะต ะทะฝะฐั ััะพ ะดะตะปะฐัั", "ะดะตะปะฐัั ะฝะตัะตะณะพ", "ัะบััะฐั", "ัะพัะบะฐ", "ัะพัะฝะธั ะพั ัะบัะบะธ"]
    if any(word in user_message_lower for word in bored_words):
        message_type = "bored"
    
    # ะะพะฟัะพั "ััะพ ะดะตะปะฐะตัั" / "ัะตะผ ะทะฐะฝะธะผะฐะตัััั"
    what_doing_words = ["ััะพ ะดะตะปะฐะตัั", "ัะตะผ ะทะฐะฝะธะผะฐะตัััั", "ััะพ ัั ะดะตะปะฐะตัั", "ัะตะผ ัั ะทะฐะฝะธะผะฐะตัััั", "ััะพ ัะตะนัะฐั", "ัะตะผ ัะตะนัะฐั", "ะบะฐะบ ะถะธะฒััั", "ะบะฐะบ ัั"]
    if any(word in user_message_lower for word in what_doing_words):
        message_type = "what_doing"
    
    # ะะพะฟัะพั "ัั ะฝะพัะผะฐะปัะฝัะน" / "ัั ะฐะดะตะบะฒะฐัะฝัะน"
    normal_words = ["ัั ะฝะพัะผะฐะปัะฝัะน", "ัั ะฐะดะตะบะฒะฐัะฝัะน", "ัั ะฒ ัะฒะพัะผ ัะผะต", "ัั ั ัะผะฐ ัะพััะป", "ัั ะฝะพัะผะฐะปัะฝะพ", "ัั ะฐะดะตะบะฒะฐัะฝะพ", "ัั ัััะฐะฝะฝัะน", "ัั ัััะฐะฝะฝะฐั"]
    if any(word in user_message_lower for word in normal_words):
        message_type = "normal"
    
    # ะขะพะปัะบะพ ัะผะพะดะทะธ
    emoji_pattern = r'^[\U0001F600-\U0001F64F\U0001F300-\U0001F5FF\U0001F680-\U0001F6FF\U0001F1E0-\U0001F1FF\s]+$'
    import re
    if re.match(emoji_pattern, user_message.strip()):
        message_type = "emoji"
    
    # ะัะฑะธัะฐะตะผ ะบะฐัะตะณะพัะธั ะพัะฒะตัะพะฒ
    response_category = {
        "greeting": GREETING_RESPONSES,
        "thanks": THANKS_RESPONSES,
        "agreement": AGREEMENT_RESPONSES,
        "question": QUESTION_RESPONSES,
        "running": RUNNING_RESPONSES,
        "morning": MORNING_RESPONSES,
        "motivation": MOTIVATION_RESPONSES,
        "joke": JOKE_RESPONSES,
        "emoji": EMOJI_RESPONSES,
        "tired": TIRED_RESPONSES,
        "pain": PAIN_RESPONSES,
        "weather": WEATHER_RESPONSES,
        "how_are_you": HOW_ARE_YOU_RESPONSES,
        "who_are_you": WHO_ARE_YOU_RESPONSES,
        "distance": DISTANCE_RESPONSES,
        "food": FOOD_RESPONSES,
        "lunch_announcement": LUNCH_ANNOUNCEMENT_RESPONSES,
        "gym": GYM_RESPONSES,
        "bar": BAR_RESPONSES,
        "workout_competition": WORKOUT_COMPETITION_RESPONSES,
        "running": RUNNING_RESPONSES,
        "time": TIME_RESPONSES,
        "compliment_bot": COMPLIMENT_BOT_RESPONSES,
        "sympathy": SYMPATHY_RESPONSES,
        "celebration": CELEBRATION_RESPONSES,
        "funny_curse": FUNNY_CURSE_RESPONSES,
        "offended": OFFENDED_RESPONSES,
        "laughing": LAUGHING_RESPONSES,
        "ignored": IGNORED_RESPONSES,
        "bot_praise": BOT_PRAISE_RESPONSES,
        "annoying": ANNOYING_RESPONSES,
        "goodbye": GOODBYE_RESPONSES,
        "bored": BORED_RESPONSES,
        "what_doing": WHAT_DOING_RESPONSES,
        "normal": NORMAL_RESPONSES,
        "default": DEFAULT_RESPONSES,
    }
    
    # ะะพะปััะฐะตะผ ัะปััะฐะนะฝัะน ะพัะฒะตั ะธะท ะบะฐัะตะณะพัะธะธ
    import random
    responses = response_category.get(message_type, DEFAULT_RESPONSES)
    response_template = random.choice(responses)
    
    # ะคะพัะผะฐัะธััะตะผ ะพัะฒะตั ั ะธะผะตะฝะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั
    try:
        response = response_template.format(user_name=user_name)
    except:
        response = response_template
    
    logger.info(f"[AI-LOCAL] ๐ฏ ะขะธะฟ ัะพะพะฑัะตะฝะธั: {message_type} | ะัะฒะตั ะดะปั {user_name}: {response[:50]}...")
    
    return response


# ============== GARMIN CHECKER ==============
async def check_garmin_activities():
    """ะัะพะฒะตัะบะฐ ะฝะพะฒัั ะฟัะพะฑะตะถะตะบ ั ะฒัะตั ะทะฐัะตะณะธัััะธัะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน"""
    global garmin_users, user_running_stats
    
    if not GARMIN_AVAILABLE:
        logger.warning("[GARMIN] ะะธะฑะปะธะพัะตะบะฐ ะฝะตะดะพัััะฟะฝะฐ")
        return
    
    if not garmin_users:
        logger.debug("[GARMIN] ะะตั ะทะฐัะตะณะธัััะธัะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน")
        return
    
    logger.info(f"[GARMIN] ะัะพะฒะตััะตะผ ะฐะบัะธะฒะฝะพััะธ ั {len(garmin_users)} ะฟะพะปัะทะพะฒะฐัะตะปะตะน...")
    
    now = datetime.now(MOSCOW_TZ)
    today = now.strftime("%Y-%m-%d")
    current_month = now.strftime("%Y-%m")
    
    # ะกะพะทะดะฐัะผ ะะะะะะะกะะฃะฎ ะบะพะฟะธั ัะปะพะฒะฐัั ะดะปั ะธัะตัะฐัะธะธ
    try:
        users_items = list(garmin_users.items()) if garmin_users else []
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ัะพะทะดะฐะฝะธั ะบะพะฟะธะธ ัะปะพะฒะฐัั: {e}")
        return
    
    for user_id, user_data in users_items:
        try:
            # ========== ะะะะกะะะะะฌะะะฏ ะะะฉะะขะ ะะข None ==========
            # ะะฐัะธัะฐะตะผัั ะพั ะปัะฑัั ะฟัะพะฑะปะตะผ ั user_id
            try:
                user_id_str = str(user_id) if user_id is not None else "None"
            except Exception:
                user_id_str = "ERROR_CONVERTING"
            
            # ะะฐัะธัะฐะตะผัั ะพั ะปัะฑัั ะฟัะพะฑะปะตะผ ั user_data
            try:
                user_data_is_dict = isinstance(user_data, dict) if user_data is not None else False
            except Exception:
                user_data_is_dict = False
            
            # ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะบ - ะฟัะพะฟััะบะฐะตะผ ััะพั ัะปะตะผะตะฝั
            if user_id is None or user_data is None or not user_data_is_dict:
                logger.warning(f"[GARMIN] ๐ก๏ธ ะัะพะฟััะบะฐะตะผ ะฟะพะฒัะตะถะดัะฝะฝัะต ะดะฐะฝะฝัะต: user_id={user_id_str}, user_data type={type(user_data)}")
                try:
                    if user_id is not None and user_id in garmin_users:
                        del garmin_users[user_id]
                        save_garmin_users()
                        logger.info(f"[GARMIN] ๐๏ธ ะฃะดะฐะปัะฝ ะฟะพะฒัะตะถะดัะฝะฝัะน ะฟะพะปัะทะพะฒะฐัะตะปั {user_id_str} ะธะท ะฑะฐะทั")
                except Exception as del_error:
                    logger.error(f"[GARMIN] ะะต ัะดะฐะปะพัั ัะดะฐะปะธัั ะฟะพะฒัะตะถะดัะฝะฝัะต ะดะฐะฝะฝัะต: {del_error}")
                continue
            
            # ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต ะพะฑัะทะฐัะตะปัะฝัั ะฟะพะปะตะน
            if "encrypted_password" not in user_data:
                logger.warning(f"[GARMIN] ะัะพะฟััะบะฐะตะผ user_id={user_id_str} ะฑะตะท encrypted_password")
                continue
            if "email" not in user_data:
                logger.warning(f"[GARMIN] ะัะพะฟััะบะฐะตะผ user_id={user_id_str} ะฑะตะท email")
                continue
            
            # ะะฐััะธััะพะฒัะฒะฐะตะผ ะฟะฐัะพะปั
            password = decrypt_garmin_password(user_data["encrypted_password"])
            email = user_data["email"]
            
            # ะัะพะฒะตััะตะผ Garmin (ั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะน ะทะฐัะธัะพะน)
            try:
                client = garminconnect.Garmin(email, password)
                client.login()
                
                # ะะพะปััะฐะตะผ ะฟะพัะปะตะดะฝะธะต ะฐะบัะธะฒะฝะพััะธ (ะฟะพัะปะตะดะฝะธะต 10 ะดะปั ะฝะฐะดัะถะฝะพััะธ)
                activities = client.get_activities(0, 10)
            except Exception as garmin_error:
                logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ Garmin ะดะปั {email}: {garmin_error}")
                continue
            
            if not activities:
                logger.info(f"[GARMIN] ะฃ ะฟะพะปัะทะพะฒะฐัะตะปั {email} ะฝะตั ะฐะบัะธะฒะฝะพััะตะน")
                continue
            
            logger.info(f"[GARMIN] ะฃ ะฟะพะปัะทะพะฒะฐัะตะปั {email} ะฝะฐะนะดะตะฝะพ {len(activities)} ะฐะบัะธะฒะฝะพััะตะน")
            
            # ะัะพะฒะตััะตะผ ะบะฐะถะดัั ะฐะบัะธะฒะฝะพััั
            for activity in activities:
                activity_type = activity.get('activityType', {}).get('typeKey', 'unknown')
                activity_id = str(activity.get('activityId', 'unknown'))
                
                # ะัะพะฒะตััะตะผ timestamp - Garmin ะผะพะถะตั ะฒะพะทะฒัะฐัะฐัั ัะฐะทะฝัะต ัะพัะผะฐัั
                start_time_local = activity.get('startTimeLocal', '')
                start_time_seconds = activity.get('startTimeInSeconds', 0)
                start_time_nano = activity.get('startTimeInNanoSeconds', 0)
                
                # ะะพะณะธััะตะผ ััะพ ะฟะพะปััะฐะตะผ
                logger.info(f"[GARMIN] Raw activity: id={activity_id}, type={activity_type}")
                logger.info(f"[GARMIN] Timestamp: local='{start_time_local}', seconds={start_time_seconds}, nano={start_time_nano}")
                
                # ะัะพะฑัะตะผ ัะฐะทะฝัะต ัะพัะผะฐัั timestamp (ะฒ ะฟะพััะดะบะต ะฟัะธะพัะธัะตัะฐ)
                activity_date_dt = None
                
                if start_time_local:
                    try:
                        # ะัะพะฑัะตะผ ะฟะฐััะธัั startTimeLocal (ัะพัะผะฐั: "YYYY-MM-DD HH:MM:SS")
                        activity_date_dt = datetime.strptime(start_time_local, "%Y-%m-%d %H:%M:%S").replace(tzinfo=MOSCOW_TZ)
                        logger.info(f"[GARMIN] ะฃัะฟะตัะฝะพ ัะฐัะฟะพะทะฝะฐะปะธ startTimeLocal: {start_time_local}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] ะะต ัะดะฐะปะพัั ัะฐัะฟะพะทะฝะฐัั startTimeLocal: {e}")
                
                if activity_date_dt is None and start_time_seconds and start_time_seconds > 0:
                    try:
                        activity_date_dt = datetime.fromtimestamp(start_time_seconds, tz=MOSCOW_TZ)
                        logger.info(f"[GARMIN] ะัะฟะพะปัะทัะตะผ startTimeInSeconds: {start_time_seconds}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] ะะต ัะดะฐะปะพัั ัะฐัะฟะพะทะฝะฐัั startTimeInSeconds: {e}")
                
                if activity_date_dt is None and start_time_nano and start_time_nano > 0:
                    try:
                        # ะะฐะฝะพัะตะบัะฝะดั - ะฟะตัะตะฒะพะดะธะผ ะฒ ัะตะบัะฝะดั
                        activity_date_dt = datetime.fromtimestamp(start_time_nano // 1000000000, tz=MOSCOW_TZ)
                        logger.info(f"[GARMIN] ะัะฟะพะปัะทัะตะผ startTimeInNanoSeconds: {start_time_nano}")
                    except Exception as e:
                        logger.warning(f"[GARMIN] ะะต ัะดะฐะปะพัั ัะฐัะฟะพะทะฝะฐัั startTimeInNanoSeconds: {e}")
                
                if activity_date_dt is None:
                    activity_date_dt = now  # ะัะฟะพะปัะทัะตะผ ัะตะบััะตะต ะฒัะตะผั ะบะฐะบ fallback
                    logger.warning(f"[GARMIN] ะะต ัะดะฐะปะพัั ัะฐัะฟะพะทะฝะฐัั timestamp, ะธัะฟะพะปัะทัะตะผ ัะตะบััะตะต ะฒัะตะผั")
                
                activity_date_str = activity_date_dt.strftime("%Y-%m-%d")
                
                logger.info(f"[GARMIN] ะะฐัะฐ ะฐะบัะธะฒะฝะพััะธ: {activity_date_str}")
                
                # ะคะธะปััััะตะผ ัะพะปัะบะพ ะฑะตะณ
                if activity_type not in ['running', 'treadmill_running', 'trail_running']:
                    logger.debug(f"[GARMIN] ะัะพะฟััะบะฐะตะผ (ะฝะต ะฑะตะณ): {activity_type}")
                    continue
                
                logger.info(f"[GARMIN] ะะฐะนะดะตะฝ ะฑะตะณ: id={activity_id}, date={activity_date_str}")
                
                # ะัะพะฒะตััะตะผ, ะฝะพะฒะฐั ะปะธ ััะพ ะฐะบัะธะฒะฝะพััั
                last_id = user_data.get("last_activity_id", "")
                
                # ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะฟัะพะฒะตัะบะฐ: ะพััะปะตะถะธะฒะฐะตะผ ะพะฑัะฐะฑะพัะฐะฝะฝัะต ะฐะบัะธะฒะฝะพััะธ ะฒ ะฟะฐะผััะธ
                activity_key = f"{user_id}:{activity_id}"
                if activity_key in processed_activities:
                    logger.info(f"[GARMIN] ๐ก๏ธ ะะบัะธะฒะฝะพััั {activity_id} ัะถะต ะพะฑัะฐะฑะพัะฐะฝะฐ ะฒ ััะพะน ัะตััะธะธ (idempotency check)")
                    continue
                
                if activity_id == last_id:
                    logger.info(f"[GARMIN] ะญัะพ ััะฐัะฐั ะฐะบัะธะฒะฝะพััั (ัะถะต ะพะฑัะฐะฑะพัะฐะฝะฐ)")
                    continue
                
                # ะัะพะฒะตััะตะผ, ะฝะต ััะฐัะฐั ะปะธ ะฐะบัะธะฒะฝะพััั (ะดะปั ัะตััะธัะพะฒะฐะฝะธั ัะผะตะฝััะตะฝะพ ะดะพ 60 ะดะฝะตะน)
                # ะะพัะปะต ััะฟะตัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะฒะตัะฝััั ะพะฑัะฐัะฝะพ ะฝะฐ 2 ะดะฝั
                days_diff = (now - activity_date_dt).days
                max_days = 60
                if days_diff > max_days:
                    logger.warning(f"[GARMIN] ะะบัะธะฒะฝะพััั {activity_id} ััะฐััะต {max_days} ะดะฝะตะน ({days_diff} ะดะฝะตะน), ะฟัะพะฟััะบะฐะตะผ")
                    continue
                
                # ะัะตะผะตะฝะฝะพ ะพะฑะฝะพะฒะปัะตะผ last_activity_id ะะะะะ ะฟัะฑะปะธะบะฐัะธะตะน
                # ะญัะพ ะฟัะตะดะพัะฒัะฐัะฐะตั ะฟะพะฒัะพัะฝัั ะฟัะฑะปะธะบะฐัะธั ะฟัะธ ัะฑะพัั
                old_activity_id = user_data.get("last_activity_id", "")
                user_data["last_activity_id"] = activity_id
                user_data["last_activity_date"] = activity_date_str
                save_garmin_users()
                
                # ะญัะพ ะฝะพะฒะฐั ะฟัะพะฑะตะถะบะฐ! ะัะฑะปะธะบัะตะผ ะฒ ัะฐั
                logger.info(f"[GARMIN] ะัะฑะปะธะบัั ะฟัะพะฑะตะถะบั: {activity_id}")
                success = await publish_run_result(user_id, user_data, activity, now, current_month)
                
                if success:
                    # ะะพะฑะฐะฒะปัะตะผ ะฒ ะผะฝะพะถะตััะฒะพ ะพะฑัะฐะฑะพัะฐะฝะฝัั ะฐะบัะธะฒะฝะพััะตะน
                    processed_activities.add(activity_key)
                    logger.info(f"[GARMIN] โ ะัะพะฑะตะถะบะฐ {activity_id} ััะฟะตัะฝะพ ะพะฟัะฑะปะธะบะพะฒะฐะฝะฐ")
                else:
                    # ะัะฑะปะธะบะฐัะธั ะฝะต ัะดะฐะปะฐัั โ ะพัะบะฐััะฒะฐะตะผ last_activity_id
                    logger.warning(f"[GARMIN] โ๏ธ ะัะฑะปะธะบะฐัะธั ะฝะต ัะดะฐะปะฐัั, ะพัะบะฐั last_activity_id")
                    user_data["last_activity_id"] = old_activity_id
                    save_garmin_users()
            
            # ะกะพััะฐะฝัะตะผ ะดะฐะฝะฝัะต
            save_garmin_users()
            
        except Exception as e:
            # ะะตะทะพะฟะฐัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะบะธ - user_data ะผะพะถะตั ะฑััั None
            user_email = user_data.get("email", "Unknown") if user_data else "Unknown"
            user_id_str = str(user_id) if user_id is not None else "None"
            logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะฟัะพะฒะตัะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั {user_id_str} ({user_email}): {e}", exc_info=True)
            continue


def escape_markdown(text):
    """ะญะบัะฐะฝะธััะตั ัะฟะตััะธะผะฒะพะปั Markdown ะฒ ัะตะบััะต"""
    if not isinstance(text, str):
        return str(text)
    # ะญะบัะฐะฝะธััะตะผ ะฒัะต ัะฟะตััะธะผะฒะพะปั Markdown
    special_chars = ['*', '_', '`', '[', ']', '(', ')', '~', '>', '#', '+', '-', '=', '{', '}', '!', '|']
    for char in special_chars:
        text = text.replace(char, '\\' + char)
    return text


async def publish_run_result(user_id, user_data, activity, now, current_month):
    """ะัะฑะปะธะบะฐัะธั ัะตะทัะปััะฐัะพะฒ ะฟัะพะฑะตะถะบะธ ะฒ ัะฐั. ะะพะทะฒัะฐัะฐะตั True ะฟัะธ ััะฟะตัะต."""
    global application, user_running_stats
    
    # ========== ะะะะกะะะะะฌะะะฏ ะะะฉะะขะ ะะข None ==========
    try:
        # ะัะพะฒะตััะตะผ ะฒัะพะดะฝัะต ะฟะฐัะฐะผะตััั
        if user_id is None:
            logger.error("[GARMIN] publish_run_result: user_id ัะฐะฒะตะฝ None")
            return False
        if user_data is None:
            logger.error("[GARMIN] publish_run_result: user_data ัะฐะฒะตะฝ None")
            return False
        if not isinstance(user_data, dict):
            logger.error(f"[GARMIN] publish_run_result: user_data ะฝะต ัะปะพะฒะฐัั: {type(user_data)}")
            return False
        
        # ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต ะพะฑัะทะฐัะตะปัะฝัั ะฟะพะปะตะน
        if "name" not in user_data:
            logger.error(f"[GARMIN] publish_run_result: ะพััััััะฒัะตั ะฟะพะปะต 'name' ะฒ user_data")
            return False
            
    except Exception as init_error:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะธะฝะธัะธะฐะปะธะทะฐัะธะธ publish_run_result: {init_error}")
        return False
    
    try:
        # ะะทะฒะปะตะบะฐะตะผ ะดะฐะฝะฝัะต ะฐะบัะธะฒะฝะพััะธ
        distance_meters = activity.get('distance', 0)
        distance_km = distance_meters / 1000
        
        duration_seconds = activity.get('duration', 0)
        duration_min = int(duration_seconds // 60)
        duration_sec = int(duration_seconds % 60)
        
        avg_heartrate = activity.get('averageHeartRate', 0)
        calories = activity.get('calories', 0)
        
        # ะััะธัะปัะตะผ ัะตะผะฟ
        if distance_km > 0:
            pace_seconds = duration_seconds / distance_km
            pace_min = int(pace_seconds // 60)
            pace_sec = int(pace_seconds % 60)
            pace_str = f"{pace_min}:{pace_sec:02d} ะผะธะฝ/ะบะผ"
        else:
            pace_str = "N/A"
        
        # ะคะพัะผะฐัะธััะตะผ ะฒัะตะผั
        time_str = f"{duration_min}:{duration_sec:02d}"
        
        # ะัะพะฒะตััะตะผ ะฝะพะฒัะน ะผะตััั ะดะปั ัะฑัะพัะฐ
        user_monthly = user_data.get("last_activity_date", "")
        if user_monthly and user_monthly[:7] != current_month:
            # ะะพะฒัะน ะผะตััั - ัะฑัะฐััะฒะฐะตะผ ัััััะธะบะธ
            user_data["monthly_distance"] = 0.0
            user_data["monthly_activities"] = 0
            logger.info(f"[GARMIN] ะะพะฒัะน ะผะตััั ะดะปั {user_data['name']}, ัะฑัะพั ัััััะธะบะพะฒ")
        
        # ะะฑะฝะพะฒะปัะตะผ ััะฐัะธััะธะบั ะฟะพะปัะทะพะฒะฐัะตะปั
        user_data["monthly_distance"] = user_data.get("monthly_distance", 0.0) + distance_km
        user_data["monthly_activities"] = user_data.get("monthly_activities", 0) + 1
        
        # ะะฑะฝะพะฒะปัะตะผ ะพะฑััั ััะฐัะธััะธะบั ะฑะตะณะฐ
        if user_id not in user_running_stats:
            user_running_stats[user_id] = {
                "name": user_data["name"],
                "activities": 0,
                "distance": 0.0,
                "duration": 0,
                "calories": 0
            }
        
        user_running_stats[user_id]["activities"] += 1
        user_running_stats[user_id]["distance"] += distance_meters
        user_running_stats[user_id]["duration"] += duration_seconds
        user_running_stats[user_id]["calories"] += calories
        
        # ะญะบัะฐะฝะธััะตะผ ะธะผั ะดะปั Markdown
        safe_name = escape_markdown(user_data.get('name', 'ะะตะณัะฝ'))
        
        # ะคะพัะผะธััะตะผ ัะพะพะฑัะตะฝะธะต
        message_text = (
            f"๐โโ๏ธ **{safe_name}** ะทะฐะฒะตััะธะป(ะฐ) ะฟัะพะฑะตะถะบั!\n\n"
            f"๐ *ะะธััะฐะฝัะธั:* {distance_km:.2f} ะบะผ\n"
            f"โฑ๏ธ *ะัะตะผั:* {time_str} ({pace_str})\n"
        )
        
        if avg_heartrate > 0:
            message_text += f"โค๏ธ *ะัะปัั:* {avg_heartrate} ัะด/ะผะธะฝ\n"
        
        if calories > 0:
            message_text += f"๐ฅ *ะะฐะปะพัะธะธ:* {calories} ะบะบะฐะป\n"
        
        message_text += (
            f"\n๐ *ะะฐ ะผะตััั:* {user_data['monthly_distance']:.1f} ะบะผ / {user_data['monthly_activities']} ััะตะฝะธัะพะฒะพะบ"
        )
        
        # ะัะฟัะฐะฒะปัะตะผ ะฒ ัะฐั
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                text=message_text,
                parse_mode="Markdown"
            )
            logger.info(f"[GARMIN] ะะตะทัะปััะฐั ะพะฟัะฑะปะธะบะพะฒะฐะฝ: {user_data['name']} - {distance_km:.2f} ะบะผ")
            return True
        return False
        
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะฟัะฑะปะธะบะฐัะธะธ: {e}", exc_info=True)
        return False


async def garmin_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะฟัะพะฒะตัะบะธ Garmin (ะบะฐะถะดัะต 5 ะผะธะฝัั)"""
    global bot_running
    
    check_interval = 300  # 5 ะผะธะฝัั
    
    while bot_running:
        try:
            # ะะดัะผ ะดะพ ัะปะตะดัััะตะน ะฟัะพะฒะตัะบะธ
            await asyncio.sleep(check_interval)
            
            # ะัะพะฒะตััะตะผ Garmin
            await check_garmin_activities()
            
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะฒ ะฟะปะฐะฝะธัะพะฒัะธะบะต: {e}")
            await asyncio.sleep(60)  # ะะพะดะพะถะดัะผ ะผะธะฝััั ะฟัะธ ะพัะธะฑะบะต


def garmin_scheduler_sync():
    """ะกะธะฝััะพะฝะฝะฐั ะพะฑัััะบะฐ ะดะปั ะทะฐะฟััะบะฐ ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต"""
    logger.info("[GARMIN] ะะปะฐะฝะธัะพะฒัะธะบ ะทะฐะฟััะตะฝ (sync wrapper)")
    try:
        asyncio.run(garmin_scheduler_task())
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธัะธัะตัะบะฐั ะพัะธะฑะบะฐ ะฒ ะฟะพัะพะบะต ะฟะปะฐะฝะธัะพะฒัะธะบะฐ: {e}")


def init_garmin_on_startup():
    """ะะฝะธัะธะฐะปะธะทะฐัะธั Garmin ะฟัะธ ะทะฐะฟััะบะต ะฑะพัะฐ"""
    global garmin_users
    
    try:
        if GARMIN_AVAILABLE:
            # ะะฐะณััะถะฐะตะผ ัะพััะฐะฝัะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
            load_garmin_users()
            logger.info(f"[GARMIN] ะะฝะธัะธะฐะปะธะทะฐัะธั ะทะฐะฒะตััะตะฝะฐ. ะะพะปัะทะพะฒะฐัะตะปะตะน: {len(garmin_users)}")
        else:
            logger.warning("[GARMIN] ะะธะฑะปะธะพัะตะบะฐ ะฝะตะดะพัััะฟะฝะฐ, ะธะฝัะตะณัะฐัะธั ะพัะบะปััะตะฝะฐ")
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะธะฝะธัะธะฐะปะธะทะฐัะธะธ: {e}")


# ============== ะคะฃะะะฆะะ ะะะฏ ะะะะ ะะะะะะะะฏ ==============
def save_birthdays():
    """ะกะพััะฐะฝะตะฝะธะต ะดะฝะตะน ัะพะถะดะตะฝะธั ะฒ ัะฐะนะป"""
    try:
        save_data = {}
        for user_id, data in user_birthdays.items():
            save_data[str(user_id)] = {
                "name": data["name"],
                "birthday": data["birthday"]
            }
        
        with open(BIRTHDAYS_FILE, 'w', encoding='utf-8') as f:
            json.dump(save_data, f, ensure_ascii=False, indent=2)
        
        logger.info(f"[BIRTHDAY] ะะฝะธ ัะพะถะดะตะฝะธั ัะพััะฐะฝะตะฝั: {len(user_birthdays)} ะฟะพะปัะทะพะฒะฐัะตะปะตะน")
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ัะพััะฐะฝะตะฝะธั: {e}")


def load_birthdays():
    """ะะฐะณััะทะบะฐ ะดะฝะตะน ัะพะถะดะตะฝะธั ะธะท ัะฐะนะปะฐ"""
    global user_birthdays
    
    try:
        if not os.path.exists(BIRTHDAYS_FILE):
            logger.info("[BIRTHDAY] ะคะฐะนะป ะดะฝะตะน ัะพะถะดะตะฝะธั ะฝะต ะฝะฐะนะดะตะฝ")
            user_birthdays = {}
            return
        
        with open(BIRTHDAYS_FILE, 'r', encoding='utf-8') as f:
            load_data = json.load(f)
        
        user_birthdays = {}
        for user_id_str, data in load_data.items():
            user_birthdays[int(user_id_str)] = {
                "name": data["name"],
                "birthday": data["birthday"]
            }
        
        logger.info(f"[BIRTHDAY] ะะฐะณััะถะตะฝะพ ะดะฝะตะน ัะพะถะดะตะฝะธั: {len(user_birthdays)}")
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ: {e}")
        user_birthdays = {}


async def send_birthday_congratulation(user_id, user_data):
    """ะัะฟัะฐะฒะบะฐ ะฟะพะทะดัะฐะฒะปะตะฝะธั ั ะะฝัะผ ัะพะถะดะตะฝะธั"""
    global application
    
    try:
        name = user_data["name"]
        safe_name = escape_markdown(name)
        
        # ะัะฑะธัะฐะตะผ ัะปััะฐะนะฝะพะต ะฟะพะถะตะปะฐะฝะธะต
        wish = random.choice(BIRTHDAY_WISHES).format(name=safe_name)
        
        # ะัะฐะทะดะฝะธัะฝะพะต ัะพะพะฑัะตะฝะธะต ั ะบะฐััะธะฝะบะพะน
        birthday_text = f"""๐ **{safe_name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั!** ๐

{wish}

๐ ะกะตะณะพะดะฝั ัะฒะพะน ะพัะพะฑะตะฝะฝัะน ะดะตะฝั โ ะพัะดััะฐะน, ัะฐะดัะนัั ะธ ะฝะฐัะปะฐะถะดะฐะนัั! 

๐ ะก ะปัะฑะพะฒัั, ัะฒะพะน ะฑะตะณะพะฒะพะน ะบะปัะฑ! โค๏ธ"""

        # ะัะฟัะฐะฒะปัะตะผ ะฒ ัะฐั
        if application and CHAT_ID:
            # ะะพะฟัะพะฑัะตะผ ะพัะฟัะฐะฒะธัั ั ะฟัะฐะทะดะฝะธัะฝะพะน ะบะฐััะธะฝะบะพะน (ัะพัั)
            try:
                await application.bot.send_photo(
                    chat_id=CHAT_ID,
                    photo="https://cdn-icons-png.flaticon.com/512/3081/3081559.png",  # ะัะฐะทะดะฝะธัะฝัะน ัะพัั
                    caption=birthday_text,
                    parse_mode="Markdown"
                )
            except Exception as img_error:
                # ะัะปะธ ะบะฐััะธะฝะบะฐ ะฝะต ะทะฐะณััะทะธะปะฐัั โ ะพัะฟัะฐะฒะปัะตะผ ะฟัะพััะพ ัะตะบัั
                logger.warning(f"[BIRTHDAY] ะะต ัะดะฐะปะพัั ะทะฐะณััะทะธัั ะบะฐััะธะฝะบั: {img_error}")
                await application.bot.send_message(
                    chat_id=CHAT_ID,
                    text=birthday_text,
                    parse_mode="Markdown"
                )
            
            logger.info(f"[BIRTHDAY] ะะพะทะดัะฐะฒะปะตะฝะธะต ะพัะฟัะฐะฒะปะตะฝะพ: {name}")
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะฟะพะทะดัะฐะฒะปะตะฝะธั: {e}", exc_info=True)


async def check_birthdays():
    """ะัะพะฒะตัะบะฐ ะดะฝะตะน ัะพะถะดะตะฝะธั ะธ ะพัะฟัะฐะฒะบะฐ ะฟะพะทะดัะฐะฒะปะตะฝะธะน"""
    global user_birthdays
    
    try:
        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        today = now.strftime("%d.%m")  # ะคะพัะผะฐั DD.MM
        
        logger.info(f"[BIRTHDAY] ะัะพะฒะตัะบะฐ ะดะฝะตะน ัะพะถะดะตะฝะธั ะฝะฐ {today}")
        
        # ะะตะทะพะฟะฐัะฝะฐั ะธัะตัะฐัะธั ะฟะพ ัะปะพะฒะฐัั
        if not isinstance(user_birthdays, dict):
            logger.warning(f"[BIRTHDAY] user_birthdays ะฝะต ัะฒะปัะตััั ัะปะพะฒะฐััะผ: {type(user_birthdays)}")
            return
        
        for user_id, user_data in list(user_birthdays.items()):
            # ะัะพะฒะตััะตะผ, ััะพ user_id ะธ user_data ะฒะฐะปะธะดะฝั
            if user_id is None:
                logger.warning(f"[BIRTHDAY] ะัะพะฟััะบะฐะตะผ ะทะฐะฟะธัั ั None user_id")
                continue
            if user_data is None:
                logger.warning(f"[BIRTHDAY] ะัะพะฟััะบะฐะตะผ ะทะฐะฟะธัั ั None user_data ะดะปั user_id={user_id}")
                continue
            if not isinstance(user_data, dict):
                logger.warning(f"[BIRTHDAY] user_data ะฝะต ัะฒะปัะตััั ัะปะพะฒะฐััะผ ะดะปั user_id={user_id}")
                continue
            
            birthday = user_data.get("birthday")
            if birthday is None:
                logger.warning(f"[BIRTHDAY] ะัะพะฟััะบะฐะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั {user_id} ะฑะตะท birthday")
                continue
            
            if birthday == today:
                logger.info(f"[BIRTHDAY] ะกะตะณะพะดะฝั ะะ ั: {user_data.get('name', 'Unknown')}")
                await send_birthday_congratulation(user_id, user_data)
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะฟัะพะฒะตัะบะธ: {e}", exc_info=True)


async def birthday_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะฟัะพะฒะตัะบะธ ะดะฝะตะน ัะพะถะดะตะฝะธั (ะบะฐะถะดัะน ะดะตะฝั ะฒ 9:00)"""
    global bot_running
    
    logger.info("[BIRTHDAY] ะะปะฐะฝะธัะพะฒัะธะบ ะดะฝะตะน ัะพะถะดะตะฝะธั ะทะฐะฟััะตะฝ")
    
    while bot_running:
        try:
            await asyncio.sleep(3600)  # ะัะพะฒะตััะตะผ ะบะฐะถะดัะน ัะฐั
            
            now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
            current_hour = now.hour
            current_minute = now.minute
            
            # ะัะพะฒะตััะตะผ ะฒ 9:00 ัััะฐ
            if current_hour == 9 and current_minute == 0:
                logger.info("[BIRTHDAY] ะัะตะผั 9:00 โ ะฟัะพะฒะตััะตะผ ะดะฝะธ ัะพะถะดะตะฝะธั")
                await check_birthdays()
                
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะฒ ะฟะปะฐะฝะธัะพะฒัะธะบะต: {e}")
            await asyncio.sleep(60)


def init_birthdays_on_startup():
    """ะะฝะธัะธะฐะปะธะทะฐัะธั ะดะฝะตะน ัะพะถะดะตะฝะธั ะฟัะธ ะทะฐะฟััะบะต ะฑะพัะฐ"""
    global user_birthdays
    
    try:
        load_birthdays()
        logger.info(f"[BIRTHDAY] ะะฝะธัะธะฐะปะธะทะฐัะธั ะทะฐะฒะตััะตะฝะฐ. ะะฝะตะน ัะพะถะดะตะฝะธั: {len(user_birthdays)}")
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะธะฝะธัะธะฐะปะธะทะฐัะธะธ: {e}")


async def fetch_tips_from_url(url: str, category: str) -> List[str]:
    """ะะพะปััะตะฝะธะต ัะพะฒะตัะพะฒ ั ะฒะตะฑ-ัััะฐะฝะธัั"""
    tips = []
    try:
        async with httpx.AsyncClient(timeout=30.0) as client:
            response = await client.get(url, follow_redirects=True)
            response.raise_for_status()
            
            soup = BeautifulSoup(response.text, 'html.parser')
            
            # ะัะตะผ ะฟะฐัะฐะณัะฐัั ั ัะพะฒะตัะฐะผะธ
            paragraphs = soup.find_all('p')
            
            for p in paragraphs:
                text = p.get_text().strip()
                if len(text) > 50 and len(text) < 500:
                    if not any(word in text.lower() for word in ['ะฟะพะดะฟะธัะธัะตัั', 'ัะธัะฐะนัะต ัะฐะบะถะต', 'ะฐะฒัะพั:', 'ะดะฐัะฐ:', 'copyright']):
                        tips.append(text)
            
            logger.info(f"[TIPS] ะะพะปััะตะฝะพ {len(tips)} ัะพะฒะตัะพะฒ ั {url}")
            
    except Exception as e:
        logger.error(f"[TIPS] ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ {url}: {e}")
    
    return tips


async def update_tips_cache():
    """ะะฑะฝะพะฒะปะตะฝะธะต ะบััะฐ ัะพะฒะตัะพะฒ ะธะท ะธะฝัะตัะฝะตัะฐ"""
    global _tips_cache
    
    current_time = time.time()
    if current_time - _tips_cache["last_update"] < CACHE_DURATION:
        logger.info("[TIPS] ะัะฟะพะปัะทัะตะผ ะบััะธัะพะฒะฐะฝะฝัะต ัะพะฒะตัั")
        return
    
    logger.info("[TIPS] ะะฑะฝะพะฒะปัะตะผ ัะพะฒะตัั ะธะท ะธะฝัะตัะฝะตัะฐ...")
    
    sources = {
        "running": [
            "https://marathonec.ru/kak-nachat-begat/",
            "https://marathonec.ru/topics/running/training/",
        ],
        "recovery": [],
        "equipment": [
            "https://marathonec.ru/kak-vybrat-krossovki-dlya-bega/",
            "https://marathonec.ru/odezhda-dlya-bega-osenyu/",
            "https://marathonec.ru/topics/running/gear/",
        ]
    }
    
    local_advice = {
        "running": [
            "ะะฐัะธะฝะฐะน ะฑะตะณะฐัั ะผะตะดะปะตะฝะฝะพ โ ัะฒะพะน ะฟัะปัั ะฝะต ะดะพะปะถะตะฝ ะฟัะตะฒััะฐัั 130-140 ัะด/ะผะธะฝ ะฝะฐ ะฟะตัะฒัั ััะตะฝะธัะพะฒะบะฐั.",
            "ะะต ัะฒะตะปะธัะธะฒะฐะน ะดะธััะฐะฝัะธั ะฑะพะปััะต ัะตะผ ะฝะฐ 10% ะฒ ะฝะตะดะตะปั โ ััะพ ัะฝะธะถะฐะตั ัะธัะบ ััะฐะฒะผ.",
            "ะะตะณะฐะน ะฒ ัะตะผะฟะต, ะฒ ะบะพัะพัะพะผ ัั ะผะพะถะตัั ัะฐะทะณะพะฒะฐัะธะฒะฐัั. ะัะปะธ ะทะฐะดััะฐะตัััั โ ะทะฐะผะตะดะปัะนัั.",
            "ะงะตัะตะดะพะฒะฐะฝะธะต ะฑะตะณะฐ ะธ ัะพะดัะฑั (2 ะผะธะฝ ะฑะตะณ + 1 ะผะธะฝ ัะพะดัะฑะฐ) โ ะพัะปะธัะฝัะน ัะฟะพัะพะฑ ะฝะฐัะฐัั ะฑะตะณะฐัั.",
            "ะะต ะฟัะพะฟััะบะฐะน ัะฐะทะผะธะฝะบั! 5-10 ะผะธะฝัั ะปัะณะบะพะน ัะพะดัะฑั ะธ ะดะธะฝะฐะผะธัะตัะบะพะน ัะฐัััะถะบะธ ะฟะตัะตะด ะฑะตะณะพะผ ะพะฑัะทะฐัะตะปัะฝั.",
            "ะะพัะปะต 3-4 ะฝะตะดะตะปั ัะตะณัะปััะฝะพะณะพ ะฑะตะณะฐ ัั ะทะฐะผะตัะธัั, ััะพ ััะฐะป ะฑะตะณะฐัั ะปะตะณัะต ะธ ะดะพะปััะต.",
            "ะะฝัะตัะฒะฐะปัะฝัะน ะฑะตะณ (ัะตัะตะดะพะฒะฐะฝะธะต ะฑััััะพะณะพ ะธ ะผะตะดะปะตะฝะฝะพะณะพ) โ ัััะตะบัะธะฒะฝัะน ัะฟะพัะพะฑ ัะปัััะธัั ะฒัะฝะพัะปะธะฒะพััั.",
            "ะัะฐะฒะธะปัะฝะฐั ัะตัะฝะธะบะฐ: ะฟัะธะทะตะผะปะตะฝะธะต ะฟะพะด ัะฐะท, ะฝะต ะฝะฐ ะฟััะบั; ัะฟะธะฝะฐ ัะพะฒะฝะฐั, ะฒะทะณะปัะด ะฒะฟะตััะด.",
        ],
        "recovery": [
            "ะะพัะปะต ะฟัะพะฑะตะถะบะธ ะพะฑัะทะฐัะตะปัะฝะพ ัะดะตะปะฐะน ะทะฐะผะธะฝะบั: 5-10 ะผะธะฝัั ะผะตะดะปะตะฝะฝะพะน ัะพะดัะฑั.",
            "ะะฐัััะถะบะฐ ะฟะพัะปะต ะฑะตะณะฐ ะดะพะปะถะฝะฐ ะฑััั ััะฐัะธัะตัะบะพะน โ ัะดะตัะถะธะฒะฐะน ะฟะพะทั 20-30 ัะตะบัะฝะด.",
            "ะะตะน ะฒะพะดั ััะฐะทั ะฟะพัะปะต ััะตะฝะธัะพะฒะบะธ โ 200-300 ะผะป, ะฟะพัะพะผ ะฟะตะน ะฟะพ ะถะฐะถะดะต ะฒ ัะตัะตะฝะธะต ะดะฝั.",
            "ะกะพะฝ โ ะณะปะฐะฒะฝัะน ะธะฝััััะผะตะฝั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั. 7-8 ัะฐัะพะฒ ัะฝะฐ ัะฒะพััั ััะดะตัะฐ.",
            "ะะตะปะฐะน ัะพัั ะฑั 1 ะฟะพะปะฝัะน ะดะตะฝั ะพัะดััะฐ ะฒ ะฝะตะดะตะปั โ ะผัััั ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐัััั ะธะผะตะฝะฝะพ ะฒ ะฟะพะบะพะต.",
            "ะะฑัะทะฐัะตะปัะฝั ะดะฝะธ ะพัะดััะฐ โ ัะพัั ัะพัะผั ะฟัะพะธััะพะดะธั ะฒ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะธ.",
        ],
        "equipment": [
            "ะะตะณะพะฒัะต ะบัะพััะพะฒะบะธ ะฝัะถะฝะพ ะผะตะฝััั ะบะฐะถะดัะต 500-800 ะบะผ โ ะธะทะฝะพัะตะฝะฝะฐั ะฐะผะพััะธะทะฐัะธั ะฒะตะดัั ะบ ััะฐะฒะผะฐะผ.",
            "ะะตัะธ ะบัะพััะพะฒะบะธ ะฝะฐ 0,5-1,5 ัะผ ะฑะพะปััะต ะพะฑััะฝะพะณะพ ัะฐะทะผะตัะฐ โ ะฝะพะณะฐ ะพัะตะบะฐะตั ะฟัะธ ะฑะตะณะต.",
            "ะะดะตะฒะฐะนัั ัะฐะบ, ััะพะฑั ะฒ ะฝะฐัะฐะปะต ััะตะฝะธัะพะฒะบะธ ะฑัะปะพ ะฟัะพัะปะฐะดะฝะพ โ ะฝะฐ ะพะดะธะฝ ัะปะพะน ะผะตะฝััะต, ัะตะผ ะดะปั ะฟัะพะณัะปะบะธ.",
            "ะกะธะฝัะตัะธัะตัะบะฐั ะพะดะตะถะดะฐ ะพัะฒะพะดะธั ะฒะปะฐะณั ะปัััะต ัะปะพะฟะบะฐ โ ะฒัะฑะธัะฐะน ัะตัะฝะธัะตัะบะธะต ัะบะฐะฝะธ.",
            "ะัะธะผะตััะน ะบัะพััะพะฒะบะธ ะฒะตัะตัะพะผ โ ะบ ะฒะตัะตัั ััะพะฟั ะฝะตะผะฝะพะณะพ ะพัะตะบะฐัั.",
            "ะัะฑะธัะฐะน ะบัะพััะพะฒะบะธ ะฟะพะด ัะธะฟ ะฟัะพะฝะฐัะธะธ: ะฝะตะนััะฐะปัะฝะฐั, ะฟะพะดะดะตัะถะบะฐ ะธะปะธ ะบะพะฝััะพะปั โ ะทะฐะฒะธัะธั ะพั ััะพะฟั.",
        ]
    }
    
    for cat, urls in sources.items():
        for url in urls:
            tips = await fetch_tips_from_url(url, cat)
            if tips:
                _tips_cache[cat].extend(tips)
                break
    
    for cat in ["running", "recovery", "equipment"]:
        if not _tips_cache[cat]:
            logger.info(f"[TIPS] ะัะฟะพะปัะทัะตะผ ะปะพะบะฐะปัะฝัะต ัะพะฒะตัั ะดะปั ะบะฐัะตะณะพัะธะธ {cat}")
            _tips_cache[cat] = local_advice.get(cat, []).copy()
    
    _tips_cache["last_update"] = current_time
    logger.info(f"[TIPS] ะัั ะพะฑะฝะพะฒะปัะฝ: running={len(_tips_cache['running'])}, recovery={len(_tips_cache['recovery'])}, equipment={len(_tips_cache['equipment'])}")


def get_random_tip(category: str = None) -> str:
    """ะะพะปััะตะฝะธะต ัะปััะฐะนะฝะพะณะพ ัะพะฒะตัะฐ ะธะท ะบััะฐ"""
    import random
    
    running_cats = ["running", "run", "ะฑะตะณ", "ะฑะตะณะฐัั", "ััะตะฝะธัะพะฒะบะธ"]
    recovery_cats = ["recovery", "restore", "ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต", "ะพัะดัั", "ะฟะธัะฐะฝะธะต"]
    equipment_cats = ["equipment", "gear", "ัะบะธะฟะธัะพะฒะบะฐ", "ะบัะพััะพะฒะบะธ", "ะพะดะตะถะดะฐ"]
    
    if category:
        cat_lower = category.lower()
        if cat_lower in running_cats:
            tips_list = _tips_cache["running"]
            cat_name = "ะฑะตะณะต"
        elif cat_lower in recovery_cats:
            tips_list = _tips_cache["recovery"]
            cat_name = "ะฒะพัััะฐะฝะพะฒะปะตะฝะธะธ"
        elif cat_lower in equipment_cats:
            tips_list = _tips_cache["equipment"]
            cat_name = "ัะบะธะฟะธัะพะฒะบะต"
        else:
            tips_list = (_tips_cache["running"] + _tips_cache["recovery"] + _tips_cache["equipment"])
            cat_name = "ะฑะตะณั, ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะธ ัะบะธะฟะธัะพะฒะบะต"
    else:
        tips_list = (_tips_cache["running"] + _tips_cache["recovery"] + _tips_cache["equipment"])
        cat_name = "ะฑะตะณั, ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะธ ัะบะธะฟะธัะพะฒะบะต"
    
    if not tips_list:
        return "๐ก ะกะพะฒะตั: ะะต ะทะฐะฑัะฒะฐะนัะต ัะตะณัะปััะฝะพ ััะตะฝะธัะพะฒะฐัััั ะธ ะฟัะธัะปััะธะฒะฐัััั ะบ ัะฒะพะตะผั ัะตะปั!"
    
    tip = random.choice(tips_list)
    return f"๐ก **ะกะพะฒะตั ะฟะพ {cat_name} (ะธััะพัะฝะธะบ: marathonec.ru):**\n\n{tip}"


MOTIVATION_QUOTES = [
    "๐ ะกะตะณะพะดะฝั ะพัะปะธัะฝัะน ะดะตะฝั, ััะพะฑั ััะฐัั ะปัััะต!",
    "๐ช ะะฐะถะดัะน ะบะผ โ ััะพ ะฟะพะฑะตะดะฐ ะฝะฐะด ัะพะฑะพะน!",
    "๐ ะะต ะถะดะธ ะธะดะตะฐะปัะฝะพะณะพ ะผะพะผะตะฝัะฐ. ะกะพะทะดะฐะน ะตะณะพ ัะฒะพะธะผ ะฑะตะณะพะผ!",
    "๐ฅ ะขะฒะพะน ะดะธะฒะฐะฝ ัะบััะฐะตั, ะฐ ะฑะตะณ ะถะดัั ัะตะฑั!",
    "โญ ะกะตะณะพะดะฝั ัั ะฑะตะถะธัั ะทะฐะฒััะฐัะฝัั ะฒะตััะธั ัะตะฑั!",
    "๐จ ะะพะปััะต ะฑะตะณะฐ โ ะผะตะฝััะต ัััะตััะฐ!",
    "๐ฏ ะัะพะฑะตะถะบะฐ ัะตะณะพะดะฝั = ัะปัะฑะบะฐ ะทะฐะฒััะฐ!",
    "๐ ะะปะฐะฒะฝัะน ะทะฐะฑะตะณ โ ัะพั, ะบะพัะพััะน ัั ะฝะฐัะฐะป!",
    "๐ ะัััะตะต ะฒัะตะผั ะดะปั ะฑะตะณะฐ โ ัะตะนัะฐั!",
    "๐ฅ ะขั ัะธะปัะฝะตะต, ัะตะผ ะดัะผะฐะตัั!",
    "โก ะะฐะถะดัะน ัะฐะณ ะฟัะธะฑะปะธะถะฐะตั ัะตะฑั ะบ ัะตะปะธ!",
    "๐ ะะพัะปะต ะฟัะพะฑะตะถะบะธ ะผะธั ััะฐะฝะพะฒะธััั ัััะต!",
    "๐ฅ ะะธะฒะฐะฝ โ ััะพ ะฝะต ัะฒะพะน ะดะพะผ. ะะพัะพะณะฐ โ ัะฒะพะน ะดััะณ!",
    "๐ช ะัะตัะฐ ัั ะฝะต ัะผะพะณ. ะกะตะณะพะดะฝั ัั ะฑะตะถะธัั!",
    "โญ ะะตะณ โ ััะพ ะปะตะบะฐัััะฒะพ, ะบะพัะพัะพะต ะฝะต ะฝัะถะฝะพ ะฟะพะบัะฟะฐัั!",
    "๐ ะะตะณ ััะธั ะฝะฐั, ััะพ ัะธะฝะธั ะฒัะตะณะดะฐ ะฑะปะธะถะต, ัะตะผ ะบะฐะถะตััั!",
    "๐ ะกะตะณะพะดะฝััะฝัั ััะตะฝะธัะพะฒะบะฐ โ ััะพ ะทะฐะฒััะฐัะฝัั ะฟะพะฑะตะดะฐ!",
    "๐ ะฃััะตะฝะฝัั ะฟัะพะฑะตะถะบะฐ ะดะฐัั ัะธะป ะฝะฐ ะฒะตัั ะดะตะฝั!",
    "๐ ะะตะณ โ ะปัััะธะน ัะฟะพัะพะฑ ะฟะตัะตะทะฐะณััะทะธัั ะณะพะปะพะฒั!",
    "๐ ะะฐะถะดัะน ะบััะณ โ ััะพ ัะฐะฝั ััะฐัั ะปัััะต!",
    "๐ค ะะตะณ ะพะฑัะตะดะธะฝัะตั ัะธะปัะฝัั ะดััะพะผ!",
    "๐ช ะะธะทะฝั ัะปะธัะบะพะผ ะบะพัะพัะบะฐ, ััะพะฑั ะฝะต ะฑะตะณะฐัั!",
    "๐งโโ๏ธ ะะตะณ โ ััะพ ะผะตะดะธัะฐัะธั ะฒ ะดะฒะธะถะตะฝะธะธ!",
    "๐ ะััะฐะฝะพะฒะธัั โ ะธ ะฟะพัะตััะตัั ัะตะผะฟ!",
    "๐ซ ะะตะณะธ ัะฐะบ, ะฑัะดัะพ ะฝะธะบัะพ ะฝะต ัะผะพััะธั!",
    "๐โโ๏ธ ะะต ะฑะตะณะฐะน ะพั ะฟัะพะฑะปะตะผ โ ะฑะตะณะธ ะบ ัะตะปัะผ!",
    "โญ ะะฐะถะดัะน ัะฟะพัััะผะตะฝ ะฑัะป ะฝะพะฒะธัะบะพะผ. ะะฐัะฝะธ ัะตะณะพะดะฝั!",
    "๐ฅ ะกะปะพะถะฝะพ ัะพะปัะบะพ ะฟะตัะฒัะต 5 ะบะผ. ะะฐะปััะต โ ะปะตะณัะต!",
    "๐ช ะขะฒะพะธ ะฝะพะณะธ ัะพะทะดะฐะฝั ะดะปั ะฟะพะปััะฐ!",
    "๐ ะะตะณ โ ััะพ ะฝะต ัะฐะฑะพัะฐ. ะญัะพ ัะฒะพะฑะพะดะฐ!",
    "๐ฏ ะะพััะฐะฒั ัะตะปั โ ะธ ะฑะตะณะธ ะบ ะฝะตะน!",
    "๐ฅ ะะพะปััะต ะฝะธะบะพะณะดะฐ ะฝะต ะฑัะดะตั ยซัะปะธัะบะพะผ ัะฐะฝะพยป ะธะปะธ ยซัะปะธัะบะพะผ ะฟะพะทะดะฝะพยป!",
    "๐โโ๏ธ ะะฐัะฝะธ ะฑะตะถะฐัั โ ะธ ัะฒะธะดะธัั, ะบะฐะบ ะธะทะผะตะฝะธััั ะถะธะทะฝั!",
    "โญ ะะธะฒะฐะฝ ะฝะต ะดะฐัั ัะตะฑะต ะผะตะดะฐะปั. ะ ะฑะตะณ โ ะดะฐัั!",
    "๐ฅ ะขัะตะฝะธัะพะฒะบะธ ัะพัะผะธัััั ัะฐัะฐะบัะตั!",
    "๐ช ะะตัั ะฒ ัะตะฑั โ ะธ ะฑะตะณะธ!",
    "๐ ะขั ะผะพะถะตัั ะฑะพะปััะต, ัะตะผ ะดัะผะฐะตัั!",
]

# ============== ะฆะะขะะขะซ ะะะะะะะฅ ะะะะฃะะะ ==============
GREAT_RUNNER_QUOTES = [
    "๐โโ๏ธ ยซะะตะณ โ ััะพ ัะฐะผัะน ัะตััะฝัะน ัะฟะพัั. ะะฝ ะฟะพะบะฐะทัะฒะฐะตั, ะบัะพ ัั ะฝะฐ ัะฐะผะพะผ ะดะตะปะต.ยป โ ะญะปะธัะด ะะธะฟัะพะณะต",
    "โก ยซะะต ะธะผะตะตั ะทะฝะฐัะตะฝะธั, ะฝะฐัะบะพะปัะบะพ ะฑััััะพ ัั ะฑะตะถะธัั. ะะฐะถะฝะพ, ััะพ ัั ะฝะต ะพััะฐะฝะฐะฒะปะธะฒะฐะตัััั.ยป โ ะกัะธะฒ ะัะตัะพะฝัะตะนะฝ",
    "๐ ยซะขะตะปะพ ะผะพะถะตั ะฒัะดะตัะถะฐัั ะฟะพััะธ ะฒัั. ะญัะพ ะฒะพะฟัะพั ัะธะปั ะฒะพะปะธ.ยป โ ะญะผะธะปั ะะฐัะพะฟะตะบ",
    "๐ช ยซะขั ะฝะต ะฟัะพะธะณัะฐะป, ะตัะปะธ ะฝะต ัะธะฝะธัะธัะพะฒะฐะป ะฟะตัะฒัะผ. ะขั ะฟัะพะธะณัะฐะป, ะตัะปะธ ะฝะต ะฝะฐัะฐะป.ยป โ ะฅะฐile ะะตะฑัะตัะตะปะฐััะธะต",
    "๐โโ๏ธ ยซะะตะณ โ ััะพ ัะฒะพะฑะพะดะฐ. ะะพะณะดะฐ ะฑะตะถะธัั, ัั ะบะพะฝััะพะปะธััะตัั ัะฒะพั ะถะธะทะฝั.ยป โ ะะธะปะป ะะฐัััะผะฐะฝ",
    "๐ฅ ยซะะตะณ โ ััะพ ะปะตะบะฐัััะฒะพ, ะบะพัะพัะพะต ะฒัะตะณะดะฐ ะฟะพะด ััะบะพะน.ยป โ ะะถะพัะดะถ ะจะธัะฐะฝ",
    "๐ ยซะะฐัะฐัะพะฝ โ ััะพ ะฝะต 42 ะบะผ. ะญัะพ 42 ะบะผ ะฒะพะฟัะพัะพะฒ ะบ ัะตะฑะต.ยป โ ะคัะตะด ะะตะฑะพั",
    "โญ ยซะะตะฒะฐะถะฝะพ, ะบะฐะบ ะผะตะดะปะตะฝะฝะพ ัั ะฑะตะถะธัั. ะขั ะฒัั ัะฐะฒะฝะพ ะฑััััะตะต ัะพะณะพ, ะบัะพ ัะธะดะธั ะฝะฐ ะดะธะฒะฐะฝะต.ยป โ ะะถะพะฝ ะะธะฝะณะฐะผ",
    "๐ฅ ยซะัะปะธ ัั ััะฒััะฒัะตัั ะฑะพะปั, ะทะฝะฐัะธั, ัั ะตัั ะถะธะฒ. ะัะพะดะพะปะถะฐะน ะฑะตะถะฐัั.ยป โ ะะฐะฐะฒะพ ะััะผะธ",
    "๐ ยซะฆะตะปั ะฝะต ะฒัะตะณะดะฐ ะดะพะปะถะฝะฐ ะฑััั ะดะพััะธะณะฝััะฐ. ะะฝะพะณะดะฐ ะดะพััะฐัะพัะฝะพ ะฟัะพััะพ ะฑะตะถะฐัั ะบ ะฝะตะน.ยป โ ะะพะดะถะตั ะะฐะฝะฝะธััะตั",
    "๐ ยซะะฐะถะดัะน ะบััะณ โ ััะพ ัะฐะฝั ััะฐัั ะปัััะต. ะะต ัะฟัััะธ ะตะณะพ.ยป โ ะะฐะฐะฒะพ ะััะผะธ",
    "๐ซ ยซะขััะดะฝัะน ะดะตะฝั ะฝะฐ ััะตะฝะธัะพะฒะบะต โ ััะพ ะปัะณะบะธะน ะดะตะฝั ะฝะฐ ัะพัะตะฒะฝะพะฒะฐะฝะธัั.ยป โ ะะธะปะป ะะฐัััะผะฐะฝ",
    "๐ฏ ยซะะตะณ โ ััะพ ัะฐะฝะตั ะผะตะถะดั ัะตะปะพะผ ะธ ะฒะพะปะตะน.ยป โ ะญะผะธะปั ะะฐัะพะฟะตะบ",
    "๐ฅ ยซะขั ะฑะตะถะธัั ะฝะต ะดะปั ัะพะณะพ, ััะพะฑั ะฟะพััะดะตัั. ะขั ะฑะตะถะธัั, ััะพะฑั ะถะธัั.ยป โ ะกัะธะฒ ะัะตัะพะฝัะตะนะฝ",
    "๐โโ๏ธ ยซะะธะบะฐะบะพะน ะฒะตัะตั ะฝะต ะผะพะถะตั ะพััะฐะฝะพะฒะธัั ัะพะณะพ, ะบัะพ ัะถะต ัะตัะธะป ะฑะตะถะฐัั.ยป โ ะญะปะธัะด ะะธะฟัะพะณะต",
    "๐ช ยซะะตะณ ััะธั ะฝะฐั, ััะพ ะฟะฐะดะฐัั โ ััะพ ะฝะพัะผะฐะปัะฝะพ. ะะปะฐะฒะฝะพะต โ ะฟะพะดะฝะธะผะฐัััั.ยป โ ะฅะฐile ะะตะฑัะตัะตะปะฐััะธะต",
    "โญ ยซะคะธะฝะธัะฝะฐั ะฟััะผะฐั โ ััะพ ัะพะปัะบะพ ะฝะฐัะฐะปะพ ัะฒะพะตะณะพ ัะปะตะดัััะตะณะพ ะทะฐะฑะตะณะฐ.ยป โ ะคัะตะด ะะตะฑะพั",
    "๐ ยซะกะตะบัะตั ะฝะต ะฒ ัะพะผ, ััะพะฑั ะฑะตะณะฐัั ะฑััััะพ. ะกะตะบัะตั ะฒ ัะพะผ, ััะพะฑั ะฑะตะถะฐัั.ยป โ ะะพะดะถะตั ะะฐะฝะฝะธััะตั",
    "โก ยซะะตะณ โ ััะพ ะฟะพัะทะธั ะดะฒะธะถะตะฝะธั ะธ ะผัะทัะบะฐ ะดััะธ.ยป โ ะะถะพัะดะถ ะจะธัะฐะฝ",
    "๐ ยซะะพะณะดะฐ ะดัะผะฐะตัั, ััะพ ะฝะต ะผะพะถะตัั โ ัั ะผะพะถะตัั. ะัะพััะพ ะฟะพะฒะตัั.ยป โ ะกัะธะฒ ะัะตัะพะฝัะตะนะฝ",
]

# ============== ะะะะะะะะะฏ ะะ ะะะฎ ะะะะะะะะฏ ==============
BIRTHDAY_WISHES = [
    "๐ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะะตะปะฐั ะฑะตะณะฐัั ะฑััััะตะต ะฒะตััะฐ, ะฟัะตะพะดะพะปะตะฒะฐัั ะปัะฑัะต ะดะธััะฐะฝัะธะธ ะธ ะฒัะตะณะดะฐ ะดะพััะธะณะฐัั ัะฒะพะธั ัะตะปะตะน! ๐",
    "๐ {name}, ะฟะพะทะดัะฐะฒะปัั! ะัััั ะบะฐะถะดัะน ัะฒะพะน ะทะฐะฑะตะณ ะฟัะธะฝะพัะธั ัะฐะดะพััั, ะฝะพะฒัะต ะฟะพะฑะตะดั ะธ ะพัะปะธัะฝะพะต ะฝะฐัััะพะตะฝะธะต! ๐โโ๏ธ",
    "๐ {name}, ั ะะ! ะะตะปะฐั ัะธะป, ะฒัะฝะพัะปะธะฒะพััะธ ะธ ะฒัะตะณะดะฐ ัะพัะพัะตะน ะฟะพะณะพะดั ะดะปั ะฟัะพะฑะตะถะตะบ! โ๏ธ",
    "๐ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะัััั ะฑัะดะตั ะผะฝะพะณะพ ะบะธะปะพะผะตััะพะฒ, ะผะฐะปะพ ััะฐะฒะผ ะธ ะผะฝะพะณะพ ัะฐะดะพััะธ ะพั ะฑะตะณะฐ! ๐ช",
    "๐ {name}, ะฟะพะทะดัะฐะฒะปัั! ะะตะปะฐั ะทะดะพัะพะฒัั, ัะฝะตัะณะธะธ ะธ ะฝะพะฒัั ะปะธัะฝัั ัะตะบะพัะดะพะฒ! ๐",
    "๐ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะัััั ะฑะตะณ ะฟัะธะฝะพัะธั ััะพะปัะบะพ ะถะต ัะฐะดะพััะธ, ัะบะพะปัะบะพ ัั ะฟัะธะฝะพัะธัั ะฒ ะฝะฐั ัะฐั! โค๏ธ",
    "๐ {name}, ั ะะ! ะะตะปะฐั ะฟัะตะพะดะพะปะตะฒะฐัั ะฒัะต ะฟัะตะฟััััะฒะธั ะธ ะฒัะตะณะดะฐ ัะธะฝะธัะธัะพะฒะฐัั ั ัะปัะฑะบะพะน! ๐",
    "๐ {name}, ะฟะพะทะดัะฐะฒะปัั! ะัััั ะบะฐะถะดัะน ะดะตะฝั ะฝะฐัะธะฝะฐะตััั ั ัะปัะฑะบะธ ะธ ะทะฐะบะฐะฝัะธะฒะฐะตััั ะดะพะฒะพะปัะฝะพะน ัััะฐะปะพัััั! ๐โโ๏ธ",
    "โจ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะะตะปะฐั ะผะฝะพะณะพ ะดััะทะตะน-ะตะดะธะฝะพะผััะปะตะฝะฝะธะบะพะฒ ะธ ะบััััั ะทะฐะฑะตะณะพะฒ! ๐",
    "๐ฏ {name}, ั ะะ! ะัััั ัะตะปะธ ะฑัะดัั ะดะพััะธะณะฝััั, ะฐ ะฝะพะฒัะต ะณะพัะธะทะพะฝัั โ ะฟะพะบะพัะตะฝั! ๐ฏ",
    "๐ซ {name}, ะฟะพะทะดัะฐะฒะปัั! ะะตะปะฐั never stop running ะธ always finish strong! ๐",
    "๐ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะัััั ัััะตะฝะฝะธะต ะฟัะพะฑะตะถะบะธ ะดะฐัั ัะฝะตัะณะธั ะฝะฐ ะฒะตัั ะดะตะฝั! โ๏ธ",
    "๐๏ธ {name}, ั ะะ! ะะตะปะฐั ะผะตะดะฐะปะตะน, ะบัะฑะบะพะฒ ะธ ะฝะตะทะฐะฑัะฒะฐะตะผัั ัะพัะตะฒะฝะพะฒะฐะฝะธะน! ๐ฅ",
    "๐ {name}, ะฟะพะทะดัะฐะฒะปัั! ะขั โ ะทะฒะตะทะดะฐ ะฝะฐัะตะณะพ ะฑะตะณะพะฒะพะณะพ ะบะปัะฑะฐ! ะัััั ัะธัะตัั ะตัั ัััะต! ๐",
    "๐จ {name}, ั ะะฝัะผ ัะพะถะดะตะฝะธั! ะะตะปะฐั, ััะพะฑั ะถะธะทะฝั ะฑัะปะฐ ััะบะพะน, ะบะฐะบ ัะฐะทะฝะพัะฒะตัะฝัะต ะบัะพััะพะฒะบะธ! ๐",
]

# ============== ะกะะะจะะซะ ะะฃะะะขะะะฌะกะขะะ ==============
FUNNY_INSULTS = [
    "ะขั ะบะฐะบ ะฑัะพะบะบะพะปะธ โ ะฝะธะบัะพ ะฝะต ะทะฝะฐะตั, ะทะฐัะตะผ ัั ะฝัะถะตะฝ, ะธ ะฒัะต ะดะตะปะฐัั ะฒะธะด, ััะพ ัะตะฑั ะฝะตั.",
    "ะัะปะธ ะฑั ััะฟะพััั ะฑัะปะฐ ะพะปะธะผะฟะธะนัะบะธะผ ะฒะธะดะพะผ ัะฟะพััะฐ, ัั ะฑั ัะถะต ะฒัะธะณัะฐะป ะทะพะปะพัะพ, ัะตัะตะฑัะพ ะธ ะฑัะพะฝะทั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ.",
    "ะขั ะตะดะธะฝััะฒะตะฝะฝัะน ัะตะปะพะฒะตะบ, ั ะบะพัะพัะพะณะพ Wi-Fi ัะฐะฑะพัะฐะตั ะฑััััะตะต, ัะตะผ ัะฒะพะธ ะผะพะทะณะธ.",
    "ะขะฒะพั ะปะพะณะธะบะฐ ะบะฐะบ wi-fi ะฒ ะผะตััะพ โ ะตััั, ะฝะพ ัะพะปะบั ะฝะพะปั.",
    "ะขั ะดัะผะฐะตัั, ััะพ ัะฒะพั ะผะฝะตะฝะธะต ะฒะฐะถะฝะพ? ะญัะพ ะผะธะปะพ. ะัะฐะฒะดะฐ, ะผะธะปะพ.",
    "ะฏ ะฑั ะฝะฐะทะฒะฐะป ัะตะฑั ะธะดะธะพัะพะผ, ะฝะพ ัะพะณะดะฐ ะฑั ั ัะพะฒัะฐะป, ะฐ ั ัะตะฑะต ัะฐะบะพะณะพ ะฝะต ะฟะพะทะฒะพะปัั.",
    "ะขั ะบะฐะบ ะนะพะณััั ั ะธัััะบัะธะผ ััะพะบะพะผ โ ะปะตะถะฐะป-ะปะตะถะฐะป, ะฐ ะฟะพัะพะผ ะฒัะฑัะพัะธะปะธ.",
    "ะัะปะธ ะฑั ะฝะตัะดะฐัะธ ะฑัะปะธ ะบะพะฝะบัััะพะผ ะบัะฐัะพัั, ัั ะฑั ะบะพัะพะปะตะฒะฐ ะฑะฐะปะฐ.",
    "ะขะฒะพั ัััะฐัะตะณะธั ะถะธะทะฝะธ: ยซะะฒะพัั ะฟัะพะฝะตัััยป. ะ ะฒะตะดั ะฝะต ะฟัะพะฝะตัะปะพ.",
    "ะขั ะบะฐะบ ะฑัะผะตัะฐะฝะณ โ ะฒะพะทะฒัะฐัะฐะตัััั, ะฝะพ ะฝะธะบัะพ ััะพะณะพ ะฝะต ัะพัะตั.",
    "ะัะผะฐะตัั, ัั ะฒะฐะถะตะฝ? ะกะฒะตัะบะฐ ะฒ ัะพััะต ัะพะถะต ะดัะผะฐะตั, ััะพ ะพะฝะฐ ะณะปะฐะฒะฝะฐั, ะฟะพะบะฐ ะตั ะฝะต ะทะฐะดัะปะธ.",
    "ะขั ะบะฐะบ ะฟะฐะทะป โ 1000 ะดะตัะฐะปะตะน, ะฝะพ ะบะฐััะธะฝะบะฐ ะฝะต ัะบะปะฐะดัะฒะฐะตััั.",
    "ะขะฒะพั ัะฒะตัะตะฝะฝะพััั ะฒ ัะตะฑะต ะฒะพััะธัะฐะตั. ะ ะฟัะณะฐะตั. ะ ะพัะฝะพะฒะฝะพะผ ะฟัะณะฐะตั.",
    "ะัะปะธ ะฑั ะณะปัะฟะพััั ะฑัะปะฐ ะฑะพะปัั, ัั ะฑั ะพัะฐะป ะฝะฐ ะฒะตัั ะผะธั.",
    "ะขั ะบะฐะบ ะฐะบะบัะผัะปััะพั โ ะฟะพะบะฐ ะทะฐััะถะฐะตัั, ัะถะต ัะฐะทััะดะธะปัั.",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฒัั ะฟะพััะธัั ะทะฐัะปัะถะธะฒะฐะตั ะพัะดะตะปัะฝะพะน ะฝะฐะณัะฐะดั.",
    "ะขั ะบะฐะบ ะธะฝัะตัะฝะตั โ ัะพ ัะฐะฑะพัะฐะตั, ัะพ ะฝะตั, ะฐ ัะพะปะบั ะพั ัะตะฑั ะบะฐะบ ะพั ัะพะปัะฝะพะณะพ ะพะณัััะฐ ะฒ ัะพะบะพะปะฐะดะต.",
    "ะะฐะถะดัะน ัะฐะท, ะบะพะณะดะฐ ัั ะพัะบััะฒะฐะตัั ัะพั, ั ะฟะพะฝะธะผะฐั, ะฟะพัะตะผั ะฝะตะบะพัะพััะต ะปัะดะธ ะฒัะฑะธัะฐัั ะผะพะปัะฐะฝะธะต.",
    "ะขั ะบะฐะบ ะบะฐะฝะฐะปะธะทะฐัะธั โ ะฒัะต ัะตะฑั ัะตัะฟัั, ะฝะพ ะฝะธะบัะพ ะฝะต ัะพัะตั ั ัะพะฑะพะน ะพะฑัะฐัััั.",
    "ะขะฒะพั ะปะพะณะธะบะฐ ัะปะพะผะฐะฝะฐ ัะธะปัะฝะตะต, ัะตะผ ัะบัะฐะฝ ั ะฑะฐะฑััะบะธะฝะพะณะพ ัะตะปะตัะพะฝะฐ.",
    "ะขั ะตะดะธะฝััะฒะตะฝะฝัะน ัะตะปะพะฒะตะบ, ะบะพัะพััะน ัะผัะดััะตััั ัะฟะฐััั ะฝะฐ ัะพะฒะฝะพะผ ะผะตััะต, ะฝะพ ะฒ ะปัะถั ะฝะต ะฟะพะฟะฐะดะฐะตั.",
    "ะัะปะธ ะฑั ัะฒะพั ะณะปัะฟะพััั ะฑัะปะฐ ัะฝะตัะณะธะตะน, ะผั ะฑั ะทะฐะฑัะปะธ ะฟัะพ ะฝะตััั ะธ ะณะฐะท.",
    "ะขั ะบะฐะบ ัะฐะนะฝัะน ะฟะฐะบะตัะธะบ โ ัะฝะฐัะฐะปะฐ ะฒ ะณะพััััั ะฒะพะดั, ะฐ ะฟะพัะพะผ ะฒัะฑัะพัะธะปะธ.",
    "ะขะฒะพะธ ัะตัะตะฝะธั ััะถะต, ัะตะผ ะฟัะพะณะฝะพะท ะฟะพะณะพะดั ะฒ ะณะพัะฐั โ ะฝะตะฟะพะฝััะฝะพ ะธ ะฑะตัะฟะพะปะตะทะฝะพ.",
    "ะขั ะบะฐะบ ะปะธะผะพะฝ โ ะบะธัะปัะน, ะผะพััะธะฝะธัััะน ะธ ะพั ัะตะฑั ะฒัะต ะผะพััะฐััั.",
    "ะัะปะธ ะฑั ะฐะดะตะบะฒะฐัะฝะพััั ะฑัะปะฐ ะผัะทัะบะฐะปัะฝัะผ ะถะฐะฝัะพะผ, ัั ะฑั ะฝะต ะฟะพะฟะฐะป ะฒ ะฟะปะตะนะปะธัั.",
    "ะขั ะบะฐะบ ะฑะฐัะฐัะตะนะบะฐ โ ัะตะป ะฒ ัะฐะผัะน ะฝะตะฟะพะดัะพะดััะธะน ะผะพะผะตะฝั.",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฒัั ััะปะพะถะฝััั ะดะพััะพะนะฝะฐ ะะพะฑะตะปะตะฒัะบะพะน ะฟัะตะผะธะธ ะฟะพ ะธะดะธะพัะธะทะผั.",
    "ะขั ะบะฐะบ ะฟะปะพัะพะน ะฐะฝะตะบะดะพั โ ะฝะธะบัะพ ะฝะต ัะผะตัััั, ะฐ ัั ะฟัะพะดะพะปะถะฐะตัั ัะฐััะบะฐะทัะฒะฐัั.",
    "ะขะฒะพั ะปะพะณะธะบะฐ ะบะฐะบ ะฑััะตัะฑัะพะด โ ะฟะฐะดะฐะตั ะผะฐัะปะพะผ ะฒะฝะธะท, ะฒัะตะณะดะฐ.",
    "ะัะปะธ ะฑั ัะฒะพั ะถะธะทะฝั ะฑัะปะฐ ัะธะปัะผะพะผ, ััะพ ะฑัะป ะฑั ััะธะปะปะตั ั ะฟะปะพัะธะผ ะบะพะฝัะพะผ.",
    "ะขั ะบะฐะบ ััะฐััะน ัะพะปะพะดะธะปัะฝะธะบ โ ััะผะธั, ะฝะพ ะฝะธัะตะณะพ ะฟะพะปะตะทะฝะพะณะพ ะฝะต ัะพะดะตัะถะธั.",
    "ะขะฒะพั ััะฒััะฒะพ ัะผะพัะฐ ัะผะตัะปะพ ะธ ะฟะพัะพัะพะฝะตะฝะพ ะณะปัะฑะพะบะพ ะฒ ะฑัะฝะบะตัะต.",
    "ะขั ะบะฐะบ ัะฐััะผะฐ ะฒ ััะธ ัะฐัะฐ ะฝะพัะธ โ ะฒัะพะดะต ัะพัะตััั, ะฝะพ ะฟะพัะพะผ ะถะฐะปะตะตัั.",
    "ะัะปะธ ะฑั ัะฒะพั ัะฐะผะพะพัะตะฝะบะฐ ะฑัะปะฐ ัะฐะทะผะตัะพะผ, ะพะฝะฐ ะฑั ะฟะพะผะตััะธะปะฐัั ะฒ ะฝะฐะฟะตัััะพะบ.",
    "ะขั ะบะฐะบ ะดะฒะตัั ะฒ ะฟัะฑะปะธัะฝะพะผ ััะฐะปะตัะต โ ัะพะปะบะฝะตัั, ะฐ ัะฐะผ ัะฐะบะพะต...",
    "ะขะฒะพะธ ะผะพะทะณะธ ัะฐะฑะพัะฐัั ัะฐะบ ะผะตะดะปะตะฝะฝะพ, ััะพ ั ะผะพะณ ะฑั ะฟะตัะตะทะฐะณััะทะธัั ัััะฐะฝะธัั ะฑััััะตะต.",
    "ะขั ะบะฐะบ ะผะตะผ ั ะบะพัะธะบะพะผ โ ะฒัะต ัะผะพัััั, ะฝะพ ะฝะธะบัะพ ะฝะต ะฟะพะฝะธะผะฐะตั, ะฟะพัะตะผั ััะพ ัะผะตัะฝะพ.",
    "ะัะปะธ ะฑั ัั ะฑัะป ะฟัะพะณัะฐะผะผะพะน, ัะตะฑั ะฑั ัะดะฐะปะธะปะธ ะฑะตะท ะฒะพะทะผะพะถะฝะพััะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั.",
    "ะขั ะบะฐะบ ะทะพะฝัะธะบ ะฒ ะปะธะฒะตะฝั โ ะปะพะผะฐะตััั ะฒ ัะฐะผัะน ะฝัะถะฝัะน ะผะพะผะตะฝั.",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฒัั ะฟะพััะธัั โ ััะพ ัะฐะปะฐะฝั. ะะปะพะน ัะฐะปะฐะฝั.",
    "ะขั ะบะฐะบ ัะฝััะบะธ โ ะฟะพััะพัะฝะฝะพ ัะฐะทะฒัะทัะฒะฐะตัััั ะฒ ัะฐะผัะน ะฝะตัะดะพะฑะฝัะน ะผะพะผะตะฝั.",
    "ะัะปะธ ะฑั ะณะปัะฟะพััั ะฑัะปะฐ ะธัะบััััะฒะพะผ, ัั ะฑั ะะธะบะฐััะพ. ะะพ ััะพ ะฝะต ะธัะบััััะฒะพ.",
    "ะขั ะบะฐะบ ะฑัะผะฐะถะบะฐ โ ะผะฝัััั ะพั ะปัะฑะพะณะพ ะดัะฝะพะฒะตะฝะธั, ะฐ ัะพะปะบั ะฝะพะปั.",
    "ะขะฒะพั ะปะพะณะธะบะฐ ะบะฐะบ ัะบัะฐะฝ ัะตะปะตะฒะธะทะพัะฐ โ ัััะฝัะน ะธ ะฝะธัะตะณะพ ะฝะต ะฟะพะบะฐะทัะฒะฐะตั.",
    "ะขั ะบะฐะบ ัะพะปะฝัะต โ ะฒัะต ะทะฝะฐัั, ััะพ ัั ะตััั, ะฝะพ ะฝะธะบัะพ ะฝะต ัะพัะตั ะบ ัะตะฑะต.",
    "ะัะปะธ ะฑั ะฐะดะตะบะฒะฐัะฝะพััั ะฑัะปะฐ ะพะฟัะธะตะน, ัั ะฑั ะฒัะฑัะฐะป ยซะฒัะบะปััะตะฝะพยป.",
    "ะขั ะบะฐะบ ะผะตะดัะทะฐ โ ะผะตะดะปะตะฝะฝัะน, ะฑะตัะฟะพะปะตะทะฝัะน ะธ ะถะถัััั.",
    "ะขะฒะพะธ ัะตัะตะฝะธั ััะถะต, ัะตะผ ะณะพัะพัะบะพะฟ ะฒ ะดะตััะฒะพะน ะณะฐะทะตัะต.",
    "ะขั ะบะฐะบ ะปะพะถะบะฐ โ ะฒัะตะณะดะฐ ะพะฟะฐะทะดัะฒะฐะตัั, ะบะพะณะดะฐ ัะตะฑั ะธัะตัั.",
]

# ============== ะกะะะจะะซะ ะะะะะะะะะะขะซ ==============
FUNNY_COMPLIMENTS = [
    "ะขั ะบะฐะบ ัะพะปะฝัะต โ ะดะฐะถะต ัะตัะตะท ัััะธ ะฟัะพะฑะธะฒะฐะตัััั ะธ ะทะฐััะฐะฒะปัะตัั ะฒัะตั ัะปัะฑะฐัััั!",
    "ะขะฒะพั ัะปัะฑะบะฐ ัััะต, ัะตะผ ะผะพะน ัะบัะฐะฝ ะฒ ััะธ ัะฐัะฐ ะฝะพัะธ. ะกะตัััะทะฝะพ, ัั ัะฒะตัะธัั!",
    "ะัะปะธ ะฑั ัั ะฑัะป ะฟัะธะปะพะถะตะฝะธะตะผ, ั ะฑั ะฟะพััะฐะฒะธะป 5 ะทะฒัะทะด ะธ ะฝะฐะฟะธัะฐะป ะฒะพััะพัะถะตะฝะฝัะน ะพัะทัะฒ!",
    "ะขั ะบะฐะบ Wi-Fi โ ะฑะตะท ัะตะฑั ะถะธะทะฝั ะฑัะปะฐ ะฑั ะฝะตะฒะพะทะผะพะถะฝะฐ ะธ ะฟะพะปะฝะฐ ะณััััะธ.",
    "ะขะฒะพั ััะฒััะฒะพ ัะผะพัะฐ ะทะฐัะปัะถะธะฒะฐะตั ะพัะดะตะปัะฝะพะณะพ ะฟะฐะผััะฝะธะบะฐ ะฒ ัะตะฝััะต ะณะพัะพะดะฐ!",
    "ะขั ะบะฐะบ ะณะพัััะธะน ัะพะบะพะปะฐะด ะทะธะผะพะน โ ัะพะณัะตะฒะฐะตัั, ัะฐะดัะตัั ะธ ะฝะธะบะพะณะดะฐ ะฝะต ะฝะฐะดะพะตะดะฐะตัั!",
    "ะัะปะธ ะฑั ะฒัะต ะปัะดะธ ะฑัะปะธ ะบะฐะบ ัั, ะฒ ะผะธัะต ะฑั ะฝะต ะฑัะปะพ ะฒะพะนะฝ, ัะพะปัะบะพ ะบะพะฝัะตััั ะธ ะฒะตัะตัะธะฝะบะธ!",
    "ะขั ะบะฐะบ ะธะดะตะฐะปัะฝัะน ะฟะปะตะนะปะธัั โ ะบะฐะถะดะฐั ะฟะตัะฝั ะฒ ัะตะผั, ะธ ัะพัะตััั ัะปััะฐัั ะฑะตัะบะพะฝะตัะฝะพ!",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฟะพะดะฝะธะผะฐัั ะฝะฐัััะพะตะฝะธะต ะทะฐัะปัะถะธะฒะฐะตั ะะพะฑะตะปะตะฒัะบะพะน ะฟัะตะผะธะธ ะฟะพ ัะฐะดะพััะธ!",
    "ะขั ะบะฐะบ ะบะพั ะฝะฐ ะฟะพะดะพะบะพะฝะฝะธะบะต โ ะผะธะปัะน, ัะฟะพะบะพะนะฝัะน ะธ ะดะตะปะฐะตัั ะดะตะฝั ะปัััะต ะพะดะฝะธะผ ัะฒะพะธะผ ะฒะธะดะพะผ!",
    "ะัะปะธ ะฑั ัะฒะพั ะดะพะฑัะพัะฐ ะฑัะปะฐ ัะฝะตัะณะธะตะน, ะผั ะฑั ะทะฐะฑัะปะธ ะฟัะพ ะฒัะต ัะบะพะปะพะณะธัะตัะบะธะต ะฟัะพะฑะปะตะผั!",
    "ะขั ะบะฐะบ ัะฒะตะถะตะต ะฟะพััะตะปัะฝะพะต ะฑะตะปัั โ ะฟะพัะปะต ะพะฑัะตะฝะธั ั ัะพะฑะพะน ััะฒััะฒัะตัั ัะตะฑั ะพะฑะฝะพะฒะปัะฝะฝัะผ!",
    "ะขะฒะพั ะปะพะณะธะบะฐ ัะฐะฑะพัะฐะตั ะปัััะต, ัะตะผ ะผะพะน ะฑัะดะธะปัะฝะธะบ โ ะฒัะตะณะดะฐ ะฒะพะฒัะตะผั ะธ ะฝะธะบะพะณะดะฐ ะฝะต ะฟะพะดะฒะพะดะธั!",
    "ะขั ะบะฐะบ ะปัััะฐั ะฟะตัะฝั ะฒ ะผะพะตะน ะณะพะปะพะฒะต โ ะบัััะธัััั ะธ ะฝะต ะดะฐััั ะผะฝะต ะณััััะธัั!",
    "ะัะปะธ ะฑั ัั ะฑัะป ัะฟะตัะธะตะน, ัั ะฑัะป ะฑั ะบััะบัะผะพะน โ ะฟะพะปะตะทะฝัะน, ััะบะธะน ะธ ะดะตะปะฐะตัั ะฒัั ะปัััะต!",
    "ะขั ะบะฐะบ ะฟััะธัััะน ะฟะปะตะด ะทะธะผะพะน โ ัััะฝัะน, ััะฟะปัะน ะธ ะพั ัะตะฑั ะฝะต ัะพัะตััั ะพััะพะดะธัั!",
    "ะขะฒะพั ัะตัะฟะตะฝะธะต ะทะฐัะปัะถะธะฒะฐะตั ะพะปะธะผะฟะธะนัะบะพะณะพ ะทะพะปะพัะฐ ะฟะพ ัะฟะพะบะพะนััะฒะธั!",
    "ะขั ะบะฐะบ ะทะพะฝัะธะบ ะฒ ัะพะปะฝะตัะฝัะน ะดะตะฝั โ ะฝะตะพะถะธะดะฐะฝะฝะพ, ะฝะพ ะฟัะธััะฝะพ, ะธ ะฟะพะดะฝะธะผะฐะตั ะฝะฐัััะพะตะฝะธะต!",
    "ะัะปะธ ะฑั ั ะฟะธัะฐะป ะบะฝะธะณั ะพ ะบััััั ะปัะดัั, ัั ะฑัะป ะฑั ะฝะฐ ะบะฐะถะดะพะน ัััะฐะฝะธัะต!",
    "ะขั ะบะฐะบ ัััะตะฝะฝะธะน ะบะพัะต โ ะฑะพะดัะธัั, ัะฐะดัะตัั ะธ ะดะตะปะฐะตัั ัััะพ ะฒะตะปะธะบะพะปะตะฟะฝัะผ!",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฝะฐัะพะดะธัั ะฒััะพะด ัะฐะผ, ะณะดะต ั ะฒะธะถั ััะตะฝั, ะฒะดะพัะฝะพะฒะปัะตั ะผะตะฝั!",
    "ะขั ะบะฐะบ ะผะตะผ ั ะบะพัะธะบะพะผ โ ะฒัะต ัะผะพัััั ะฝะฐ ัะตะฑั ะธ ัะปัะฑะฐัััั, ะฝะต ะฟะพะฝะธะผะฐั ะฟะพัะตะผั!",
    "ะัะปะธ ะฑั ัั ะฑัะป ะฟัะพะณัะฐะผะผะพะน, ัั ะฑัะป ะฑั ะผะพะธะผ ะปัะฑะธะผัะผ ะฟัะธะปะพะถะตะฝะธะตะผ ั ะธะดะตะฐะปัะฝัะผ ัะตะนัะธะฝะณะพะผ!",
    "ะขั ะบะฐะบ ะฐัะพะผะฐั ัะฒะตะถะตะน ะฒัะฟะตัะบะธ โ ะฟัะพัะพะดะธัั ะผะธะผะพ ะธ ััะฐะทั ััะฐะฝะพะฒะธััั ัะพัะพัะพ!",
    "ะขะฒะพั ััะฒััะฒะพ ััะธะปั ะทะฐัะปัะถะธะฒะฐะตั ะพัะดะตะปัะฝะพะณะพ ะบะฐะฝะฐะปะฐ ะฝะฐ YouTube ั ะผะธะปะปะธะพะฝะฐะผะธ ะฟัะพัะผะพััะพะฒ!",
    "ะขั ะบะฐะบ ะบะพะผะฟะฐั ะฒ ะปะตัั โ ะฑะตะท ัะตะฑั ั ะฑั ัะพัะฝะพ ะทะฐะฑะปัะดะธะปัั ะธ ะณััััะธะป!",
    "ะัะปะธ ะฑั ัะฒะพั ัะฝะตัะณะธั ะฑัะปะฐ ัะปะตะบััะธัะตััะฒะพะผ, ัั ะฑั ะทะฐะฟะธัะฐะป ัะตะปัะน ะณะพัะพะด!",
    "ะขั ะบะฐะบ ะธะดะตะฐะปัะฝะฐั ัะพัะพะณัะฐัะธั โ ะตััะตััะฒะตะฝะฝัะน, ะบัะฐัะธะฒัะน ะธ ัะพัะตััั ัะผะพััะตัั ะฒะตัะฝะพ!",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ัะปััะฐัั ะทะฐัะปัะถะธะฒะฐะตั ััะฐััััะบั ยซะัััะธะน ัะปััะฐัะตะปั ะณะพะดะฐยป!",
    "ะขั ะบะฐะบ ััะฟะปะฐั ะฒะฐะฝะฝะฐ ะฟะพัะปะต ะดะพะปะณะพะณะพ ะดะฝั โ ัะฐััะปะฐะฑะปัะตัั, ััะฟะพะบะฐะธะฒะฐะตัั ะธ ะปะตัะธัั!",
    "ะัะปะธ ะฑั ัั ะฑัะป ัะฒะตัะบะพะผ, ัั ะฑัะป ะฑั ะฟะพะดัะพะปะฝััะพะผ โ ะฒัะตะณะดะฐ ัะผะพััะธัั ะฝะฐ ัะฒะตั ะธ ะดะฐัะธัั ัะฐะดะพััั!",
    "ะขั ะบะฐะบ ะปัััะธะน ะผะพะผะตะฝั ะฒ ัะธะปัะผะต โ ัะพัะตััั, ััะพะฑั ะพะฝ ะดะปะธะปัั ะฒะตัะฝะพ!",
    "ะขะฒะพั ะพะฑะฐัะฝะธะต ัะฐะฑะพัะฐะตั ะปัััะต, ัะตะผ ะผะพะน ะฟะฐัะพะปั ะฝะฐ ัะตะปะตัะพะฝะต โ ะฝะตะฒะพะทะผะพะถะฝะพ ัััะพััั!",
    "ะขั ะบะฐะบ ะฒะพะปัะตะฑะฝะฐั ัะฐะฑะปะตัะบะฐ ะพั ะณััััะธ โ ะพะดะฝะฐ ัะฒะพั ัะปัะฑะบะฐ โ ะธ ะฒัั ััะฐะฝะพะฒะธััั ัะพัะพัะพ!",
    "ะัะปะธ ะฑั ัั ะฑัะป ะบะฝะธะณะพะน, ั ะฑั ะฟัะพัะธัะฐะป ัะตะฑั ัััััั ัะฐะท ะธ ะฝะต ัััะฐะป!",
    "ะขั ะบะฐะบ ะฟะตัะฒะพะต ัััะตะฝะฝะตะต ัะพะปะฝัะต โ ะฝะตะถะฝะพะต, ััะฟะปะพะต ะธ ะพะฑะตัะฐะตั ะพัะปะธัะฝัะน ะดะตะฝั!",
    "ะขะฒะพั ะพัะฝะพัะตะฝะธะต ะบ ะถะธะทะฝะธ ะทะฐัะปัะถะธะฒะฐะตั ะพัะดะตะปัะฝะพะณะพ ะผะพัะธะฒะฐัะธะพะฝะฝะพะณะพ ะฒััััะฟะปะตะฝะธั!",
    "ะขั ะบะฐะบ ะปัััะธะน ะดััะณ, ะบะพัะพััะน ะฒัะตะณะดะฐ ััะดะพะผ, ะดะฐะถะต ะบะพะณะดะฐ ัั ะดะฐะปะตะบะพ!",
    "ะัะปะธ ะฑั ัะฒะพะน ะฟะพะทะธัะธะฒ ะฑัะป ะฒะธัััะพะผ, ั ะฑั ัะพัะตะป ะทะฐัะฐะทะธัััั ะธะผ ะฝะฐะฒัะตะณะดะฐ!",
    "ะขั ะบะฐะบ ะบะพะฝัะตัั ะปัะฑะธะผะพะน ะณััะฟะฟั โ ะณัะพะผะบะธะน, ััะบะธะน ะธ ะพััะฐะฒะปัะตั ะฝะตะทะฐะฑัะฒะฐะตะผัะต ัะผะพัะธะธ!",
    "ะขะฒะพั ะธัะบัะตะฝะฝะพััั ะพัะปะตะฟะปัะตั ะผะตะฝั ะบะฐะบ ัะพะฝะฐัะธะบ ะฒ ัะตะผะฝะพัะต โ ััะบะพ ะธ ัะฐะดะพััะฝะพ!",
    "ะขั ะบะฐะบ ะดะพะผะฐัะฝะธะน ััั ะฟะพัะปะต ะดะพะปะณะพะน ะฟัะพะณัะปะบะธ โ ะถะตะปะฐะฝะฝัะน, ััะฟะปัะน ะธ ััะฟะพะบะฐะธะฒะฐััะธะน!",
    "ะัะปะธ ะฑั ัั ะฑัะป ััะฟะตัะณะตัะพะตะผ, ัะฒะพั ััะฟะตััะธะปะฐ ะฑัะปะฐ ะฑั โ ะดะตะปะฐัั ะฒัะตั ััะฐััะปะธะฒัะผะธ!",
    "ะขั ะบะฐะบ ะธะดะตะฐะปัะฝัะน ะธะฝะณัะตะดะธะตะฝั ะฒ ัะตัะตะฟัะต โ ะฑะตะท ัะตะฑั ะฑะปัะดะพ ะฑัะปะพ ะฑั ะฝะตะฟะพะปะฝัะผ!",
    "ะขะฒะพั ัะฟะพัะพะฑะฝะพััั ะฒะดะพัะฝะพะฒะปััั ัะฐะฑะพัะฐะตั ะปัััะต, ัะตะผ ะผะพะน ะปัะฑะธะผัะน ะฟะปะตะนะปะธัั ะดะปั ััะตะฝะธัะพะฒะพะบ!",
    "ะขั ะบะฐะบ ัะฐััะฒะตั ะฟะพัะปะต ะดะพะปะณะพะน ะฝะพัะธ โ ะพะฑะตัะฐะฝะธะต ะฝะพะฒะพะณะพ, ัะฒะตัะปะพะณะพ ะธ ะฟัะตะบัะฐัะฝะพะณะพ!",
    "ะัะปะธ ะฑั ัะฒะพั ะดะพะฑัะพัะฐ ะฑัะปะฐ ะผัะทัะบะพะน, ะพะฝะฐ ะทะฒััะฐะปะฐ ะฑั ะบะฐะบ ัะธะผัะพะฝะธั angels!",
    "ะขั ะบะฐะบ ัะพัั ะฝะฐ ะดะตะฝั ัะพะถะดะตะฝะธั โ ัะปะฐะดะบะธะน, ะถะตะปะฐะฝะฝัะน ะธ ะดะตะปะฐะตั ะดะตะฝั ะพัะพะฑะตะฝะฝัะผ!",
    "ะขะฒะพั ััะฒััะฒะพ ัะผะพัะฐ โ ััะพ ะบะฐะบ ัะตะบัะตัะฝัะน ะธะฝะณัะตะดะธะตะฝั ะฒ ะผะพัะผ ะปัะฑะธะผะพะผ ะฑะปัะดะต!",
    "ะขั ะบะฐะบ ะปัััะธะน ะผะพะผะตะฝั ะดะฝั โ ัะพัะตััั, ััะพะฑั ะพะฝ ะฟะพะฒัะพััะปัั ัะฝะพะฒะฐ ะธ ัะฝะพะฒะฐ!",
]

user_anon_state = {}

# ============== ะะะงะะซะ ะกะะะะฉะะะะฏ ==============
NIGHT_WARNINGS = [
    "๐ ะฅะฒะฐัะธั ะฟะธัะฐัั, ัะฟะฐัั ะฟะพัะฐ! ะขะตะปะตะฟัะทะธะบะธ ัะถะต ััะฝัะปะธ!",
    "๐ด ะะฐัะพะด, 22:00! ะะปะฐะฒะธะฐัััะฐ โ ะฒัะฐะณ ัะฝะฐ!",
    "๐๏ธ ะญะน, ะฒั ัะฐะผ! ะะฐะฒััะฐ ะฑะตะณะฐัั, ะฐ ะฒั ะฒ ัะตะปะตัะพะฝะต!",
    "๐ค ะัะพ ะฝะต ัะฟะธั โ ัะพั ะฝะต ะฑะตะณะฐะตั ัััะตะบัะธะฒะฝะพ!",
    "๐ ะะพัั ะฝะฐ ะดะฒะพัะต, ะฐ ะฒั ะฒัั ัะฐัะธัะตัั!",
    "๐ฑ ะั ัะพัะธัะต ะทะฐะฒััะฐ ะฑะตะณะฐัั ะบะฐะบ ะทะพะผะฑะธ?",
    "๐ญ ะฅะฒะฐัะธั ะธะณัะฐัั ะฒ ะฝะพัะฝัั ะณะตัะพะตะฒ, ะธะดะธัะต ัะฟะฐัั!",
    "๐ฎ ะะพะปัะตะฑััะฒะพ ะทะฐะฒััะฐัะฝะตะณะพ ะฑะตะณะฐ ะทะฐะฒะธัะธั ะพั ะฒะฐัะตะณะพ ัะฝะฐ!",
    "๐ฆฅ ะฃััะตะฝะฝะธะน ะฑะตะณ ะฝะฐัะธะฝะฐะตััั ั ะฒะตัะฝะพะณะพ ัะฝะฐ!",
    "๐ ะะฒัะทะดั ัะถะต ะฒััะปะธ, ะฐ ะฒั ะตัั ะฒ ัะฐัะต!",
]

# ============== ะะะะะะขะกะขะะะฏ ะะะะะะะฉะะะฆะะ ==============
RETURN_GREETINGS = [
    "ะะพะพะพ, ะบะฐะบะธะต ะปัะดะธ ะธ ะฑะตะท ะพััะฐะฝั! ๐ด๏ธ ะก ะฒะพะทะฒัะฐัะตะฝะธะตะผ, ะฑะพัั!",
    "๐ ะะณะพ, ะบัะพ ััะพ ะฒะตัะฝัะปัั! ะั ัะถะต ะทะฐะฑัะปะธ, ะบะฐะบ ัั ะฒัะณะปัะดะธัั!",
    "๐ฎ ะฃั ัั! ะะตะณะตะฝะดะฐ ะพะฑััะฒะธะปะฐัั! ะะดะต ัั ะฑัะป ััะพะปัะบะพ ะฒัะตะผะตะฝะธ?",
    "๐ ะกะผะพััะธัะต-ะบะฐ, ะฝะฐั ะณะตัะพะน ัะฝะพะฒะฐ ะฒ ัััะพั! ะัะพะฟะฐะดะฐะป โ ะฝะตะฑะพัั, ะผะฐัะฐัะพะฝ ะฑะตะณะฐะป!",
    "๐ ะัะพ ััะพ ะฟะธัะตั? ะัะธะทัะฐะบ ะธะท ะฟัะพัะปะพะณะพ! ะก ะฒะพะทะฒัะฐัะตะฝะธะตะผ ะฒ ะผะธั ะถะธะฒัั!",
    "๐ ะะฟะฐ-ะฝะฐ! ะะฐั ะบะพัะผะพะฝะฐะฒั ะฟัะธะทะตะผะปะธะปัั! ะะฐะบ ัะฐะผ ะฒ ะพัะฟััะบะต ะพั ัะฐัะฐ?",
    "๐ฉ ะะฐ! ะะฐ! ะะฐ! ะะฐะบะธะต ะณะพััะธ! ะะฐะฒะฝะพ ะฝะต ะฒะธะดะตะปะธัั, ะฐ ัั ะฒัั ะตัั ะฑะตะณะฐะตัั?",
    "๐ ะะตะณะตะฝะดะฐ ะฒ ัะฐัะต! ะั ัะถะต ัะพัะตะปะธ ะฒะตัะฐัั ัะฒะพะน ะฟะพัััะตั ะฝะฐ ััะตะฝั!",
    "๐ ะ, ะฒะตะปะธะบะธะน ะฒะตัะฝัะปัั! ะะตะท ัะตะฑั ัะฐั ัะพะฒัะตะผ ัะบััะฐะป (ะฝะตั)!",
    "๐ ะกะฒะตั ะผะพะน, ะฒะตัะฝัะปัั! ะะฐะถะดะฐะปะธัั ะผั ัะตะฑั, ะฐะถ ะฝะตัะบะพะปัะบะพ ะดะฝะตะน ะฟัะพัะปะพ!",
    "๐ช ะฆะธัะบ ะฒ ะณะพัะพะดะต! ะะฝะฐะผะตะฝะธัะพััั ะฟะพััะธะปะฐ ะฝะฐั ัะฒะพะธะผ ะฟัะธัััััะฒะธะตะผ!",
    "๐คด ะัะธะฝั ะฒะตัะฝัะปัั ะฒ ะบะพัะพะปะตะฒััะฒะพ! ะขัะพะฝ ะถะดัั, ะฒะฐัะต ะฒะตะปะธัะตััะฒะพ!",
    "๐ฆ ะฆะฐัั ะปะตัะพะฒ ะพะฑััะฒะธะปัั! ะัะพะฟะฐะดะฐะป โ ะพัะพัะธะปัั ะฝะฐ ะผะฐัะฐัะพะฝั?",
    "๐ธ ะะพะบ-ะทะฒะตะทะดะฐ ะฒ ัะฐัะต! ะะดะต ะฑัะป ะฝะฐ ะณะฐัััะพะปัั, ะฒ ะฑะตะณะต ะฟะพ ะฑะฐััะฐะฝะฐะผ?",
    "๐ ะะพัะพะฝะฐ ัะฟะฐะปะฐ! ะะพัะพะปั ะฒะตัะฝัะปัั ะฝะฐ ััะพะฝ! ะก ะฒะพะทะฒัะฐัะตะฝะธะตะผ!",
    "๐ง ะะฐะณ ะฒะตัะฝัะปัั ะธะท ะทะฐัะพัะตะฝะธั! ะงะฐัั ัะถะต ัะฐะฑะพัะฐัั?",
    "๐ฆธ ะกัะฟะตัะณะตัะพะน ัะฟะฐั ะผะธั ะธ ะฒะตัะฝัะปัั! ะะฐะบ ัะฐะผ, ะผะฝะพะณะพ ะทะปะฐ ะฟะพะฑะตะดะธะป?",
    "๐ญ ะะบััั ะฒััะตะป ะฝะฐ ััะตะฝั! ะะฐะฒะฝะพ ะฝะต ะฑัะปะธ ะฒ ะณะปะฐะฒะฝะพะน ัะพะปะธ!",
    "๐ฒ ะัะฐะบะพะฝ ะธะท ะฟะตัะตัั ะฒัะฟะพะปะท! ะะดะต ะฟัััะฐะปัั ะพั ะฑะตะณะพะฒัั ััะตะฝะธัะพะฒะพะบ?",
    "๐ฆ ะััะป ะฟัะธะปะตัะตะป! ะััะพะบะพ ะฟะฐัะธะป ะฝะฐะด ะฝะฐะผะธ ะฒัะต ััะธ ะดะฝะธ?",
]


# ============== ะะะะะะ ==============
async def get_weather() -> str:
    try:
        async with httpx.AsyncClient() as client:
            moscow_response = await client.get(
                "https://api.open-meteo.com/v1/forecast",
                params={
                    "latitude": 55.7558,
                    "longitude": 37.6173,
                    "current_weather": "true",
                },
                timeout=10.0,
            )
            spb_response = await client.get(
                "https://api.open-meteo.com/v1/forecast",
                params={
                    "latitude": 59.9343,
                    "longitude": 30.3351,
                    "current_weather": "true",
                },
                timeout=10.0,
            )

            moscow_data = moscow_response.json()
            spb_data = spb_response.json()

            moscow_temp = moscow_data["current_weather"]["temperature"]
            moscow_wind = moscow_data["current_weather"]["windspeed"]
            spb_temp = spb_data["current_weather"]["temperature"]
            spb_wind = spb_data["current_weather"]["windspeed"]

            weather_text = (
                f"๐ค **ะะพะณะพะดะฐ ัััะพะผ:**\n"
                f"๐ ะะพัะบะฒะฐ: **{moscow_temp}ยฐC**, ะฒะตัะตั {moscow_wind} ะบะผ/ั\n"
                f"๐ ะกะะฑ: **{spb_temp}ยฐC**, ะฒะตัะตั {spb_wind} ะบะผ/ั"
            )
            return weather_text
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะฟะพะปััะตะฝะธั ะฟะพะณะพะดั: {e}")
        return "๐ค ะะพะณะพะดะฐ ะฒัะตะผะตะฝะฝะพ ะฝะตะดะพัััะฟะฝะฐ"


# ============== ะฃะขะะะะะะ ะะะะะะขะกะขะะะ ==============
def get_day_theme() -> str:
    now = datetime.now(MOSCOW_TZ)
    day_name_en = now.strftime("%A")
    return DAY_THEMES.get(day_name_en, "๐ ะัะปะธัะฝัะน ะดะตะฝั ะดะปั ะฟัะพะฑะตะถะบะธ!")


def get_random_welcome() -> str:
    return random.choice(WELCOME_MESSAGES)


def get_random_motivation() -> str:
    return random.choice(MOTIVATION_QUOTES)


def get_random_insult() -> str:
    return random.choice(FUNNY_INSULTS)


def get_random_compliment() -> str:
    return random.choice(FUNNY_COMPLIMENTS)


# ============== ะะขะกะะะะะะะะะ ะกะขะะขะะกะขะะะ ==============
def update_daily_stats(user_id: int, user_name: str, message_type: str, photo_info: dict = None):
    """ะะฑะฝะพะฒะปะตะฝะธะต ะตะถะตะดะฝะตะฒะฝะพะน ััะฐัะธััะธะบะธ"""
    global daily_stats
    
    today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
    
    # ะะตะทะพะฟะฐัะฝะฐั ะธะฝะธัะธะฐะปะธะทะฐัะธั
    if not isinstance(daily_stats, dict) or daily_stats.get("date") != today:
        daily_stats = {
            "date": today,
            "total_messages": 0,
            "user_messages": {},
            "photos": [],
        }
    
    daily_stats["total_messages"] += 1
    
    # ะะฑะฝะพะฒะปะตะฝะธะต ัััััะธะบะฐ ัะพะพะฑัะตะฝะธะน ะฟะพะปัะทะพะฒะฐัะตะปั
    if user_id not in daily_stats["user_messages"]:
        daily_stats["user_messages"][user_id] = {
            "name": user_name,
            "count": 0,
        }
    daily_stats["user_messages"][user_id]["count"] += 1
    
    # ะะพะฑะฐะฒะปะตะฝะธะต ัะพัะพ ะฒ ััะฐัะธััะธะบั
    if message_type == "photo" and photo_info:
        daily_stats["photos"].append(photo_info)


# ============== ะะะกะงะะข ะะะะขะะะะ ==============
def calculate_user_rating(user_id: int) -> int:
    """ะะฐัััั ะพะฑัะตะณะพ ัะตะนัะธะฝะณะฐ ะฟะพะปัะทะพะฒะฐัะตะปั"""
    if user_id not in user_rating_stats:
        return 0
    
    stats = user_rating_stats[user_id]
    
    messages_points = stats["messages"] // POINTS_PER_MESSAGES
    photos_points = stats["photos"] // POINTS_PER_PHOTOS
    likes_points = stats["likes"] // POINTS_PER_LIKES
    replies_points = stats["replies"]  # ะะฐะถะดัะน ะพัะฒะตั = 1 ะฑะฐะปะป
    
    return messages_points + photos_points + likes_points + replies_points


def get_user_level(user_id: int) -> str:
    """ะะฟัะตะดะตะปะตะฝะธะต ััะพะฒะฝั ััะฐััะฝะธะบะฐ"""
    total_points = calculate_user_rating(user_id)
    
    # ะะฟัะตะดะตะปัะตะผ ััะพะฒะตะฝั ะฟะพ ะพัะบะฐะผ (ะพั ะฒััะพะบะพะณะพ ะบ ะฝะธะทะบะพะผั)
    if total_points >= USER_LEVELS["ะะตะณะตะฝะดะฐ ัะฐัะฐ"]:
        return "ะะตะณะตะฝะดะฐ ัะฐัะฐ"
    elif total_points >= USER_LEVELS["ะะธะดะตั"]:
        return "ะะธะดะตั"
    elif total_points >= USER_LEVELS["ะะบัะธะฒะฝัะน"]:
        return "ะะบัะธะฒะฝัะน"
    else:
        return "ะะพะฒะธัะพะบ"


def get_rating_details(user_id: int) -> dict:
    """ะะพะปััะตะฝะธะต ะดะตัะฐะปัะฝะพะน ััะฐัะธััะธะบะธ ัะตะนัะธะฝะณะฐ"""
    if user_id not in user_rating_stats:
        return {
            "name": "Unknown",
            "messages": 0,
            "photos": 0,
            "likes": 0,
            "replies": 0,
            "total_points": 0,
            "level": "ะะพะฒะธัะพะบ"
        }
    
    stats = user_rating_stats[user_id]
    level = get_user_level(user_id)
    
    return {
        "name": stats["name"],
        "messages": stats["messages"],
        "photos": stats["photos"],
        "likes": stats["likes"],
        "replies": stats["replies"],
        "total_points": calculate_user_rating(user_id),
        "level": level
    }


# ============== ะกะขะะขะะกะขะะะ ะะะะ ==============
def update_running_stats(user_id: int, user_name: str, distance: float, duration: int, calories: int):
    """ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัะธััะธะบะธ ะฑะตะณะฐ ะดะปั ััะฐััะฝะธะบะฐ"""
    global user_running_stats
    
    if user_id not in user_running_stats:
        user_running_stats[user_id] = {
            "name": user_name,
            "activities": 0,
            "distance": 0.0,
            "duration": 0,
            "calories": 0
        }
    
    user_running_stats[user_id]["activities"] += 1
    user_running_stats[user_id]["distance"] += distance
    user_running_stats[user_id]["duration"] += duration
    user_running_stats[user_id]["calories"] += calories


def get_top_runners() -> list:
    """ะะพะปััะตะฝะธะต ัะพะฟ-10 ะฑะตะณัะฝะพะฒ ะฟะพ ะบะธะปะพะผะตััะฐะผ ะทะฐ ะผะตััั"""
    global user_running_stats
    
    if not user_running_stats:
        return []
    
    # ะกะพััะธััะตะผ ะฟะพ ะดะธััะฐะฝัะธะธ
    runners = []
    for user_id, stats in user_running_stats.items():
        runners.append({
            "user_id": user_id,
            "name": stats["name"],
            "activities": stats["activities"],
            "distance": stats["distance"],
            "duration": stats["duration"],
            "calories": stats["calories"]
        })
    
    # ะกะพััะธััะตะผ ะฟะพ ะบะธะปะพะผะตััะฐะผ (ะฟะพ ัะฑัะฒะฐะฝะธั)
    runners.sort(key=lambda x: x["distance"], reverse=True)
    
    return runners[:10]


async def send_weekly_running_summary():
    """ะัะฟัะฐะฒะบะฐ ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ ะฟะพ ะฑะตะณั (ะฒะพัะบัะตัะตะฝัะต 23:00)"""
    global application, user_running_stats
    
    try:
        if not user_running_stats:
            logger.info("[RUNNING] ะะตั ะดะฐะฝะฝัั ะดะปั ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ")
            return
        
        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        week_num = now.isocalendar()[1]
        year = now.year
        
        # ะกัะธัะฐะตะผ ะพะฑััั ััะฐัะธััะธะบั
        total_activities = sum(stats["activities"] for stats in user_running_stats.values())
        total_distance = sum(stats["distance"] for stats in user_running_stats.values()) / 1000  # ะฒ ะบะผ
        total_calories = sum(stats["calories"] for stats in user_running_stats.values())
        
        # ะะพะปััะฐะตะผ ัะพะฟ ะฑะตะณัะฝะพะฒ
        top_runners = get_top_runners()
        
        weekly_text = f"๐โโ๏ธ **ะะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ ะฟะพ ะฑะตะณั (ะะตะดะตะปั #{week_num}, {year})**\n\n"
        
        # ะะฑัะฐั ััะฐัะธััะธะบะฐ ะฝะตะดะตะปะธ
        weekly_text += f"๐ **ะะฑัะฐั ััะฐัะธััะธะบะฐ ะฝะตะดะตะปะธ:**\n"
        weekly_text += f"๐โโ๏ธ ะัะตะณะพ ะฟัะพะฑะตะถะตะบ: {total_activities}\n"
        weekly_text += f"๐ ะะฑัะฐั ะดะธััะฐะฝัะธั: {total_distance:.1f} ะบะผ\n"
        weekly_text += f"๐ฅ ะกะพะถะถะตะฝะพ ะบะฐะปะพัะธะน: {total_calories}\n"
        weekly_text += f"๐ฅ ะฃัะฐััะฝะธะบะพะฒ ะฑะตะณะฐ: {len(user_running_stats)}\n\n"
        
        # ะขะพะฟ-3 ะฑะตะณัะฝะพะฒ
        if top_runners:
            medals = ["๐ฅ", "๐ฅ", "๐ฅ"]
            weekly_text += f"๐ **ะขะพะฟ ะฑะตะณัะฝะพะฒ ะฝะตะดะตะปะธ:**\n"
            for i, runner in enumerate(top_runners[:3]):
                distance_km = runner["distance"] / 1000
                safe_name = escape_markdown(runner['name'])
                weekly_text += f"{medals[i]} {safe_name} โ {distance_km:.1f} ะบะผ ({runner['activities']} ััะตะฝะธัะพะฒะพะบ)\n"
            weekly_text += "\n"
        
        # ะะฝะดะธะฒะธะดัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ ะฒัะตั
        weekly_text += "๐ **ะัะต ััะฐััะฝะธะบะธ:**\n"
        for runner in top_runners:
            distance_km = runner["distance"] / 1000
            safe_name = escape_markdown(runner['name'])
            weekly_text += f"โข {safe_name}: {distance_km:.1f} ะบะผ ({runner['activities']} ััะตะฝะธัะพะฒะพะบ)\n"
        
        # ะะพัะธะฒะฐัะธั
        weekly_text += "\n" + random.choice(GREAT_RUNNER_QUOTES)
        
        # ะัะฟัะฐะฒะปัะตะผ ะฒ ัะฐั
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                text=weekly_text,
                parse_mode="Markdown"
            )
            logger.info("[RUNNING] ะะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ ะฟะพ ะฑะตะณั ะพัะฟัะฐะฒะปะตะฝะฐ")
        
    except Exception as e:
        logger.error(f"[RUNNING] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ: {e}", exc_info=True)


async def send_monthly_running_summary():
    """ะัะฟัะฐะฒะบะฐ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ ะฟะพ ะฑะตะณั (ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ)"""
    global application, user_running_stats
    
    try:
        if not user_running_stats:
            logger.info("[RUNNING] ะะตั ะดะฐะฝะฝัั ะดะปั ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ")
            return
        
        now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        month_name = now.strftime("%B %Y")
        
        # ะกัะธัะฐะตะผ ะพะฑััั ััะฐัะธััะธะบั
        total_activities = sum(stats["activities"] for stats in user_running_stats.values())
        total_distance = sum(stats["distance"] for stats in user_running_stats.values()) / 1000  # ะฒ ะบะผ
        total_calories = sum(stats["calories"] for stats in user_running_stats.values())
        total_duration = sum(stats["duration"] for stats in user_running_stats.values())
        
        # ะะพะปััะฐะตะผ ัะพะฟ ะฑะตะณัะฝะพะฒ
        top_runners = get_top_runners()
        
        monthly_text = f"๐ **ะะถะตะผะตัััะฝะฐั ัะฒะพะดะบะฐ ะฟะพ ะฑะตะณั ({month_name})**\n\n"
        
        # ะะฑัะฐั ััะฐัะธััะธะบะฐ ะผะตัััะฐ
        monthly_text += f"๐ **ะัะพะณะธ ะผะตัััะฐ:**\n"
        monthly_text += f"๐โโ๏ธ ะัะตะณะพ ะฟัะพะฑะตะถะตะบ: {total_activities}\n"
        monthly_text += f"๐ ะะฑัะฐั ะดะธััะฐะฝัะธั: {total_distance:.1f} ะบะผ\n"
        monthly_text += f"โฑ๏ธ ะะฑัะตะต ะฒัะตะผั: {total_duration // 3600}ั {(total_duration % 3600) // 60}ะผ\n"
        monthly_text += f"๐ฅ ะกะพะถะถะตะฝะพ ะบะฐะปะพัะธะน: {total_calories}\n"
        monthly_text += f"๐ฅ ะฃัะฐััะฝะธะบะพะฒ ะฑะตะณะฐ: {len(user_running_stats)}\n\n"
        
        # ะขะพะฟ-3 ะฑะตะณัะฝะพะฒ ั ะผะตะดะฐะปัะผะธ
        if top_runners:
            medals = ["๐ฅ", "๐ฅ", "๐ฅ"]
            monthly_text += f"๐ **ะัััะธะต ะฑะตะณัะฝั ะผะตัััะฐ:**\n"
            for i, runner in enumerate(top_runners[:3]):
                distance_km = runner["distance"] / 1000
                hours = runner["duration"] // 3600
                minutes = (runner["duration"] % 3600) // 60
                safe_name = escape_markdown(runner['name'])
                monthly_text += f"{medals[i]} **{safe_name}**\n"
                monthly_text += f"   ๐ {distance_km:.1f} ะบะผ | โฑ๏ธ {hours}ั {minutes}ะผ | ๐ฅ {runner['calories']} ะบะบะฐะป\n\n"
        
        monthly_text += "๐ช **ะะพะทะดัะฐะฒะปัะตะผ ะฒัะตั ั ะพัะปะธัะฝัะผ ะผะตัััะตะผ! Keep running!**\n"
        
        # ะะพัะธะฒะฐัะธั
        monthly_text += "\n" + random.choice(GREAT_RUNNER_QUOTES)
        
        # ะัะฟัะฐะฒะปัะตะผ ะฒ ัะฐั
        if application and CHAT_ID:
            await application.bot.send_message(
                chat_id=CHAT_ID,
                text=monthly_text,
                parse_mode="Markdown"
            )
            logger.info("[RUNNING] ะะถะตะผะตัััะฝะฐั ัะฒะพะดะบะฐ ะฟะพ ะฑะตะณั ะพัะฟัะฐะฒะปะตะฝะฐ")
        
    except Exception as e:
        logger.error(f"[RUNNING] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ: {e}", exc_info=True)


def reset_monthly_running_stats():
    """ะกะฑัะพั ััะฐัะธััะธะบะธ ะฑะตะณะฐ ะฒ ะฝะพะฒัะน ะผะตััั"""
    global user_running_stats
    
    logger.info(f"[RUNNING] ะกะฑัะพั ััะฐัะธััะธะบะธ ะฑะตะณะฐ. ะกัะฐัะธััะธะบะฐ ะทะฐ ะผะตััั:")
    
    # ะะพะณะธััะตะผ ััะฐัะธััะธะบั ะฟะตัะตะด ัะฑัะพัะพะผ
    if user_running_stats:
        for user_id, stats in user_running_stats.items():
            logger.info(f"[RUNNING] {stats['name']}: {stats['activities']} ััะตะฝะธัะพะฒะพะบ, {stats['distance']/1000:.1f} ะบะผ")
    
    # ะกะฑัะฐััะฒะฐะตะผ ััะฐัะธััะธะบั
    user_running_stats.clear()
    logger.info("[RUNNING] ะกัะฐัะธััะธะบะฐ ะฑะตะณะฐ ัะฑัะพัะตะฝะฐ ะดะปั ะฝะพะฒะพะณะพ ะผะตัััะฐ")


async def send_point_notification(user_name: str, points: int, reason: str, total_points: int):
    """ะัะฟัะฐะฒะบะฐ ะฟัะฑะปะธัะฝะพะณะพ ัะฒะตะดะพะผะปะตะฝะธั ะพ ะฟะพะปััะตะฝะธะธ ะฑะฐะปะปะพะฒ"""
    global application
    
    logger.info(f"[NOTIFY] ะะพะฟััะบะฐ ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต: user={user_name}, points={points}, reason={reason}")
    logger.info(f"[NOTIFY] application={application}")
    
    if application is None:
        logger.error(f"[NOTIFY] โ application ัะฐะฒะตะฝ None! ะฃะฒะตะดะพะผะปะตะฝะธะต ะฝะต ะพัะฟัะฐะฒะปะตะฝะพ ะดะปั {user_name}")
        return
    
    try:
        # ะญะผะพะดะทะธ ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะฟัะธัะธะฝั ะฟะพะปััะตะฝะธั ะฑะฐะปะปะพะฒ
        reason_emojis = {
            "ัะพะพะฑัะตะฝะธั": "๐ฌ",
            "ัะพัะพ": "๐ท",
            "ะปะฐะนะบะธ": "โค๏ธ",
            "ะพัะฒะตัั": "๐ฌ"
        }
        
        emoji = reason_emojis.get(reason, "โญ")
        
        # ะะะะกะขะะ ัะตะบัั ะะะ ัะพัะผะฐัะธัะพะฒะฐะฝะธั Markdown
        notification_text = f"{emoji} {user_name} ะฟะพะปััะธะป(ะฐ) +{points} ะฑะฐะปะป(ะพะฒ) ะทะฐ {reason}!\n๐ ะัะตะณะพ ะฑะฐะปะปะพะฒ: {total_points}"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=notification_text,
        )
        
        logger.info(f"[NOTIFY] โ ะฃะฒะตะดะพะผะปะตะฝะธะต ะพัะฟัะฐะฒะปะตะฝะพ ะดะปั {user_name}")
        
        logger.info(f"ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ะฑะฐะปะปะฐั ะพัะฟัะฐะฒะปะตะฝะพ: {user_name} +{points}")
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัะฒะตะดะพะผะปะตะฝะธั ะพ ะฑะฐะปะปะฐั: {e}")


async def send_level_up_notification(user_name: str, new_level: str):
    """ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธั ะพ ะฟะพะฒััะตะฝะธะธ ััะพะฒะฝั"""
    if application is None:
        return
    
    try:
        level_emoji = LEVEL_EMOJIS.get(new_level, "โญ")
        
        # ะะะะกะขะะ ัะตะบัั ะะะ ัะพัะผะฐัะธัะพะฒะฐะฝะธั Markdown
        level_messages = {
            "ะะบัะธะฒะฝัะน": f"๐ ะะพะทะดัะฐะฒะปัะตะผ! {user_name} ะฟะตัะตััะป ะฒ ััะดั ะะบัะธะฒะฝัั ะฑะตะณัะฝะพะฒ!",
            "ะะธะดะตั": f"๐ ะฃัะฐ! {user_name} ััะฐะป ะะธะดะตัะพะผ ะฑะตะณะพะฒะพะณะพ ัะฐัะฐ!",
            "ะะตะณะตะฝะดะฐ ัะฐัะฐ": f"๐ ะะะ! {user_name} ะดะพััะธะณ ะทะฒะฐะฝะธั ะะตะณะตะฝะดั ัะฐัะฐ! ะญัะพ ะฒะตััะธะฝะฐ!"
        }
        
        notification_text = level_messages.get(new_level, f"๐ {user_name} ะฟะพะฒััะธะป(ะฐ) ััะพะฒะตะฝั ะดะพ {new_level}!")
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=notification_text,
        )
        
        logger.info(f"ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ะฟะพะฒััะตะฝะธะธ ััะพะฒะฝั: {user_name} -> {new_level}")
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัะฒะตะดะพะผะปะตะฝะธั ะพ ััะพะฒะฝะต: {e}")


def update_rating_stats(user_id: int, user_name: str, category: str, amount: int = 1) -> tuple:
    """
    ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัะธััะธะบะธ ัะตะนัะธะฝะณะฐ ั ะทะฐัะธัะพะน ะพั ะฝะฐะบัััะพะบ
    
    Returns: (success: bool, points_earned: int, message: str)
    """
    global user_rating_stats, user_current_level, user_message_times
    
    now = datetime.now(MOSCOW_TZ)
    today = now.strftime("%Y-%m-%d")
    current_time = now.timestamp()
    
    # ะะะฉะะขะ 1: ะัะพะฒะตัะบะฐ ะฝะฐ ัะปัะด ัะพะพะฑัะตะฝะธะน
    if category == "messages":
        if user_id not in user_message_times:
            user_message_times[user_id] = []
        
        # ะฃะดะฐะปัะตะผ ััะฐััะต ะทะฐะฟะธัะธ (ััะฐััะต 1 ะผะธะฝััั)
        user_message_times[user_id] = [
            t for t in user_message_times[user_id] 
            if current_time - t < 60
        ]
        
        # ะัะพะฒะตััะตะผ ะปะธะผะธั ัะพะพะฑัะตะฝะธะน ะฒ ะผะธะฝััั
        if len(user_message_times[user_id]) >= MAX_MESSAGES_PER_MINUTE:
            logger.info(f"ะะฐัะธัะฐ ะพั ัะปัะดะฐ: {user_name} ะฟัะตะฒััะธะป ะปะธะผะธั ัะพะพะฑัะตะฝะธะน")
            return False, 0, "ะกะปะธัะบะพะผ ะผะฝะพะณะพ ัะพะพะฑัะตะฝะธะน!"
        
        # ะะพะฑะฐะฒะปัะตะผ ะฒัะตะผั ัะตะบััะตะณะพ ัะพะพะฑัะตะฝะธั
        user_message_times[user_id].append(current_time)
    
    # ะะะฉะะขะ 2: ะัะพะฒะตัะบะฐ ะฝะฐ ะฟัะตะฒััะตะฝะธะต ะฑะฐะปะปะพะฒ ะฒ ัะฐั
    if user_id in user_rating_stats:
        # ะะพะดััะธััะฒะฐะตะผ ะฟัะธะผะตัะฝัะต ะฑะฐะปะปั ะทะฐ ะฟะพัะปะตะดะฝะธะน ัะฐั
        # (ัะฟัะพััะฝะฝะฐั ะฟัะพะฒะตัะบะฐ - ััะธัะฐะตะผ ะฟะพ ะพะฑัะธะผ ะดะฐะฝะฝัะผ)
        recent_points = (
            user_rating_stats[user_id]["messages"] // POINTS_PER_MESSAGES +
            user_rating_stats[user_id]["photos"] // POINTS_PER_PHOTOS +
            user_rating_stats[user_id]["likes"] // POINTS_PER_LIKES +
            user_rating_stats[user_id]["replies"]
        )
        
        # ะัะปะธ ั ะฟะพะปัะทะพะฒะฐัะตะปั ัะถะต ะผะฝะพะณะพ ะฑะฐะปะปะพะฒ, ะฟัะพะดะพะปะถะฐะตะผ (ััะพ ะฝะต ัะพัะฝะฐั ะฟัะพะฒะตัะบะฐ)
        # ะะปั ะทะฐัะธัั ะพั ะฝะฐะบัััะพะบ ะดะพะฑะฐะฒะธะผ ะทะฐะดะตัะถะบั ะฒ ะปะพะณะธะบั ะฝะฐัะธัะปะตะฝะธั
    
    # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
    if user_id not in user_rating_stats:
        user_rating_stats[user_id] = {
            "name": user_name,
            "messages": 0,
            "photos": 0,
            "likes": 0,
            "replies": 0,
            "last_update": today
        }
        user_current_level[user_id] = "ะะพะฒะธัะพะบ"
    
    # ะะฐะฟะพะผะธะฝะฐะตะผ ััะฐััะน ััะพะฒะตะฝั
    old_level = user_current_level.get(user_id, "ะะพะฒะธัะพะบ")
    
    # ะะฐะฟะพะผะธะฝะฐะตะผ ััะฐััะต ะทะฝะฐัะตะฝะธั ะดะปั ะฟะพะดััััะฐ ะฟัะธัะพััะฐ
    old_messages = user_rating_stats[user_id]["messages"]
    old_photos = user_rating_stats[user_id]["photos"]
    old_likes = user_rating_stats[user_id]["likes"]
    old_replies = user_rating_stats[user_id]["replies"]
    
    # ะะฑะฝะพะฒะปัะตะผ ััะฐัะธััะธะบั
    user_rating_stats[user_id][category] += amount
    
    # ะัะพะฒะตััะตะผ, ัะบะพะปัะบะพ ะฑะฐะปะปะพะฒ ะฝะฐัะธัะปะตะฝะพ ะทะฐ ััะพ ะดะตะนััะฒะธะต (ะฟัะธัะพัั)
    points_earned = 0
    if category == "messages":
        new_messages = user_rating_stats[user_id]["messages"]
        points_earned = (new_messages // POINTS_PER_MESSAGES) - (old_messages // POINTS_PER_MESSAGES)
    elif category == "photos":
        new_photos = user_rating_stats[user_id]["photos"]
        points_earned = (new_photos // POINTS_PER_PHOTOS) - (old_photos // POINTS_PER_PHOTOS)
    elif category == "likes":
        new_likes = user_rating_stats[user_id]["likes"]
        points_earned = (new_likes // POINTS_PER_LIKES) - (old_likes // POINTS_PER_LIKES)
    elif category == "replies":
        new_replies = user_rating_stats[user_id]["replies"]
        points_earned = new_replies - old_replies  # ะะฐะถะดัะน ะพัะฒะตั = 1 ะฑะฐะปะป
    
    # ะัะพะฒะตััะตะผ ะฝะพะฒัะน ััะพะฒะตะฝั
    new_level = get_user_level(user_id)
    user_current_level[user_id] = new_level
    
    return True, points_earned, "OK"


async def send_morning_greeting():
    global morning_message_id

    if application is None:
        logger.error("Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return

    try:
        weather = await get_weather()
        theme = get_day_theme()
        motivation = get_random_motivation()

        greeting_text = (
            f"๐ **ะะพะฑัะพะต ัััะพ, ะฑะตะณัะฝั!** ๐โโ๏ธ\n\n"
            f"{weather}\n\n"
            f"{theme}\n\n"
            f"{motivation}\n\n"
            f"๐ญ *ะะฐะฟะธัะธัะต ัะฒะพะธ ะฟะปะฐะฝั ะฝะฐ ัะตะณะพะดะฝั!*"
        )

        message = await application.bot.send_message(
            chat_id=CHAT_ID,
            text=greeting_text,
            parse_mode="Markdown",
        )

        morning_message_id = message.message_id
        logger.info(f"ะฃััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต ะพัะฟัะฐะฒะปะตะฝะพ: {morning_message_id}")

    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัััะตะฝะฝะตะณะพ ัะพะพะฑัะตะฝะธั: {e}")


async def morning_scheduler_task():
    global morning_scheduled_date

    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")

        if current_hour == 6 and current_minute == 0:
            if morning_scheduled_date != today_date:
                logger.info("ะัะตะผั 6:00 - ะพัะฟัะฐะฒะปัะตะผ ัััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต")
                try:
                    await send_morning_greeting()
                    morning_scheduled_date = today_date
                    logger.info("ะฃััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต ััะฟะตัะฝะพ ะพัะฟัะฐะฒะปะตะฝะพ")
                except Exception as e:
                    logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต: {e}")

        await asyncio.sleep(60)


# ============== ะะะคะะะะซะ ะะะะะะะฉะะ (10:30 ะะฃะะะ) ==============
COFFEE_MESSAGES = [
    "โ **ะ ะฝะต ะฟะพัะฐ ะปะธ ะฟะพ ะบะพัะตะนะบั?",
    "โ ะัะพ ัะตะณะพะดะฝั ะตัั ะฝะต ะฟะธะป ะบะพัะต? ะะพะดะฝะธะผะธัะต ััะบั!",
    "โ ะะพัะต โ ััะพ ะฝะต ะฝะฐะฟะธัะพะบ, ััะพ ัะธััะฐะป!",
    "โ ะญัะฟัะตััะพ, ะบะฐะฟััะธะฝะพ, ะปะฐััะต โ ะฒัะฑะธัะฐะนัะต ัะฒะพะน!",
    "โ ะะตะท ะบะพัะต ะฝะต ััะดะฐ, ะฝะต ััะดะฐ โ ะฝัะถะตะฝ ะบะพัะต!",
    "โ ะะพัะต ะผะฐััะตั, ะณะดะต ัั? ะงะฐัะบะฐ ะถะดัั!",
    "โ ะะพัะตะนะฝะฐั ะฟะฐัะทะฐ โ ัะฒััะตะฝะฝะพะต ะฒัะตะผั!",
    "โ ะัะพ ั ะฝะฐะผะธ? ะะพัะต ะถะดัั!",
    "โ ะฃััะพ ะฑะตะท ะบะพัะต โ ะบะฐะบ ะดะตะฝั ะฑะตะท ัะพะปะฝัะฐ!",
    "โ ะะพะณะฝะฐะปะธ ะฝะฐ ะบะพัะต! โ",
]

COFFEE_IMAGES = [
    "https://cdn-icons-png.flaticon.com/512/3028/3028993.png",  # ะงะฐัะบะฐ ะบะพัะต
    "https://cdn-icons-png.flaticon.com/512/2935/2935413.png",  # ะะพัะต
    "https://cdn-icons-png.flaticon.com/512/3127/3127421.png",  # ะกัะฐะบะฐะฝ ะบะพัะต
    "https://cdn-icons-png.flaticon.com/512/2246/2246910.png",  # ะััะถะบะฐ
    "https://cdn-icons-png.flaticon.com/512/2966/2966327.png",  # ะะพัะต
]


async def send_coffee_reminder():
    """ะัะฟัะฐะฒะบะฐ ะฝะฐะฟะพะผะธะฝะฐะฝะธั ะพ ะบะพัะต ั ะบะฐััะธะฝะบะพะน"""
    if application is None:
        logger.error("Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return

    try:
        import random
        
        coffee_text = random.choice(COFFEE_MESSAGES)
        coffee_image = random.choice(COFFEE_IMAGES)
        
        full_text = f"{coffee_text}\n\n๐ฅค ะัะตะผั ะฒะทะฑะพะดัะธัััั!"
        
        await application.bot.send_photo(
            chat_id=CHAT_ID,
            photo=coffee_image,
            caption=full_text,
            parse_mode="Markdown"
        )
        
        logger.info("[COFFEE] ะะฐะฟะพะผะธะฝะฐะฝะธะต ะพ ะบะพัะต ะพัะฟัะฐะฒะปะตะฝะพ")
        
    except Exception as e:
        logger.error(f"[COFFEE] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ: {e}")


async def coffee_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะฝะฐะฟะพะผะธะฝะฐะฝะธะน ะพ ะบะพัะต ะฒ 10:30 ะฟะพ ะฑัะดะฝัะผ"""
    
    while bot_running:
        try:
            await asyncio.sleep(30)  # ะัะพะฒะตััะตะผ ะบะฐะถะดัะต 30 ัะตะบัะฝะด
            
            now = datetime.now(MOSCOW_TZ)
            current_hour = now.hour
            current_minute = now.minute
            current_weekday = now.weekday()  # 0 = ะฟะพะฝะตะดะตะปัะฝะธะบ, 6 = ะฒะพัะบัะตัะตะฝัะต
            
            # ะัะพะฒะตััะตะผ: 10:30 ะธ ะฑัะดะฝะธะน ะดะตะฝั (ะฟะฝ-ะฟั)
            if current_hour == 10 and current_minute == 30 and current_weekday < 5:
                logger.info("[COFFEE] ะัะตะผั 10:30 - ะพัะฟัะฐะฒะปัะตะผ ะฝะฐะฟะพะผะธะฝะฐะฝะธะต ะพ ะบะพัะต")
                try:
                    await send_coffee_reminder()
                    # ะะดัะผ ะผะธะฝััั, ััะพะฑั ะฝะต ะพัะฟัะฐะฒะธัั ะดะฒะฐะถะดั
                    await asyncio.sleep(60)
                except Exception as e:
                    logger.error(f"[COFFEE] ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต: {e}")
        
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[COFFEE] ะัะธะฑะบะฐ ะฒ ะฟะปะฐะฝะธัะพะฒัะธะบะต: {e}")


# ============== ะะะะะะะะซะ ะะะะะะะฉะะ (13:00 ะะฃะะะ) ==============
LUNCH_SENT_TODAY = False

LUNCH_MESSAGES = [
    "๐ฝ๏ธ **ะฅะฒะฐัะธั ัะฐะฑะพัะฐัั! ะัะตะผั ะพะฑะตะดะฐ!**",
    "๐ฝ๏ธ ะญะน, ะฒั ัะฐะผ! ะะปะฐะฒะธะฐัััั ะพัะปะพะถะธะปะธ? ะะฑะตะด!",
    "๐ฝ๏ธ 13:00 โ ััะพ ัะฒััะพะต! ะัะต ะฝะฐ ะพะฑะตะด!",
    "๐ฝ๏ธ ะะฐะฑะพัะฐ ะฟะพะดะพะถะดัั, ะฐ ะพะฑะตะด โ ะฝะตั!",
    "๐ฝ๏ธ ะัะพ ะตัั ะฝะต ะพะฑะตะดะฐะป? ะกัะพะฟ, ัะฐะฑะพัะฐ!",
    "๐ฝ๏ธ ะะพ ะฒัััะตัะธ ัะตัะตะท ัะฐั โ ั ะฝะฐ ะพะฑะตะด!",
    "๐ฝ๏ธ ะฅะฒะฐัะธั ััะบะฐัั ะฒ ะบะฝะพะฟะบะธ! ะะธะฒะพั ััะตะฑัะตั ะฒะฝะธะผะฐะฝะธั!",
    "๐ฝ๏ธ ะะฑะตะด โ ััะพ ะฝะต ะฟะตัะตััะฒ, ััะพ ัะผััะป ะถะธะทะฝะธ!",
    "๐ฝ๏ธ ะะฝะฐะตัะต, ััะพ ะปัััะต, ัะตะผ ัะฐะฑะพัะฐ ะฒ 13:00? ะะฑะตะด!",
    "๐ฝ๏ธ ะกัะพะฟ! ะะฑะตะด! ะะธะบะฐะบะธั ะพัะณะพะฒะพัะพะบ!",
]

async def send_lunch_reminder():
    """ะัะฟัะฐะฒะบะฐ ะฝะฐะฟะพะผะธะฝะฐะฝะธั ะพะฑ ะพะฑะตะดะต"""
    global LUNCH_SENT_TODAY
    
    if application is None:
        logger.error("[LUNCH] Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return
    
    try:
        lunch_text = random.choice(LUNCH_MESSAGES)
        
        full_text = f"{lunch_text}\n\n๐ ะัะธััะฝะพะณะพ ะฐะฟะฟะตัะธัะฐ, ะฑะตะณัะฝั!"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=full_text,
            parse_mode="Markdown"
        )
        
        LUNCH_SENT_TODAY = True
        logger.info("[LUNCH] ะะฐะฟะพะผะธะฝะฐะฝะธะต ะพะฑ ะพะฑะตะดะต ะพัะฟัะฐะฒะปะตะฝะพ")
        
    except Exception as e:
        logger.error(f"[LUNCH] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ: {e}")


async def lunch_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะฝะฐะฟะพะผะธะฝะฐะฝะธะน ะพะฑ ะพะฑะตะดะต ะฒ 13:00 ะฟะพ ะฑัะดะฝัะผ"""
    global LUNCH_SENT_TODAY
    
    while bot_running:
        try:
            await asyncio.sleep(30)  # ะัะพะฒะตััะตะผ ะบะฐะถะดัะต 30 ัะตะบัะฝะด
            
            now = datetime.now(MOSCOW_TZ)
            current_hour = now.hour
            current_minute = now.minute
            current_weekday = now.weekday()  # 0 = ะฟะพะฝะตะดะตะปัะฝะธะบ, 6 = ะฒะพัะบัะตัะตะฝัะต
            today_date = now.strftime("%Y-%m-%d")
            
            # ะกะฑัะฐััะฒะฐะตะผ ัะปะฐะณ ะฒ ะฟะพะปะฝะพัั
            if current_hour == 0 and current_minute == 0:
                LUNCH_SENT_TODAY = False
            
            # ะัะพะฒะตััะตะผ: 13:00 ะธ ะฑัะดะฝะธะน ะดะตะฝั (ะฟะฝ-ะฟั)
            if current_hour == 13 and current_minute == 0 and current_weekday < 5:
                if not LUNCH_SENT_TODAY:
                    logger.info("[LUNCH] ะัะตะผั 13:00 - ะพัะฟัะฐะฒะปัะตะผ ะฝะฐะฟะพะผะธะฝะฐะฝะธะต ะพะฑ ะพะฑะตะดะต")
                    try:
                        await send_lunch_reminder()
                    except Exception as e:
                        logger.error(f"[LUNCH] ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต: {e}")
        
        except asyncio.CancelledError:
            break
        except Exception as e:
            logger.error(f"[LUNCH] ะัะธะฑะบะฐ ะฒ ะฟะปะฐะฝะธัะพะฒัะธะบะต: {e}")


# ============== ะะะขะะะะฆะะะะะซะ ะกะะะะฉะะะะฏ ==============
async def send_motivation():
    """ะัะฟัะฐะฒะบะฐ ะผะพัะธะฒะฐัะธะพะฝะฝะพะณะพ ัะพะพะฑัะตะฝะธั"""
    if application is None:
        return

    try:
        motivation = get_random_motivation()
        message = await application.bot.send_message(
            chat_id=CHAT_ID,
            text=f"๐ช {motivation}",
            parse_mode="Markdown",
        )
        logger.info(f"ะะพัะธะฒะฐัะธั ะพัะฟัะฐะฒะปะตะฝะฐ: {message.message_id}")
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะผะพัะธะฒะฐัะธะธ: {e}")


async def motivation_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะผะพัะธะฒะฐัะธะพะฝะฝัั ัะพะพะฑัะตะฝะธะน ะฝะฐ 11:00, 16:00, 21:00"""
    global motivation_sent_times
    
    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")
        
        # ะกะฑัะฐััะฒะฐะตะผ ัะฟะธัะพะบ ะพัะฟัะฐะฒะปะตะฝะฝัั ัะพะพะฑัะตะฝะธะน ะฒ ะฟะพะปะฝะพัั
        if now.hour == 0 and current_minute == 0:
            motivation_sent_times = []
        
        # ะัะตะผั ะดะปั ะพัะฟัะฐะฒะบะธ ะผะพัะธะฒะฐัะธะธ
        motivation_hours = [11, 16, 21]  # 11:00, 16:00, 21:00
        
        for hour in motivation_hours:
            if current_hour == hour and current_minute == 0:
                # ะัะพะฒะตััะตะผ, ะฝะต ะพัะฟัะฐะฒะปัะปะธ ะปะธ ัะถะต ัะตะณะพะดะฝั ะฒ ััะพ ะฒัะตะผั
                key = f"{today_date}_{hour}"
                if key not in motivation_sent_times:
                    logger.info(f"ะัะตะผั {hour}:00 - ะพัะฟัะฐะฒะปัะตะผ ะผะพัะธะฒะฐัะธั")
                    try:
                        await send_motivation()
                        motivation_sent_times.append(key)
                        logger.info("ะะพัะธะฒะฐัะธั ััะฟะตัะฝะพ ะพัะฟัะฐะฒะปะตะฝะฐ")
                    except Exception as e:
                        logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ะผะพัะธะฒะฐัะธะธ: {e}")
        
        await asyncio.sleep(60)


# ============== ะะะะะะะะะะฏ ะกะะะะะ ==============
async def get_top_liked_photos() -> list:
    """ะะพะปััะตะฝะธะต ัะพะฟ ัะพัะพ ะฟะพ ะปะฐะนะบะฐะผ ั ัะฒะตะดะพะผะปะตะฝะธัะผะธ"""
    global daily_stats, user_rating_stats, user_current_level
    
    if not daily_stats["photos"]:
        return []
    
    try:
        # ะะฑะฝะพะฒะปัะตะผ ะบะพะปะธัะตััะฒะพ ะปะฐะนะบะพะฒ ะดะปั ะบะฐะถะดะพะณะพ ัะพัะพ ะธ ะพะฑัะธะน ัะตะนัะธะฝะณ
        updated_photos = []
        for photo in daily_stats["photos"]:
            try:
                reactions = await application.bot.get_message_reactions(
                    chat_id=CHAT_ID,
                    message_id=photo["message_id"],
                )
                # ะกัะธัะฐะตะผ ัะพะปัะบะพ reaction "๐" (thumbs up)
                like_count = 0
                for reaction in reactions:
                    for choice in reaction.choices:
                        if choice.emoji == "๐":
                            like_count = choice.count
                            break
                
                # ะะฑะฝะพะฒะปัะตะผ ะปะฐะนะบะธ ะฒ ัะตะนัะธะฝะณะต ะฐะฒัะพัะฐ ัะพัะพ
                if like_count > 0 and photo["user_id"] in user_rating_stats:
                    old_likes = user_rating_stats[photo["user_id"]]["likes"]
                    user_rating_stats[photo["user_id"]]["likes"] = like_count
                    
                    # ะัะพะฒะตััะตะผ, ัะบะพะปัะบะพ ะฑะฐะปะปะพะฒ ะทะฐ ะปะฐะนะบะธ ะฝะฐัะธัะปะตะฝะพ
                    old_points = old_likes // POINTS_PER_LIKES
                    new_points = like_count // POINTS_PER_LIKES
                    points_earned = new_points - old_points
                    
                    if points_earned > 0:
                        photo_author_name = user_rating_stats[photo["user_id"]]["name"]
                        total = calculate_user_rating(photo["user_id"])
                        await send_point_notification(photo_author_name, points_earned, "ะปะฐะนะบะธ", total)
                        
                        # ะัะพะฒะตััะตะผ ะฟะพะฒััะตะฝะธะต ััะพะฒะฝั
                        new_level = get_user_level(photo["user_id"])
                        old_level = user_current_level.get(photo["user_id"], "ะะพะฒะธัะพะบ")
                        if new_level != old_level and new_level != "ะะพะฒะธัะพะบ":
                            user_current_level[photo["user_id"]] = new_level
                            await send_level_up_notification(photo_author_name, new_level)
                
                updated_photos.append({
                    "file_id": photo["file_id"],
                    "user_id": photo["user_id"],
                    "likes": like_count,
                    "message_id": photo["message_id"],
                })
            except Exception:
                # ะัะปะธ ะฝะต ัะดะฐะปะพัั ะฟะพะปััะธัั ะปะฐะนะบะธ, ััะธัะฐะตะผ ะบะฐะบ 0
                updated_photos.append({
                    "file_id": photo["file_id"],
                    "user_id": photo["user_id"],
                    "likes": 0,
                    "message_id": photo["message_id"],
                })
        
        # ะกะพััะธััะตะผ ะฟะพ ะปะฐะนะบะฐะผ ะธ ัะธะปััััะตะผ (ะผะธะฝะธะผัะผ 4)
        updated_photos.sort(key=lambda x: x["likes"], reverse=True)
        top_photos = [p for p in updated_photos if p["likes"] >= 4]
        
        return top_photos[:2]  # ะะพะทะฒัะฐัะฐะตะผ ะผะฐะบัะธะผัะผ 2 ัะพัะพ
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะฟะพะปััะตะฝะธั ัะพะฟ ัะพัะพ: {e}")
        return []


async def get_top_users() -> list:
    """ะะพะปััะตะฝะธะต ัะพะฟ 5 ะฐะบัะธะฒะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฟะพ ัะพะพะฑัะตะฝะธัะผ"""
    global daily_stats
    
    if not daily_stats["user_messages"]:
        return []
    
    # ะกะพััะธััะตะผ ะฟะพ ะบะพะปะธัะตััะฒั ัะพะพะฑัะตะฝะธะน
    sorted_users = sorted(
        daily_stats["user_messages"].items(),
        key=lambda x: x[1]["count"],
        reverse=True
    )
    
    # ะะพะทะฒัะฐัะฐะตะผ ัะพะฟ 5
    return [(user_id, data["name"], data["count"]) for user_id, data in sorted_users[:5]]


async def get_top_rated_users() -> list:
    """ะะพะปััะตะฝะธะต ัะพะฟ 10 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฟะพ ัะตะนัะธะฝะณั"""
    global user_rating_stats
    
    if not user_rating_stats:
        return []
    
    # ะกะพััะธััะตะผ ะฟะพ ะพะฑัะตะผั ัะตะนัะธะฝะณั
    rated_users = []
    for user_id, stats in user_rating_stats.items():
        total_points = calculate_user_rating(user_id)
        level = get_user_level(user_id)
        rated_users.append({
            "user_id": user_id,
            "name": stats["name"],
            "points": total_points,
            "messages": stats["messages"],
            "photos": stats["photos"],
            "likes": stats["likes"],
            "replies": stats["replies"],
            "level": level
        })
    
    # ะกะพััะธััะตะผ ะฟะพ ะพัะบะฐะผ (ะฟะพ ัะฑัะฒะฐะฝะธั)
    rated_users.sort(key=lambda x: x["points"], reverse=True)
    
    return rated_users[:10]


async def send_daily_summary():
    """ะัะฟัะฐะฒะบะฐ ะตะถะตะดะฝะตะฒะฝะพะน ัะฒะพะดะบะธ"""
    global daily_summary_sent
    
    if application is None:
        logger.error("Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return
    
    if daily_summary_sent:
        logger.info("ะกะฒะพะดะบะฐ ัะถะต ะพัะฟัะฐะฒะปะตะฝะฐ ัะตะณะพะดะฝั")
        return
    
    try:
        today = datetime.now(MOSCOW_TZ).strftime("%Y-%m-%d")
        
        # ะคะพัะผะธััะตะผ ัะตะบัั ัะฒะพะดะบะธ
        summary_text = f"๐ **ะะถะตะดะฝะตะฒะฝะฐั ัะฒะพะดะบะฐ ะทะฐ {today}**\n\n"
        
        # ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ัะพะพะฑัะตะฝะธะน
        summary_text += f"๐ฌ **ะัะตะณะพ ัะพะพะฑัะตะฝะธะน:** {daily_stats['total_messages']}\n\n"
        
        # ะขะพะฟ ะฐะบัะธะฒะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
        top_users = await get_top_users()
        if top_users:
            summary_text += "๐ **ะขะพะฟ ะฐะบัะธะฒะฝัั ะฑะตะณัะฝะพะฒ:**\n"
            medals = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ"]
            for i, (user_id, name, count) in enumerate(top_users):
                summary_text += f"{medals[i]} {name} โ {count} ัะพะพะฑัะตะฝะธะน\n"
            summary_text += "\n"
        else:
            summary_text += "๐ **ะขะพะฟ ะฐะบัะธะฒะฝัั ะฑะตะณัะฝะพะฒ:** ะะพะบะฐ ะฝะธะบะพะณะพ ะฝะตั\n\n"
        
        # ะะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ
        top_rated = await get_top_rated_users()
        if top_rated:
            summary_text += "โญ **ะะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ (ัะพะฟ-10):**\n"
            medals_rating = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ", "6๏ธโฃ", "7๏ธโฃ", "8๏ธโฃ", "9๏ธโฃ", "๐"]
            for i, user in enumerate(top_rated):
                level_emoji = LEVEL_EMOJIS.get(user["level"], "")
                summary_text += f"{medals_rating[i]} {level_emoji} {user['name']} โ {user['points']} ะพัะบะพะฒ"
                # ะะพะฑะฐะฒะปัะตะผ ะดะตัะฐะปะธ
                details = []
                if user['messages'] > 0:
                    msg_pts = user['messages'] // POINTS_PER_MESSAGES
                    details.append(f"๐{msg_pts}")
                if user['photos'] > 0:
                    photo_pts = user['photos'] // POINTS_PER_PHOTOS
                    details.append(f"๐ท{photo_pts}")
                if user['likes'] > 0:
                    like_pts = user['likes'] // POINTS_PER_LIKES
                    details.append(f"โค๏ธ{like_pts}")
                if user['replies'] > 0:
                    details.append(f"๐ฌ{user['replies']}")
                if details:
                    summary_text += f" ({', '.join(details)})"
                summary_text += "\n"
        else:
            summary_text += "โญ **ะะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ:** ะะพะบะฐ ะฝะธะบะพะณะพ ะฝะตั\n\n"
        
        # ะัะฟัะฐะฒะปัะตะผ ัะตะบััะพะฒัั ัะฐััั
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=summary_text,
            parse_mode="Markdown",
        )
        
        # ะััะฐะตะผัั ะพัะฟัะฐะฒะธัั ัะพะฟ ัะพัะพ ั 4+ ะปะฐะนะบะฐะผะธ
        try:
            top_photos = await get_top_liked_photos()
            if top_photos:
                for photo in top_photos:
                    try:
                        await application.bot.send_photo(
                            chat_id=CHAT_ID,
                            photo=photo["file_id"],
                            caption=f"โค๏ธ {photo['likes']} ะปะฐะนะบะพะฒ",
                        )
                    except Exception:
                        pass
        except Exception as e:
            logger.error(f"ะัะธะฑะบะฐ ะฟะพะปััะตะฝะธั ัะพัะพ: {e}")
        
        daily_summary_sent = True
        logger.info("ะะถะตะดะฝะตะฒะฝะฐั ัะฒะพะดะบะฐ ะพัะฟัะฐะฒะปะตะฝะฐ")
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะตะถะตะดะฝะตะฒะฝะพะน ัะฒะพะดะบะธ: {e}")


# ============== ะะะะะะะะะฌะะะฏ ะกะะะะะ ==============
async def send_weekly_summary():
    """ะัะฟัะฐะฒะบะฐ ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ ะฟะพ ััะพะฒะฝัะผ"""
    if application is None:
        logger.error("Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return
    
    try:
        now = datetime.now(MOSCOW_TZ)
        week_num = now.isocalendar()[1]
        year = now.year
        
        weekly_text = f"๐ **ะะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ (ะะตะดะตะปั #{week_num}, {year})**\n\n"
        
        # ะััะฟะฟะธััะตะผ ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ
        levels_summary = {
            "ะะตะณะตะฝะดะฐ ัะฐัะฐ": [],
            "ะะธะดะตั": [],
            "ะะบัะธะฒะฝัะน": [],
            "ะะพะฒะธัะพะบ": []
        }
        
        for user_id, stats in user_rating_stats.items():
            level = get_user_level(user_id)
            total_points = calculate_user_rating(user_id)
            levels_summary[level].append({
                "name": stats["name"],
                "points": total_points,
                "level": level
            })
        
        # ะกะพััะธััะตะผ ััะฐััะฝะธะบะพะฒ ะบะฐะถะดะพะณะพ ััะพะฒะฝั ะฟะพ ะพัะบะฐะผ
        for level in levels_summary:
            levels_summary[level].sort(key=lambda x: x["points"], reverse=True)
        
        # ะัะฒะพะดะธะผ ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ (ะพั ะฒััะพะบะพะณะพ ะบ ะฝะธะทะบะพะผั)
        level_order = ["ะะตะณะตะฝะดะฐ ัะฐัะฐ", "ะะธะดะตั", "ะะบัะธะฒะฝัะน", "ะะพะฒะธัะพะบ"]
        
        for level in level_order:
            users = levels_summary[level]
            if users:
                level_emoji = LEVEL_EMOJIS.get(level, "")
                weekly_text += f"{level_emoji} **{level}** ({len(users)} ัะตะป.):\n"
                
                # ะะพะบะฐะทัะฒะฐะตะผ ัะพะฟ-3 ะบะฐะถะดะพะณะพ ััะพะฒะฝั
                top_users = users[:3]
                medals = ["๐ฅ", "๐ฅ", "๐ฅ"]
                for i, user in enumerate(top_users):
                    weekly_text += f"   {medals[i]} {user['name']} โ {user['points']} ะพัะบะพะฒ\n"
                
                if len(users) > 3:
                    weekly_text += f"   ... ะธ ะตัั {len(users) - 3} ััะฐััะฝะธะบะพะฒ\n"
                
                weekly_text += "\n"
        
        # ะกัะฐัะธััะธะบะฐ ะฟะพ ะฐะบัะธะฒะฝะพััะธ
        total_messages = sum(stats["messages"] for stats in user_rating_stats.values())
        total_photos = sum(stats["photos"] for stats in user_rating_stats.values())
        total_likes = sum(stats["likes"] for stats in user_rating_stats.values())
        total_replies = sum(stats["replies"] for stats in user_rating_stats.values())
        
        weekly_text += "๐ **ะะฑัะฐั ััะฐัะธััะธะบะฐ ะฝะตะดะตะปะธ:**\n"
        weekly_text += f"๐ฌ ะกะพะพะฑัะตะฝะธะน: {total_messages}\n"
        weekly_text += f"๐ท ะคะพัะพ: {total_photos}\n"
        weekly_text += f"โค๏ธ ะะฐะนะบะพะฒ: {total_likes}\n"
        weekly_text += f"๐ฌ ะัะฒะตัะพะฒ: {total_replies}\n\n"
        
        # ะะฐะบ ะฟะพะฒััะธัั ััะพะฒะตะฝั
        weekly_text += "๐ **ะะฐะบ ะฟะพะฒััะธัั ััะพะฒะตะฝั:**\n"
        weekly_text += f"๐ฑ โ โญ (ะะพะฒะธัะพะบ โ ะะบัะธะฒะฝัะน): **{USER_LEVELS['ะะบัะธะฒะฝัะน']}** ะพัะบะพะฒ\n"
        weekly_text += f"โญ โ ๐ (ะะบัะธะฒะฝัะน โ ะะธะดะตั): **{USER_LEVELS['ะะธะดะตั']}** ะพัะบะพะฒ\n"
        weekly_text += f"๐ โ ๐ (ะะธะดะตั โ ะะตะณะตะฝะดะฐ): **{USER_LEVELS['ะะตะณะตะฝะดะฐ ัะฐัะฐ']}** ะพัะบะพะฒ\n"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=weekly_text,
            parse_mode="Markdown",
        )
        
        logger.info("ะะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ ะพัะฟัะฐะฒะปะตะฝะฐ")
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ: {e}")


# ============== ะะะะะะกะฏะงะะะฏ ะกะะะะะ ==============
async def send_monthly_summary():
    """ะัะฟัะฐะฒะบะฐ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ ั ะธัะพะณะฐะผะธ ะผะตัััะฐ"""
    global user_rating_stats, user_running_stats
    
    if application is None:
        logger.error("Application ะฝะต ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        return
    
    try:
        now = datetime.now(MOSCOW_TZ)
        month_name = now.strftime("%B %Y")
        
        monthly_text = f"๐ **ะัะพะณะธ ะผะตัััะฐ: {month_name}** ๐\n\n"
        
        # ะะฑัะธะน ัะพะฟ-10 ััะฐััะฝะธะบะพะฒ ะทะฐ ะผะตััั
        top_rated = await get_top_rated_users()
        
        if top_rated:
            monthly_text += "๐ **ะขะพะฟ-10 ะปะตะณะตะฝะด ะผะตัััะฐ:**\n"
            medals_rating = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ", "6๏ธโฃ", "7๏ธโฃ", "8๏ธโฃ", "9๏ธโฃ", "๐"]
            
            for i, user in enumerate(top_rated):
                level_emoji = LEVEL_EMOJIS.get(user["level"], "")
                monthly_text += f"{medals_rating[i]} {level_emoji} **{user['name']}**\n"
                monthly_text += f"   โโ ๐ {user['points']} ะพัะบะพะฒ | ๐{user['messages']} | ๐ท{user['photos']} | โค๏ธ{user['likes']} | ๐ฌ{user['replies']}\n"
            monthly_text += "\n"
        else:
            monthly_text += "๐ **ะขะพะฟ-10 ะปะตะณะตะฝะด ะผะตัััะฐ:** ะะพะบะฐ ะฝะธะบะพะณะพ ะฝะตั\n\n"
        
        # ะะพะฑะตะดะธัะตะปะธ ะฟะพ ะฝะพะผะธะฝะฐัะธัะผ
        monthly_text += "๐๏ธ **ะะพะผะธะฝะฐัะธะธ ะผะตัััะฐ:**\n"
        
        # ะกะฐะผะพะต ะฐะบัะธะฒะฝะพะต ัะพะพะฑัะตััะฒะพ
        if top_rated:
            monthly_text += f"๐ฅ **{top_rated[0]['name']}** โ ะะฑัะพะปััะฝัะน ะปะธะดะตั ะผะตัััะฐ!\n"
        
        # ะะฐะบัะธะผัะผ ัะพะพะฑัะตะฝะธะน
        if user_rating_stats:
            max_messages_user = max(user_rating_stats.items(), key=lambda x: x[1]["messages"])
            monthly_text += f"๐ฌ **{max_messages_user[1]['name']}** โ ะะพะปััะต ะฒัะตะณะพ ัะพะพะฑัะตะฝะธะน ({max_messages_user[1]['messages']})\n"
        
        # ะะฐะบัะธะผัะผ ัะพัะพ
        if user_rating_stats:
            max_photos_user = max(user_rating_stats.items(), key=lambda x: x[1]["photos"])
            if max_photos_user[1]["photos"] > 0:
                monthly_text += f"๐ท **{max_photos_user[1]['name']}** โ ะคะพัะพะณะตะฝะธะน ะผะตัััะฐ ({max_photos_user[1]['photos']} ัะพัะพ)\n"
        
        # ะะฐะบัะธะผัะผ ะปะฐะนะบะพะฒ
        if user_rating_stats:
            max_likes_user = max(user_rating_stats.items(), key=lambda x: x[1]["likes"])
            if max_likes_user[1]["likes"] > 0:
                monthly_text += f"โค๏ธ **{max_likes_user[1]['name']}** โ ะกะฐะผัะน ะปัะฑะธะผัะน ะฐะฒัะพั ({max_likes_user[1]['likes']} ะปะฐะนะบะพะฒ)\n"
        
        # ะะฐะบัะธะผัะผ ะพัะฒะตัะพะฒ
        if user_rating_stats:
            max_replies_user = max(user_rating_stats.items(), key=lambda x: x[1]["replies"])
            if max_replies_user[1]["replies"] > 0:
                monthly_text += f"๐ฌ **{max_replies_user[1]['name']}** โ ะกะฐะผัะน ะพัะทัะฒัะธะฒัะน ({max_replies_user[1]['replies']} ะพัะฒะตัะพะฒ)\n"
        
        monthly_text += "\n"
        
        # ะกัะฐัะธััะธะบะฐ ะผะตัััะฐ
        total_messages = sum(stats["messages"] for stats in user_rating_stats.values())
        total_photos = sum(stats["photos"] for stats in user_rating_stats.values())
        total_likes = sum(stats["likes"] for stats in user_rating_stats.values())
        total_replies = sum(stats["replies"] for stats in user_rating_stats.values())
        
        monthly_text += "๐ **ะกัะฐัะธััะธะบะฐ ะผะตัััะฐ:**\n"
        monthly_text += f"๐ฌ ะัะตะณะพ ัะพะพะฑัะตะฝะธะน: {total_messages}\n"
        monthly_text += f"๐ท ะัะตะณะพ ัะพัะพ: {total_photos}\n"
        monthly_text += f"โค๏ธ ะัะตะณะพ ะปะฐะนะบะพะฒ: {total_likes}\n"
        monthly_text += f"๐ฌ ะัะตะณะพ ะพัะฒะตัะพะฒ: {total_replies}\n"
        monthly_text += f"๐ฅ ะะบัะธะฒะฝัั ััะฐััะฝะธะบะพะฒ: {len(user_rating_stats)}\n\n"
        
        # ะกัะฐัะธััะธะบะฐ ะฑะตะณะฐ
        if user_running_stats:
            running_distance = sum(stats["distance"] for stats in user_running_stats.values()) / 1000
            running_activities = sum(stats["activities"] for stats in user_running_stats.values())
            running_calories = sum(stats["calories"] for stats in user_running_stats.values())
            
            monthly_text += "๐โโ๏ธ **ะกัะฐัะธััะธะบะฐ ะฑะตะณะฐ ะทะฐ ะผะตััั:**\n"
            monthly_text += f"๐ ะัะตะณะพ ะฟัะพะฑะตะถะฐะปะธ: {running_distance:.1f} ะบะผ\n"
            monthly_text += f"๐โโ๏ธ ะัะตะณะพ ััะตะฝะธัะพะฒะพะบ: {running_activities}\n"
            monthly_text += f"๐ฅ ะกะพะถะณะปะธ ะบะฐะปะพัะธะน: {running_calories} ะบะบะฐะป\n"
            monthly_text += f"๐ฅ ะะตะณัะฝะพะฒ ะฒ ัะฐัะต: {len(user_running_stats)}\n\n"
        
        # ะะพะทะดัะฐะฒะปัะตะผ ะฝะพะฒัั ะปะตะณะตะฝะด
        legends = [uid for uid in user_rating_stats.keys() if get_user_level(uid) == "ะะตะณะตะฝะดะฐ ัะฐัะฐ"]
        if legends:
            monthly_text += "๐ **ะะพะทะดัะฐะฒะปัะตะผ ะฝะพะฒัั ะปะตะณะตะฝะด ัะฐัะฐ!**\n"
            for uid in legends:
                monthly_text += f"   ๐ {user_rating_stats[uid]['name']}\n"
        
        # ะะพะฒัะต ะปะธะดะตัั
        leaders = [uid for uid in user_rating_stats.keys() if get_user_level(uid) == "ะะธะดะตั"]
        if leaders:
            monthly_text += "๐ **ะะพะฒัะต ะปะธะดะตัั:**\n"
            for uid in leaders:
                monthly_text += f"   ๐ {user_rating_stats[uid]['name']}\n"
        
        monthly_text += "\n๐โโ๏ธ ะะพ ะฒัััะตัะธ ะฒ ัะปะตะดัััะตะผ ะผะตัััะต!\n"
        monthly_text += "๐ช ะัะพะดะพะปะถะฐะนัะต ะฑะตะณะฐัั ะธ ะฝะฐะฑะธัะฐัั ะพัะบะธ!"
        
        await application.bot.send_message(
            chat_id=CHAT_ID,
            text=monthly_text,
            parse_mode="Markdown",
        )
        
        logger.info("ะะถะตะผะตัััะฝะฐั ัะฒะพะดะบะฐ ะพัะฟัะฐะฒะปะตะฝะฐ")
        
        # ะกะฑัะฐััะฒะฐะตะผ ััะฐัะธััะธะบั ะฟะพัะปะต ะผะตัััะฝะพะน ัะฒะพะดะบะธ
        user_rating_stats = {}
        logger.info("ะกัะฐัะธััะธะบะฐ ัะตะนัะธะฝะณะฐ ัะฑัะพัะตะฝะฐ ะดะปั ะฝะพะฒะพะณะพ ะผะตัััะฐ")
        
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ: {e}")


async def daily_summary_scheduler_task():
    """ะะปะฐะฝะธัะพะฒัะธะบ ะตะถะตะดะฝะตะฒะฝะพะน, ะตะถะตะฝะตะดะตะปัะฝะพะน ะธ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะพะบ"""
    global daily_summary_sent, current_week, user_running_stats
    
    while bot_running:
        now = datetime.now(MOSCOW_TZ)
        current_hour = now.hour
        current_minute = now.minute
        today_date = now.strftime("%Y-%m-%d")
        
        # ะกะฑัะพั ัะปะฐะณะฐ ะพัะฟัะฐะฒะบะธ ะฒ ะฟะพะปะฝะพัั
        if now.hour == 0 and current_minute == 0:
            daily_summary_sent = False
        
        # ะัะฟัะฐะฒะบะฐ ัะฒะพะดะบะธ ะฒ 23:59
        if current_hour == 23 and current_minute == 59:
            if not daily_summary_sent:
                logger.info("ะัะตะผั 23:59 - ะพัะฟัะฐะฒะปัะตะผ ะตะถะตะดะฝะตะฒะฝัั ัะฒะพะดะบั")
                try:
                    await send_daily_summary()
                except Exception as e:
                    logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ัะฒะพะดะบะธ: {e}")
        
        # ะัะพะฒะตัะบะฐ ะฝะตะดะตะปะธ (ะฒะพัะบัะตัะตะฝัะต 23:00 - ะตะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ + ะฑะตะณ)
        if now.weekday() == 6 and current_hour == 23 and current_minute == 0:
            week_num = now.isocalendar()[1]
            if week_num != current_week:
                logger.info(f"ะัะตะผั ะฒะพัะบัะตัะตะฝัะต 23:00 - ะพัะฟัะฐะฒะปัะตะผ ะตะถะตะฝะตะดะตะปัะฝัั ัะฒะพะดะบั")
                try:
                    await send_weekly_summary()
                except Exception as e:
                    logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ: {e}")
                
                # ะขะฐะบะถะต ะพัะฟัะฐะฒะปัะตะผ ัะฒะพะดะบั ะฟะพ ะฑะตะณั
                try:
                    await send_weekly_running_summary()
                except Exception as e:
                    logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ ะฟะพ ะฑะตะณั: {e}")
                
                current_week = week_num
        
        # ะัะพะฒะตัะบะฐ ะบะพะฝัะฐ ะผะตัััะฐ (ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ ะฒ 23:00)
        last_day_of_month = (now.replace(day=28) + timedelta(days=4)).day - (now.replace(day=28) + timedelta(days=4)).day % 28
        if now.day == last_day_of_month and current_hour == 23 and current_minute == 0:
            logger.info(f"ะะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ - ะพัะฟัะฐะฒะปัะตะผ ะตะถะตะผะตัััะฝัั ัะฒะพะดะบั")
            try:
                await send_monthly_summary()
            except Exception as e:
                logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ: {e}")
            
            # ะขะฐะบะถะต ะพัะฟัะฐะฒะปัะตะผ ัะฒะพะดะบั ะฟะพ ะฑะตะณั ะทะฐ ะผะตััั
            try:
                await send_monthly_running_summary()
            except Exception as e:
                logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ ะฟะพ ะฑะตะณั: {e}")
            
            # ะกะฑัะฐััะฒะฐะตะผ ััะฐัะธััะธะบั ะฑะตะณะฐ ะดะปั ะฝะพะฒะพะณะพ ะผะตัััะฐ
            try:
                reset_monthly_running_stats()
            except Exception as e:
                logger.error(f"ะัะธะฑะบะฐ ะฟัะธ ัะฑัะพัะต ััะฐัะธััะธะบะธ ะฑะตะณะฐ: {e}")
        
        await asyncio.sleep(60)


# ============== ะะะะะะะะะฏ ะะขะะะะะะ ==============
async def anon(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    user_anon_state[user_id] = "waiting_for_text"

    try:
        await update.message.delete()
    except Exception:
        pass


async def anonphoto(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    user_anon_state[user_id] = "waiting_for_photo"

    try:
        await update.message.delete()
    except Exception:
        pass


# ============== ะะะะะะะ ะะะฏ ะะะฏ ะะะะะะะะฏ ==============
async def birthday(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /birthday DD.MM โ ัััะฐะฝะพะฒะบะฐ ะดะฝั ัะพะถะดะตะฝะธั"""
    global user_birthdays
    
    try:
        user_id = update.message.from_user.id
        user_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
        
        # ะัะพะฒะตััะตะผ ะฐัะณัะผะตะฝัั
        if not context.args or len(context.args) != 1:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="๐ **ะะพะผะฐะฝะดะฐ /birthday**\n\n"
                     "๐ ะัะฟะพะปัะทัะน: `/birthday DD.MM`\n"
                     "๐ฑ *ะัะธะผะตั:* `/birthday 15.06`\n\n"
                     "ะะพั ะฑัะดะตั ะฟะพะทะดัะฐะฒะปััั ัะตะฑั ั ะะฝัะผ ัะพะถะดะตะฝะธั ะบะฐะถะดัะน ะณะพะด! ๐",
                parse_mode="Markdown"
            )
            return
        
        # ะะฐััะธะผ ะดะฐัั
        birthday_str = context.args[0]
        try:
            datetime.strptime(birthday_str, "%d.%m")
        except ValueError:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="โ ะะตะฟัะฐะฒะธะปัะฝัะน ัะพัะผะฐั ะดะฐัั!\n\n"
                     "ะัะฟะพะปัะทัะน: `/birthday DD.MM`\n"
                     "๐ฑ *ะัะธะผะตั:* `/birthday 15.06`",
                parse_mode="Markdown"
            )
            return
        
        # ะกะพััะฐะฝัะตะผ ะดะตะฝั ัะพะถะดะตะฝะธั
        user_birthdays[user_id] = {
            "name": user_name,
            "birthday": birthday_str
        }
        save_birthdays()
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"โ *ะะตะฝั ัะพะถะดะตะฝะธั ัะพััะฐะฝัะฝ!* ๐\n\n"
                 f"๐ค {user_name}\n"
                 f"๐ ะะฐัะฐ: {birthday_str}\n\n"
                 f"ะะพั ะทะฐะฟะพะผะฝะธั ะธ ะฟะพะทะดัะฐะฒะธั ัะตะฑั ะฒ ัะปะตะดัััะธะน ะะ! ๐",
            parse_mode="Markdown"
        )
        logger.info(f"[BIRTHDAY] ะะตะฝั ัะพะถะดะตะฝะธั ัะพััะฐะฝัะฝ: {user_name} โ {birthday_str}")
        
    except Exception as e:
        logger.error(f"[BIRTHDAY] ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพััะฐะฝะตะฝะธะธ ะดะฝั ัะพะถะดะตะฝะธั"
        )


# ============== ะะะะะซะ ะะะะะะะขะงะะ ะกะะะะฉะะะะ ==============
async def handle_all_messages(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะดะธะฝัะน ะพะฑัะฐะฑะพััะธะบ ะฒัะตั ัะพะพะฑัะตะฝะธะน - ะธ ััะฐัะธััะธะบะฐ, ะธ ัะตะฐะบัะธะธ"""
    global daily_stats, user_rating_stats, user_current_level, user_night_messages, user_night_warning_sent, mam_message_id, user_last_active
    
    # ะะขะะะะะ - ะปะพะณะธััะตะผ ะงะขะ ะะะะจะะ
    try:
        logger.info(f"[HANDLER] ะะพะปััะตะฝ update: type={type(update)}, message={update.message is not None}")
        if update.message:
            logger.info(f"[HANDLER] message_id={update.message.message_id}, text='{update.message.text or ''[:50]}'")
    except Exception as e:
        logger.error(f"[HANDLER] ะัะธะฑะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั: {e}")
    
    try:
        # === ะะะะะะะะ ะะะะะฆะะ ===
        if update.message and hasattr(update.message, 'reactions') and update.message.reactions:
            logger.info(f"[HANDLER] ะญัะพ ัะตะฐะบัะธั!")
            try:
                await handle_reactions(update, context)
            except Exception as e:
                logger.error(f"[REACTION] ะัะธะฑะบะฐ: {e}")
            return
        
        if not update.message:
            logger.debug(f"[HANDLER] ะะตั message, ะฟัะพะฟััะบะฐะตะผ")
            return
        
        if update.message.from_user and update.message.from_user.is_bot:
            logger.debug(f"[HANDLER] ะญัะพ ะฑะพั, ะฟัะพะฟััะบะฐะตะผ")
            return
        
        user = update.message.from_user
        if not user:
            logger.debug(f"[HANDLER] ะะตั user, ะฟัะพะฟััะบะฐะตะผ")
            return

        user_id = user.id
        user_name = f"@{user.username}" if user.username else user.full_name
        message_text = update.message.text or ""
        message_caption = update.message.caption or ""
        # ะะฑัะตะดะธะฝัะตะผ ัะตะบัั ะธ ะฟะพะดะฟะธัั ะดะปั ะฟัะพะฒะตัะบะธ ะบะปััะตะฒัั ัะปะพะฒ
        check_text = (message_text + " " + message_caption).strip().lower()
        is_photo = bool(update.message.photo)

        logger.info(f"[MSG] === ะะะงะะะ ะพะฑัะฐะฑะพัะบะธ ะพั {user_name} ===")

        # ะัะพะฒะตััะตะผ, ะฝะต ะบะพะผะฐะฝะดะฐ ะปะธ ััะพ
        if message_text and message_text.startswith('/'):
            logger.info(f"[MSG] ะญัะพ ะบะพะผะฐะฝะดะฐ, ะฟัะพะฟััะบะฐะตะผ")
            return

        # === ะะะะะะะะ: ะะขะะะข ะะ ะกะะะะฉะะะะ ะะะขะ (AI ะะขะะะข) ===
        if (AI_ENABLED or GEMINI_ENABLED or DEEPSEEK_ENABLED) and update.message.reply_to_message:
            original_message = update.message.reply_to_message
            # ะัะพะฒะตััะตะผ, ััะพ reply_to_message ะดะตะนััะฒะธัะตะปัะฝะพ ะพั ะฑะพัะฐ
            if original_message.from_user and original_message.from_user.id == (context.bot.id if hasattr(context.bot, 'id') else None):
                if original_message.from_user.is_bot:
                    logger.info(f"[AI] {user_name} ะพัะฒะตัะธะป ะฝะฐ ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ: '{message_text[:30]}...'")
                    
                    # ะะพะปััะฐะตะผ ัะตะบัั ัะพะพะฑัะตะฝะธั ะฑะพัะฐ, ะฝะฐ ะบะพัะพััะน ะพัะฒะตัะธะปะธ
                    bot_message_text = original_message.text or original_message.caption or "ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ"
                    
                    # ะัะฟัะฐะฒะปัะตะผ "ะฟะตัะฐัะฐะตั" ััะฐััั
                    await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
                    
                    # ะะตะฝะตัะธััะตะผ ะะ-ะพัะฒะตั
                    ai_response = await generate_ai_response(message_text, bot_message_text, user_name)
                    
                    if ai_response:
                        await context.bot.send_message(
                            chat_id=update.effective_chat.id,
                            text=ai_response
                        )
                        logger.info(f"[AI] ะัะฒะตั ะพัะฟัะฐะฒะปะตะฝ {user_name}")
                    else:
                        logger.warning(f"[AI] ะะต ัะดะฐะปะพัั ัะณะตะฝะตัะธัะพะฒะฐัั ะพัะฒะตั ะดะปั {user_name}")
                    # ะัะพะดะพะปะถะฐะตะผ ะฒัะฟะพะปะฝะตะฝะธะต ะดะปั ัะฑะพัะฐ ััะฐัะธััะธะบะธ

        # === ะะะะะะะะ ะะะะะะะฉะะะฆะ ===
        moscow_now = datetime.now(MOSCOW_TZ)
        today = moscow_now.strftime("%Y-%m-%d")
        
        if user_id in user_last_active:
            last_active_date = user_last_active[user_id]
            
            # ะัะพะฒะตััะตะผ, ะฟัะพัะปะพ ะปะธ 5+ ะดะฝะตะน ั ะฟะพัะปะตะดะฝะตะณะพ ัะพะพะฑัะตะฝะธั
            try:
                last_date_obj = datetime.strptime(last_active_date, "%Y-%m-%d")
                days_since = (moscow_now.date() - last_date_obj.date()).days
                
                if days_since >= 5:
                    # ะะพะปัะทะพะฒะฐัะตะปั ะฒะตัะฝัะปัั ะฟะพัะปะต 5+ ะดะฝะตะน ะผะพะปัะฐะฝะธั
                    return_greeting = random.choice(RETURN_GREETINGS)
                    
                    # ะััะฐะตะผัั ะพัะฟัะฐะฒะธัั ะฟัะธะฒะตัััะฒะธะต
                    try:
                        await context.bot.send_message(
                            chat_id=CHAT_ID,
                            text=f"{user_name} {return_greeting}",
                        )
                        logger.info(f"[RETURN] ะัะธะฒะตัััะฒะธะต ะฒะพะทะฒัะฐัะตะฝัะฐ ะพัะฟัะฐะฒะปะตะฝะพ: {user_name}, ะพััััััะฒะพะฒะฐะป {days_since} ะดะฝะตะน")
                    except Exception as e:
                        logger.error(f"[RETURN] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะฟัะธะฒะตัััะฒะธั: {e}")
            except Exception as e:
                logger.error(f"[RETURN] ะัะธะฑะบะฐ ัะฐััััะฐ ะดะฝะตะน: {e}")
        
        # ะะฑะฝะพะฒะปัะตะผ ะดะฐัั ะฟะพัะปะตะดะฝะตะน ะฐะบัะธะฒะฝะพััะธ
        user_last_active[user_id] = today
        
        # === ะะะะะะะะะฏ ะะขะะะะะะ ===
        if user_id in user_anon_state:
            state = user_anon_state[user_id]
            
            if state == "waiting_for_text" and message_text:
                # ะะฝะพะฝะธะผะฝัะน ัะตะบัั
                import re
                match = re.match(r'^@(\w+)\s+(.+)', message_text)
                if match:
                    anon_text = f"๐ฌ **ะะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต ะดะปั @{match.group(1)}:**\n\n{match.group(2)}"
                else:
                    anon_text = f"๐ฌ **ะะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต:**\n\n{message_text}"
                
                try:
                    await update.message.delete()
                except:
                    pass
                
                await context.bot.send_message(chat_id=CHAT_ID, text=anon_text, parse_mode="Markdown")
                del user_anon_state[user_id]
                logger.info(f"[ANON] ะะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต ะพั {user_name}")
                return
            
            elif state == "waiting_for_photo" and is_photo:
                photo = update.message.photo[-1]
                try:
                    await update.message.delete()
                except:
                    pass
                
                await context.bot.send_photo(chat_id=CHAT_ID, photo=photo.file_id, caption="๐ฌ **ะะฝะพะฝะธะผะฝะพะต ัะพัะพ**", parse_mode="Markdown")
                del user_anon_state[user_id]
                logger.info(f"[ANON] ะะฝะพะฝะธะผะฝะพะต ัะพัะพ ะพั {user_name}")
                return
            
            else:
                del user_anon_state[user_id]
                logger.info(f"[ANON] ะกะพััะพัะฝะธะต ะพัะธัะตะฝะพ ะดะปั {user_name}")
        
        # === ะะะะะะะะ ะะขะะะขะะ ะะ /MAM ===
        if mam_message_id is not None and update.message.reply_to_message:
            if update.message.reply_to_message.message_id == mam_message_id:
                # ะัะพ-ัะพ ะพัะฒะตัะธะป ะฝะฐ ัะพะพะฑัะตะฝะธะต "/mam" - ะพัะฟัะฐะฒะปัะตะผ ัะพัะพ
                logger.info(f"[MAM] ะะฑะฝะฐััะถะตะฝ ะพัะฒะตั ะฝะฐ ัะพะพะฑัะตะฝะธะต /mam ะพั {user_name}")
                try:
                    with open(MAM_PHOTO_PATH, 'rb') as photo_file:
                        await context.bot.send_photo(
                            chat_id=CHAT_ID,
                            photo=photo_file,
                        )
                    logger.info(f"[MAM] ะคะพัะพ ะพัะฟัะฐะฒะปะตะฝะพ")
                except Exception as e:
                    logger.error(f"[MAM] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัะพัะพ: {e}")
                # ะกะฑัะฐััะฒะฐะตะผ mam_message_id ััะพะฑั ะฝะต ัะตะฐะณะธัะพะฒะฐัั ะฝะฐ ะฟะพะฒัะพัะฝัะต ะพัะฒะตัั
                mam_message_id = None
        
        # === ะะขะะะข ะะ "ะกะะะะะะะะ ะะะงะ" / "ะะะะะะ ะะะงะ" ===
        good_night_keywords = [
            # ะก "ะน"
            'ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ', 'ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ!', 'ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ ะฒัะตะผ', 'ะฒัะตะผ ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ',
            # ะะตะท "ะน" (ัะฐัะฟัะพัััะฐะฝัะฝะฝะฐั ะพัะธะฑะบะฐ)
            'ัะฟะพะบะพะนะฝะพ ะฝะพัะธ', 'ัะฟะพะบะพะนะฝะพ ะฝะพัะธ!', 'ัะฟะพะบะพะนะฝะพ ะฝะพัะธ ะฒัะตะผ', 'ะฒัะตะผ ัะฟะพะบะพะนะฝะพ ะฝะพัะธ',
            # ะะพะฑัะฐั ะฝะพัั
            'ะดะพะฑัะพะน ะฝะพัะธ', 'ะดะพะฑัะพะน ะฝะพัะธ!', 'ะดะพะฑัะพะน ะฝะพัะธ ะฒัะตะผ', 'ะฒัะตะผ ะดะพะฑัะพะน ะฝะพัะธ',
            # ะะฝะณะปะธะนัะบะธะต
            'good night', 'good night!', 'good night!', 'gn',
            # ะะพัะพัะบะธะต
            'ัะฟะพะบ', 'ัะฟะพะบ!', 'gn!',
        ]
        
        if any(keyword in check_text for keyword in good_night_keywords):
            good_night_responses = [
                f"๐ {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ๐",
                f"๐ค {user_name}, ัะปะฐะดะบะธั ัะฝะพะฒ! ๐ซ",
                f"๐ {user_name}, ะฟัััั ัะตะฑะต ะฟัะธัะฝัััั ะทะฒัะทะดั! โจ",
                f"๐ซ {user_name}, ะดะพะฑัะพะน ะฝะพัะธ! ๐",
                f"๐ {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ะัััั ะฝะพัั ะฟะพะดะฐัะธั ัะตะฑะต ะพัะดัั! ๐ค",
                f"๐ {user_name}, ัะปะฐะดะบะธั ัะฝะพะฒ! ะะฐะฒััะฐ ะฑัะดะตั ะฝะพะฒัะน ะดะตะฝั! โ๏ธ",
                f"๐ค {user_name}, ะพัะปะธัะฝะพะน ะฝะพัะธ! ๐",
                f"โจ {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ะัััั ัะพะฝ ะฑัะดะตั ะบัะตะฟะบะธะผ! ๐ซ",
                f"๐ {user_name}, ะดะพะฑัะพะน ะฝะพัะธ! ะะตััะฐะน ะพ ัะพัะพัะตะผ! ๐ญ",
                f"๐ซ {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ะฃััะพ ะฑัะดะตั ัะฐะดะพััะฝัะผ! โ๏ธ",
                f"๐ {user_name}, ัะปะฐะดะบะธั ัะฝะพะฒ! ะขั ะผะพะปะพะดะตั ัะตะณะพะดะฝั! ๐ช",
                f"๐ค {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ะะฐะฒััะฐ ะฒัั ะฑัะดะตั ัะพัะพัะพ! ๐",
                f"๐ {user_name}, ะดะพะฑัะพะน ะฝะพัะธ! ะัะดััะฐะน! โจ",
                f"๐ซ {user_name}, ัะฟะพะบะพะนะฝะพะน ะฝะพัะธ! ะัะฝะฐ ะฟัะธัะผะพััะธั ะทะฐ ัะพะฑะพะน! ๐",
                f"๐ {user_name}, ัะปะฐะดะบะธั ัะฝะพะฒ! ะะพ ะทะฐะฒััะฐ! ๐ค",
            ]
            response = random.choice(good_night_responses)
            await context.bot.send_message(chat_id=CHAT_ID, text=response)
            logger.info(f"[GOODNIGHT] ะัะฒะตัะธะป ะฝะฐ ัะฟะพะบะพะนะฝัั ะฝะพัั ะพั {user_name}")
            # ะะต ะดะตะปะฐะตะผ return, ััะพะฑั ััะฐัะธััะธะบะฐ ัะพะถะต ััะธัะฐะปะฐัั

        # === ะะขะะะข ะะ "ะะะะะะ ะฃะขะะ" ะก ะะะะ-ะขะะะะขะะะะ ===
        good_morning_keywords = [
            # ะัััะบะธะต ะฒะฐัะธะฐะฝัั
            'ะดะพะฑัะพะต ัััะพ', 'ะดะพะฑัะพะต ัััะพ!', 'ะดะพะฑัะพะต ัััะพ ะฒัะตะผ', 'ะฒัะตะผ ะดะพะฑัะพะต ัััะพ',
            'ะดะพะฑัะพะต ัััะพ!', 'ะดะพะฑัะพะต ัััะพ.', 'ะดะพะฑัะพะต ัััะพ,', 'ัััะพ ะดะพะฑัะพะต', 'ัััะพ!',
            'ะฒัะตะผ ัััะพ', 'ัััะพ ะดะพะฑัะพะต', 'ะดะพะฑัะพัััะพ', 'ะดะพะฑัะพะณะพ ัััะฐ',
            'ะฒัะตะผ ะดะพะฑัะพะณะพ ัััะฐ', 'ะดะพะฑัะพะณะพ ัััะฐ!', 'ะดะพะฑัะพะณะพ ัััะฐ ะฒัะตะผ',
            # ะกะผะฐะนะปะธะบะธ ั ัััะพะผ
            'โ๏ธ ัััะพ', 'โ๏ธะดะพะฑัะพะต', 'ัััะพ โ๏ธ',
            # ะะพัะพัะบะธะต
            'ัััะฐ', 'ะฒัะตะผ ัััะฐ', 'ัััะตัะบะฐ', 'ัััะตัะบะพ', 'ั ัััะฐ',
            # ะะฝะณะปะธะนัะบะธะต
            'good morning', 'good morning!', 'morning!', 'morning',
            # ะก ะฒะพะฟัะพัะพะผ ะธะปะธ ะฒ ะฟัะตะดะปะพะถะตะฝะธะธ
            '?ะดะพะฑัะพะต ัััะพ', 'ัััะพ?', 'ะดะพะฑัะพะต ัััะพ?',
        ]
        
        # ะขะฐะบะถะต ัะตะฐะณะธััะตะผ ะฝะฐ ัะปะพะฒะฐ ะพ ะฟัะพะฑัะถะดะตะฝะธะธ
        wake_up_words = ['ะฟัะพัะฝัะปัั', 'ะฟัะพัะฝัะปะฐัั', 'ะฒััะฐะป', 'ะฒััะฐะปะฐ', 'ะฟัะพััะฟะฐััั']
        is_waking_up = any(word in check_text for word in wake_up_words)

        # === ะะะะะะะะ ะะ "ะะะะะะ ะฃะขะะ" ะะะ ะะะะะฃะะะะะะ ===
        if any(keyword in check_text for keyword in good_morning_keywords) or is_waking_up:
            # ะะธะฝะพ-ัะตะผะฐัะธะบะฐ ะดะปั ะดะพะฑัะพะณะพ ัััะฐ (ะะะ ะะะะ!)
            movie_morning_responses = [
                # ะะะขะะะฆะ
                f"๐ {user_name}, ะฟัะพัะฝะธัั ะธ ะฟะพะน! ะะตะปัะฝะฐั ัะฐะฑะปะตัะบะฐ ะฒัะฟะธัะฐ โ ะดะพะฑัะพะต ัััะพ! ๐ข",
                f"๐ฎ {user_name}, ะะฐััะธัะฐ ะณะพะฒะพัะธั: ยซะะพะฑัะพะต ัััะพ, ะะตะพ!ยป โ๏ธ",
                f"๐ถ๏ธ {user_name}, ะดะพะฑัะพะต ัััะพ, ัะตะผะฟะธะพะฝ! ะะตะฐะปัะฝะพััั ะถะดัั! ๐ซ",
                f"๐ {user_name}, ัั ะฒัะฑัะฐะป ะฟัะฐะฒะดั โ ะธ ััะพ ะฝะฐัะธะฝะฐะตััั ั ัััะฐ! โจ",
                
                # ะะะะะะะซะ ะะะะะซ
                f"โ๏ธ {user_name}, ะดะฐ ะฟัะตะฑัะดะตั ั ัะพะฑะพะน ะกะธะปะฐ ะธ ะดะพะฑัะพะต ัััะพ! ๐ก๏ธ",
                f"โญ {user_name}, ะดะฐ ะฟัะตะฑัะดะตั ั ัะพะฑะพะน ะดะพะฑัะพะต ัััะพ, ะดะถะตะดะฐะน! ๐ง",
                f"๐ {user_name}, ะญัะบะฐะดัะธะปัั ยซะฃััะตะฝะฝัั ะทะฒะตะทะดะฐยป ะฟัะธะฒะตัััะฒัะตั ัะตะฑั! โจ",
                f"๐ {user_name}, ะดะฐ ะฟัะตะฑัะดะตั ัะธะปะฐ ะฒ ััะพ ะฟัะตะบัะฐัะฝะพะต ัััะพ! โก",
                f"๐ช {user_name}, ะขะฐััะธะฝ ะฒัััะตัะฐะตั ัะฐััะฒะตั โ ะดะพะฑัะพะต ัััะพ! ๐๏ธ",
                f"๐ฝ {user_name}, ะดะฐะปะตะบะพ-ะดะฐะปะตะบะพ ะฝะฐัััะฟะธะปะพ ะดะพะฑัะพะต ัััะพ! ๐",
                
                # ะะะะะ ะ ะะฃะะฃะฉะะ
                f"โฐ {user_name}, 1.21 ะณะธะณะฐะฒะฐัั ัััะตะฝะฝะตะน ัะฝะตัะณะธะธ โ DeLorean ะณะพัะพะฒ! ๐๐จ",
                f"๐ {user_name}, ะบัะดะฐ ัั ะพัะฟัะฐะฒะธัััั ััะธะผ ัััะพะผ? ๐บ๏ธ",
                f"โก {user_name}, ะญะนะฝััะตะนะฝ ะณะพะฒะพัะธั: ยซะะพะฑัะพะต ัััะพ!ยป โ ะะ! ๐ซ",
                f"๐ {user_name}, DeLorean ะณะพะฒะพัะธั โ ะฟะพัะฐ ะฒ ะฟััั! โจ",
                f"๐ฏ {user_name}, ัะฐัั ะธะดัั โ ัััะพ ะฝะฐััะฐะปะพ! ๐ฐ๏ธ",
                
                # ะะะะกะขะะะะ ะะะะะฆ
                f"๐ {user_name}, ะพะดะฝะพ ัััะพ, ััะพะฑั ะฟัะฐะฒะธัั ะฒัะตะผะธ! ๐",
                f"๐ก๏ธ {user_name}, ะคัะพะดะพ ะฟัะพัะฝัะปัั โ ะดะพะฑัะพะต ัััะพ, ัะพะฑะฑะธั! ๐ฟ",
                f"๐ฐ {user_name}, ะจะธั ะฒัััะตัะฐะตั ัะฐััะฒะตั โ ะดะพะฑัะพะต ัััะพ! ๐",
                f"โจ {user_name}, ะดะฐะถะต ัะพะฑะฑะธัั ะฒััะฐัั ัะฐะฝะพ โ ะดะพะฑัะพะต ัััะพ! ๐ช",
                f"๐งโโ๏ธ {user_name}, ะะตะฝะดะฐะปัั ะณะพะฒะพัะธั: ยซะะพะฑัะพะต ัััะพ!ยป ๐ง",
                f"๐ฆถ {user_name}, ะฟััั ะฝะฐัะธะฝะฐะตััั ั ะฟะตัะฒะพะณะพ ัะฐะณะฐ โ ะดะพะฑัะพะต ัััะพ! ๐ฃ",
                f"๐บ๏ธ {user_name}, ะฟัะธะบะปััะตะฝะธะต ะฝะฐัะธะฝะฐะตััั โ ะดะพะฑัะพะต ัััะพ! โ๏ธ",
                
                # ะะะะะะะ ะะะะะก
                f"๐ฉ {user_name}, ัะปัะฟะฐ ะฝะฐะณะพัะพะฒะต โ ะฟัะธะบะปััะตะฝะธะต ะฝะฐัะธะฝะฐะตััั! ๐๏ธ",
                f"๐บ๏ธ {user_name}, ะบะฐััะฐ ะฟัะธะบะปััะตะฝะธะน ะถะดัั โ ะดะพะฑัะพะต ัััะพ! ๐บ๏ธ",
                f"๐ {user_name}, ัะฒััะตะฝะฝัะน ะัะฐะฐะปั ัััะฐ โ ัะฒะพั ะฒัะตะผั! โฑ๏ธ",
                f"๐๏ธ {user_name}, ะฅัะฐะผ ะกัะดัะฑั ะพัะบััั โ ะดะพะฑัะพะต ัััะพ! ๐๏ธ",
                f"๐ {user_name}, ะะฝะดะธ ะณะพะฒะพัะธั: ยซะะพะฑัะพะต ัััะพ, ะธัะบะฐัะตะปั ะฟัะธะบะปััะตะฝะธะน!ยป ๐",
                f"๐งญ {user_name}, ัะตะฒะตั ะทะพะฒัั โ ะดะพะฑัะพะต ัััะพ! ๐งญ",
                
                # ะะะะะขะซ ะะะะะะกะะะะ ะะะะฏ
                f"๐ดโโ๏ธ {user_name}, ัััะตะฝะฝะธะน ะฑัะธะท ะธ ะฟะฐัััะฐ ะฝะฐ ะฒะตััั โ ะดะพะฑัะพะต ัััะพ! โ",
                f"โ {user_name}, ะบะฐะฟะธัะฐะฝ ะณะพะฒะพัะธั: ยซะะฐ ะณะพัะธะทะพะฝัะต โ ะฝะพะฒัะน ะดะตะฝั!ยป ๐๏ธ",
                f"๐ {user_name}, ะัะฒะธ ะะถะพะฝั ัะฟะธั โ ะฐ ัั ะฟัะพัะฝัะปัั! ะะพะฑัะพะต ัััะพ! ๐",
                f"๐ {user_name}, ะฒ ะผะพัะต ัััะตะฝะฝะตะน ัะฒะตะถะตััะธ โ ะดะพะฑัะพะต ัััะพ, ะผะพััะบ! โต",
                f"๐ก๏ธ {user_name}, ะงััะฝะฐั ะะตะผััะถะธะฝะฐ ะพัะฟัะฐะฒะปัะตััั โ ัั ะฝะฐ ะฑะพััั? โต",
                f"๐๏ธ {user_name}, ะัััะพะฒ ะกะพะบัะพะฒะธั ะถะดัั โ ะดะพะฑัะพะต ัััะพ! ๐",
                f"๐ฆ {user_name}, ะฟะพะฟัะณะฐะน ะณะพะฒะพัะธั: ยซะะพะฑัะพะต ัััะพ, ะบะฐะฟะธัะฐะฝ!ยป ๐ฆ",
            ]
            
            response = random.choice(movie_morning_responses)
            # ะัะฟัะฐะฒะปัะตะผ ะปะธัะฝะพ ะฒ ะพัะฒะตั ะฝะฐ ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
            await context.bot.send_message(
                chat_id=CHAT_ID, 
                text=response,
                reply_to_message_id=update.message.message_id
            )
            logger.info(f"[MORNING] ะะธะฝะพ-ะพัะฒะตั ะฝะฐ ัััะพ ะพั {user_name}")
            return  # โ ะััะพะดะธะผ ะฟะพัะปะต ะพัะฟัะฐะฒะบะธ ะพัะฒะตัะฐ ะฝะฐ ัััะพ
        
        # === ะกะขะะขะะกะขะะะ ===
        
        # ะกัะธัะฐะตะผ ะดะฐัั ะฟะพ ะะพัะบะฒะต
        moscow_now = datetime.utcnow() + timedelta(hours=UTC_OFFSET)
        today = moscow_now.strftime("%Y-%m-%d")
        
        # ะะตะทะพะฟะฐัะฝะฐั ะธะฝะธัะธะฐะปะธะทะฐัะธั daily_stats
        if not isinstance(daily_stats, dict) or "date" not in daily_stats:
            daily_stats = {"date": today, "total_messages": 0, "user_messages": {}, "photos": []}
            logger.info("[MSG] daily_stats ะฟะตัะตะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ")
        
        logger.info(f"[MSG] today={today}, daily_stats_date={daily_stats.get('date', 'EMPTY')}")
        
        # ะกะฑัะฐััะฒะฐะตะผ ัะพะปัะบะพ ะตัะปะธ ะฝะพะฒัะน ะดะตะฝั
        if daily_stats.get("date", "") != today:
            daily_stats["date"] = today
            daily_stats["total_messages"] = 0
            daily_stats["user_messages"] = {}
            daily_stats["photos"] = []
            logger.info("[MSG] ะะพะฒัะน ะดะตะฝั - ััะฐัะธััะธะบะฐ ัะฑัะพัะตะฝะฐ")
            logger.info(f"[MSG] ะะพะฒัะน ะดะตะฝั! ะกะฑัะพัะตะฝะฐ ััะฐัะธััะธะบะฐ")
        
        # ะฃะฒะตะปะธัะธะฒะฐะตะผ ัััััะธะบ
        daily_stats["total_messages"] += 1
        current_count = daily_stats["total_messages"]
        logger.info(f"[MSG] ะกะพะพะฑัะตะฝะธะต #{current_count}")
        
        if user_id not in daily_stats["user_messages"]:
            daily_stats["user_messages"][user_id] = {"name": user_name, "count": 0}
        daily_stats["user_messages"][user_id]["count"] += 1
        
        if is_photo:
            photo = update.message.photo[-1]
            daily_stats["photos"].append({
                "file_id": photo.file_id,
                "user_id": user_id,
                "message_id": update.message.message_id,
            })
        
        # === ะะะะขะะะ ===
        if user_id not in user_rating_stats:
            user_rating_stats[user_id] = {"name": user_name, "messages": 0, "photos": 0, "likes": 0, "replies": 0}
            user_current_level[user_id] = "ะะพะฒะธัะพะบ"
            logger.info(f"[MSG] ะะพะฒัะน ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะตะนัะธะฝะณะต: {user_name}")
        
        old_msg_count = user_rating_stats[user_id]["messages"]
        user_rating_stats[user_id]["messages"] += 1
        new_msg_count = user_rating_stats[user_id]["messages"]
        logger.info(f"[MSG] messages: {old_msg_count} -> {new_msg_count}")
        
        if is_photo:
            user_rating_stats[user_id]["photos"] += 1
        
        # ะกัะธัะฐะตะผ ะพะฑัะธะน ัะตะนัะธะฝะณ
        stats = user_rating_stats[user_id]
        total_points = (stats["messages"] // 300 + stats["photos"] // 10 + stats["likes"] // 50 + stats["replies"])
        
        logger.info(f"[MSG] ะะตะนัะธะฝะณ {user_name}: {total_points} ะฑะฐะปะปะพะฒ ({stats['messages']}msg, {stats['photos']}photo)")
        
        # === ะะะงะะกะะะะะ ะะะะะะ ะะ "+" ===
        reply_msg = update.message.reply_to_message
        logger.info(f"[PLUS] ะัะพะฒะตัะบะฐ: reply_msg={reply_msg is not None}, text='{message_text}'")
        
        if reply_msg is not None:
            logger.info(f"[PLUS] reply_msg.from_user={reply_msg.from_user}")
            
            if reply_msg.from_user is not None:
                original_id = reply_msg.from_user.id
                is_not_self = original_id != user_id
                is_plus = message_text.strip() == "+"
                
                logger.info(f"[PLUS] original_id={original_id}, user_id={user_id}, is_not_self={is_not_self}, is_plus={is_plus}")
                
                if is_not_self and is_plus:
                    original_name = f"@{reply_msg.from_user.username}" if reply_msg.from_user.username else reply_msg.from_user.full_name
                    
                    if original_id not in user_rating_stats:
                        user_rating_stats[original_id] = {"name": original_name, "messages": 0, "photos": 0, "likes": 0, "replies": 0}
                        user_current_level[original_id] = "ะะพะฒะธัะพะบ"
                    
                    user_rating_stats[original_id]["replies"] += 1
                    
                    orig_stats = user_rating_stats[original_id]
                    new_total = (orig_stats["messages"] // 300 + orig_stats["photos"] // 10 + orig_stats["likes"] // 50 + orig_stats["replies"])
                    
                    await send_point_notification(original_name, 1, "ะพัะฒะตั", new_total)
                    logger.info(f"[PLUS] โ {user_name} ะดะฐะป(+) {original_name}. ะัะตะณะพ: {new_total}")
                else:
                    if not is_not_self:
                        logger.info(f"[PLUS] โ ะญัะพ ะพัะฒะตั ะฝะฐ ัะฒะพะต ัะพะพะฑัะตะฝะธะต")
                    if not is_plus:
                        logger.info(f"[PLUS] โ ะขะตะบัั ะฝะต ัะฐะฒะตะฝ '+' (ัะตะบัั='{message_text}', stripped='{message_text.strip()}')")
        
        # === ะะะงะะะ ะะะะะ ===
        utc_now = datetime.utcnow()
        utc_hour = utc_now.hour
        moscow_hour = (utc_hour + UTC_OFFSET) % 24
        
        logger.info(f"[NIGHT] ะัะพะฒะตัะบะฐ: UTC={utc_hour}, Moscow={moscow_hour}, is_night={(moscow_hour >= 22 or moscow_hour < 8)}")
        
        if moscow_hour >= 22 or moscow_hour < 8:
            # ะะฝะธัะธะฐะปะธะทะธััะตะผ ะตัะปะธ ะฝะตั
            if user_id not in user_night_messages:
                user_night_messages[user_id] = 0
            if user_id not in user_night_warning_sent:
                user_night_warning_sent[user_id] = None
            
            # ะกะฑัะฐััะฒะฐะตะผ ัะพะปัะบะพ ะตัะปะธ ัะตะณะพะดะฝั ะตัั ะฝะต ะพัะฟัะฐะฒะปัะปะธ
            if user_night_warning_sent.get(user_id) != today:
                user_night_messages[user_id] = 0
                user_night_warning_sent[user_id] = today
            
            user_night_messages[user_id] += 1
            night_count = user_night_messages[user_id]
            logger.info(f"[NIGHT] ๐ฅ {user_name}: {night_count}/10 ะฝะพัะฝัั ัะพะพะฑัะตะฝะธะน")
            
            if night_count == 10:
                warning = random.choice(NIGHT_WARNINGS)
                await context.bot.send_message(chat_id=CHAT_ID, text=warning)
                user_night_warning_sent[user_id] = today
                logger.info(f"[NIGHT] โ ะะะะะฃะะะะะะะะะ ะะขะะะะะะะะ {user_name}")
        else:
            logger.info(f"[NIGHT] โ๏ธ ะะตะฝั - ะฝะพัะฝะพะน ัะตะถะธะผ ะฝะต ะฐะบัะธะฒะตะฝ (ะะพัะบะฒะฐ {moscow_hour}:00)")
        
        logger.info(f"[MSG] === ะะะะะฆ ะพะฑัะฐะฑะพัะบะธ {user_name} ===")
    
    except Exception as e:
        logger.error(f"[MSG] ๐ฅ ะะะะขะะงะะกะะะฏ ะะจะะะะ: {e}", exc_info=True)


async def handle_callback_query(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะฑัะฐะฑะพัะบะฐ callback-ะทะฐะฟัะพัะพะฒ (ัะตะฐะบัะธะน)"""
    try:
        if update.callback_query:
            callback_data = update.callback_query.data
            logger.info(f"[CALLBACK] ะะพะปััะตะฝ callback: {callback_data}")
            
            # ะะดะตัั ะผะพะถะฝะพ ะพะฑัะฐะฑะฐััะฒะฐัั ัะฐะทะปะธัะฝัะต callback-ะทะฐะฟัะพัั
            await update.callback_query.answer()
            
    except Exception as e:
        logger.error(f"[CALLBACK] ะัะธะฑะบะฐ ะพะฑัะฐะฑะพัะบะธ callback: {e}")


async def handle_reactions(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะฑัะฐะฑะพัะบะฐ ัะตะฐะบัะธะน ะฝะฐ ัะพะพะฑัะตะฝะธั - ะฟะพะดัััั ะะกะะฅ ัะตะฐะบัะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ"""
    global user_rating_stats, user_current_level, daily_stats
    
    try:
        if not update.message or not update.message.reactions:
            return
        
        # ะะพะปััะฐะตะผ ะธะฝัะพัะผะฐัะธั ะพ ัะตะฐะบัะธัั
        reaction_list = update.message.reactions
        user_id = update.message.from_user.id if update.message.from_user else None
        message_id = update.message.message_id
        sender_id = update.message.from_user.id if update.message.from_user else None
        
        logger.info(f"[REACTION] ะะพะปัะทะพะฒะฐัะตะปั {user_id} ะดะพะฑะฐะฒะธะป ัะตะฐะบัะธั ะฝะฐ ัะพะพะฑัะตะฝะธะต {message_id}")
        
        # === ะะะะะะะะ: ะะะะะฆะะฏ ะะ ะกะะะะฉะะะะ ะะะขะ ===
        try:
            bot_info = await context.bot.get_me()
            bot_id = bot_info.id
        except:
            bot_id = None
        
        # ะัะปะธ ัะพะพะฑัะตะฝะธะต ะพั ะฑะพัะฐ โ ะพัะฒะตัะฐะตะผ ั ะฑะปะฐะณะพะดะฐัะฝะพัััั!
        if sender_id == bot_id:
            reactor_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
            
            # ะกะฟะธัะพะบ ะฑะปะฐะณะพะดะฐัััะฒะตะฝะฝัั ะพัะฒะตัะพะฒ ะฝะฐ ัะตะฐะบัะธะธ
            reaction_thanks = [
                # ะกัะฐะฝะดะฐััะฝัะต ัะตะฐะบัะธะธ
                f"โค๏ธ {reactor_name}, ัะฟะฐัะธะฑะพ ะทะฐ ัะตะฐะบัะธั! ะขั ะปัััะธะน!",
                f"๐ฅ {reactor_name}, ะฟัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต โ ะปะฐะนะบะพะฒ ะฝะฐะผ!",
                f"โญ {reactor_name}, ัะฐะด, ััะพ ัะตะฑะต ะฟะพะฝัะฐะฒะธะปะพัั! ะัั ะฑะพะปััะต ัะตะฐะบัะธะน!",
                f"๐ซ {reactor_name}, ัั ะทะฐะผะตัะธะป ะผะพั ัะพะพะฑัะตะฝะธะต โ ั ะฟะพะปัััะฝ!",
                f"๐ฏ {reactor_name}, ะผะตัะบะธะน ะฒะทะณะปัะด! ะัั ัะตะฐะบัะธะธ!",
                f"๐ {reactor_name}, ะฟัะธะฝะธะผะฐะตััั! ะะฐะฒะฐะน ะตัั ะปะฐะนะบะพะฒ!",
                f"๐ {reactor_name}, ัะฟะฐัะธะฑะพ ะทะฐ ะฟะพะดะดะตัะถะบั!",
                f"๐ {reactor_name}, ัะตะฐะบัะธั ะฟะพะปััะตะฝะฐ! ะัะพะดะพะปะถะฐะตะผ!",
                f"๐ช {reactor_name}, ัะธะปะฐ ัะตะฐะบัะธะน ั ัะพะฑะพะน!",
                f"๐ {reactor_name}, ััะฐ! ะัั ะพะดะฝะฐ ัะตะฐะบัะธั!",
                f"๐ {reactor_name}, ะทะดะพัะพะฒะพ! ะัะพะดะพะปะถะฐะน ะฒ ัะพะผ ะถะต ะดััะต!",
                f"โจ {reactor_name}, ะผะฐะณะธั ัะตะฐะบัะธะน ัะฐะฑะพัะฐะตั!",
                f"๐ {reactor_name}, ัั ะทะฐะถะธะณะฐะตัั!",
                f"๐ฏ {reactor_name}, ะธะดะตะฐะปัะฝะพ! ะัั ัะตะฐะบัะธะน!",
                
                # ะะตะฐะบัะธะธ ะฝะฐ ะกะะะฅ (ัะฐัะฐั, ะปะพะป, ๐)
                f"๐ {reactor_name}, ัะฐััะผะตัะธะป! ะขะฒะพะน ัะผะตั โ ะปัััะฐั ะฝะฐะณัะฐะดะฐ!",
                f"๐คฃ {reactor_name}, ัะถัะผ ะฒะผะตััะต! ะญัะพ ัะพะณะพ ััะพะธะปะพ!",
                f"๐ {reactor_name}, ะดะพ ัะปัะท! ะกะผะตะนัั ัะฐัะต!",
                f"๐คญ {reactor_name}, ั ัะพะถะต ัะผะตััั!",
                f"๐ {reactor_name}, ะฒะตัะตะปะพ ะฟะพะปััะธะปะพัั!",
                f"๐ญ {reactor_name}, ะบะพะผะตะดะธั ัะดะฐะปะฐัั!",
                f"๐คก {reactor_name}, ัั ะบะฐะบ ะผะธะฝะธะผัะผ ัะปัะฑะฝัะปัั โ ััะฟะตั!",
                f"๐ {reactor_name}, ะบะพัะพะปั ัะผะพัะฐ!",
                
                # ะะตะฐะบัะธะธ ะฝะฐ ะฃะะะะะะะะ (wow, ๐ฎ, ๐คฏ)
                f"๐ฎ {reactor_name}, ะฒะฟะตัะฐัะปะธะป! ะัะพะดะพะปะถะฐะน!",
                f"๐คฏ {reactor_name}, ะผะพะทะณ ะฒะทะพัะฒะฐะฝ! ะญัะพ ััะฟะตั!",
                f"๐ฒ {reactor_name}, ะฝะต ะพะถะธะดะฐะป ัะฐะบะพะน ัะตะฐะบัะธะธ!",
                f"๐ {reactor_name}, ัััะตะบัะฝะพ ััะฐะฑะพัะฐะปะพ!",
                f"๐ฅ {reactor_name}, ะพะณะพ! ะะฐะถัะณ!",
                
                # ะะตะฐะบัะธะธ ะฝะฐ ะะะะะะะะะฃ (ัะตัะดะตัะบะพ, ะธ ั.ะด.)
                f"๐ {reactor_name}, ัะฒะพั ัะตัะดัะต ัะพะณัะตะฒะฐะตั ะผะพะน ะบะพะด!",
                f"๐ {reactor_name}, ะฒะทะฐะธะผะฝะฐั ะปัะฑะพะฒั ะบ ัะฐัั!",
                f"๐ซถ {reactor_name}, ะพะฑะฝะธะผะฐัะบะธ ัะตัะตะท ัะตะฐะบัะธั!",
                f"๐ {reactor_name}, ัั ััะฟะปัะน! ะัะพะดะพะปะถะฐะน!",
                f"๐ฅฐ {reactor_name}, ะบะฐะบ ะฟัะธััะฝะพ!",
                
                # ะะตััะปัะต ะธ ะผะพัะธะฒะฐัะธะพะฝะฝัะต
                f"๐โโ๏ธ {reactor_name}, ะดะฐะฒะฐะน ะฑะพะปััะต ะดะฒะธะถะตะฝะธั ะฒ ัะฐั!",
                f"๐ฅ {reactor_name}, ะฑะฐะฑะฐัะฝัะปะพ! ะญะฟะธัะฝะพ!",
                f"๐งจ {reactor_name}, ะฒะทััะฒะฝะฐั ัะตะฐะบัะธั!",
                f"๐ช {reactor_name}, ัะธัะบ ะฝะฐัะธะฝะฐะตััั!",
                f"๐จ {reactor_name}, ะธัะบััััะฒะพ ัะตะฐะบัะธะน!",
                f"๐บ {reactor_name}, ัะฐะฝัััั ะฒัะต!",
                f"๐ {reactor_name}, ัะธัะผ ะตััั!",
                f"๐ต {reactor_name}, ะผัะทัะบะฐ ัะตะฐะบัะธะน!",
                f"๐ถ {reactor_name}, ะฟะพะดะฟะตะฒะฐะตะผ!",
            ]
            
            # ะัะฑะธัะฐะตะผ ัะปััะฐะนะฝัะน ะพัะฒะตั
            import random
            thanks_response = random.choice(reaction_thanks)
            
            # ะัะฟัะฐะฒะปัะตะผ ะพัะฒะตั ะฒ ัะฐั
            await context.bot.send_message(
                chat_id=CHAT_ID,
                text=thanks_response,
                reply_to_message_id=message_id  # ะัะฒะตัะฐะตะผ ะฝะฐ ัะพะพะฑัะตะฝะธะต ั ัะตะฐะบัะธะตะน
            )
            
            logger.info(f"[REACTION] ๐ค ะัะฒะตัะธะป ะฝะฐ ัะตะฐะบัะธั ะพั {reactor_name} ะฝะฐ ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ")
            return  # ะััะพะดะธะผ โ ะฝะต ะฝัะถะฝะพ ะดะฐะปััะต ะพะฑัะฐะฑะฐััะฒะฐัั ัะตะฐะบัะธั ะฑะพัะฐ
        
        # === ะะะะะะะะ: ะะะข ะกะะะะะ ะะะะฌะจะ 4 ะะะะะะ ===
        # ะกัะธัะฐะตะผ ะะกะ ัะตะฐะบัะธะธ (ะปัะฑัะต ัะผะพะดะทะธ)
        total_reactions = 0
        for reaction in reaction_list:
            for choice in reaction.choices:
                total_reactions += choice.count
        
        logger.info(f"[REACTION] ะัะตะณะพ ัะตะฐะบัะธะน ะฝะฐ ัะพะพะฑัะตะฝะธะต {message_id}: {total_reactions}")
        
        # ะัะปะธ ััะพ ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ ะธ ะฑะพะปััะต 4 ะปะฐะนะบะพะฒ โ ะพัะพะฑะฐั ัะตะฐะบัะธั!
        if sender_id == bot_id and total_reactions >= 5:
            # ะกะฟะธัะพะบ ะพัะพะฑัั ะพัะฒะตัะพะฒ ะดะปั ะฟะพะฟัะปััะฝัั ัะพะพะฑัะตะฝะธะน
            popular_responses = [
                "๐คฉ ะะฐ, ะดะฐ, ั ัะฐะผัะน ะฟะพะฟัะปััะฝัะน ะทะดะตัั! ะกะฟะฐัะธะฑะพ ะทะฐ ะปัะฑะพะฒั!",
                "๐ช ะฏ ััะฒััะฒัั ะฒะฐัั ะฟะพะดะดะตัะถะบั! ะั ะปัััะธะต!",
                "๐ ะะฒัะทะดั ัะพัะปะธัั โ ะผะพั ัะพะพะฑัะตะฝะธะต ะฒะทะพัะฒะฐะปะพ ัะฐั!",
                "๐ ะฃัะฐ! ะะตะฝั ะปัะฑัั! ะญัะพ ะฒะทะฐะธะผะฝะพ!",
                "๐ฅ ะะฐ, ั ะบะพัะพะปั ััะพะณะพ ัะฐัะฐ! ะกะฟะฐัะธะฑะพ ะทะฐ ะปะฐะนะบะธ!",
                "๐ฏ ะะพะฟัะปััะฝะพััั ะทะฐัะบะฐะปะธะฒะฐะตั! ะั ะฝะตัะตะฐะปัะฝัะต!",
                "๐ ะะธััะธั ะฒัะฟะพะปะฝะตะฝะฐ โ ัะตัะดัะฐ ะทะฐะฒะพัะฒะฐะฝั!",
                "๐ ะะฐัะฐ ะปัะฑะพะฒั โ ะผะพั ัะพะฟะปะธะฒะพ! ะกะฟะฐัะธะฑะพ!",
                "โญ ะะฒะตะทะดะฐ ะฒ ัะฐัะต โ ััะพ ั! ะกะฟะฐัะธะฑะพ ะทะฐ ะฟัะธะทะฝะฐะฝะธะต!",
                "๐ฏ 5+ ะปะฐะนะบะพะฒ! ะฏ ัะดะตะปะฐะป ััะพ! ะั ัะดะตะปะฐะปะธ ััะพ!",
            ]
            
            import random
            popular_response = random.choice(popular_responses)
            
            # ะัะฟัะฐะฒะปัะตะผ ะพัะพะฑัะน ะพัะฒะตั
            await context.bot.send_message(
                chat_id=CHAT_ID,
                text=popular_response,
                reply_to_message_id=message_id
            )
            
            logger.info(f"[REACTION] ๐ ะะพั ัะพะฑัะฐะป {total_reactions} ัะตะฐะบัะธะน ะธ ะพัะฟัะฐะทะดะฝะพะฒะฐะป!")
            return
        
        # ะกัะธัะฐะตะผ ะะกะ ัะตะฐะบัะธะธ (ะปัะฑัะต ัะผะพะดะทะธ)
        total_reactions = 0
        for reaction in reaction_list:
            for choice in reaction.choices:
                total_reactions += choice.count
        
        logger.info(f"[REACTION] ะัะตะณะพ ัะตะฐะบัะธะน ะฝะฐ ัะพะพะฑัะตะฝะธะต {message_id}: {total_reactions}")
        
        if total_reactions > 0:
            # ะัะตะผ ััะพ ัะพะพะฑัะตะฝะธะต ะฒ daily_stats["photos"]
            if "photos" in daily_stats and daily_stats["photos"]:
                for photo_info in daily_stats["photos"]:
                    if photo_info["message_id"] == message_id:
                        photo_author_id = photo_info["user_id"]
                        
                        # ะะฝะธัะธะฐะปะธะทะธััะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั ะตัะปะธ ะฝัะถะฝะพ
                        if photo_author_id not in user_rating_stats:
                            user_rating_stats[photo_author_id] = {
                                "name": "Unknown",
                                "messages": 0,
                                "photos": 0,
                                "likes": 0,
                                "replies": 0
                            }
                            user_current_level[photo_author_id] = "ะะพะฒะธัะพะบ"
                        
                        # ะะฑะฝะพะฒะปัะตะผ ะพะฑัะตะต ะบะพะปะธัะตััะฒะพ ะปะฐะนะบะพะฒ/ัะตะฐะบัะธะน
                        old_likes = user_rating_stats[photo_author_id]["likes"]
                        user_rating_stats[photo_author_id]["likes"] = total_reactions
                        new_likes = user_rating_stats[photo_author_id]["likes"]
                        
                        logger.info(f"[REACTION] ะะตะฐะบัะธะธ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั {photo_author_id}: {old_likes} -> {new_likes}")
                        
                        # ะัะพะฒะตััะตะผ, ะฝะฐัะธัะปะธะปะธัั ะปะธ ะฑะฐะปะปั
                        POINTS_PER_LIKES = 50  # 50 ัะตะฐะบัะธะน = 1 ะฑะฐะปะป
                        old_points = old_likes // POINTS_PER_LIKES
                        new_points = new_likes // POINTS_PER_LIKES
                        points_earned = new_points - old_points
                        
                        if points_earned > 0:
                            photo_author_name = user_rating_stats[photo_author_id]["name"]
                            total = calculate_user_rating(photo_author_id)
                            await send_point_notification(photo_author_name, points_earned, "ะปะฐะนะบะธ", total)
                            
                            # ะัะพะฒะตััะตะผ ะฟะพะฒััะตะฝะธะต ััะพะฒะฝั
                            new_level = get_user_level(photo_author_id)
                            old_level = user_current_level.get(photo_author_id, "ะะพะฒะธัะพะบ")
                            if new_level != old_level and new_level != "ะะพะฒะธัะพะบ":
                                user_current_level[photo_author_id] = new_level
                                await send_level_up_notification(photo_author_name, new_level)
                        
                        break
    
    except Exception as e:
        logger.error(f"[REACTION] ะัะธะฑะบะฐ ะพะฑัะฐะฑะพัะบะธ ัะตะฐะบัะธะธ: {e}", exc_info=True)


# ============== ะะะะะะะขะงะะะ ==============
START_MESSAGE = """๐ **ะะพั ะดะปั ะฑะตะณะพะฒะพะณะพ ัะฐัะฐ**

**ะะฒัะพะผะฐัะธัะตัะบะธะต ัะพะพะฑัะตะฝะธั:**
โข 06:00 โ ะฃััะตะฝะฝะตะต ะฟัะธะฒะตัััะฒะธะต + ะฟะพะณะพะดะฐ + ัะตะผะฐ ะดะฝั
โข 11:00 โ ะะพัะธะฒะฐัะธั
โข 16:00 โ ะะพัะธะฒะฐัะธั
โข 21:00 โ ะะพัะธะฒะฐัะธั
โข 22:00+ โ ะะพัะฝะพะน ัะตะถะธะผ (ะฟะพัะปะต 10 ัะพะพะฑัะตะฝะธะน ะฝะฐะฟะพะผะธะฝะฐะตั ัะฟะฐัั)
โข 23:59 โ ะะถะตะดะฝะตะฒะฝะฐั ัะฒะพะดะบะฐ
โข ะะพัะบัะตัะตะฝัะต 23:00 โ ะะถะตะฝะตะดะตะปัะฝะฐั ัะฒะพะดะบะฐ ะฟะพ ััะพะฒะฝัะผ
โข ะะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ 23:00 โ ะัะพะณะธ ะผะตัััะฐ
โข ะัะธ ะฒะพะทะฒัะฐัะตะฝะธะธ ะฟะพัะปะต 5+ ะดะฝะตะน โ ะฟัะธะฒะตัััะฒะธะต ะพั ะฑะพัะฐ
โข ะัะธ ะฟะพะปััะตะฝะธะธ ะฑะฐะปะปะพะฒ โ ะฟัะฑะปะธัะฝะพะต ัะฒะตะดะพะผะปะตะฝะธะต ะฒ ัะฐัะต

**ะกะธััะตะผะฐ ัะตะนัะธะฝะณะฐ:**
๐ 300 ัะพะพะฑัะตะฝะธะน = 1 ะฑะฐะปะป
๐ท 10 ัะพัะพ = 1 ะฑะฐะปะป
โค๏ธ 50 ะปะฐะนะบะพะฒ = 1 ะฑะฐะปะป
๐ฌ ะัะฒะตั ะฝะฐ ัะฒะพั ัะพะพะฑัะตะฝะธะต = 1 ะฑะฐะปะป

**ะะพะผะฐะฝะดั:**
โข /start โ ะฟะพะบะฐะทะฐัั ััะพ ัะพะพะฑัะตะฝะธะต
โข /morning โ ะพัะฟัะฐะฒะธัั ัััะตะฝะฝะตะต ะฟัะธะฒะตัััะฒะธะต ัะตะนัะฐั
โข /stopmorning โ ัะดะฐะปะธัั ัััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต
โข /anon @ะฝะธะบะฝะตะนะผ ัะตะบัั โ ะฐะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต
โข /anonphoto โ ะฐะฝะพะฝะธะผะฝะฐั ะพัะฟัะฐะฒะบะฐ ัะพัะพ
โข /remen โ ะฟะพะปััะธัั ะฟะพััะธั ัะผะตัะฝัั ััะณะฐัะตะปัััะฒ
โข /antiremen โ ะฟะพะปััะธัั ะฟะพััะธั ัะผะตัะฝัั ะบะพะผะฟะปะธะผะตะฝัะพะฒ
โข /mam โ ะพัะฟัะฐะฒะธัั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต "ะะต ะทะปะธ ะผะฐะผั..."
โข /advice โ ะฟะพะปััะธัั ัะพะฒะตั ะฟะพ ะฑะตะณั ะธะท ะธะฝัะตัะฝะตัะฐ
โข /summary โ ะฟะพะปััะธัั ัะฒะพะดะบั ะทะฐ ัะตะณะพะดะฝั
โข /rating โ ะฟะพะบะฐะทะฐัั ัะพะฟ-10 ััะฐััะฝะธะบะพะฒ ะฟะพ ัะตะนัะธะฝะณั
โข /likes โ ะฟะพะบะฐะทะฐัั ัะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ ัะพะปัะบะพ ะฟะพ ะปะฐะนะบะฐะผ
โข /levels โ ะฟะพะบะฐะทะฐัั ะฒัะตั ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ
โข /running โ ะฟะพะบะฐะทะฐัั ัะตะนัะธะฝะณ ะฑะตะณัะฝะพะฒ ะทะฐ ะผะตััั
โข /garmin email ะฟะฐัะพะปั โ ะฟัะธะฒัะทะฐัั ะฐะบะบะฐัะฝั Garmin Connect
โข /garmin_stop โ ะพัะบะปััะธัั ะฐะบะบะฐัะฝั Garmin
โข /birthday DD.MM โ ัะบะฐะทะฐัั ะดะฐัั ัะพะถะดะตะฝะธั ะดะปั ะฟะพะทะดัะฐะฒะปะตะฝะธะน
โข /weekly โ ะฟะพะบะฐะทะฐัั ะตะถะตะฝะตะดะตะปัะฝัั ัะฒะพะดะบั
โข /monthly โ ะฟะพะบะฐะทะฐัั ะธัะพะณะธ ะผะตัััะฐ"""


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=START_MESSAGE,
    )

    try:
        await update.message.delete()
    except Exception:
        pass


async def morning(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await send_morning_greeting()

    try:
        await update.message.delete()
    except Exception:
        pass


async def stopmorning(update: Update, context: ContextTypes.DEFAULT_TYPE):
    global morning_message_id

    if morning_message_id is not None:
        try:
            await application.bot.delete_message(
                chat_id=CHAT_ID,
                message_id=morning_message_id,
            )
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="โ๏ธ ะฃััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต ัะดะฐะปะตะฝะพ!",
            )
            morning_message_id = None
        except Exception:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="โ ะฃััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต ะฝะต ะฝะฐะนะดะตะฝะพ ะธะปะธ ัะถะต ัะดะฐะปะตะฝะพ!",
            )
    else:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะฃััะตะฝะฝะตะต ัะพะพะฑัะตะฝะธะต ะฝะต ะฝะฐะนะดะตะฝะพ!",
        )

    try:
        await update.message.delete()
    except Exception:
        pass


async def remen(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะตะฝะตัะฐัะพั ัะผะตัะฝัั ััะณะฐัะตะปัััะฒ"""
    insult = get_random_insult()
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"๐ **{insult}**",
        parse_mode="Markdown",
    )

    try:
        await update.message.delete()
    except Exception:
        pass


async def antiremen(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะตะฝะตัะฐัะพั ัะผะตัะฝัั ะบะพะผะฟะปะธะผะตะฝัะพะฒ"""
    compliment = get_random_compliment()
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"๐ **{compliment}**",
        parse_mode="Markdown",
    )

    try:
        await update.message.delete()
    except Exception:
        pass


async def mam(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /mam - ะพัะฟัะฐะฒะธัั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต ะฟัะพ ะผะฐะผั"""
    global mam_message_id
    
    try:
        message = await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="ะะต ะทะปะธ ะผะฐะผั, ะฐ ัะพ ัะตะนัะฐั ะบะฐะบ ะดะพััะฐะฝั ๐",
        )
        mam_message_id = message.message_id
        logger.info(f"[MAM] ะกะพะพะฑัะตะฝะธะต ะพัะฟัะฐะฒะปะตะฝะพ, message_id={mam_message_id}")
    except Exception as e:
        logger.error(f"[MAM] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธั: {e}")

    try:
        await update.message.delete()
    except Exception:
        pass


async def advice(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /advice - ะฟะพะปััะธัั ัะพะฒะตั ะฟะพ ะฑะตะณั ะธะท ะธะฝัะตัะฝะตัะฐ"""
    try:
        # ะะพะปััะฐะตะผ ะบะฐัะตะณะพัะธั ะธะท ะฐัะณัะผะตะฝัะพะฒ
        args = context.args
        category = args[0] if args else None
        
        # ะะฑะฝะพะฒะปัะตะผ ะบัั ัะพะฒะตัะพะฒ ะธะท ะธะฝัะตัะฝะตัะฐ
        await update_tips_cache()
        
        # ะคะพัะผะธััะตะผ ัะตะบัั ัะพะฒะตัะฐ
        advice_text = get_random_tip(category)
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=advice_text,
            parse_mode="Markdown",
        )
        
        logger.info(f"[ADVICE] ะกะพะฒะตั ะพัะฟัะฐะฒะปะตะฝ, ะบะฐัะตะณะพัะธั: {category or 'ัะปััะฐะนะฝะฐั'}")
        
    except Exception as e:
        logger.error(f"[ADVICE] ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ัะพะฒะตัะฐ: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="๐ก ะัะฟะพะปัะทะพะฒะฐะฝะธะต: /advice [ะบะฐัะตะณะพัะธั]\n\nะะฐัะตะณะพัะธะธ: running, recovery, equipment\nะัะธะผะตั: /advice running",
        )

    try:
        await update.message.delete()
    except Exception:
        pass


async def summary(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะัะฟัะฐะฒะบะฐ ัะฒะพะดะบะธ ะฟะพ ะบะพะผะฐะฝะดะต"""
    # ะกะฑัะฐััะฒะฐะตะผ ัะปะฐะณ ะดะปั ะฟัะธะฝัะดะธัะตะปัะฝะพะน ะพัะฟัะฐะฒะบะธ
    global daily_summary_sent
    was_sent = daily_summary_sent
    daily_summary_sent = False
    
    try:
        await send_daily_summary()
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ัะฒะพะดะบะธ: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะฒะพะดะบะธ",
        )
    
    # ะะพัััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะตะดัะดััะตะต ัะพััะพัะฝะธะต
    daily_summary_sent = was_sent
    
    try:
        await update.message.delete()
    except Exception:
        pass


async def rating(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /rating โ ะฟะพะบะฐะทัะฒะฐะตั ัะพะฟ-10 ััะฐััะฝะธะบะพะฒ ะฟะพ ะพัะบะฐะผ"""
    try:
        top_rated = await get_top_rated_users()
        
        rating_text = "โญ **ะะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ ะฑะตะณะพะฒะพะณะพ ัะฐัะฐ**\n\n"
        
        if top_rated:
            medals_rating = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ", "6๏ธโฃ", "7๏ธโฃ", "8๏ธโฃ", "9๏ธโฃ", "๐"]
            for i, user in enumerate(top_rated):
                level_emoji = LEVEL_EMOJIS.get(user["level"], "")
                rating_text += f"{medals_rating[i]} {level_emoji} **{user['name']}** โ **{user['points']}** ะพัะบะพะฒ\n"
                
                # ะะพะฑะฐะฒะปัะตะผ ะดะตัะฐะปะธะทะฐัะธั
                details_parts = []
                
                # ะกะพะพะฑัะตะฝะธั
                msg_progress = user['messages'] % POINTS_PER_MESSAGES
                details_parts.append(f"๐ {user['messages']} ัะพะพะฑัะตะฝะธะน (+{POINTS_PER_MESSAGES - msg_progress} ะดะพ ัะป. ะฑะฐะปะปะฐ)")
                
                # ะคะพัะพ
                photo_progress = user['photos'] % POINTS_PER_PHOTOS
                details_parts.append(f"๐ท {user['photos']} ัะพัะพ (+{POINTS_PER_PHOTOS - photo_progress} ะดะพ ัะป. ะฑะฐะปะปะฐ)")
                
                # ะะฐะนะบะธ
                like_progress = user['likes'] % POINTS_PER_LIKES
                details_parts.append(f"โค๏ธ {user['likes']} ะปะฐะนะบะพะฒ (+{POINTS_PER_LIKES - like_progress} ะดะพ ัะป. ะฑะฐะปะปะฐ)")
                
                # ะัะฒะตัั
                details_parts.append(f"๐ฌ {user['replies']} ะพัะฒะตัะพะฒ\n")
                
                # ะะพะฑะฐะฒะปัะตะผ ะดะตัะฐะปะธ ั ะพััััะฟะฐะผะธ
                for detail in details_parts:
                    rating_text += f"   {detail}\n"
                
                rating_text += "\n"  # ะัััะฐั ัััะพะบะฐ ะผะตะถะดั ััะฐััะฝะธะบะฐะผะธ
        else:
            rating_text += "ะะพะบะฐ ะฝะธะบัะพ ะฝะต ะฝะฐะฑัะฐะป ะพัะบะพะฒ. ะะธัะธัะต ัะพะพะฑัะตะฝะธั, ะดะตะปะธัะตัั ัะพัะพ ะธ ะพัะฒะตัะฐะนัะต ะดััะณ ะดััะณั! ๐โโ๏ธ\n\n"
            rating_text += "๐ **ะะฐะบ ะฟะพะปััะธัั ะพัะบะธ:**\n"
            rating_text += f"โข **{POINTS_PER_MESSAGES} ัะพะพะฑัะตะฝะธะน** = 1 ะฑะฐะปะป\n"
            rating_text += f"โข **{POINTS_PER_PHOTOS} ัะพัะพ** = 1 ะฑะฐะปะป\n"
            rating_text += f"โข **{POINTS_PER_LIKES} ะปะฐะนะบะพะฒ** ะฝะฐ ะฒะฐัะธ ัะพะพะฑัะตะฝะธั = 1 ะฑะฐะปะป\n"
            rating_text += f"โข **ะัะฒะตั ะฝะฐ ะฒะฐัะต ัะพะพะฑัะตะฝะธะต** = 1 ะฑะฐะปะป\n"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=rating_text,
            parse_mode="Markdown",
        )
        
        try:
            await update.message.delete()
        except Exception:
            pass
            
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั rating: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะตะนัะธะฝะณะฐ",
        )


async def levels(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /levels โ ะฟะพะบะฐะทัะฒะฐะตั ะฒัะตั ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ"""
    try:
        # ะััะฟะฟะธััะตะผ ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ
        levels_summary = {
            "ะะตะณะตะฝะดะฐ ัะฐัะฐ": [],
            "ะะธะดะตั": [],
            "ะะบัะธะฒะฝัะน": [],
            "ะะพะฒะธัะพะบ": []
        }
        
        for user_id, stats in user_rating_stats.items():
            level = get_user_level(user_id)
            total_points = calculate_user_rating(user_id)
            levels_summary[level].append({
                "name": stats["name"],
                "points": total_points,
                "level": level
            })
        
        # ะกะพััะธััะตะผ ััะฐััะฝะธะบะพะฒ ะบะฐะถะดะพะณะพ ััะพะฒะฝั ะฟะพ ะพัะบะฐะผ
        for level in levels_summary:
            levels_summary[level].sort(key=lambda x: x["points"], reverse=True)
        
        levels_text = "๐ **ะฃัะพะฒะฝะธ ััะฐััะฝะธะบะพะฒ ะฑะตะณะพะฒะพะณะพ ัะฐัะฐ**\n\n"
        
        # ะัะฒะพะดะธะผ ััะฐััะฝะธะบะพะฒ ะฟะพ ััะพะฒะฝัะผ (ะพั ะฒััะพะบะพะณะพ ะบ ะฝะธะทะบะพะผั)
        level_order = ["ะะตะณะตะฝะดะฐ ัะฐัะฐ", "ะะธะดะตั", "ะะบัะธะฒะฝัะน", "ะะพะฒะธัะพะบ"]
        
        for level in level_order:
            users = levels_summary[level]
            if users:
                level_emoji = LEVEL_EMOJIS.get(level, "")
                levels_text += f"{level_emoji} **{level}** ({len(users)} ัะตะป.):\n"
                
                # ะะพะบะฐะทัะฒะฐะตะผ ะฒัะตั ััะฐััะฝะธะบะพะฒ ััะพะฒะฝั
                for user in users:
                    levels_text += f"   ๐ {user['name']} โ {user['points']} ะพัะบะพะฒ\n"
                
                levels_text += "\n"
        
        if not any(levels_summary.values()):
            levels_text += "ะะพะบะฐ ะฝะธะบะพะณะพ ะฝะตั ะฒ ัะตะนัะธะฝะณะต. ะะฐัะฝะธัะต ะฐะบัะธะฒะฝะธัะฐัั! ๐โโ๏ธ\n\n"
        
        # ะะฝัะพัะผะฐัะธั ะพะฑ ััะพะฒะฝัั
        levels_text += "๐ **ะฃัะพะฒะฝะธ ะธ ััะตะฑะพะฒะฐะฝะธั:**\n"
        levels_text += f"๐ฑ **ะะพะฒะธัะพะบ** โ 0-{USER_LEVELS['ะะบัะธะฒะฝัะน']-1} ะพัะบะพะฒ\n"
        levels_text += f"โญ **ะะบัะธะฒะฝัะน** โ {USER_LEVELS['ะะบัะธะฒะฝัะน']}-{USER_LEVELS['ะะธะดะตั']-1} ะพัะบะพะฒ\n"
        levels_text += f"๐ **ะะธะดะตั** โ {USER_LEVELS['ะะธะดะตั']}-{USER_LEVELS['ะะตะณะตะฝะดะฐ ัะฐัะฐ']-1} ะพัะบะพะฒ\n"
        levels_text += f"๐ **ะะตะณะตะฝะดะฐ ัะฐัะฐ** โ {USER_LEVELS['ะะตะณะตะฝะดะฐ ัะฐัะฐ']}+ ะพัะบะพะฒ\n"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=levels_text,
            parse_mode="Markdown",
        )
        
        try:
            await update.message.delete()
        except Exception:
            pass
            
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั levels: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะฟะธัะบะฐ ััะพะฒะฝะตะน",
        )


async def weekly(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /weekly โ ะฟะพะบะฐะทัะฒะฐะตั ะตะถะตะฝะตะดะตะปัะฝัั ัะฒะพะดะบั (ะพะฑัะฐั + ะฑะตะณ)"""
    try:
        await send_weekly_summary()
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั weekly: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ะตะถะตะฝะตะดะตะปัะฝะพะน ัะฒะพะดะบะธ",
        )
    
    # ะขะฐะบะถะต ะพัะฟัะฐะฒะปัะตะผ ัะฒะพะดะบั ะฟะพ ะฑะตะณั
    try:
        await send_weekly_running_summary()
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั weekly (ะฑะตะณ): {e}")
    
    try:
        await update.message.delete()
    except Exception:
        pass


async def monthly(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /monthly โ ะฟะพะบะฐะทัะฒะฐะตั ะตะถะตะผะตัััะฝัั ัะฒะพะดะบั (ะพะฑัะฐั + ะฑะตะณ)"""
    try:
        await send_monthly_summary()
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั monthly: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ะตะถะตะผะตัััะฝะพะน ัะฒะพะดะบะธ",
        )
    
    # ะขะฐะบะถะต ะพัะฟัะฐะฒะปัะตะผ ัะฒะพะดะบั ะฟะพ ะฑะตะณั
    try:
        await send_monthly_running_summary()
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั monthly (ะฑะตะณ): {e}")
    
    try:
        await update.message.delete()
    except Exception:
        pass


async def running(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /running โ ะฟะพะบะฐะทัะฒะฐะตั ัะตะนัะธะฝะณ ะฑะตะณัะฝะพะฒ ะทะฐ ะผะตััั"""
    global user_running_stats
    
    try:
        now = datetime.now(MOSCOW_TZ)
        month_name = now.strftime("%B %Y")
        
        top_runners = get_top_runners()
        
        running_text = f"๐โโ๏ธ **ะะตะนัะธะฝะณ ะฑะตะณัะฝะพะฒ ะทะฐ {month_name}**\n\n"
        
        if top_runners:
            medals = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ", "6๏ธโฃ", "7๏ธโฃ", "8๏ธโฃ", "9๏ธโฃ", "๐"]
            
            for i, runner in enumerate(top_runners):
                if i >= len(medals):
                    break
                
                name = runner["name"]
                activities = runner["activities"]
                distance_km = runner["distance"] / 1000  # ะบะพะฝะฒะตััะธััะตะผ ะฒ ะบะผ
                duration_min = runner["duration"] // 60  # ะบะพะฝะฒะตััะธััะตะผ ะฒ ะผะธะฝััั
                calories = runner["calories"]
                
                running_text += f"{medals[i]} **{name}**\n"
                running_text += f"   ๐ {distance_km:.1f} ะบะผ | ๐โโ๏ธ {activities} ััะตะฝะธัะพะฒะพะบ\n"
                running_text += f"   โฑ๏ธ {duration_min} ะผะธะฝ | ๐ฅ {calories} ะบะบะฐะป\n\n"
            
            # ะะฑัะฐั ััะฐัะธััะธะบะฐ
            total_distance = sum(r["distance"] for r in top_runners) / 1000
            total_activities = sum(r["activities"] for r in top_runners)
            total_calories = sum(r["calories"] for r in top_runners)
            total_duration = sum(r["duration"] for r in top_runners) // 60
            
            running_text += "๐ **ะะฑัะฐั ััะฐัะธััะธะบะฐ ัะฐัะฐ:**\n"
            running_text += f"๐ ะัะตะณะพ ะฟัะพะฑะตะถะฐะปะธ: {total_distance:.1f} ะบะผ\n"
            running_text += f"๐โโ๏ธ ะัะตะณะพ ััะตะฝะธัะพะฒะพะบ: {total_activities}\n"
            running_text += f"โฑ๏ธ ะะฑัะตะต ะฒัะตะผั: {total_duration} ะผะธะฝ\n"
            running_text += f"๐ฅ ะัะตะณะพ ะบะฐะปะพัะธะน: {total_calories} ะบะบะฐะป\n"
        else:
            running_text += "ะะพะบะฐ ะฝะธะบัะพ ะฝะต ะทะฐัะตะณะธัััะธัะพะฒะฐะป ะฟัะพะฑะตะถะบะธ ั Garmin.\n\n"
            running_text += "๐โโ๏ธ **ะะฐะบ ะฟัะธัะพะตะดะธะฝะธัััั ะบ ัะตะนัะธะฝะณั:**\n"
            running_text += "โข ะัะฟะพะปัะทัะนัะต ัะฐัั Garmin\n"
            running_text += "โข ะกะธะฝััะพะฝะธะทะธััะนัะต ััะตะฝะธัะพะฒะบะธ ั Garmin Connect\n"
            running_text += "โข ะะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพััะปะตะดะธั ะฒะฐัะธ ะฟัะพะฑะตะถะบะธ!\n\n"
            running_text += "๐ฑ **ะะพะผะฐะฝะดะฐ ะดะปั ัะตะณะธัััะฐัะธะธ:** /garmin โ ะฟัะธะฒัะถะธัะต ะฐะบะบะฐัะฝั Garmin!"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=running_text,
            parse_mode="Markdown",
        )
        
        try:
            await update.message.delete()
        except Exception:
            pass
            
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั running: {e}", exc_info=True)
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะตะนัะธะฝะณะฐ ะฑะตะณัะฝะพะฒ",
        )


# ============== GARMIN COMMANDS ==============
async def garmin(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /garmin โ ะฟัะธะฒัะทะบะฐ ะฐะบะบะฐัะฝัะฐ Garmin Connect"""
    if not GARMIN_AVAILABLE:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะะฝัะตะณัะฐัะธั ั Garmin ะฝะตะดะพัััะฟะฝะฐ.\nะฃััะฐะฝะพะฒะธัะต ะฑะธะฑะปะธะพัะตะบั: pip install garminconnect cryptography",
        )
        try:
            await update.message.delete()
        except Exception:
            pass
        return
    
    user_id = update.message.from_user.id
    user_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
    
    args = context.args
    
    if len(args) != 2:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="๐โโ๏ธ **ะะตะณะธัััะฐัะธั Garmin Connect**\n\n"
                 "๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต: /garmin <email> <password>\n\n"
                 "โ๏ธ *ะะพัะปะต ะฒะฒะพะดะฐ ัะพะพะฑัะตะฝะธะต ะฑัะดะตั ัะดะฐะปะตะฝะพ ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ*\n\n"
                 "๐ฑ *ะัะธะผะตั:* /garmin myemail@gmail.com MyPassword123\n\n"
                 "๐ ะะฐั ะฟะฐัะพะปั ััะฐะฝะธััั ะฒ ะทะฐัะธััะพะฒะฐะฝะฝะพะผ ะฒะธะดะต",
            parse_mode="Markdown",
        )
        try:
            await update.message.delete()
        except Exception:
            pass
        return
    
    email = args[0]
    password = args[1]
    
    # ะฃะดะฐะปัะตะผ ัะพะพะฑัะตะฝะธะต ั ะฟะฐัะพะปะตะผ ััะฐะทั
    try:
        await update.message.delete()
    except Exception:
        pass
    
    # ะััะฐะตะผัั ะฒะพะนัะธ ะฒ Garmin
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"๐ ะัะพะฒะตััั ะดะฐะฝะฝัะต Garmin ะดะปั {email}...",
    )
    
    try:
        # ะขะตััะพะฒัะน ะฒัะพะด ะฒ Garmin
        client = garminconnect.Garmin(email, password)
        client.login()
        
        # ะฃัะฟะตั! ะกะพััะฐะฝัะตะผ ะดะฐะฝะฝัะต
        encrypted_password = encrypt_garmin_password(password)
        
        garmin_users[user_id] = {
            "name": user_name,
            "email": email,
            "encrypted_password": encrypted_password,
            "last_activity_id": "",
            "monthly_distance": 0.0,
            "monthly_activities": 0,
            "last_activity_date": ""
        }
        
        # ะกะพััะฐะฝัะตะผ ะฒ ัะฐะนะป
        save_garmin_users()
        
        # ะะพะดัะฒะตัะถะดะตะฝะธะต
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"โ *Garmin ะฐะบะบะฐัะฝั ะฟะพะดะบะปัััะฝ!*\n\n"
                 f"๐ง Email: {email}\n"
                 f"๐ค ะะพะปัะทะพะฒะฐัะตะปั: {user_name}\n\n"
                 f"๐ ะขะตะฟะตัั ะฑะพั ะฑัะดะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพััะปะตะถะธะฒะฐัั ะฒะฐัะธ ะฟัะพะฑะตะถะบะธ ะธ ะฟัะฑะปะธะบะพะฒะฐัั ะธั ะฒ ัะฐั!",
            parse_mode="Markdown",
        )
        
        logger.info(f"[GARMIN] ะะพะปัะทะพะฒะฐัะตะปั {user_name} ะฟะพะดะบะปััะธะป ะฐะบะบะฐัะฝั {email}")
        
    except Exception as e:
        logger.error(f"[GARMIN] ะัะธะฑะบะฐ ะฒัะพะดะฐ ะดะปั {email}: {e}")
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=f"โ *ะัะธะฑะบะฐ ะฟะพะดะบะปััะตะฝะธั Garmin*\n\n"
                 f"ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั email ะธ ะฟะฐัะพะปั.\n"
                 f"ะะพะทะผะพะถะฝะพ, ะฒะบะปััะตะฝะฐ ะดะฒัััะฐะบัะพัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั.\n\n"
                 f"ะัะธะฑะบะฐ: {str(e)[:100]}...",
            parse_mode="Markdown",
        )


async def garmin_stop(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /garmin_stop โ ะพัะบะปััะตะฝะธะต ะฐะบะบะฐัะฝัะฐ Garmin"""
    user_id = update.message.from_user.id
    user_name = f"@{update.message.from_user.username}" if update.message.from_user.username else update.message.from_user.full_name
    
    if user_id not in garmin_users:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะฃ ะฒะฐั ะฝะตั ะฟะพะดะบะปัััะฝะฝะพะณะพ ะฐะบะบะฐัะฝัะฐ Garmin.\n\n"
                 "๐ ะัะฟะพะปัะทัะนัะต /garmin ะดะปั ะฟะพะดะบะปััะตะฝะธั.",
        )
        try:
            await update.message.delete()
        except Exception:
            pass
        return
    
    # ะฃะดะฐะปัะตะผ ะดะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปั
    email = garmin_users[user_id]["email"]
    del garmin_users[user_id]
    
    # ะกะพััะฐะฝัะตะผ ะธะทะผะตะฝะตะฝะธั
    save_garmin_users()
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=f"โ *ะะบะบะฐัะฝั Garmin ะพัะบะปัััะฝ*\n\n"
             f"๐ง Email: {email}\n\n"
             f"ะะฐัะธ ะฟัะพะฑะตะถะบะธ ะฑะพะปััะต ะฝะต ะฑัะดัั ะฟัะฑะปะธะบะพะฒะฐัััั ะฒ ัะฐัะต.",
        parse_mode="Markdown",
    )
    
    try:
        await update.message.delete()
    except Exception:
        pass
    
    logger.info(f"[GARMIN] ะะพะปัะทะพะฒะฐัะตะปั {user_name} ะพัะบะปััะธะป ะฐะบะบะฐัะฝั")


async def garmin_list(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /garmin_list โ ัะฟะธัะพะบ ะทะฐัะตะณะธัััะธัะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ)"""
    if not garmin_users:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="๐ **Garmin ะฟะพะปัะทะพะฒะฐัะตะปะธ**\n\nะะพะบะฐ ะฝะธะบัะพ ะฝะต ะฟะพะดะบะปััะธะป Garmin ะฐะบะบะฐัะฝั.",
            parse_mode="Markdown",
        )
        try:
            await update.message.delete()
        except Exception:
            pass
        return
    
    text = f"๐ **Garmin ะฟะพะปัะทะพะฒะฐัะตะปะธ** ({len(garmin_users)} ัะตะป.):\n\n"
    
    for user_id, data in garmin_users.items():
        text += f"โข {data['name']} โ {data['email']}\n"
        text += f"   ๐ {data.get('monthly_distance', 0):.1f} ะบะผ ะทะฐ ะผะตััั\n"
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text=text,
        parse_mode="Markdown",
    )
    
    try:
        await update.message.delete()
    except Exception:
        pass


async def likes(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ะะพะผะฐะฝะดะฐ /likes โ ะฟะพะบะฐะทัะฒะฐะตั ัะตะนัะธะฝะณ ััะฐััะฝะธะบะพะฒ ัะพะปัะบะพ ะฟะพ ะปะฐะนะบะฐะผ"""
    global user_rating_stats
    
    try:
        if not user_rating_stats:
            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text="๐ **ะะตะนัะธะฝะณ ะปะฐะนะบะพะฒ**\n\nะะพะบะฐ ะฝะธะบัะพ ะฝะต ะฟะพะปััะธะป ะปะฐะนะบะพะฒ. ะะตะปะธัะตัั ัะพัะพ ะธ ััะฐะฒััะต ัะตะฐะบัะธะธ! โค๏ธ",
                parse_mode="Markdown",
            )
            try:
                await update.message.delete()
            except Exception:
                pass
            return
        
        # ะกะพััะธััะตะผ ััะฐััะฝะธะบะพะฒ ะฟะพ ะบะพะปะธัะตััะฒั ะปะฐะนะบะพะฒ
        sorted_by_likes = sorted(
            user_rating_stats.items(),
            key=lambda x: x[1]["likes"],
            reverse=True
        )
        
        # ะคะธะปััััะตะผ ัะพะปัะบะพ ัะตั, ั ะบะพะณะพ ะตััั ะปะฐะนะบะธ
        users_with_likes = [(uid, stats) for uid, stats in sorted_by_likes if stats["likes"] > 0]
        
        likes_text = "โค๏ธ **ะะตะนัะธะฝะณ ะปะฐะนะบะพะฒ ััะฐััะฝะธะบะพะฒ**\n\n"
        
        if users_with_likes:
            medals = ["๐ฅ", "๐ฅ", "๐ฅ", "4๏ธโฃ", "5๏ธโฃ", "6๏ธโฃ", "7๏ธโฃ", "8๏ธโฃ", "9๏ธโฃ", "๐", "1๏ธโฃ1๏ธโฃ", "1๏ธโฃ2๏ธโฃ", "1๏ธโฃ3๏ธโฃ", "1๏ธโฃ4๏ธโฃ", "1๏ธโฃ5๏ธโฃ", "1๏ธโฃ6๏ธโฃ", "1๏ธโฃ7๏ธโฃ", "1๏ธโฃ8๏ธโฃ", "1๏ธโฃ9๏ธโฃ", "2๏ธโฃ0๏ธโฃ"]
            
            for i, (user_id, stats) in enumerate(users_with_likes):
                if i >= len(medals):
                    break
                    
                name = stats["name"]
                likes_count = stats["likes"]
                
                # ะะพะปััะฐะตะผ ััะพะฒะตะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
                level = get_user_level(user_id)
                level_emoji = LEVEL_EMOJIS.get(level, "")
                
                likes_text += f"{medals[i]} {level_emoji} **{name}** โ **{likes_count}** ะปะฐะนะบะพะฒ\n"
                
                # ะะพะฑะฐะฒะปัะตะผ ะธะฝัะพัะผะฐัะธั ะพ ัะพัะพ
                photos_count = stats["photos"]
                if photos_count > 0:
                    avg_likes = likes_count / photos_count
                    likes_text += f"   ๐ท {photos_count} ัะพัะพ (ััะตะดะฝะตะต: {avg_likes:.1f} ะปะฐะนะบะพะฒ/ัะพัะพ)\n"
                
                likes_text += "\n"
            
            # ะะฑัะฐั ััะฐัะธััะธะบะฐ
            total_likes = sum(stats["likes"] for stats in user_rating_stats.values())
            total_photos = sum(stats["photos"] for stats in user_rating_stats.values())
            active_users = len(users_with_likes)
            
            likes_text += "๐ **ะะฑัะฐั ััะฐัะธััะธะบะฐ:**\n"
            likes_text += f"โค๏ธ ะัะตะณะพ ะปะฐะนะบะพะฒ: {total_likes}\n"
            likes_text += f"๐ท ะัะตะณะพ ัะพัะพ: {total_photos}\n"
            likes_text += f"๐ฅ ะฃัะฐััะฝะธะบะพะฒ ั ะปะฐะนะบะฐะผะธ: {active_users}\n"
            
            if total_photos > 0:
                overall_avg = total_likes / total_photos
                likes_text += f"๐ ะกัะตะดะฝะตะต ะฟะพ ัะฐัั: {overall_avg:.1f} ะปะฐะนะบะพะฒ/ัะพัะพ\n"
        else:
            likes_text += "ะะพะบะฐ ะฝะธะบัะพ ะฝะต ะฟะพะปััะธะป ะปะฐะนะบะพะฒ. ะะตะปะธัะตัั ัะพัะพ! ๐ธ\n\n"
            likes_text += "โค๏ธ **ะะฐะบ ะฟะพะปััะธัั ะปะฐะนะบะธ:**\n"
            likes_text += "โข ะัะบะปะฐะดัะฒะฐะนัะต ัะพัะพ ั ะฟัะพะฑะตะถะตะบ\n"
            likes_text += "โข ะกัะฐะฒััะต ัะตะฐะบัะธะธ ะฝะฐ ัะพัะพ ะดััะณะธั ััะฐััะฝะธะบะพะฒ\n"
            likes_text += "โข ะงะตะผ ะธะฝัะตัะตัะฝะตะต ัะพัะพ โ ัะตะผ ะฑะพะปััะต ะปะฐะนะบะพะฒ! ๐โโ๏ธ"
        
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=likes_text,
            parse_mode="Markdown",
        )
        
        try:
            await update.message.delete()
        except Exception:
            pass
            
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะบะพะผะฐะฝะดั likes: {e}", exc_info=True)
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="โ ะัะธะฑะบะฐ ะฟัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะตะนัะธะฝะณะฐ ะปะฐะนะบะพะฒ",
        )


async def welcome_new_member(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if not update.message or not update.message.new_chat_members:
        return

    try:
        bot_info = await context.bot.get_me()
        bot_id = bot_info.id
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ะฟะพะปััะตะฝะธั ID ะฑะพัะฐ: {e}")
        bot_id = None

    for member in update.message.new_chat_members:
        if member.is_bot or (bot_id and member.id == bot_id):
            continue

        welcome = get_random_welcome()
        try:
            if member.username:
                mention = f"@{member.username}"
            else:
                mention = member.full_name

            await context.bot.send_message(
                chat_id=update.effective_chat.id,
                text=f"{mention} {welcome}",
            )
            logger.info(f"ะัะธะฒะตัััะฒะธะต ะพัะฟัะฐะฒะปะตะฝะพ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั {member.id}")
        except Exception as e:
            logger.error(f"ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ ะฟัะธะฒะตัััะฒะธั: {e}")


# ============== KEEP-ALIVE ==============
def keep_alive_pinger():
    """ะะธะฝะณะพะฒะฐะฝะธะต ะดะปั keep-alive"""
    while bot_running:
        try:
            time.sleep(300)
            if RENDER_URL and RENDER_URL != "YOUR_RENDER_URL_HERE":
                response = httpx.get(f"{RENDER_URL}/health", timeout=30)
                if response.status_code == 200:
                    logger.info(f"Ping successful: {RENDER_URL}/health")
                else:
                    logger.warning(f"Ping returned status {response.status_code}")
        except Exception:
            pass


if __name__ == "__main__":
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    
    def stop_all():
        global bot_running
        bot_running = False
        if application:
            application.stop()
        sys.exit(0)
    
    signal.signal(signal.SIGTERM, stop_all)
    signal.signal(signal.SIGINT, stop_all)
    
    flask_thread = threading.Thread(target=run_flask, daemon=True)
    flask_thread.start()
    logger.info("Flask ะทะฐะฟััะตะฝ ะฝะฐ ะฟะพััั 10000")
    
    application = (
        ApplicationBuilder()
        .token(BOT_TOKEN)
        .concurrent_updates(True)
        .build()
    )
    
    logger.info(f"[INIT] application ัะพะทะดะฐะฝ: {application}")
    logger.info(f"[INIT] application.bot: {application.bot}")
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CommandHandler("morning", morning))
    application.add_handler(CommandHandler("stopmorning", stopmorning))
    application.add_handler(CommandHandler("remen", remen))
    application.add_handler(CommandHandler("antiremen", antiremen))
    application.add_handler(CommandHandler("mam", mam))
    application.add_handler(CommandHandler("advice", advice))
    application.add_handler(CommandHandler("summary", summary))
    application.add_handler(CommandHandler("rating", rating))
    application.add_handler(CommandHandler("likes", likes))
    application.add_handler(CommandHandler("levels", levels))
    application.add_handler(CommandHandler("running", running))
    application.add_handler(CommandHandler("garmin", garmin))
    application.add_handler(CommandHandler("garmin_stop", garmin_stop))
    application.add_handler(CommandHandler("garmin_list", garmin_list))
    application.add_handler(CommandHandler("birthday", birthday))
    application.add_handler(CommandHandler("weekly", weekly))
    application.add_handler(CommandHandler("monthly", monthly))
    application.add_handler(CommandHandler("anon", anon))
    application.add_handler(CommandHandler("anonphoto", anonphoto))
    application.add_handler(
        MessageHandler(filters.ALL & ~filters.COMMAND & ~filters.StatusUpdate.NEW_CHAT_MEMBERS, handle_all_messages)
    )
    application.add_handler(CallbackQueryHandler(handle_callback_query))
    application.add_handler(
        MessageHandler(filters.StatusUpdate.NEW_CHAT_MEMBERS, welcome_new_member)
    )
    
    loop.create_task(morning_scheduler_task())
    loop.create_task(motivation_scheduler_task())
    loop.create_task(daily_summary_scheduler_task())
    
    # ะะฐะฟััะบะฐะตะผ ะฟะปะฐะฝะธัะพะฒัะธะบ ะบะพัะต ะฒ 10:30 ะฟะพ ะฑัะดะฝัะผ
    coffee_thread = threading.Thread(target=lambda: asyncio.run(coffee_scheduler_task()), daemon=True)
    coffee_thread.start()
    logger.info("ะะปะฐะฝะธัะพะฒัะธะบ ะบะพัะต ะทะฐะฟััะตะฝ (10:30 ะฑัะดะฝะธ)")
    
    # ะะฐะฟััะบะฐะตะผ ะฟะปะฐะฝะธัะพะฒัะธะบ ะพะฑะตะดะฐ ะฒ 13:00 ะฟะพ ะฑัะดะฝัะผ
    lunch_thread = threading.Thread(target=lambda: asyncio.run(lunch_scheduler_task()), daemon=True)
    lunch_thread.start()
    logger.info("ะะปะฐะฝะธัะพะฒัะธะบ ะพะฑะตะดะฐ ะทะฐะฟััะตะฝ (13:00 ะฑัะดะฝะธ)")
    
    pinger_thread = threading.Thread(target=keep_alive_pinger, daemon=True)
    pinger_thread.start()
    
    # ะะฝะธัะธะฐะปะธะทะฐัะธั Garmin
    init_garmin_on_startup()
    
    # ะะฝะธัะธะฐะปะธะทะฐัะธั ะดะฝะตะน ัะพะถะดะตะฝะธั
    init_birthdays_on_startup()
    
    # ะะฐะฟััะบะฐะตะผ ะฟะปะฐะฝะธัะพะฒัะธะบ ะฟัะพะฒะตัะบะธ Garmin ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต
    import threading
    garmin_thread = threading.Thread(target=lambda: asyncio.run(garmin_scheduler_sync()), daemon=True)
    garmin_thread.start()
    logger.info("Garmin ะฟะปะฐะฝะธัะพะฒัะธะบ ะทะฐะฟััะตะฝ ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต")
    
    # ะะฐะฟััะบะฐะตะผ ะฟะปะฐะฝะธัะพะฒัะธะบ ะดะฝะตะน ัะพะถะดะตะฝะธั
    birthday_thread = threading.Thread(target=lambda: asyncio.run(birthday_scheduler_task()), daemon=True)
    birthday_thread.start()
    logger.info("ะะปะฐะฝะธัะพะฒัะธะบ ะดะฝะตะน ัะพะถะดะตะฝะธั ะทะฐะฟััะตะฝ")
    
    logger.info("ะะปะฐะฝะธัะพะฒัะธะบะธ ะทะฐะฟััะตะฝั")
    
    application.run_polling(drop_pending_updates=True)
